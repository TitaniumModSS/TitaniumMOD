;------------------------------------------
;Byg's Triggers Start Here
;------------------------------------------
;------------------------------------------
; BGR Section 1 of 2
;------------------------------------------
;Note, there are more Byg traits near the end, 6 of which are sometimes enabled/disabled. Enable/disable them if using BGR with BB&B mod if you wish.
; Their section is titled "next 6 Byg Triggers for use if BBB mod present"
;
;When installing into new mods make sure they have the building types that BGR refers to or adjust accordingly.
;------------------------------------------
;------------------------------------------
;Trigger RemoveWHTSyncTestH
;     WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait Girls = 5
;
;    Affects Prim  50  Chance  100
;    Affects Wealth  9  Chance  100
;
;unapplies test application of Girls to character. Remove after 1 turn.
;also apply any missing wealth here
;------------------------------------------
;------------------------------------------
; Start of X factor traits
;------------------------------------------
;default settings code
; Set x for forage. Set xest for estates
;------------------------------------------
; level 1 code: estates 2000
; level 2 code: : standard forage 200 per 1/4 army
;------------------------------------------
Trigger Xest_Factor1a_start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait xest < 1

    Affects xest  1  Chance  100
;------------------------------------------
Trigger Xest_Factor1b_start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait xest > 1

    Affects xestReset  1  Chance  100
;------------------------------------------
Trigger Xest_Factor1_becomes
    WhenToTest BecomesFactionLeader

    Condition Trait xest < 1

    Affects xest  1  Chance  100
;------------------------------------------
Trigger Xest_Factor1a
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait xest < 1

    Affects xest  1  Chance  100
;------------------------------------------
Trigger Xest_Factor1b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait xest > 1

    Affects xestReset  1  Chance  100
;------------------------------------------
Trigger X_Factor2a_start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
Trigger X_Factor2b_start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
Trigger X_Factor2_becomes1
    WhenToTest BecomesFactionLeader

    Condition Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
Trigger X_Factor2_becomes2
    WhenToTest BecomesFactionLeader

    Condition Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
Trigger X_Factor2a
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
Trigger X_Factor2b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait x < 2

    Affects x  1  Chance  100
;------------------------------------------
; End of X factor traits
;------------------------------------------
Trigger Good_Order_Reset
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait Good = 1
          and Attribute Chivalry < 6

    Affects Bad  1  Chance  100
;------------------------------------------
Trigger Bad_Order_Reset
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait Bad = 1
          and Attribute Chivalry > -6

    Affects Good  1  Chance  100
;------------------------------------------
Trigger Good_Order
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait Good < 1
          and Trait Bad < 1
          and Attribute Chivalry >= 6

    Affects Good  1  Chance  100
;------------------------------------------
Trigger Bad_Order
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsFactionLeader
          and Trait Good < 1
          and Trait Bad < 1
          and Attribute Chivalry <= -6

    Affects Bad  1  Chance  100
;------------------------------------------
Trigger HumanSpy1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait HumanSpy < 1

    Affects HumanSpy  1  Chance  100
;------------------------------------------
Trigger HumanSpy2
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HumanSpy = 1

    Affects HumanSpy  1  Chance  100
;------------------------------------------
Trigger HumanSpy3
    WhenToTest CharacterTurnStart

    Condition AgentType = spy
          and CharacterIsLocal
          and Trait HumanSpy = 1

    Affects HumanSpy  3  Chance  100
;------------------------------------------
; Army Consumpion rate and haulage ability Start Section 1
; at the moment armysize 1 is 2nd general as is unused by others.
;------------------------------------------
Trigger SizeReset4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 4

    Affects ArmySizeReset  5  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 3

    Affects ArmySizeReset  4  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 2

    Affects ArmySizeReset  3  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 1

    Affects ArmySizeReset  2  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeSet1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 40

    Affects ArmySize  2  Chance  100

; would ideally be armysize 1, but such low consumption is bad for gameplay.
; now same for 1/8th army as for 1/4 army.
;------------------------------------------
Trigger SizeSet2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 20
          and PercentageUnitAttribute general_unit < 40

    Affects ArmySize  2  Chance  100

;------------------------------------------
Trigger SizeSet3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 10
          and PercentageUnitAttribute general_unit < 20

    Affects ArmySize  3  Chance  100

;------------------------------------------
Trigger SizeSet4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit < 10

    Affects ArmySize  4  Chance  100

;------------------------------------------
Trigger SizeSet2ndGen
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize < 1

    Affects ArmySize  1  Chance  100

;------------------------------------------
;  Trained Unit Marker (part 1) (part 2 after scutage)
;------------------------------------------
Trigger Trained_Unit_Marker
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait RecruitedUnit < 1

    Affects RecruitedUnit  1  Chance  100
;
;------------------------------------------
; Encamped Section 1
; all encamped Must all go before any movement affecting triggers at end turn
;------------------------------------------
Trigger EncampedResetPostBat
    WhenToTest PostBattle

    Condition IsGeneral
          and not WonBattle
          and Trait Encamped = 1

    Affects EncampedReset  2  Chance  100
    Affects Encamped  1  Chance  100

;------------------------------------------
; Encamped  Section 2
;------------------------------------------
Trigger EncampedReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait Encamped = 1

    Affects EncampedReset  2  Chance  100
    Affects Encamped  1  Chance  100

;------------------------------------------
;Trigger EncampedMove
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and Trait Move = 0
;
;    Affects Move  1  Chance  100
;
;move alter to satisfy movement quirk
;------------------------------------------
Trigger EncampedSet
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not EndedInSettlement
          and Trait TimeInField >= 1
          and RemainingMPPercentage >= 90
          and not EndedInEnemyZOC
          and not InEnemyLands
          and PopulationOwnReligion > 50
          and not IsUnderSiege
          and not AtSea

    Affects Encamped  1  Chance  100
;------------------------------------------
;Trigger EncampedMoveReset
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and Trait Move = 1
;
;    Affects MoveReset  2  Chance  100
;    Affects Move  1  Chance  100
;
;move alter to satisfy movement quirk
;------------------------------------------
; Army Consumpion rate and haulage ability End Section 2
;------------------------------------------
Trigger SizeReset4End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 4

    Affects ArmySizeReset  5  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset3End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 3

    Affects ArmySizeReset  4  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset2End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 2

    Affects ArmySizeReset  3  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeReset1End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 1

    Affects ArmySizeReset  2  Chance  100
    Affects ArmySize  1  Chance  100

;------------------------------------------
Trigger SizeSet1End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 40

    Affects ArmySize  2  Chance  100

; would ideally be armysize 1, but such low consumption is bad for gameplay.
; now same for 1/8th army as for 1/4 army.
;------------------------------------------
Trigger SizeSet2End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 20
          and PercentageUnitAttribute general_unit < 40

    Affects ArmySize  2  Chance  100

;------------------------------------------
Trigger SizeSet3End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit >= 10
          and PercentageUnitAttribute general_unit < 20

    Affects ArmySize  3  Chance  100

;------------------------------------------
Trigger SizeSet4End
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit < 10

    Affects ArmySize  4  Chance  100

;------------------------------------------
Trigger SizeSet2ndGenEnd
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize < 1

    Affects ArmySize  1  Chance  100

;------------------------------------------
; Supplycost resets go at start turn, following start turn script deductions, before next used.
; no longer using script for these so altering to end turn 25-08-09
;------------------------------------------
Trigger SupplyCostsReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 1

    Affects SupplyCost -1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger SupplyCostsReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 2

    Affects SupplyCost -2  Chance  100
;------------------------------------------
Trigger SupplyCostsReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 3

    Affects SupplyCost -3  Chance  100
;------------------------------------------
Trigger SupplyCostsReset4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 4

    Affects SupplyCost -4  Chance  100
;------------------------------------------
Trigger SupplyCostsReset5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 5

    Affects SupplyCost -5  Chance  100
;------------------------------------------
;  TreasuryCost resets go at start turn - following script deductions at start turn,before next used.
;------------------------------------------
Trigger TCResetStart1a
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TCResetStart1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryCost >= 5

    Affects TCReset  6  Chance  100
    Affects TreasuryCost  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TCResetStart2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryCost >= 3

    Affects TCReset  4  Chance  100
    Affects TreasuryCost  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TCResetStart3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryCost >= 2

    Affects TCReset  3  Chance  100
    Affects TreasuryCost  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TCResetStart4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryCost >= 1

    Affects TCReset  2  Chance  100
    Affects TreasuryCost  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; TreasuryWealth resets go at start turn - following script deductions at start turn, before next used.
; because treasurywealth may be applied at any time, only start and mid turn expenditures will be visible for testing.
;------------------------------------------
Trigger TWResetStart1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryWealth >= 5

    Affects TWReset  6  Chance  100
    Affects TreasuryWealth  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TWResetStart2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryWealth >= 3

    Affects TWReset  4  Chance  100
    Affects TreasuryWealth  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TWResetStart3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryWealth >= 2

    Affects TWReset  3  Chance  100
    Affects TreasuryWealth  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TWResetStart4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryWealth >= 1

    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; TreasuryNine resets go at start turn - following script deductions at start turn, before next used.
; because treasurynine may be applied at any time, only start and mid turn expenditures will be visible for testing.
;------------------------------------------
Trigger TNResetStart1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryNine >= 5

    Affects TNReset  6  Chance  100
    Affects TreasuryNine  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TNResetStart2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryNine >= 3

    Affects TNReset  4  Chance  100
    Affects TreasuryNine  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TNResetStart3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryNine >= 2

    Affects TNReset  3  Chance  100
    Affects TreasuryNine  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TNResetStart4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TreasuryNine >= 1

    Affects TNReset  2  Chance  100
    Affects TreasuryNine  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; WEALTH TAX Part 1 (test for need, give order)
;------------------------------------------
Trigger WealthTaxOrderCeases
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
        and CharacterIsLocal
        and Treasury >= 1000
        and Trait WealthTax > 0

    Affects WealthTaxReset  2  Chance  100
    Affects WealthTax  1  Chance  100

; As FL controls this tax, some generals may not be affected until next turn.
;deducts 1 level of wealth tax per turn (if more levels get added to game later)
;------------------------------------------
Trigger WealthTaxesOrdered
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
        and CharacterIsLocal
        and Treasury < 1000
        and Trait WealthTax < 1

    Affects WealthTax  1  Chance  100

;------------------------------------------
; Estates for New Characters
;------------------------------------------
Trigger EstatesGrantedNewGens
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates < 1

    Affects Estates  2  Chance  100

;new men given Manorial Estates
;------------------------------------------
; Estates Bought by Very Rich Nobles xest=1
;------------------------------------------
Trigger EstatesWealthCheckReset_x1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger CanGeneralAffordAnEstate_x1_1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth = 9
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 1

    Affects WealthCheck  1  Chance  100
    Affects Poverty  21  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  2  Chance  100

;test wealth by removing 2000
;------------------------------------------
Trigger EstatesBought_x1_2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth >= 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 1

    Affects Estates  1  Chance  100
    Affects WealthCheck -1  Chance  100

;buy estate if 2000 over rich wealth level.
;------------------------------------------
Trigger EstatesNotBought_x1_3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth < 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 1

    Affects Wealth  20  Chance  100
    Affects WealthCheck -1  Chance  100
    Affects Thousands  2  Chance  100

; dont buy estate if -2000 pushes wealth below rich.
; gives back the money removed for the test
;------------------------------------------
; Estates Bought by Very Rich Nobles During Inflation
;------------------------------------------
Trigger EstatesWealthCheckReset_Inflation_x1_1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger CanGeneralAffordAnEstate_Inflation_x1_1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth = 9
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 1

    Affects WealthCheck  1  Chance  100
    Affects Poverty  41  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  4  Chance  100

;test wealth by removing 4000
;------------------------------------------
Trigger EstatesBought_Inflation_x1_2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth >= 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 1

    Affects Estates  1  Chance  100
    Affects WealthCheck -1  Chance  100

;buy estate if 4000 over rich wealth level.
;------------------------------------------
Trigger EstatesNotBought_Inflation_x1_3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth < 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 1

    Affects Wealth  40  Chance  100
    Affects WealthCheck -1  Chance  100
    Affects Thousands  4  Chance  100

; dont buy estate if -4000 pushes wealth below rich.
; gives back the money removed for the test
;------------------------------------------
; Estates Bought by Very Rich Nobles xest=2
;------------------------------------------
Trigger EstatesWealthCheckReset_xest2_0
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger CanGeneralAffordAnEstate_xest2_1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth = 9
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 2

    Affects WealthCheck  1  Chance  100
    Affects Poverty  31  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  3  Chance  100

;test wealth by removing 3000
;------------------------------------------
Trigger EstatesBought_xest2_2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth >= 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 2

    Affects Estates  1  Chance  100
    Affects WealthCheck -1  Chance  100

;buy estate if 3000 over rich wealth level.
;------------------------------------------
Trigger EstatesNotBought_xest2_3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth < 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 0
          and FactionLeaderTrait xest = 2

    Affects Wealth  30  Chance  100
    Affects WealthCheck -1  Chance  100
    Affects Thousands  3  Chance  100

; dont buy estate if -3000 pushes wealth below rich.
; gives back the money removed for the test
;------------------------------------------
; Estates Bought by Very Rich Nobles During Inflation
;------------------------------------------
Trigger EstatesWealthCheckReset_Inflation_xest2_1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 2

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger CanGeneralAffordAnEstate_Inflation_xest2_1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth = 9
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 2

    Affects WealthCheck  1  Chance  100
    Affects Poverty  61  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  6  Chance  100

;test wealth by removing 6000
;------------------------------------------
Trigger EstatesBought_Inflation_xest2_2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth >= 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 2

    Affects Estates  1  Chance  100
    Affects WealthCheck -1  Chance  100

;buy estate if 6000 over rich wealth level.
;------------------------------------------
Trigger EstatesNotBought_Inflation_xest2_3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
        and CharacterIsLocal
          and Trait Estates >= 1
          and Trait Estates < 3
          and Trait Wealth < 8
          and Trait WealthCheck = 1
        and I_EventCounter inflationon = 1
          and FactionLeaderTrait xest = 2

    Affects Wealth  60  Chance  100
    Affects WealthCheck -1  Chance  100
    Affects Thousands  6  Chance  100

; dont buy estate if -6000 pushes wealth below rich.
; gives back the money removed for the test
;------------------------------------------
; Poverty Limits
;------------------------------------------
Trigger LimitPoverty1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait Wealth < 1
          and Trait MinusThousands > 8

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
; AI and Human Prevents wealth dipping below -8000
; else start character wealth triggers will kick in and put HunThou vs wealth out of sync. Adds up to 8000, keeping wealth out of poverty.
;------------------------------------------
Trigger LimitPoverty2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait Wealth < 1
          and Trait MinusThousands > 8

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
; AI and Human Prevents wealth dipping below -8000
; else start character wealth triggers will kick in and put HunThou vs wealth out of sync.
;------------------------------------------
Trigger LimitPoverty3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait Wealth < 1
          and Trait MinusThousands > 8

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
; AI and Human Prevents wealth dipping below -8000
; else start character wealth triggers will kick in and put HunThou vs wealth out of sync.
;------------------------------------------
Trigger LimitPoverty4
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait Wealth < 1
          and Trait MinusThousands > 8

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
; AI and Human Prevents wealth dipping below -8000
; else start character wealth triggers will kick in and put HunThou vs wealth out of sync.
;------------------------------------------
; Wealth Triggers For New Characters------ALL apply to AI too, but Tcosts etc should not charge them as Would charge human if bribed to human.
;------------------------------------------
Trigger StartWealthy1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth < 1
          and I_EventCounter inflationon = 0

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;new men to adeq wealth player 2100
; as the new costs are extra costs I have exempted turn zero characters from taking treasury funds.
;------------------------------------------
Trigger StartWealthy1Inflation
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth < 1
        and I_EventCounter inflationon = 1

    Affects Wealth  141  Chance  100
    Affects Thousands  4  Chance  100
    Affects Hundreds  1  Chance  100

;new men to adeq wealth player 2100
; as the new costs are extra costs I have exempted turn zero characters from taking treasury funds.
;------------------------------------------
Trigger StartWealthy1AI
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and IsFactionAIControlled
          and Trait Wealth < 1

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;new men to adeq wealth AI 2100
; as the new costs are extra costs I have exempted turn zero characters from taking treasury funds.
;------------------------------------------
Trigger StartWealthyAI3
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
          and IsFactionAIControlled
          and Trait Wealth < 9

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
;new King towards v.rich wealth AI Top Royalty and Leaders, 2000/turn
;------------------------------------------
Trigger StartWealthyAI4
    WhenToTest CharacterTurnStart

    Condition IsFactionHeir
          and IsFactionAIControlled
          and Trait Wealth < 9

    Affects Wealth  20  Chance  100
    Affects Thousands  2  Chance  100
;new Heir towards v.rich wealth AI Top Royalty and Leaders
;------------------------------------------
;AdoptedWealth
;------------------------------------------
Trigger AdoptedSupplies
    WhenToTest OfferedForAdoption

    Condition CharacterIsLocal
        and Trait Supplies < 1

    Affects Estates  2  Chance  100
    Affects Turnsaway  12  Chance  100
    Affects Supplies  4  Chance  100
;------------------------------------------
Trigger AdoptedAdeq
    WhenToTest OfferedForAdoption

    Condition CharacterIsLocal
        and Trait Wealth < 1
        and I_EventCounter inflationon = 0

    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;unmarried adequate wealth default 2100 + supply(25% 800) = 2900
;------------------------------------------
Trigger AdoptedAdeq_Infl
    WhenToTest OfferedForAdoption

    Condition CharacterIsLocal
        and Trait Wealth < 1
        and I_EventCounter inflationon = 1

    Affects TreasuryWealth  4  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;unmarried adequate wealth default 2100 + supply(25% 1600 infl) = 3700
;------------------------------------------
Trigger AdoptedSupplyAI
    WhenToTest OfferedForAdoption

    Condition not CharacterIsLocal
        and Trait Supplies < 1

    Affects Turnsaway  12  Chance  100
    Affects Supplies  3  Chance  100


; default 50% supply
;------------------------------------------
Trigger AdoptedAdeqAI
    WhenToTest OfferedForAdoption

    Condition not CharacterIsLocal
        and Trait Wealth < 1

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;note sets up AI generals, though they will not use. These trigs should cover bribed generals.
;------------------------------------------
;Man of the Hour Adoption
;------------------------------------------
Trigger AdoptedMotH1
    WhenToTest LesserGeneralOfferedForAdoption

    Condition CharacterIsLocal
          and Trait Supplies < 1
          and Trait Wealth < 1
          and I_EventCounter inflationon = 0

    Affects Estates  2  Chance  100
    Affects Wealth  121  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Turnsaway  12  Chance  100
    Affects Supplies  4  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

; for adopted captains not generals. default adequate wealth unmarried.
;adequate wealth default 2100 + supply(25% 800) = 2900
;------------------------------------------
Trigger AdoptedMotH1_Infl
    WhenToTest LesserGeneralOfferedForAdoption

    Condition CharacterIsLocal
          and Trait Supplies < 1
          and Trait Wealth < 1
          and I_EventCounter inflationon = 1

    Affects Estates  2  Chance  100
    Affects Wealth  121  Chance  100
    Affects TreasuryWealth  4  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Turnsaway  12  Chance  100
    Affects Supplies  4  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

; for adopted captains not generals. default adequate wealth unmarried.
;adequate wealth default 2100 + supply(25% 1600) = 3700
;------------------------------------------
Trigger AdoptedMothSupplyAI
    WhenToTest LesserGeneralOfferedForAdoption

    Condition not CharacterIsLocal
          and Trait Supplies < 1

    Affects Turnsaway  12  Chance  100
    Affects Supplies  3  Chance  100

; default 50% supply
;------------------------------------------
Trigger AdoptedMotH1AI
    WhenToTest LesserGeneralOfferedForAdoption

    Condition not CharacterIsLocal
          and Trait Wealth < 1

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

; default poor wealth unmarried 1000
;------------------------------------------
;Princess Wealth and Dowry for Husband
; Princess can't get wealth due to wealth attributes
;------------------------------------------
Trigger GeneralMarryPrincessWealthDefault
    WhenToTest CharacterMarriesPrincess

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 1

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusThousands  25  Chance  100
    Affects Thousands  27  Chance  100
    Affects MinusHundreds  5  Chance  100
    Affects Hundreds  5  Chance  100

;adds up to 2 wealth when gen marries Princess. 2000
;------------------------------------------
Trigger GeneralMarryPrincessWealth1
    WhenToTest CharacterMarriesPrincess

Condition Trait Wealth <= 8
          and CharacterIsLocal
          and FactionLeaderTrait Wealth >= 8

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusThousands  25  Chance  100
    Affects Thousands  27  Chance  100
    Affects MinusHundreds  5  Chance  100
    Affects Hundreds  5  Chance  100

;adds up to 2 wealth when gen marries Princess if princess rich or v rich. part 1. 2000
;------------------------------------------
;Trigger GeneralMarryPrincessWealth2
;    WhenToTest CharacterMarriesPrincess
;
;    Condition Trait Wealth <= 8
;          and CharacterIsLocal
;          and FactionLeaderTrait Wealth >= 8
;
;    Affects Wealth  20  Chance  100
;    Affects TreasuryWealth  2  Chance  100
;    Affects TreasuryCost  2  Chance  100
;    Affects MinusThousands  1  Chance  100
;    Affects Thousands  3  Chance  100
;    Affects MinusHundreds  1  Chance  100
;    Affects Hundreds  1  Chance  100
;
;part 2.
;------------------------------------------
;Existing General Marries-Dowry
;------------------------------------------
Trigger GeneralMarriesWealth
    WhenToTest CharacterMarries

Condition Trait Wealth <= 8
          and CharacterIsLocal

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Thousands  2  Chance  100

; plus 20 wealth for ordinary marriage dowry +2000
;------------------------------------------
; Coming of age Men and Women
;------------------------------------------
Trigger OfAgeWealth
    WhenToTest CharacterComesOfAge

Condition Trait Wealth < 1
          and CharacterIsLocal
          and I_EventCounter inflationon = 0

    Affects Estates  2  Chance  100
    Affects Wealth  121  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;adequate wealth default 2100 + supply(25% 800) = 2900
;------------------------------------------
Trigger OfAgeWealth_Infl
    WhenToTest CharacterComesOfAge

Condition Trait Wealth < 1
          and CharacterIsLocal
          and I_EventCounter inflationon = 1

    Affects Estates  2  Chance  100
    Affects Wealth  141  Chance  100
    Affects TreasuryWealth  6  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects Thousands  4  Chance  100
    Affects Hundreds  1  Chance  100

;rich wealth default 2100 + supply(25% 1600 inflation) = 5700
;------------------------------------------
Trigger OfAgeWealthAI
    WhenToTest CharacterComesOfAge

Condition Trait Wealth < 1
          and not CharacterIsLocal

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;Born adequate wealth
;------------------------------------------
Trigger BornWealthy1
    WhenToTest CharacterComesOfAge

Condition CharacterIsLocal
          and FatherTrait Wealth >= 8
          and Trait Wealth <= 7

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Thousands  2  Chance  100

;------------------------------------------
;Trigger BornWealthy2
;    WhenToTest CharacterComesOfAge
;
;Condition CharacterIsLocal
;          and FatherTrait Wealth = 9
;          and Trait Wealth = 8
;
;    Affects Wealth  20  Chance  100
;    Affects TreasuryWealth  2  Chance  100
;    Affects TreasuryCost  2  Chance  100
;    Affects Thousands  2  Chance  100
;
;brings wealth up to father's level (up to 6,100 in these trigs)
;------------------------------------------
; Set Newly Acquired Generals for Supplies and Field Morale (backup to startturn setups is elsewhere)
;------------------------------------------
Trigger NewGen_Byg
    WhenToTest CharacterComesOfAge

    Condition IsGeneral
        and Trait Supplies < 1
        and CharacterIsLocal

    Affects Turnsaway  12  Chance  100
    Affects Supplies  4  Chance  100

;arrive prestart turn? 25% supplies
;------------------------------------------
Trigger NewGen_BygAI
    WhenToTest CharacterComesOfAge

    Condition IsGeneral
        and Trait Supplies < 1
        and not CharacterIsLocal

    Affects Turnsaway  12  Chance  100
    Affects Supplies  3  Chance  100

; 50% supplies
;------------------------------------------
;New General offers marriage to family member and gets dowry
;------------------------------------------
Trigger Worthy_Of_Marriage_Byg
    WhenToTest OfferedForMarriage

    Condition CharacterIsLocal
          and Trait Supplies < 1

    Affects Estates  2  Chance  100
    Affects Turnsaway  12  Chance  100
    Affects Supplies  4  Chance  100
;------------------------------------------
Trigger MarryWealth_1
    WhenToTest OfferedForMarriage

    Condition Trait Wealth < 1
          and CharacterIsLocal
          and I_EventCounter inflationon = 0

    Affects Wealth  121  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;adequate wealth default 2100 + supply(25% 800) = 2900
;------------------------------------------
Trigger MarryWealth_Infl1
    WhenToTest OfferedForMarriage

    Condition Trait Wealth < 1
          and CharacterIsLocal
          and I_EventCounter inflationon = 1

    Affects Wealth  121  Chance  100
    Affects TreasuryWealth  4  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

;adequate wealth default 2100 inflation + supply(25% 1600) = 3,700
;------------------------------------------
Trigger Worthy_Of_Marriage_BygAI
    WhenToTest OfferedForMarriage

    Condition Trait Supplies < 1
        and not CharacterIsLocal

    Affects Turnsaway  12  Chance  100
    Affects Supplies  1  Chance  100

; default full supply
;------------------------------------------
Trigger MarryWealth1AI
    WhenToTest OfferedForMarriage

    Condition Trait Wealth < 1
        and Trait Poverty < 1
        and not CharacterIsLocal

    Affects Wealth  121  Chance  100
    Affects Thousands  2  Chance  100
    Affects Hundreds  1  Chance  100

; default poor wealth unmarried 1000
;------------------------------------------
;Trigger MarryWealth2
;    WhenToTest OfferedForMarriage
;
;Condition Trait Wealth <= 5
;          and SpouseTrait Wealth >= 5
;
;    Affects Wealth  1  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;
;more wealth if wife is as rich or richer than --wont work, spouse has no trait record
;------------------------------------------
;------------------------------------------
; War Council Generals
;------------------------------------------
;------------------------------------------
Trigger LeaderAlwaysInWarCouncil
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait WarCouncilMember < 1

    Affects WarCouncilMember  1  Chance  100

;could add 2nd level to this trait for disgruntled former War Council members, particularly Heirs!
;------------------------------------------
;Trigger WarCouncilMember
;    WhenToTest CharacterTurnStart
;
;    Condition HasAncType warcouncil
;          and CharacterIsLocal
;          and Trait WarCouncilMember < 1
;
;    Affects WarCouncilMember  1  Chance  100
;
; added "and not Trait WarCouncilMember = 1" 19-09-07. Gives WCM Trait to WC Anc holders.
;------------------------------------------
;Trigger WarCouncilTransfered1
;    WhenToTest CharacterTurnStart
;
;    Condition not HasAncType warcouncil
;          and not IsFactionLeader
;          and CharacterIsLocal
;          and Trait WarCouncilMember > 0
;
;    Affects WarCouncilMember -1  Chance  100
;
; added trigger 07-01-08, removes WCM trait if future warcouncil anc is made transferable and he gives it away. FL exempt.
;------------------------------------------
Trigger WarCouncilTransfered2
    WhenToTest CharacterTurnStart

    Condition not HasAncType warcouncil
          and CharacterIsLocal
          and not IsFactionLeader
          and Trait PoorLogisticsBGR = 2

    Affects AdvisedOnLogistics 3  Chance  100
    Affects PoorLogisticsBGR 1  Chance  100

; added trigger 07-01-08, removes Logistical Support if future warcouncil anc is made transferable and he gives it away. FL exempt.
;------------------------------------------
; HasWarchest Trait awarded to WarChest Holders & Top Generals
;------------------------------------------
;Trigger WarchestGetsProRecruitmentAuthority
;    WhenToTest CharacterTurnStart
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and HasAncType warchest
;          and Trait HasWarchest = 0
;          and not Trait DefiedOrders >= 3
;
;    Affects HasWarchest  1  Chance  100
;
; (old) warchest effect to warchest holders if not got already, unless summoned or banished, regardless of city or castle
;------------------------------------------
;Trigger WarchestGainsProRecruitmentAuthStart1
;    WhenToTest CharacterTurnStart
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and HasAncType warchest
;          and Trait HasWarchest = 0
;          and not Trait DefiedOrders >= 3
;          and GovernorTaxLevel <= tax_extortionate
;          and not SettlementBuildingExists >= motte_and_bailey
;
;    Affects HasWarchest  1  Chance  100
;
;; For LoGens (does others too, but doesn't need to)
;; in settlement, city, not criminal, not has authority,  = add authority (only WCs can get & use authority in castles)
;------------------------------------------
Trigger WarchestGainsProRecruitmentAuthEnd1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warchest
          and Trait HasWarchest = 0
          and not Trait DefiedOrders >= 3
          and GovernorTaxLevel <= tax_extortionate
          and not SettlementBuildingExists >= motte_and_bailey

    Affects HasWarchest  1  Chance  100

; For LoGens (does others too, but doesn't need to)
; in settlement, city, not criminal, not has authority,  = add authority (only WCs can get & use authority in castles)
;------------------------------------------
Trigger WarchestGainsProRecruitmentAuthGUT1
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warchest
          and Trait HasWarchest = 0
          and not Trait DefiedOrders >= 3
          and GovernorTaxLevel <= tax_extortionate
          and not SettlementBuildingExists >= motte_and_bailey

    Affects HasWarchest  1  Chance  100

; For LoGens (does others too, but doesn't need to)
; in settlement, city, not criminal, not has authority,  = add authority (only WCs can get & use authority in castles)
;------------------------------------------
;Trigger WarchestLosesProRecruitmentAuthStart
;    WhenToTest CharacterTurnStart
;
;    Condition GovernorTaxLevel <= tax_extortionate
;          and SettlementBuildingExists >= motte_and_bailey
;          and CharacterIsLocal
;          and IsGeneral
;          and not IsFactionLeader
;          and not HasAncType warcouncil
;          and Trait HasWarchest = 1
;
;    Affects HasWarchestReset  2  Chance  100
;    Affects HasWarchest  1  Chance  100
;
;; Governor of castle, not fl, not WC, has authority = remove authority (only WCs can use authority in castles)
;------------------------------------------
Trigger WarchestLosesProRecruitmentAuthEnd
    WhenToTest CharacterTurnEnd

    Condition GovernorTaxLevel <= tax_extortionate
          and SettlementBuildingExists >= motte_and_bailey
          and CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait HasWarchest = 1

    Affects HasWarchestReset  2  Chance  100
    Affects HasWarchest  1  Chance  100

; gov of castle, not fl, not WC, has authority = remove authority (only WCs can use authority in castles)
;------------------------------------------
Trigger WarchestLosesProRecruitmentAuthGUT
    WhenToTest GovernorUnitTrained

    Condition GovernorTaxLevel <= tax_extortionate
          and SettlementBuildingExists >= motte_and_bailey
          and CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait HasWarchest = 1

    Affects HasWarchestReset  2  Chance  100
    Affects HasWarchest  1  Chance  100

; gov of castle, not fl, not WC, has authority = remove authority (only WCs can use authority in castles)
;------------------------------------------
Trigger WarCouncilGetsProRecruitmentAuthorityStart
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait HasWarchest = 0
          and not Trait DefiedOrders >= 3

    Affects HasWarchest  1  Chance  100

; warchest effect to warcouncil holders if not got already, unless summoned or banished
;------------------------------------------
Trigger WarCouncilGetsProRecruitmentAuthorityEnd
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait HasWarchest = 0
          and not Trait DefiedOrders >= 3

    Affects HasWarchest  1  Chance  100

; warchest effect to warcouncil holders if not got already, unless summoned or banished
; using this at end turn alone makes recruit claims and unclaims both go off, don't use.
; because recruit before end turn.then this .then claims. So use unittrained. (merchire is resilient)
;------------------------------------------
Trigger WarCouncilGetsProRecruitmentAuthorityGUT
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait HasWarchest = 0
          and not Trait DefiedOrders >= 3

    Affects HasWarchest  1  Chance  100

; warchest effect to warcouncil holders if not got already, unless summoned or banished
; using this at end turn makes recruit claims and unclaims both go off, don't use.
; because recruit happens before end turn.then this .then claims. so use govunittrained
;------------------------------------------
Trigger LeaderGetsProRecruitmentAuthority
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and IsFactionLeader
          and Trait HasWarchest = 0

    Affects HasWarchest  1  Chance  100

; warchest effect to Leader, if not got already
;------------------------------------------
Trigger ProTrainersNotOwnedLoGens
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warchest
          and not HasAncType warcouncil
          and not IsFactionLeader
          and Trait HasWarchest = 1

    Affects HasWarchestReset  2  Chance  100
    Affects HasWarchest  1  Chance  100

; recruit authority removed from ex warchest  (pro Trainers) holders, except King & WCs
;------------------------------------------
; Reset JrWC (preserve gainmessages)
;------------------------------------------
Trigger JrWC_DO_Reset1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWarCouncillor = 1
          and Trait DefiedOrders >= 3

    Affects JrWarCouncillorReset  1  Chance  100

; do same for end turn
;------------------------------------------
Trigger JrWC_DO_Reset2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWarCouncillor = 2
          and Trait DefiedOrders >= 3

    Affects JrWarCouncillorReset  2  Chance  100

; defied orders
;------------------------------------------
Trigger JrWC_WC_Owned_Resetlvl1_start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait JrWarCouncillor = 1

    Affects JrWarCouncillorReset  1  Chance  100

; jrwc lvl 1 dropped to 0 if wc
;------------------------------------------
Trigger JrWC_WC_Owned_Resetlvl1_end
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait JrWarCouncillor = 1

    Affects JrWarCouncillorReset  1  Chance  100

; jrwc lvl 1 dropped to 0 if wc
;------------------------------------------
Trigger JrWC_WC_Owned_Resetlvl2_start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  2  Chance  100

; jrwc lvl 2 dropped to 1 if wc
;------------------------------------------
Trigger JrWC_WC_Owned_Resetlvl2_end
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  2  Chance  100

; jrwc lvl 2 dropped to 1 if wc
;------------------------------------------
Trigger JrWC_WC_Owned_Resetlvl2_unittrained
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType warcouncil
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  2  Chance  100

; jrwc lvl 2 dropped to 1 if no PTS
;------------------------------------------
;Trigger JrWC_RL_Resetlvl1
;    WhenToTest GovernorUnitTrained
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait JrWarCouncillor = 1
;          and Trait RecruitLimit = 0
;
;    Affects JrWarCouncillorReset  1  Chance  100
;
;; recruit limit out remove JrWC (blocked..may not have been given recruitllimit yet)
;------------------------------------------
;Trigger JrWC_RL_Resetlvl2
;    WhenToTest GovernorUnitTrained
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait JrWarCouncillor = 2
;          and Trait RecruitLimit < 1
;
;    Affects JrWarCouncillorReset  2  Chance  100
;
; recruit limit out remove JrWC
;------------------------------------------
Trigger JrWC_ProTrainersNotOwned_Resetlvl2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warchest
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  1  Chance  100

; jrwc lvl 2 dropped to 1 if no PTS
;------------------------------------------can use building check at start turn?
;Trigger JrWC_Level2_Reset_Start
;    WhenToTest CharacterTurnStart
;
;    Condition not SettlementBuildingExists >= motte_and_bailey
;          and CharacterIsLocal
;          and IsGeneral
;          and Trait JrWarCouncillor = 2
;
;    Affects JrWarCouncillorReset  1  Chance  100
;
;; leave castle drop lvl 2 to lvl 1
;------------------------------------------
Trigger JrWC_Level2_Reset_End
    WhenToTest CharacterTurnEnd

    Condition EndedInSettlement
          and not SettlementBuildingExists >= motte_and_bailey
          and CharacterIsLocal
          and IsGeneral
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  1  Chance  100

; leave castle drop lvl 2 to lvl 1
;------------------------------------------
Trigger JrWC_Level2_Reset_Unittrained
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and not SettlementBuildingExists >= motte_and_bailey
          and CharacterIsLocal
          and Trait JrWarCouncillor = 2

    Affects JrWarCouncillorReset  1  Chance  100

; leave castle drop lvl 2 to lvl 1
;------------------------------------------
; Jr War Councillor Assigned lvl 2
;------------------------------------------
Trigger JrWC_Level2_End
    WhenToTest CharacterTurnEnd

    Condition EndedInSettlement
          and SettlementBuildingExists >= motte_and_bailey
          and CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and not HasAncType warcouncil
          and HasAncType warchest
          and Trait JrWarCouncillor = 1
          and not Trait DefiedOrders >= 3

    Affects JrWarCouncillor  1  Chance  100

; in settlement, not WC, Not FL, Has PTS, has level 1 JrWC, move to level 2
;------------------------------------------
; Do for all instances of gaining either haswarchest or jrwc
;
; only need end turn for actual recruitment effect (moved end turns to nr end of traits)
; others can be used to help reflect recruitment summaries correctly, which are currently only start turn.
;------------------------------------------
Trigger JrWC_Off_StartReset
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait JrWCOff = 1

    Affects JrWCOffReset  1  Chance  100

; reset jrwcoff all factions
;------------------------------------------
Trigger JrWC_Off_Start1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 1
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 1
;------------------------------------------
Trigger JrWC_Off_Start_noPTS
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest < 1
          and not HasAncType warchest
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 0 & no PTS
;------------------------------------------
Trigger JrWC_Off_Start_WealthLow
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWCOff < 1
          and Trait Wealth <= 6
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; set jrwcoff if too poor
;------------------------------------------
Trigger JrWC_OffReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait JrWCOff = 1

    Affects JrWCOffReset  1  Chance  100

; reset jrwcoff all factions
;------------------------------------------
Trigger JrWC_Off1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 1
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 1
;------------------------------------------
Trigger JrWC_Off_End_noPTS
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest < 1
          and not HasAncType warchest
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 0 & no PTS
;------------------------------------------
Trigger JrWC_OffGUTReset
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWCOff = 1

    Affects JrWCOffReset  1  Chance  100

; reset jrwcoff
;------------------------------------------
Trigger JrWC_OffGUT_HasWarChest
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 1
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 1
;------------------------------------------
Trigger JrWC_OffGUT_noPTS
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest < 1
          and not HasAncType warchest
          and Trait JrWCOff < 1
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; add jrwc removeeffect if haswarchest = 0 and no PTS
;------------------------------------------
Trigger JrWC_OffGUT_WealthLow
    WhenToTest GovernorUnitTrained

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWCOff < 1
          and Trait Wealth <= 6
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; set jrwcoff if too poor
;------------------------------------------
; JrWC unit trained Reset
;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 1
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  1  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 2
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  2  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 3
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  3  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 4
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  4  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 5
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  5  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 6
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  6  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end7
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 7
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  7  Chance  100

;------------------------------------------
Trigger JrWC_RecruitLimit_reset_end8
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait RecruitLimit = 8
          and Trait JrWarCouncillor < 1

    Affects RecruitLimitReset  8  Chance  100

;------------------------------------------
; JrWC unit trained decrement
;------------------------------------------
Trigger JrWC_RecruitLimit_passed_EndDuty
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and SettlementBuildingExists >= motte_and_bailey
          and Trait JrWarCouncillor = 2
          and Trait RecruitLimit = 1

    Affects RecruitLimitReset  1  Chance  100
    Affects JrWarCouncillorReset  2  Chance  100

;when 1 limit remains
;------------------------------------------
Trigger JrWC_RecruitLimit_remaining_Decrement
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and SettlementBuildingExists >= motte_and_bailey
          and Trait JrWarCouncillor = 2
          and Trait RecruitLimit >= 2

    Affects RecruitLimitReset  1  Chance  100

;when 2 or more limit remains
;------------------------------------------
; Award JrWC lvl 1 for Great Victories & Status
;(some of these must match corresponding estate earning triggers further on)
;------------------------------------------
Trigger JrWC_Via_Battle_Estates_cp3or4
    WhenToTest PostBattle

    Condition IsGeneral
          and not HasAncType warcouncil
          and not IsFactionLeader
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait MVC = 1
          and Trait DefiedOrders <= 1
          and PercentageUnitAttribute general_unit < 7
          and Trait JrWarCouncillor < 1
          and Trait RecruitLimit < 1
          and FactionLeaderTrait CentralisedPower >= 3

    Affects JrWarCouncillor  1  Chance  100
    Affects Wealth  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects RecruitLimit  4  Chance  100

;must match & trigger alongside estates earned, professional periods(if already have 1 MVC, now have 2)
;------------------------------------------
Trigger JrWC_Via_Conquest_Estates
    WhenToTest PostBattle

    Condition IsGeneral
          and not HasAncType warcouncil
          and not IsFactionLeader
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders < 2
          and Trait JrWarCouncillor < 1
          and Trait RecruitLimit < 1

    Affects JrWarCouncillor  1  Chance  100
    Affects Wealth  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects RecruitLimit  4  Chance  100

;must match & trigger alongside estates earned
;------------------------------------------
Trigger JrWC_Major_Victories_Count_cp1or2
    WhenToTest PostBattle

    Condition IsGeneral
          and not HasAncType warcouncil
          and not IsFactionLeader
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and PercentageUnitAttribute general_unit < 7
          and not Trait DefiedOrders >= 2
          and FactionLeaderTrait CentralisedPower <= 2
          and Trait JrWarCouncillor < 1
          and Trait RecruitLimit < 1

    Affects JrWarCouncillor  1  Chance  100
    Affects Wealth  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects RecruitLimit  4  Chance  100

;for generals who are already gt estate owners (or not) + 1 major victory, unprofessional periods
;------------------------------------------
Trigger JrWC_GtEstates
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warcouncil
          and not IsFactionLeader
          and Trait JrWarCouncillor < 1
;          and Trait Wealth = 9
          and Trait Estates = 3
          and not Trait DefiedOrders >= 3
          and FactionLeaderTrait CentralisedPower <= 2
          and Trait RecruitLimit < 1
          and RandomPercent < 5

    Affects JrWarCouncillor  1  Chance  100
    Affects Wealth  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects RecruitLimit  4  Chance  100

;if with great estates whilst faction is unprofessional or uncentralised, random chance
; This means he MAY repeatedly get JrWC as long as he has gt estates
;------------------------------------------
Trigger JrWC_GtEstates_VRich
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warcouncil
          and not IsFactionLeader
          and Trait JrWarCouncillor < 1
          and Trait Wealth = 9
          and Trait Estates = 3
          and not Trait DefiedOrders >= 3
          and FactionLeaderTrait CentralisedPower >= 3
          and Trait RecruitLimit < 1
          and RandomPercent < 5

    Affects JrWarCouncillor  1  Chance  100
    Affects Wealth  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects RecruitLimit  4  Chance  100

;if with great estates whilst faction is unprofessional or uncentralised, random chance
; This means he MAY repeatedly get JrWC as long as he has gt estates & v rich
;------------------------------------------
; Recruitment Ability Update StartTurn
; (recruitment ability wont show if over 10 Char. So good guide to error.
;------------------------------------------

Trigger Recruitment_desc_reset1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_desc_reset2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_desc_reset3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm = 10

    Affects RecruitmentAbility  1  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm <= 9
          and Attribute Charm >= 5

    Affects RecruitmentAbility  2  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions3
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm <= 4

    Affects RecruitmentAbility  3  Chance 100

;------------------------------------------
;LogisticalSupport
;------------------------------------------
Trigger LeaderAlwaysHasLogSupport1
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait PoorLogisticsBGR < 1

    Affects PoorLogisticsBGR  2  Chance  100

;gives logistical support to FL even without WC Anc
;------------------------------------------
Trigger LeaderAlwaysHasLogSupport2
    WhenToTest CharacterTurnStart

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait PoorLogisticsBGR = 1

    Affects PoorLogisticsBGR  1  Chance  100

;gives logistical support to FL even without WC Anc
;------------------------------------------
Trigger Good_Logistics
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait PoorLogisticsBGR < 1
          and HasAncType warcouncil
          and not Trait DefiedOrders >= 3

    Affects PoorLogisticsBGR  2  Chance  100

;added to the 3 prime generals...Requires warcouncil Ancillary! Gets if  does not have this trait. Always keeps this level
;------------------------------------------
Trigger Good_LogisticsEnd
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait PoorLogisticsBGR < 1
          and HasAncType warcouncil
          and not Trait DefiedOrders >= 3

    Affects PoorLogisticsBGR  2  Chance  100

;added to the 3 prime generals...Requires warcouncil Ancillary! Gets if  does not have this trait. Always keeps this level. for end turn.
;------------------------------------------
Trigger Good_Logistics2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait PoorLogisticsBGR = 1
          and HasAncType warcouncil
          and not Trait DefiedOrders >= 3

    Affects PoorLogisticsBGR  1  Chance  100

;added to the 3 prime generals...Requires warcouncil Ancillary! Gets even if has poor logistician level. Always keeps this level
;------------------------------------------
; War Council Earnings/Logen Earnings Feudal and Post Feudal
;------------------------------------------
; Banished would still earn if governing, until moves out.
;------------------------------------------
; Earn resets go at End turn - following deductions at start turn, before first instance.
;------------------------------------------
Trigger EarnResetEnd1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Earn >= 5

    Affects Earn  -5  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger EarnResetEnd2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Earn >= 3

    Affects Earn  -3  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger EarnResetEnd3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Earn >= 2

    Affects Earn  -2  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger EarnResetEnd4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Earn >= 1

    Affects Earn  -1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; Earn 100 (any castle and low tax city) to 400 (highest tax city)
;
; BGR requires these market levels: corn_exchange market fairground great_market merchants_quarter
; BGR requires this minimum wall level to be present: wooden_pallisade
;if not present in your mod then alter refs here to match your EDB.
;------------------------------------------
; Resets Tax Effects (chips upto 4 down to 0)
;------------------------------------------
Trigger ResetTaxEffects1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait TaxEffect >= 2

    Affects TaxEffectReset  3  Chance  100
    Affects TaxEffect  1  Chance  100

;------------------------------------------
Trigger ResetTaxEffects2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait TaxEffect >= 2

    Affects TaxEffectReset  2  Chance  100
    Affects TaxEffect  1  Chance  100

;------------------------------------------
Trigger ResetTaxEffects3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait TaxEffect >= 1

    Affects TaxEffectReset  2  Chance  100
    Affects TaxEffect  1  Chance  100

;------------------------------------------
Trigger GovernBasicTaxCityAnyCastle
    WhenToTest CharacterTurnEnd

    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
;          and Trait Wealth < 9
;          and FactionLeaderTrait CentralisedPower <= 1

    Affects Wealth  1  Chance  100
    Affects Earn  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TaxEffect  1  Chance  100
    Affects Hundreds  1  Chance  100

;add Earnings, 1 per turn, governing all settlements. (old-Right to Knight)
;------------------------------------------
;Trigger GovernTaxCityLow
;    WhenToTest CharacterTurnEnd
;
;    Condition GovernorTaxLevel = tax_low
;          and SettlementBuildingExists >= wooden_pallisade
;          and SettlementBuildingExists > corn_exchange
;          and CharacterIsLocal
;          and TimeInRegion > 4
;;          and Trait Wealth < 9
;;          and FactionLeaderTrait CentralisedPower <= 1
;
;    Affects Wealth  1  Chance  100
;    Affects Earn  1  Chance  100
;    Affects TreasuryCost  1  Chance  100
;
;;has governed a while,starts to take a cut,(old-feudal period), extortionate tax. Also gets earn from previous trigger.
;; this trigger is not required unless earnings are to differ for low tax cities & any tax castles.
;------------------------------------------
Trigger GovernTaxCityNormal
    WhenToTest CharacterTurnEnd

    Condition GovernorTaxLevel = tax_normal
          and SettlementBuildingExists >= wooden_pallisade
          and SettlementBuildingExists > market
          and CharacterIsLocal
          and TimeInRegion > 4
;          and Trait Wealth < 9
;          and FactionLeaderTrait CentralisedPower <= 1

    Affects Wealth  1  Chance  100
    Affects Earn  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TaxEffect  1  Chance  100
    Affects Hundreds  1  Chance  100

;has governed a while,starts to take a cut,(old-feudal period), extortionate tax. Also gets earn from 1st trigger.
;------------------------------------------
Trigger GovernTaxCityHigh
    WhenToTest CharacterTurnEnd

    Condition GovernorTaxLevel = tax_high
          and SettlementBuildingExists >= wooden_pallisade
          and SettlementBuildingExists > market
          and CharacterIsLocal
          and TimeInRegion > 4
;          and Trait Wealth < 9
;          and FactionLeaderTrait CentralisedPower <= 1

    Affects Wealth  2  Chance  100
    Affects Earn  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects TaxEffect  2  Chance  100
    Affects Hundreds  2  Chance  100

;has governed a while,starts to take a cut,(old-feudal period), extortionate tax. Also gets earn from 1st trigger.
;------------------------------------------
Trigger GovernTaxCityExtortionate
    WhenToTest CharacterTurnEnd

    Condition GovernorTaxLevel = tax_extortionate
          and SettlementBuildingExists >= wooden_pallisade
          and SettlementBuildingExists > market
          and CharacterIsLocal
          and TimeInRegion > 4
;          and Trait Wealth < 9
;          and FactionLeaderTrait CentralisedPower <= 1

    Affects Wealth  3  Chance  100
    Affects Earn  3  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects TaxEffect  3  Chance  100
    Affects Hundreds  3  Chance  100

;has governed a while,starts to take a cut,(old-feudal period), extortionate tax. Also gets earn from 1st trigger.
;------------------------------------------
Trigger FLEarlyFeudal
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and IsFactionLeader
          and Trait Wealth < 9
;*          and Trait Thousands < 9
          and Treasury >= 2000
          and Trait CentralisedPower = 1

    Affects Wealth  2  Chance  100
    Affects Earn  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Hundreds  2  Chance  100

; Collect Wealth from Treasury if any there, 200 per turn, in settlement, plus previous gov earnings, 100 to 400. If treasury >= 2000 & < v rich.
;------------------------------------------
Trigger FLEarnLateFeudal
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and IsFactionLeader
          and Trait Wealth < 9
;*          and Trait Thousands < 9
          and Treasury >= 2000
          and Trait CentralisedPower >= 2

    Affects Wealth  3  Chance  100
    Affects Earn  3  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects Hundreds  3  Chance  100

; Collect Wealth from Treasury if any there, 300 per turn, in settlement, plus previous gov earnings, 100 to 400. If treasury >= 2000 & < v rich.
;------------------------------------------
Trigger FLDipsIntoTreasuryFundsUnseen
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and IsFactionLeader
          and Trait Wealth < 7
;*          and Trait Thousands < 1
;*          and Trait Hundreds < 1
          and Treasury >= 1000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Thousands  1  Chance  100

; Collect Wealth from Treasury if any there, 1000 per turn, in settlement, (plus FLearns and previous gov earnings, 100 to 400). If treasury >= 1000 & < broke.
;------------------------------------------
Trigger FLDipsIntoTreasuryDebtForMoneyLendersUnseen
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and IsFactionLeader
          and Trait Debt > 0
;*          and Trait Thousands < 1
;*          and Trait Hundreds < 1
          and Treasury < 1000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Thousands  1  Chance  100

; Borrow via Treasury if none there & FL has Loan, 1000 per turn, in settlement, (plus FLearns and previous gov earnings, 100 to 400). If treasury < 1000 & Borrowed.
;------------------------------------------
Trigger FLDipsIntoTreasuryDebtForSelfUnseen
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and IsFactionLeader
          and Trait Wealth < 7
          and Trait Debt = 0
;*          and Trait Thousands < 1
;*          and Trait Hundreds < 1
          and Treasury < 1000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Thousands  1  Chance  100

; Borrow via Treasury if none there & FL has Loan, 1000 per turn, in settlement, (plus FLearns and previous gov earnings, 100 to 400). If treasury < 1000 & < Not Borrowed.
;------------------------------------------
Trigger WCEarn
    WhenToTest CharacterTurnEnd

;    Condition EndedInSettlement
    Condition GovernorTaxLevel <= tax_extortionate
          and CharacterIsLocal
          and not IsFactionLeader
          and IsGeneral
          and HasAncType warcouncil
;          and Trait Wealth < 9
        and Trait DefiedOrders <= 3

    Affects Wealth  1  Chance  100
    Affects Earn  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Hundreds  1  Chance  100
;wc add Earnings, another 100 per turn, in any settlement, during any order period, plus previous gov earnings, 100 to 200.
;------------------------------------------
Trigger EstatesEarn1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and Trait Estates = 2
;          and Trait Wealth < 9
        and Trait DefiedOrders <= 3

    Affects Earn  1  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects Hundreds  1  Chance  100

; Earn 100 for estate owners (level 2 = 1 estate, level 3 = 2 estates or larger one)
;------------------------------------------
Trigger EstatesEarn2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and Trait Estates = 3
;          and Trait Wealth < 9
        and Trait DefiedOrders <= 3

    Affects Earn  2  Chance  100
    Affects Wealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects Hundreds  2  Chance  100

; Earn 200 for great estate owners (level 2 = 1 estate, level 3 = 2 estates or larger one)
;------------------------------------------
; END SECTION 6 for earnings (max -900), but used double reckoner
; Needed for Additions Or Both Additions and Deductions pt 1
;------------------------------------------
Trigger HundredsWealthCheckResetEndEarn1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1EndEarn1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2EndEarn1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions pt 2
;------------------------------------------
Trigger HundredsWealthCheckResetEndEarn2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1EndEarn2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2EndEarn2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEndEarn
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEndEarn
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; TAX RESETS (go at End turn, before any Taxes - following deductions at start turn.)
;------------------------------------------
Trigger TaxResetEnd1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Tax >= 5

    Affects TaxReset  6  Chance  100
    Affects Tax  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TaxResetEnd2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Tax >= 3

    Affects TaxReset  4  Chance  100
    Affects Tax  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TaxResetEnd3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Tax >= 2

    Affects TaxReset  3  Chance  100
    Affects Tax  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger TaxResetEnd4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Tax >= 1

    Affects TaxReset  2  Chance  100
    Affects Tax  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; SCUTAGE
;
; (FL Order & Gens order received operate independently, the op is planned so order recieved fast)
;------------------------------------------
Trigger ScutageOrderReset
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and Trait ExpeditionTaxOrder > 0
          and I_EventCounter militaryactive = 0

    Affects ExpeditionTaxOrderReset  2  Chance  100
    Affects ExpeditionTaxOrder  1  Chance  100

;FL scutage Order trait removed
; scutage reset only resets when applicable so gains can be used.removes from any player/ai and any gen.
;------------------------------------------
Trigger ScutageNewWCReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait ExpeditionTax > 0
          and HasAncType warcouncil

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  1  Chance  100

;New WC scutage trait removed
; scutage reset only resets when applicable so gains can be used.removes from any player/ai and WC.
;------------------------------------------
Trigger ScutageNewFLReset
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and Trait ExpeditionTax > 0

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  1  Chance  100

;New WC scutage trait removed
; scutage reset only resets when applicable so gains can be used.removes from any player/ai and WC.
;------------------------------------------
Trigger ScutageReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait ExpeditionTax > 0
          and I_EventCounter militaryactive = 0

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  1  Chance  100

;gens scutage trait removed
; scutage reset only resets when applicable so gains can be used.removes from any player/ai and any gen.
;------------------------------------------
Trigger ScutageResetBanished
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait ExpeditionTax > 0
          and Trait DefiedOrders = 4

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  1  Chance  100

;gens trait removed
; scutage reset for banished generals
;------------------------------------------
Trigger ScutageResetWeakGrip
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and Trait ExpeditionTax > 0
          and FactionLeaderTrait ReinsOfPower = 1
          and Attribute Loyalty <= 2

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  1  Chance  100

;gens trait removed
; scutage reset for all low loyalty generals with weak king after 1 payment
;------------------------------------------
Trigger ScutageOrdered
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
        and CharacterIsLocal
        and Trait ExpeditionTaxOrder = 0
        and I_EventCounter militaryactive = 1

    Affects ExpeditionTaxOrder  1  Chance  100

;logen scutage/taxes ordered whilst WC/King in foreign land
;------------------------------------------
Trigger ScutageLoGens
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
;        and GovernorTaxLevel <= tax_extortionate
        and CharacterIsLocal
        and Trait ExpeditionTax = 0
        and not IsFactionLeader
        and not HasAncType warcouncil
        and I_EventCounter militaryactive = 1
        and Trait DefiedOrders <= 3

    Affects ExpeditionTax  1  Chance  100

;Logens receive scutage trait (if not banished)
;logen scutage/taxes whilst others (WC/King) in foreign land
;------------------------------------------
Trigger ScutageCostGov_Claiming
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and GovernorTaxLevel <= tax_extortionate
        and Trait ExpeditionTax > 0
        and Trait HasWarChest = 1

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; scutage cost 100 for All Governors
;------------------------------------------
Trigger ScutageCostEstates_Claiming
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and Trait Estates >= 2
        and Trait ExpeditionTax > 0
        and Trait HasWarChest = 1

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; scutage cost 100 for estate owners (regardless of number of estates)
; Could add exemption for being in enemy land, but would that be unrealistic?
;------------------------------------------
Trigger ScutageCostGov_NotClaiming
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and GovernorTaxLevel <= tax_extortionate
        and Trait ExpeditionTax > 0
        and Trait RecruitedUnit < 1
        and Trait HasWarChest = 0

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; scutage cost 100 for All Governors
;------------------------------------------
Trigger ScutageCostEstates_NotClaiming
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and CharacterIsLocal
        and Trait Estates >= 2
        and Trait ExpeditionTax > 0
        and Trait RecruitedUnit < 1
        and Trait HasWarChest = 0

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; scutage cost 100 for estate owners (regardless of number of estates)
; Could add exemption for being in enemy land, but would that be unrealistic?
;------------------------------------------
;  Trained Unit Marker (part 2) (part 1 nr start of bgr triggers)
;------------------------------------------
Trigger Trained_Unit_Marker_Reset
    WhenToTest CharacterTurnEnd

    Condition Trait RecruitedUnit = 1

    Affects RecruitedUnitReset  1  Chance  100
;resets for ai and players
;------------------------------------------
; END SECTION  5 Scutage Tax (up to -200)
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndST
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndST
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndST
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEndST
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEndST
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; Ransoms & conquests for all generals
;------------------------------------------
Trigger RansomAllGensWealth_100
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 100
          and RansomAmount < 200
;          and Trait Wealth < 9

    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_200
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 200
          and RansomAmount < 300
;          and Trait Wealth < 9

    Affects Wealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  12  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_300
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 300
          and RansomAmount < 400
;          and Trait Wealth < 9

    Affects Wealth  3  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  13  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_400
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 400
          and RansomAmount < 500
;          and Trait Wealth < 9

    Affects Wealth  4  Chance  100
    Affects TreasuryCost  4  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  14  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_500
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 500
          and RansomAmount < 600
;          and Trait Wealth < 9

    Affects Wealth  5  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  15  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_600
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 600
          and RansomAmount < 700
;          and Trait Wealth < 9

    Affects Wealth  6  Chance  100
    Affects TreasuryCost  6  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  16  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_700
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 700
          and RansomAmount < 800
;          and Trait Wealth < 9

    Affects Wealth  7  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  17  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_800
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 800
          and RansomAmount < 900
;          and Trait Wealth < 9

    Affects Wealth  8  Chance  100
    Affects TreasuryCost  8  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  18  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomAllGensWealth_900
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 900
          and RansomAmount < 1000
;          and Trait Wealth < 9

    Affects Wealth  9  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  19  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
; Ransoms & conquests for ordinary generals
;------------------------------------------
Trigger RansomWealthy1
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 1000
;          and Trait Wealth < 9
          and not IsFactionLeader
          and not HasAncType warcouncil

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomWealthy2
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 2000
;          and Trait Wealth < 9
          and not IsFactionLeader
          and not HasAncType warcouncil

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 2 added
;------------------------------------------
Trigger RansomWealthy3
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 3000
;          and Trait Wealth < 9
          and not IsFactionLeader
          and not HasAncType warcouncil

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 3 added
;------------------------------------------
Trigger CaptureSettlementWealthy
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
;          and Trait Wealth < 9
          and not IsFactionLeader
          and not HasAncType warcouncil

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy1
    WhenToTest SackSettlement

    Condition CharacterIsLocal
;          and Trait Wealth < 9
          and not IsFactionLeader
          and not HasAncType warcouncil

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  22  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
; for FL
;(takes money for himself if less than adequate)
;------------------------------------------
Trigger RansomWealthyFL1
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 1000
          and Trait Wealth < 7
          and IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomWealthyFL2
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 2000
          and Trait Wealth < 7
          and IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 2 added
;------------------------------------------
Trigger RansomWealthyFL3
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 3000
          and Trait Wealth < 7
          and IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 3 added
;------------------------------------------
Trigger CaptureSettlementWealthyFL
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Wealth < 7
          and IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy1FL
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth < 7
          and IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
;(takes money for himself if at least adequate and treasury does not need it)
;------------------------------------------
Trigger RansomWealthyFL1T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 1000
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomWealthyFL2T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 2000
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 2 added
;------------------------------------------
Trigger RansomWealthyFL3T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 3000
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 10000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 3 added
;------------------------------------------
Trigger CaptureSettlementWealthyFLT
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy1FLT
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy2FLT
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and IsFactionLeader
          and Treasury > 10000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
; for WCs
;(take money for themselves if less than adequate wealth)
;------------------------------------------
Trigger RansomWealthyWC1
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 1000
          and Trait Wealth < 7
          and HasAncType warcouncil
          and not IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomWealthyWC2
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 2000
          and Trait Wealth < 7
          and HasAncType warcouncil
          and not IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 2 added
;------------------------------------------
Trigger RansomWealthyWC3
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 3000
          and Trait Wealth < 7
          and HasAncType warcouncil
          and not IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 3 added
;------------------------------------------
Trigger CaptureSettlementWealthyWC
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Wealth < 7
          and HasAncType warcouncil
          and not IsFactionLeader

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy1WC
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth < 7
          and HasAncType warcouncil
          and not IsFactionLeader

    Affects Wealth  20  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  22  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
;+2000
;------------------------------------------
; if wc has at least adequate wealth and treasury does not need the money
;------------------------------------------
Trigger RansomWealthyWC1T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 1000
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

; "< 9" necessarily means that if 9 then v rich donates all to faction (disabled).
;------------------------------------------
Trigger RansomWealthyWC2T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 2000
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 2 added
;------------------------------------------
Trigger RansomWealthyWC3T
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition RansomType ransom
          and CharacterIsLocal
          and RansomAmount >= 3000
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 10000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;up to 3 added
;------------------------------------------
Trigger CaptureSettlementWealthyWCT
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy1WCT
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 5000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
Trigger SackWealthy2WCT
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Wealth >= 7
          and HasAncType warcouncil
          and not IsFactionLeader
          and Treasury > 10000

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  21  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;------------------------------------------
;Trigger OccupySettlementWealthy
;    WhenToTest OccupySettlement
;
;    Condition CharacterIsLocal
;;          and Trait Wealth < 9
;
;    Affects Wealth  9  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;    Affects Hundreds  9  Chance  100
;
;------------------------------------------
;Trigger SackWealthy2
;    WhenToTest SackSettlement
;
;    Condition CharacterIsLocal
;          and Trait Wealth < 9
;
;    Affects Wealth  9  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;    Affects Hundreds  9  Chance  100
;up to 2 added
;------------------------------------------
;Trigger ExterminateWealthy1
;    WhenToTest ExterminatePopulation
;
;    Condition CharacterIsLocal
;          and Trait Wealth < 9
;
;    Affects Wealth  9  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;    Affects Hundreds  9  Chance  100
;
;------------------------------------------
;Trigger ExterminateWealthy2
;    WhenToTest ExterminatePopulation
;
;    Condition CharacterIsLocal
;          and Trait Wealth < 9
;
;    Affects Wealth  9  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;adds up to 2
;------------------------------------------
;------------------------------------------
; Recruiting Costs For Non Warchest holders.---inflation
;------------------------------------------
Trigger RecruitCostAllUnits
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait HasWarchest = 0

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MilitaryExpenses  1  Chance  100
;    Affects Cost  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostAllUnits_Inflation
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait HasWarchest = 0
          and I_EventCounter inflationon = 1

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs another 100
;------------------------------------------
Trigger RecruitCostHeavy
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitClass heavy
        and CharacterIsLocal
          and Trait HasWarchest = 0

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MilitaryExpenses  1  Chance  100
;    Affects Cost  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostHeavy_Inflation
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitClass heavy
        and CharacterIsLocal
          and Trait HasWarchest = 0
          and I_EventCounter inflationon = 1

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs another 100
;------------------------------------------
Trigger RecruitCostCavalry
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory cavalry
        and CharacterIsLocal
          and Trait HasWarchest = 0

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MilitaryExpenses  1  Chance  100
;    Affects Cost  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostCavalry_Inflation
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory cavalry
        and CharacterIsLocal
          and Trait HasWarchest = 0
          and I_EventCounter inflationon = 1

    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;recruiting costs another 100
;------------------------------------------
Trigger RecruitCostSiege
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory siege
        and CharacterIsLocal
          and Trait HasWarchest = 0

    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MilitaryExpenses  2  Chance  100
;    Affects Cost  2  Chance  100
    Affects MinusHundreds  2  Chance  100
;recruiting costs 200
;------------------------------------------
Trigger RecruitCostSiege_Inflation
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory siege
        and CharacterIsLocal
          and Trait HasWarchest = 0
          and I_EventCounter inflationon = 1

    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100
;recruiting costs another 200
;------------------------------------------
Trigger RecruitCostShip
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory ship
        and CharacterIsLocal
          and Trait HasWarchest = 0

    Affects Poverty  4  Chance  100
    Affects Wealth  1  Chance  100
    Affects MilitaryExpenses  3  Chance  100
;    Affects Cost  3  Chance  100
    Affects MinusHundreds  3  Chance  100
;recruiting costs 300 i.e 3 extra: 4 total
;------------------------------------------
Trigger RecruitCostShip_Inflation
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory ship
        and CharacterIsLocal
          and Trait HasWarchest = 0
          and I_EventCounter inflationon = 1

    Affects Poverty  4  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  3  Chance  100
;recruiting costs another 300 i.e 3 extra: 8 total
;------------------------------------------
; Military Expenses For Authorised Generals.
;
; Authorised gens just take the money from the treasury via the settlement instantly
;so wealth effectively unaffected
;------------------------------------------
Trigger RecruitCostAllUnitsME
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1

    Affects MilitaryExpenses  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostHeavyME
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitClass heavy
        and CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1

    Affects MilitaryExpenses  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostCavalryME
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory cavalry
        and CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1

    Affects MilitaryExpenses  1  Chance  100
;recruiting costs 100
;------------------------------------------
Trigger RecruitCostSiegeME
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory siege
        and CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1

    Affects MilitaryExpenses  2  Chance  100
;recruiting costs 200
;------------------------------------------
Trigger RecruitCostShipME
    WhenToTest GovernorUnitTrained

    Condition TrainedUnitCategory ship
        and CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1

    Affects MilitaryExpenses  3  Chance  100
;recruiting costs 300 i.e 3 extra: 4 total
;------------------------------------------
; Mercenary Section
;------------------------------------------
Trigger HireMercenariesCostReset1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait MercHire >= 3

    Affects MercHireReset  4  Chance  100
    Affects MercHire  1  Chance  100

;for upto 9.
;Ensures any remaining value over 9 is there to be duducted next turn
;------------------------------------------
Trigger HireMercenariesCostReset2
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait MercHire >= 3

    Affects MercHireReset  4  Chance  100
    Affects MercHire  1  Chance  100

;------------------------------------------
Trigger HireMercenariesCostReset3
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait MercHire >= 2

    Affects MercHireReset  3  Chance  100
    Affects MercHire  1  Chance  100

;------------------------------------------
Trigger HireMercenariesCostReset4
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait MercHire >= 1

    Affects MercHireReset  2  Chance  100
    Affects MercHire  1  Chance  100

;------------------------------------------
Trigger HireMercenariesCost
    WhenToTest HireMercenaries

    Condition CharacterIsLocal

    Affects MercHire  1  Chance  100
    Affects Poverty  4  Chance  100
    Affects Wealth  1  Chance  100
    Affects Cost  3  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects MilitaryExpenses  3  Chance  100
;    Affects MinusHundreds  3  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  20  Chance  100
    Affects Hundreds  17  Chance  100

;recruiting costs flat 300 per unit. Amount now unchangeable due to script for noble summary.
;------------------------------------------
Trigger HireMercenariesCost_Inflation
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and I_EventCounter inflationon = 1

    Affects Poverty  4  Chance  100
    Affects Wealth  1  Chance  100
    Affects Cost  3  Chance  100
    Affects TreasuryCost  3  Chance  100
    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100
    Affects MinusHundreds  20  Chance  100
    Affects Hundreds  17  Chance  100

;ME extra, Treasury costs, handled in script.
;recruiting costs another flat 300 per unit. Amount now unchangeable due to script for noble summary.
;------------------------------------------
;Trigger DefyTraining
;    WhenToTest GovernorUnitTrained
;
;    Condition not UnitType Peasant Archers
;          and IsGeneral
;          and FactionIsLocal
;
;    Affects Arse  1  Chance  100
;----------------------------------------------------------------------------------test trigger only !!!!!!!!!!!!!!!!
;------------------------------------------
;Relative Military size to Population size Recruitment Limits
;------------------------------------------
Trigger RecruitmentPopLimitResetGens
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and Trait RecruitmentLimited = 1

    Affects RecruitmentLimited -1  Chance  100

;resets recruitment limited for logens & WCs 22-05-08
;------------------------------------------
Trigger RecruitmentPopLimitGain1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait RecruitmentLimited = 1

    Affects GainRL  1  Chance  100

;gainmessage has been triggered in a prior turn
;------------------------------------------
Trigger RecruitmentPopLimitReset1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait RecruitmentLimited = 1

    Affects RecruitmentLimited -1  Chance  100

;------------------------------------------experiment. cannot reset per turn cos will cause gainmessage per turn.so if 1 then add 1 so 1 =2, to reset at end. can i go past thresh?
Trigger RecruitmentPopLimit1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 6
          and FactionScoreRank regions >= 7

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimit2
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 5
          and FactionScoreRank regions >= 6

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimit3
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 4
          and FactionScoreRank regions >= 5

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimit4
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 3
          and FactionScoreRank regions >= 4

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimit5
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 2
          and FactionScoreRank regions >= 3

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimit6
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank military = 1
          and FactionScoreRank regions >= 2

    Affects RecruitmentLimited  1  Chance  100

;------------------------------------------
Trigger RecruitmentPopLimitGens
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and FactionLeaderTrait RecruitmentLimited = 1
          and Trait RecruitmentLimited < 1

    Affects RecruitmentLimited  1  Chance  100

;Sets recruitment limited for logens & WCs 22-05-08
;------------------------------------------
Trigger RecruitmentPopLimitGain2
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait RecruitmentLimited = 1
          and Trait GainRL = 0

    Affects RecruitmentLimited  1  Chance  100
    Affects RecruitmentLimited -1  Chance  100

;if gainmessage has been triggered in a prior turn activate gainmessage (level 2 of Recruitment limited) then put back to level 1
;------------------------------------------
Trigger RecruitmentPopLimitGain3
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait RecruitmentLimited = 0
          and Trait GainRL = 1

    Affects RecruitmentLimited  3  Chance  100
    Affects RecruitmentLimited -3  Chance  100

;if gainmessage has been triggered in a prior turn activate gainmessage (level 3 of Recruitment limited: Recruits available) then put back to level 0
;------------------------------------------
Trigger RecruitmentPopLimitReset2
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait GainRL = 1

    Affects GainRL -1  Chance  100

;reset gain counter
;------------------------------------------
;
; Faction Zeal SectionFL for global monitering
;
;Faction Zeal will rise and fall with some inbuilt delay after the conditions that cause it come into being.
;This means Faction Zeal will not immediately jump from 1 extreme to another.
;------------------------------------------
Trigger ZealReductionFL1a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions >= 7
          and Trait FactionZeal > 1

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100

;reduce Zeal by 1 if regions rank is 5th or less and zeal > default (1)
;------------------------------------------
Trigger ZealReductionFL1b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions >= 7
          and Trait FactionZeal < 1

    Affects FactionZeal  1  Chance  100

;increase Zeal by 1 if regions rank is 5th or less and zeal < default (1)
;------------------------------------------
Trigger ZealReductionFL2a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 6
          and FactionScoreRank regions >= 5
          and Trait FactionZeal > 2

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100

;reduce zeal by 1 if regions rank is 4th but zeal is higher than it should be. Next few trigs are similar for higher and lower.
;------------------------------------------
Trigger ZealReductionFL2b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 6
          and FactionScoreRank regions >= 5
          and Trait FactionZeal < 2

    Affects FactionZeal  1  Chance  100
;------------------------------------------
Trigger ZealReductionFL3a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 4
          and FactionScoreRank regions >= 3
          and Trait FactionZeal > 3

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100
;------------------------------------------
Trigger ZealReductionFL3b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 4
          and FactionScoreRank regions >= 3
          and Trait FactionZeal < 3

    Affects FactionZeal  1  Chance  100
;------------------------------------------
Trigger ZealReductionFL4a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions = 2
          and Trait FactionZeal > 4

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100

; (at this level King alone reserves right to knight, hence zeal loss for WarCouncilMember)
; but Heir is still loyal as ever
;------------------------------------------
Trigger ZealReductionFL4b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions = 2
          and Trait FactionZeal < 4

    Affects FactionZeal  1  Chance  100

; (at this level King alone reserves right to knight, hence zeal loss for WarCouncilMember)
; but Heir is still loyal as ever
;------------------------------------------
Trigger ZealReductionFL5
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions = 1
          and Trait FactionZeal < 5

    Affects FactionZeal  1  Chance  100

; (at this level King alone reserves right to knight, hence zeal loss for Heir and WarCouncilMember)
;------------------------------------------fl6a BEWARE. MAY INTRODUCE GAINMESSAGE EVERY TURN USED (USES RESET)
Trigger ZealReductionFL6a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait FactionZeal > 1
          and FactionScorePercent regions <= 25

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100

;reduces factionzeal if less than 1/4 strength of greatest faction
; two triggers reduce factionzeal by up to 2 points to counteract and reduce over any 1 point increase gained in previous trigs due to high rank
;------------------------------------------fl6b BEWARE. MAY INTRODUCE GAINMESSAGE EVERY TURN USED (USES RESET)
Trigger ZealReductionFL6b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait FactionZeal > 1
          and FactionScorePercent regions <= 25

    Affects ZealReset  2  Chance  100
    Affects FactionZeal  1  Chance  100

;reduces factionzeal loss if less than 1/4 strength of greatest faction
; two triggers reduce factionzeal by up to 2 points to counteract and reduce over any 1 point increase gained in previous trigs due to high rank
;------------------------------------------
;
; General Zeal Section for individual effects
;
;------------------------------------------resets for all generals for if ever a gen loses WC he will need this(though does not currently happen(does now)).
Trigger GeneralZealReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait GeneralZeal > 2

    Affects GeneralZealReset  4  Chance  100
    Affects GeneralZeal  1  Chance  100

;these 3 triggers drop all values to 0
;------------------------------------------
Trigger GeneralZealReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait GeneralZeal > 0

    Affects GeneralZealReset  2  Chance  100
    Affects GeneralZeal  1  Chance  100

;------------------------------------------
Trigger GeneralZealReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait GeneralZeal > 0

    Affects GeneralZealReset  2  Chance  100
    Affects GeneralZeal  1  Chance  100

;------------------------------------------PROBLEM resetting every turn means any gainmessages appear every turn, hence separate traits for FL
Trigger ZealReduction1a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and not HasAncType warcouncil
          and FactionLeaderTrait FactionZeal = 1

    Affects GeneralZeal  1  Chance  100

; GeneralZeal shows the effect on a character who is affected by factionzeal: not shown on unaffected characters, except the default level(1).
;if Faction Zeal = 1 then default level (1)
;------------------------------------------full is zeal gained by all generals
Trigger ZealReduction2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and not HasAncType warcouncil
;          and FactionScorePercent military > 50
;          and FactionScorePercent military <= 70
;          and FactionScoreRank military = 4
;          and FactionScorePercent military > 50
          and FactionLeaderTrait FactionZeal = 2

    Affects GeneralZeal  2  Chance  100
;------------------------------------------med zeal not affecting WC
Trigger ZealReduction3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and not HasAncType warcouncil
;          and FactionScorePercent military > 70
;          and FactionScorePercent military <= 80
;          and FactionScoreRank military = 3
;          and FactionScorePercent military > 50
          and FactionLeaderTrait FactionZeal = 3

    Affects GeneralZeal  3  Chance  100
;------------------------------------------low zeal not affecting WCMs
Trigger ZealReduction4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
;          and FactionScorePercent military > 80
;          and FactionScorePercent military <= 90
;          and FactionScoreRank military = 2
;          and FactionScorePercent military > 50
          and FactionLeaderTrait FactionZeal = 4

    Affects GeneralZeal  4  Chance  100

; (at this level King and heir reserves right to knight) WCMs always unaffected by zeal
;------------------------------------------
Trigger ZealReduction5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
;          and FactionScorePercent military > 90
;          and FactionScoreRank military = 1
;          and FactionScorePercent military > 50
          and FactionLeaderTrait FactionZeal = 5

    Affects GeneralZeal  5  Chance  100

; (at this level King alone reserves right to knight(CHANGED to king and heir) in other trait). WCMs always unaffected by zeal
;------------------------------------------
; Stop Start Recruit Section
;------------------------------------------
Trigger StopRecruitReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 1

    Affects StartR  2  Chance  100
    Affects StopR  1  Chance  100

;------------------------------------------
Trigger CrusadeTimerReset1
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
and Trait CrusadeTimeOut = 1

Affects CrusadeTimeOutReset 9 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
; all 9 triggers not required, less would just take more turns to reenable recruitment.
;timer hinges on FL so takes longer to halt recruitment if becomes FL during crusade joining period.
;------------------------------------------
Trigger CrusadeTimerReset2
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
; and Trait CrusadeTimeOut = 1

Affects CrusadeTimeOutReset 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset3
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
and Trait CrusadeTimeOutReset = 1

Affects CrusadeTimeOut 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset4
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
; and Trait CrusadeTimeOut = 1

Affects CrusadeTimeOutReset 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset5
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
and Trait CrusadeTimeOutReset = 1

Affects CrusadeTimeOut 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset6
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
; and Trait CrusadeTimeOut = 1

Affects CrusadeTimeOutReset 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset7
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
and Trait CrusadeTimeOutReset = 1

Affects CrusadeTimeOut 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset8
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
; and Trait CrusadeTimeOut = 1

Affects CrusadeTimeOutReset 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimerReset9
WhenToTest CharacterTurnEnd

Condition IsFactionLeader
and Trait ReligiousWarTax < 1
; and CharacterIsLocal
and Trait CrusadeTimeOutReset = 1

Affects CrusadeTimeOut 1 Chance 100

;would need to rewrite this for mods that can alter religion from catholic?
;------------------------------------------
Trigger CrusadeTimer
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait ReligiousWarTax = 1
          and Trait CrusadeTimeOut < 1

    Affects CrusadeTimeOut 1  Chance  100

;------------------------------------------
Trigger CrusadeStopsRecruits
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and FactionLeaderTrait ReligiousWarTax = 1
          and Trait StopR < 1
          and FactionLeaderTrait CrusadeTimeOut = 1
          and PopulationOwnReligion >= 80
          and not AtSea

    Affects StopR 1  Chance  100

;Stops 1 tier of recruitment when crusade on, not joined, join time expired, Settlement Religious.
;------------------------------------------
; (wealth stopr moved to end of traits file)
;------------------------------------------
;Trigger StopRecruitNoblesLevyMaxed
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait StopR = 0
;          and Trait NobleLevy = 9
;
;    Affects StopR  1  Chance  100
;
;------------------------------------------
Trigger StopRecruitFarUnRecReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentUnauthorised >= 1

    Affects RecruitmentUnauthorised -1  Chance  100

;resets all gens descriptive trait
;------------------------------------------
Trigger StopRecruitFarUnRec
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and not IsFactionHeir
          and Trait HasWarchest = 0
          and CharacterIsLocal
          and DistanceCapital > 75
          and Attribute Command <= 2
          and not HasAncType warcouncil
          and FactionLeaderTrait CentralisedPower = 2
          and Trait RecruitmentUnauthorised < 1
          and not Trait JrWarCouncillor = 2

    Affects RecruitmentUnauthorised  1  Chance  100

;descriptive trait
; During Right to knight restricted level only, the general cannot recruit average units either if distance capital >50 (011008, now >75)
;need 3 command or more to attract recruits when far from the capital due to kings restriction of unauthorised armies.
;by default would also need piety if another general was competing to govern
;------------------------------------------
Trigger StopRecruitFar
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and not IsFactionHeir
          and Trait HasWarchest = 0
          and not HasAncType warcouncil
          and CharacterIsLocal
          and Trait StopR = 0
          and DistanceCapital > 75
          and Attribute Command <= 2
          and FactionLeaderTrait CentralisedPower = 2
          and not Trait JrWarCouncillor = 2

    Affects StopR  1  Chance  100

;during right to knight restricted only, cos later levels restrict anyway, despite distance.
;need 4 command or more to attract recruits when far from the capital due to kings restriction of unauthorised armies.
;by default would also need piety if another general was competing to govern
;------------------------------------------
Trigger StopRecruitReligion1New
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and PopulationOwnReligion < 70
          and FactionLeaderTrait FactionZeal <= 1
          and not AtSea

    Affects StopR  1  Chance  100

;affects all
;------------------------------------------
Trigger StopRecruitReligion2New
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and PopulationOwnReligion < 75
          and FactionLeaderTrait FactionZeal = 2
          and not AtSea

    Affects StopR  1  Chance  100

;affects all
;------------------------------------------
Trigger StopRecruitReligion3New
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and PopulationOwnReligion < 80
          and FactionLeaderTrait FactionZeal = 3
          and not AtSea

    Affects StopR  1  Chance  100

;------------------------------------------
Trigger StopRecruitReligion4New
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and PopulationOwnReligion < 85
          and FactionLeaderTrait FactionZeal = 4
          and not AtSea

    Affects StopR  1  Chance  100

;------------------------------------------
Trigger StopRecruitReligion5New
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and PopulationOwnReligion < 90
          and FactionLeaderTrait FactionZeal > 4
          and not AtSea

    Affects StopR  1  Chance  100

;------------------------------------------
;
; Centralisation and Professionalism Section
;
;------------------------------------------Trait CentralisedPower Must not reset at start due to gainmessages
Trigger CentralisationFL1a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions >= 11
          and Trait CentralisedPower = 0

    Affects CentralisedPower  1  Chance  100
; WC always retains ability to attack-----------universal recruitment
;------------------------------------------
Trigger CentralisationFL1b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions >= 11
          and Trait CentralisedPower >= 2

    Affects CentralisedPower -1  Chance  100
; WC always retains ability to attack-----------universal recruitment
;------------------------------------------
Trigger CentralisationFL2a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 10
          and FactionScoreRank regions >= 7
          and Trait CentralisedPower <= 1

    Affects CentralisedPower  1  Chance  100
; WC always retains ability to attack-----------stops recruiting high units
;------------------------------------------
Trigger CentralisationFL2b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 10
          and FactionScoreRank regions >= 7
          and Trait CentralisedPower >= 3

    Affects CentralisedPower -1  Chance  100
; WC always retains ability to attack-----------stops recruiting high units
;------------------------------------------
Trigger CentralisationFL3a
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 6
          and FactionScoreRank regions >= 3
          and Trait CentralisedPower <= 2

    Affects CentralisedPower  1  Chance  100
; FL always retains ability to attack-----------still stops recruiting middle units (and high)
;------------------------------------------
Trigger CentralisationFL3b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 6
          and FactionScoreRank regions >= 3
          and Trait CentralisedPower = 4

    Affects CentralisedPower -1  Chance  100
; FL always retains ability to attack-----------still stops recruiting middle units (and high)
;------------------------------------------
Trigger CentralisationFL4
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and FactionScoreRank regions <= 2
          and Trait CentralisedPower <= 3

    Affects CentralisedPower  1  Chance  100
; FL always retains ability to attack-----------still stops recruiting  middle and high units+ Knights
;------------------------------------------
;
; Centralisation Effects Section (can use a reset and needs to)
;
;------------------------------------------
Trigger StopRecruitCentralisationReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait CentralisedPowerEffect = 1

    Affects CentralisedPowerReset  2  Chance  100
    Affects CentralisedPowerEffect  1  Chance  100

;removes high unit production from logens each turn (is put back next trigger if correct conditions exist)
;also removes CPE from any other gen (i.e.WC and king) who does not/must not require it.
;------------------------------------------
Trigger StopRecruitCentralisation2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 1
          and not HasAncType warchest
          and FactionLeaderTrait CentralisedPower = 2
          and Trait StopR = 0

    Affects StopR  1  Chance  100

; (Logens done because no CPE by default)
; new (can affect king and WCs) - Has Authority, but no Pro Trainers = stop recruitment
; (Old - WC always retains ability to recruit)-----------stops recruiting LOGEN high units....CentralisationReset trigger should obviate this trigger
; found bug 310809 need and Trait StopR = 0 or will go many points into trait making reset not immediately effective for as many turns as was wrong
;------------------------------------------
Trigger StopRecruitCentralisation3a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 0
          and Trait StopR = 0
;          and FactionScoreRank regions <= 6
;          and FactionScoreRank regions >= 3
          and FactionLeaderTrait CentralisedPower = 3
          and not Trait JrWarCouncillor = 2

    Affects StopR  1  Chance  100
; (Old - FL always retains ability to recruit)-----------still stops LOGEN recruiting high units, now stops middle too (leaving only militia, peasants and locals)
; New All gens need pro trainers and RecAuth to recruit after cp >= 2
;------------------------------------------
Trigger StopRecruitCentralisation3b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warchest
          and Trait StopR = 0
;          and FactionScoreRank regions <= 6
;          and FactionScoreRank regions >= 3
          and FactionLeaderTrait CentralisedPower = 3

    Affects StopR  1  Chance  100
; (Old - FL always retains ability to recruit)-----------still stops LOGEN recruiting high units, now stops middle too (leaving only militia, peasants and locals)
; New All gens need pro trainers and RecAuth to recruit after cp >= 2
;------------------------------------------
;Trigger StopRecruitCentralisation4
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and not IsFactionLeader
;          and not IsFactionHeir
;          and Trait StopR = 0
;;          and FactionScoreRank regions <= 2
;          and FactionLeaderTrait CentralisedPower = 4
;
;    Affects StopR  1  Chance  100
; (Old - FL always retains ability to recruit)-----------still stops recruiting LOGEN middle units+ WCM Knights
;------------------------------------------
Trigger StopRecruitCentralisation4a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 0
          and Trait StopR = 0
;          and FactionScoreRank regions <= 2
          and FactionLeaderTrait CentralisedPower = 4
          and not Trait JrWarCouncillor = 2

    Affects StopR  1  Chance  100
; (Old - FL always retains ability to recruit)-----------still stops recruiting LOGEN middle units+ WCM Knights. As above but stops heir if he does not have WCM
; New All gens need pro trainers and RecAuth to recruit after cp >= 2
;------------------------------------------
Trigger StopRecruitCentralisation4b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType warchest
          and Trait StopR = 0
;          and FactionScoreRank regions <= 2
          and FactionLeaderTrait CentralisedPower = 4

    Affects StopR  1  Chance  100
; (Old - FL always retains ability to recruit)-----------still stops recruiting LOGEN middle units+ WCM Knights. As above but stops heir if he does not have WCM
; New All gens need pro trainers and RecAuth to recruit after cp >= 2
;------------------------------------------
;Trigger StopRecruitPowerful5
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait StopR = 0
;          and FactionScorePercent military > 95
;
;    Affects StopR  1  Chance  100
; FL always retains ability to recruit-----------still stops recruiting LOGEN middle units+ LoCoN Knights+Heir Knights+KING Knights UNUSED
;------------------------------------------
;Recruitment Limited by region/power ratio effects section
;------------------------------------------
Trigger StopRecruitmentLimited1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and FactionLeaderTrait RecruitmentLimited = 1

    Affects StopR  1  Chance  100

;earlier region/power ratio triggers take effect here. Stops 1 tier of recruitment
;------------------------------------------
Trigger StopRecruitmentLimited2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait CentralisedPowerEffect = 1
          and FactionLeaderTrait RecruitmentLimited = 1

    Affects CentralisedPowerReset  2  Chance  100
    Affects CentralisedPowerEffect  1  Chance  100

;earlier region/power ratio triggers take effect here. Stops another tier of recruitment
;------------------------------------------
Trigger StopRecruitmentLimitedJrWC1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitLimit >= 1
          and Trait JrWCOff < 1
          and FactionLeaderTrait RecruitmentLimited = 1

    Affects JrWCOff  1  Chance  100

;earlier region/power ratio triggers take effect here. Stops 1 tier of recruitment
;------------------------------------------
; Orders Section (orders may sometimes be seen by those who they do not apply to too)
;------------------------------------------
Trigger OrdersReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 3

    Affects Orders -2  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger OrdersReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 2

    Affects Orders -2  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger OrdersReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 1

    Affects Orders -1  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger Orders1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and FactionLeaderTrait CentralisedPower = 1

    Affects Orders  1  Chance  100
;------------------------------------------
Trigger Orders2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
;          and not HasAncType warcouncil
          and Trait HasWarchest = 0
          and FactionLeaderTrait CentralisedPower = 2

    Affects Orders  2  Chance  100

; orders to all except king, Warchest holders (text is specific)
;------------------------------------------
Trigger Orders3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
;          and not HasAncType warcouncil
;          and Trait HasWarchest = 0
          and FactionLeaderTrait CentralisedPower = 3

    Affects Orders  3  Chance  100

; NEW orders to all but king
;------------------------------------------
Trigger Orders4new
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and FactionLeaderTrait CentralisedPower = 4

    Affects Orders  4  Chance  100

; NEW orders to all but king
;------------------------------------------
;Trigger Orders4heir
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and not IsFactionLeader
;          and IsFactionHeir
;          and not HasAncType warcouncil
;          and Trait HasWarchest = 0
;          and FactionLeaderTrait CentralisedPower = 4
;
;    Affects Orders  4  Chance  100
;
; orders to heir when not in WC
;new only goes to non WC, non Warchest Gens
;------------------------------------------
;Trigger Orders4
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and not IsFactionLeader
;          and not IsFactionHeir
;          and FactionLeaderTrait CentralisedPower = 4
;
;    Affects Orders  4  Chance  100
;
; orders to all except heir or king
;------------------------------------------
; Supply System
;------------------------------------------
Trigger SupplyStartAllFactions
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait Supplies < 1

    Affects Supplies  1  Chance  100
    Affects Turnsaway  12  Chance  100

;give supplies at start of turn to all local gens who don't have them. Free of cost as this will mainly be turn 0 characters.
;rest of triggers only reduce in enemy and home land and only add in home settlement, not land. Removed  and CharacterIsLocal
;------------------------------------------
Trigger Poor_Logistics
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not EndedInSettlement
          and InEnemyLands
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 1

    Affects PoorLogisticsBGR  1  Chance  100

;only adds this if currently does not have and allowed supplies to run out last turn. does not trigger in ownlands. does not affect good logistician. Extra Done 5 to 6.
;this trigger must always come before the supply processing code.
;------------------------------------------
;Trigger MerchantSupplies
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait Supplies > 1
;          and I_CharacterTypeNearCharacterType byzantium merchant 1 byzantium general
;
;    Affects SuppliesAdded  2  Chance  100
;    Affects Supplies  1  Chance  100
;
;attempt at supply by merchant. left in for poss future.
;------------------------------------------
Trigger CapturedSuppliesSettlementNoExtra
    WhenToTest GeneralCaptureSettlement

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

; for capturing settlement. Has No Emergency Supplies Jump Level
;------------------------------------------
Trigger CapturedSuppliesSettlement25
    WhenToTest GeneralCaptureSettlement

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies > 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

; for capturing settlement 25%. May get 25% more from postbattle trigs.
;------------------------------------------
Trigger CapturedSuppliesNoExtra
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and PercentageEnemyKilled > 25
          and BattleOdds < 2
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;supplies won after a battle adds 1/4 back to stockif room and if 25% enemy killed (so no reward for retreating enemy). Has No Emergency Supplies Jump Level
;enemy must be greater then half players army
;------------------------------------------
Trigger CapturedSupplies
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and PercentageEnemyKilled > 25
          and BattleOdds < 2
          and Trait Supplies > 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;supplies won after a battle adds 1/4 back to stockif room and if 25% enemy killed (so no reward for retreating enemy)
;------------------------------------------
Trigger CapturedSupplies2
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and PercentageEnemyKilled > 40
          and BattleOdds < 2
          and Trait Supplies > 1
          and not I_ConflictType Siege
          and PercentageUnitAttribute general_unit < 7

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;supplies won after a battle adds another 1/4 back to stock if room and 40% enemy killed. Not siege
;------------------------------------------
Trigger EnemyCapturesSupplies
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and not WonBattle
          and PercentageOfArmyKilled > 50
          and Trait Supplies <= 5

    Affects Supplies  1  Chance  100

;supplies lost after a battle 1/4 and 50% army lost. Wont punish a clever withdrawal, which would keep supplies. upto 25% supplydrop. Changed 4 to 5 Extra done.
;------------------------------------------
Trigger EnemyCapturesSupplies2
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and not WonBattle
          and PercentageOfArmyKilled > 50
          and Trait Supplies <= 5

    Affects Supplies  1  Chance  50

;supplies lost after a battle 1/4 and 50% army lost. Wont punish a clever withdrawal, which would keep supplies.upto 50% supplydrop. chance 50. 4 to 5 Extra Done
;------------------------------------------
Trigger EnemyCapturesSupplies3
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and not WonBattle
          and PercentageOfArmyKilled > 50
          and Trait Supplies <= 5

    Affects Supplies  1  Chance  50

;supplies lost after a battle 1/4 and 50% army lost. Wont punish a clever withdrawal, which would keep supplies.upto 75% supplydrop. chance 50. 4 to 5 Extra Done
;------------------------------------------
Trigger EnemyCapturesSupplies4
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and not WonBattle
          and PercentageOfArmyKilled > 50
          and Trait Supplies <= 5

    Affects Supplies  1  Chance  50

;supplies lost after a battle 1/4 and 50% army lost. Wont punish a clever withdrawal, which would keep supplies.upto 100% supplydrop. chance 50. 4 to 5 Extra Done
;------------------------------------------
; SupplyWagons
;------------------------------------------
Trigger SupplyWagonsReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType supplywagon
          and Trait SupplyWagon = 1

    Affects SupplyWagonReset  2  Chance  100
    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger SupplyWagonsReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType supplywagon
          and Trait SupplyWagon = 2

    Affects SupplyWagonReset  3  Chance  100
    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger SupplyWagonsReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType supplywagon
          and Trait SupplyWagon = 3

    Affects SupplyWagonReset  4  Chance  100
    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger SupplyWagonsReset4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType supplywagon
          and Trait SupplyWagon = 4

    Affects SupplyWagonReset  5  Chance  100
    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger SupplyWagonsReset5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not HasAncType supplywagon
          and Trait SupplyWagon = 5

    Affects SupplyWagonReset  6  Chance  100
    Affects SupplyWagon  1  Chance  100
;------------------------------------------
; Initialise Supply Wagon
;------------------------------------------
Trigger SupplyWagonsInitialise1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 0

    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger SupplyWagonsInitialise2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 0

    Affects SupplyWagon  1  Chance  100
;------------------------------------------
; Transfer st to SupplyWagon
;------------------------------------------
Trigger stToSWTransfer1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 1
          and I_EventCounter st = 1

    Affects SupplyWagon  1  Chance  100
;------------------------------------------
Trigger stToSWTransfer2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 1
          and I_EventCounter st = 2

    Affects SupplyWagon  2  Chance  100
;------------------------------------------
Trigger stToSWTransfer3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 1
          and I_EventCounter st = 3

    Affects SupplyWagon  3  Chance  100
;------------------------------------------
Trigger stToSWTransfer4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon = 1
          and I_EventCounter st = 4

    Affects SupplyWagon  4  Chance  100
;------------------------------------------
; Transfer Supplies from SupplyWagon to Gen
;------------------------------------------
Trigger SWtoGenTransferJump
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon > 1
          and Trait Supplies = 6

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;------------------------------------------
Trigger SWtoGenTransfer1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon > 1
          and Trait Supplies > 1

    Affects SupplyWagonReset  2  Chance  100
    Affects SupplyWagon  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;------------------------------------------
Trigger SWtoGenTransfer2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon > 1
          and Trait Supplies > 1

    Affects SupplyWagonReset  2  Chance  100
    Affects SupplyWagon  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;------------------------------------------
Trigger SWtoGenTransfer3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon > 1
          and Trait Supplies > 1

    Affects SupplyWagonReset  2  Chance  100
    Affects SupplyWagon  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;------------------------------------------
Trigger SWtoGenTransfer4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and HasAncType supplywagon
          and Trait SupplyWagon > 1
          and Trait Supplies > 1

    Affects SupplyWagonReset  2  Chance  100
    Affects SupplyWagon  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;------------------------------------------
; New Region Reset for ForageIncrement and TIF
;covers new regions and supply ships reset
;------------------------------------------
; Implement "OR" to save triggers for timeinregion and armysize 0
; (Armysize currently is set to 1 if 0
; so the army size part is redundant, but may be useful in future.)
;------------------------------------------
Trigger CheckForNewRegionAnd2ndGensReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
;wealthcheck is a multipurpose check trait
;------------------------------------------
Trigger CheckForNewRegionAnd2ndGensSet1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and TimeInRegion = 1

    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger CheckForNewRegionAnd2ndGensSet2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ArmySize = 0
          and Trait WealthCheck = 0

    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger ForageSizeResetChip4NewRegion
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait ForageIncrement >= 4

    Affects ForageIncrementReset  5  Chance  100
    Affects ForageIncrement  1  Chance  100
; -4
;------------------------------------------
Trigger ForageSizeResetChip3NewRegion
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait ForageIncrement >= 3

    Affects ForageIncrementReset  4  Chance  100
    Affects ForageIncrement  1  Chance  100
; -3
;------------------------------------------
Trigger ForageSizeResetChip2NewRegion
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait ForageIncrement >= 2

    Affects ForageIncrementReset  3  Chance  100
    Affects ForageIncrement  1  Chance  100
; -2
;------------------------------------------
Trigger ForageSizeResetChip1NewRegion
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait ForageIncrement >= 1

    Affects ForageIncrementReset  2  Chance  100
    Affects ForageIncrement  1  Chance  100
; -1
;------------------------------------------
Trigger CountResetNewRegion1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait TimeInField = 1

    Affects TIFReset 10  Chance  100
    Affects TimeInField  9  Chance  100

; reset TIF from values of 1 or 3 or 2 ( 4 resets itself after decreasing supplies) to Zero. If MOVED TO NEW REGION May need "timeinregion=0" instead of 1
;------------------------------------------
Trigger CountResetNewRegion2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait TimeInField = 3

    Affects TIFReset 10  Chance  100
    Affects TimeInField  7  Chance  100

; reset TIF from values of 1 or 3 or 2 (4 resets itself after supply decrease) to Zero. If MOVED TO NEW REGION
;------------------------------------------
Trigger CountResetNewRegion3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait TimeInField = 2

    Affects TIFReset 10  Chance  100
    Affects TimeInField  8  Chance  100

; reset TIF if on 2 in ownland then move to enemyland, else goes to 3 next turn. .If MOVED TO NEW REGION.
;------------------------------------------
Trigger CountResetNewRegion4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait TimeInField = 4


    Affects TIFReset 10  Chance  100
    Affects TimeInField  6  Chance  100

; reset TIF if on 4 because both enemy and home region army were set to 4 when they triggered their supply decrease
;------------------------------------------
Trigger CheckForNewRegionAnd2ndGensReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
;------------------------------------------
; ForageIncrement Prior to FieldCount
;------------------------------------------
Trigger ForageIncSize1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait ForageIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 40
          and Trait ArmySize = 1
          and Trait TimeInField <= 3

    Affects ForageIncrement  2  Chance  100

; should ideally increment 1, but such a slow increment is bad for gameplay. Made 1/8 army same as 1/4.
; and Trait TimeInField >= 1 allows fresh forage to show without any increment for a turn
; before showing with a forageinc next turn
;------------------------------------------
Trigger ForageIncSize2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait ForageIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 20
;          and PercentageUnitAttribute general_unit < 40
          and Trait ArmySize = 2
          and Trait TimeInField <= 3

    Affects ForageIncrement  2  Chance  100

;------------------------------------------
Trigger ForageIncSize4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait ForageIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 10
;          and PercentageUnitAttribute general_unit < 20
          and Trait ArmySize = 3
          and Trait TimeInField <= 3

    Affects ForageIncrement  4  Chance  100

;------------------------------------------
Trigger ForageIncSize8
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait ForageIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit < 10
          and Trait ArmySize = 4
          and Trait TimeInField <= 3

    Affects ForageIncrement  8  Chance  100

;------------------------------------------
; Out of forage Reset
;------------------------------------------
Trigger CountResetAnyRegion4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TimeInField = 4
          and not EndedInEnemyZOC
          and not Trait Supplies = 6

    Affects TIFReset 10  Chance  100
    Affects TimeInField  6  Chance  100

; reset TIF if on 4 because both enemy and home region army were set to 4 when they triggered their supply decrease-OLD. NEW-Region Reset.ZOC triggers only on 1st contact
;------------------------------------------
Trigger FieldCountSetDefaultLvlFresh
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 0
          and not Trait ArmySize = 0
          and Trait ForageIncrement < 8

    Affects TimeInField  1  Chance  100

; Sets forage to fresh if none displayed. Without this, nothing displays in foraging until forageincrement = 8
; leaves TIF as 0 for any 2nd general
;------------------------------------------
Trigger FieldCountSetDefaultLvlWide
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 0
          and Trait ArmySize = 4
          and Trait ForageIncrement = 8

    Affects TimeInField  1  Chance  100

; Sets forage to wide (with following trigger) if none displayed & gen is 1st turn out with full army size.
; Without this, nothing displays in foraging until forageincrement = 8
; leaves TIF as 0 for any 2nd general
;------------------------------------------
Trigger FieldCount
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField <= 3
          and Trait ForageIncrement = 8

    Affects TimeInField  1  Chance  100

; Can only be 1 to 4. Increments each turn.
;------------------------------------------
; Forage inc reset. Disable some triggers if total reset not required.
; resets when 8 reached or ended in enemy zoc
;------------------------------------------
Trigger ForageSize8WealthCheckReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger ForageSize8Chip8
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ForageIncrement = 8

    Affects WealthCheck  1  Chance  100
    Affects ForageIncrementReset  9  Chance  100
    Affects ForageIncrement  1  Chance  100
; -8
;------------------------------------------
Trigger ForageInc_ZOC_Reset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and EndedInEnemyZOC
          and Trait WealthCheck < 1

    Affects WealthCheck  1  Chance  100

; also set wealthcheck to reset forageincrement if in ZOC
; regardless of current forage range or increment
;------------------------------------------
Trigger NoForage_ForageInc_Reset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait TimeInField = 4
          and Trait WealthCheck < 1

    Affects WealthCheck  1  Chance  100

; if no forage then remove forage increments too.
; if this trigger removed FI would wrap around
;e.g. If full army got No Forage/ForInc 7(1/8 left), would become Fresh forage/ForInc 7+8-8=7 again
;i.e. (expanded into next forage level). Which is only ok between fresh and scarce.
;------------------------------------------
Trigger ForageSize8ResetChip4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ForageIncrement >= 4
          and Trait WealthCheck = 1

    Affects ForageIncrementReset  5  Chance  100
    Affects ForageIncrement  1  Chance  100
; -4
;------------------------------------------
Trigger ForageSize8ResetChip3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ForageIncrement >= 3
          and Trait WealthCheck = 1

    Affects ForageIncrementReset  4  Chance  100
    Affects ForageIncrement  1  Chance  100
; -3
;------------------------------------------
Trigger ForageSize8ResetChip2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ForageIncrement >= 2
          and Trait WealthCheck = 1

    Affects ForageIncrementReset  3  Chance  100
    Affects ForageIncrement  1  Chance  100
; -2
;------------------------------------------
Trigger ForageSize8ResetChip1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait ForageIncrement >= 1
          and Trait WealthCheck = 1

    Affects ForageIncrementReset  2  Chance  100
    Affects ForageIncrement  1  Chance  100
; -1
;------------------------------------------
;Trigger ForageSize8PostChipSet8
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait ForageIncrement = 0
;          and Trait WealthCheck = 1
;
;    Affects WealthCheck -1  Chance  100
;    Affects ForageIncrement  8  Chance  100
;;+8 (mistake I think)
; sets all forageinc to 8 (with prior triggers) if needed subsequently
;------------------------------------------
Trigger ForageSize8WealthCheckReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger FieldCountZOC2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField <= 3
          and EndedInEnemyZOC

    Affects TimeInField  1  Chance  100

; increases fieldcount to 4 when in Enemy ZOC to display 4th level which is no foraging. part1
;------------------------------------------
Trigger FieldCountZOC3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField <= 3
          and EndedInEnemyZOC

    Affects TimeInField  1  Chance  100

; increases fieldcount to 4 when in Enemy ZOC. part2
;------------------------------------------
Trigger FieldCountZOC4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField <= 3
          and EndedInEnemyZOC

    Affects TimeInField  1  Chance  100

; increases fieldcount to 4 when in Enemy ZOC. part3
;------------------------------------------
Trigger SupplyWealthThouToHun_SGENE
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds for 1600
;------------------------------------------
Trigger SupplyWealthCheck_SGENEReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGENE1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects WealthCheck  1  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGENE2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects WealthCheck -1  Chance  100
    Affects Wealth  16  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGENE3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  16  Chance  100
;------------------------------------------
Trigger SupplyGetEncampedNoExtra1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;jumps to level 5 (emergency) if not good log so does not get emergency next trig.
;------------------------------------------
Trigger SupplyGetEncamped
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait Supplies > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;In camp, with own 50% religious land and with supplies reduced. Resupply 1/4
;min wealth requirement for any supplies is "poor" See sheet for method to avoid debt.
;1600
;------------------------------------------
Trigger SupplyShipReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SuppliedBySea > 0

    Affects SuppliedBySea -1  Chance  100

;keeps this trait set at 0 unless it fulfills trigger each turn. Fixed - moved this trigger from below supplyship1(suppliedbysea wasnt showing)(added"Trait"to suppliedbysea)
;------------------------------------------
Trigger SupplyShipNoExtra
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;In a ship for 1 turn. Resupply 1/4. Jump level if no emergency supplies. No Extra Done.
;------------------------------------------
Trigger SupplyShip1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SuppliedBySea  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusHundreds  16  Chance  100

;In a ship for 1 turn. Resupply 1/4. 1600
;------------------------------------------
Trigger SupplyWealthThouToHun_SGENEI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7
          and Trait Thousands >= 1
          and Trait Hundreds < 2

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor & not enough in hundreds column, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheckReset_SGENEI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 3200
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGENEI_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGENEI_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  32  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGENEI_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  32  Chance  100

;3 trigs check if can afford 3200
;------------------------------------------
Trigger SupplyGetEncampedNoExtra_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
;          and Trait Wealth >= 6
          and Trait WealthCheck = 1
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
;jumps to level 5 (emergency) if not good log so does not get emergency next trig.
;3200
;------------------------------------------
Trigger SupplyGetEncamped_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait Supplies > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  32  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  3  Chance  100
    Affects MinusHundreds  2  Chance  100
;3200
;------------------------------------------
Trigger SupplyShipNoExtra_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
;          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;In a ship for 1 turn. Resupply 1/4. Jump level if no emergency supplies. No Extra Done.
;3200
;------------------------------------------
Trigger SupplyShip1_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
;          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliedBySea  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  32  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusHundreds  32  Chance  100

;3200
;keep to less than 11 affects. 3200. note: and Trait Wealth >= 7
;------------------------------------------
; Settlement Resupply
;------------------------------------------
Trigger SupplyWealthThouToHun1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;bring up 3 times in case of many minushundreds
;------------------------------------------
Trigger SupplyWealthThouToHun2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthThouToHun3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheckReset_SGNE
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 800
;------------------------------------------
Trigger SupplyWealthCheck_SGNE_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGNE_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  8  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGNE_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  8  Chance  100

;3 trigs check if can afford 800
;------------------------------------------
Trigger SupplyGetNoExtra
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
;          and Trait Wealth >= 6
;          and Trait Hundreds >= 8
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;In settlement, with own 50% religious land and with supplies reduced. Resupply 1/4. NoExtra Done
;knocks back to level 5 for gens who don't get level 5(skips a level) (5 is emergency, 6 is out) but, next trigger knocks down from emergency supplies.800
;------------------------------------------
Trigger SupplyGet
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
;          and Trait Wealth >= 6
;          and Trait Hundreds >= 8
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  8  Chance  100
    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  8  Chance  100
    Affects MinusHundreds  8  Chance  100

;In settlement, with own 50% religious land and with supplies reduced. Resupply 1/4
;min wealth requirement for any supplies is "poor"
;thousands requirement = huns must not be negative and thous must not be negative, but can go only 100 in debt with supplies.800
;------------------------------------------
Trigger SupplyWealthThouToHunSGNEI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds 1600
;------------------------------------------
Trigger SupplyWealthCheckReset_SGNEI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 1600
;------------------------------------------
Trigger SupplyWealthCheck_SGNEI_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGNEI_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  16  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGNEI_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  16  Chance  100

;3 trigs check if can afford 1600
;------------------------------------------
Trigger SupplyGetNoExtra_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2
          and I_EventCounter inflationon = 1
;          and Trait Wealth >= 6
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;In settlement, with own 50% religious land and with supplies reduced. Resupply 1/4. NoExtra Done
;knocks back to level 5 for gens who don't get level 5(skips a level) (5 is emergency, 6 is out) but, next trigger knocks down from emergency supplies.
;1600
;------------------------------------------
Trigger SupplyGet_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
          and I_EventCounter inflationon = 1
;          and Trait Wealth >= 6
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100
;1600
;------------------------------------------
Trigger SupplyWealthThouToHun_SG2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds to cope with 800 in following trigger
;------------------------------------------
Trigger SupplyWealthCheckReset_SG2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 800
;------------------------------------------
Trigger SupplyWealthCheck_SG2_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG2_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  8  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG2_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  8  Chance  100

;3 trigs check if can afford 800
;------------------------------------------
Trigger SupplyGet2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
          and not Trait PoorLogisticsBGR = 1
          and I_EventCounter inflationon = 0
;          and Trait Wealth >= 6
;          and Trait Hundreds >= 8
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  8  Chance  100
    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  8  Chance  100
    Affects MinusHundreds  8  Chance  100

;In settlement, with own 50% religious land and with supplies reduced. Resupply another 1/4 if needed to fully a half, if gen is not poor logistician.
;800
;------------------------------------------
Trigger SupplyWealthThouToHun_SG2I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheckReset_SG2I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 1600
;------------------------------------------
Trigger SupplyWealthCheck_SG2I_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG2I_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  16  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG2I_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  16  Chance  100

;3 trigs check if can afford 1600
;------------------------------------------
Trigger SupplyGet2_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
          and not Trait PoorLogisticsBGR = 1
          and I_EventCounter inflationon = 1
;          and Trait Wealth >= 6
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;1600
;------------------------------------------
Trigger SupplyShip2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
          and not Trait PoorLogisticsBGR = 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SuppliedBySea  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusHundreds  16  Chance  100

;In a ship for 1 turn. Resupply another 1/4 if needed to replenish a half in total with these 2 triggers (ss1+ss2)
;1600 now shares same wealth check as land supplies above. Do not move these triggers around.
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SG3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheckReset_SG3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 800
;------------------------------------------
Trigger SupplyWealthCheck_SG3_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG3_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  8  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG3_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  8  Chance  100

;3 trigs check if can afford 800
;------------------------------------------
Trigger SupplyGet3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
          and Trait PoorLogisticsBGR > 1
;          and Trait Wealth >= 6
;          and Trait Hundreds >= 8
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  8  Chance  100
    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  8  Chance  100
    Affects MinusHundreds  8  Chance  100

;In settlement, with own 50% religious land and with supplies reduced. Resupply another 1/4 if needed to fully a 3/4, if gen is good logistician.
;800
;------------------------------------------
;Trigger SupplyGet4_LowReligion
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and EndedInSettlement
;          and PopulationOwnReligion <= 50
;          and CharacterIsLocal
;          and Trait Supplies > 1
;          and Trait PoorLogisticsBGR > 1
;;          and Trait Wealth >= 6
;;          and Trait Hundreds >= 8
;          and I_EventCounter inflationon = 0
;;          and Trait Debt < 1
;          and Trait WealthCheck = 1
;
;    Affects SuppliesAdded  2  Chance  100
;    Affects Supplies  1  Chance  100
;    Affects SupplyCost  1  Chance  100
;    Affects Cost  8  Chance  100
;    Affects Poverty  9  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost  8  Chance  100
;    Affects MinusHundreds  8  Chance  100
;
;;Old method: good logistician can get slightly supplied in a foreign settlement. used ";". 08-08-08 CHANGED to <= 50
;;In settlement, with supplies reduced. Resupply another 1/4 if needed to full, if gen is good logistician.
;;800  shares wealthchecks with SG3. Disabled as gens can now resupply subfractions sans religious support.
;------------------------------------------
Trigger SupplyWealthThouToHun_SG3I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheckReset_SG3I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for 1600
;------------------------------------------
Trigger SupplyWealthCheck_SG3I_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects WealthCheck  1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG3I_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects Wealth  16  Chance  100
    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SG3I_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  16  Chance  100

;3 trigs check if can afford 1600
;------------------------------------------
Trigger SupplyGet3_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
          and Trait Supplies > 1
          and Trait PoorLogisticsBGR > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100
;1600
;------------------------------------------
;Trigger SupplyGet4_Inflation
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and EndedInSettlement
;          and PopulationOwnReligion <= 50
;          and CharacterIsLocal
;          and Trait Supplies > 1
;          and Trait PoorLogisticsBGR > 1
;;          and Trait Wealth >= 6
;; would need wealth check here
;          and I_EventCounter inflationon = 1
;;          and Trait Debt < 1
;          and Trait WealthCheck = 1
;
;    Affects SuppliesAdded  2  Chance  100
;    Affects Supplies  1  Chance  100
;    Affects SupplyCost  1  Chance  100
;    Affects Cost  16  Chance  100
;    Affects Poverty  17  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;    Affects TreasuryCost  7  Chance  100
;    Affects MinusThousands  1  Chance  100
;    Affects MinusHundreds  6  Chance  100
;
;;Old method: good logistician can get slightly supplied in a foreign settlement. used ";". 08-08-08 CHANGED to <= 50
;;In settlement, with supplies reduced. Resupply another 1/4 if needed to full, if gen is good logistician.
;;1600
;; shares same wealth check as previous SG2 triggers because wont both go off.
;; disabled as gens can still buy supply fractions regardless of religion
;------------------------------------------
; Ship supply section 2 (other section mixed into encamped to share same wealth checks)
;------------------------------------------
Trigger SupplyShip3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
          and Trait PoorLogisticsBGR > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SuppliedBySea  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusHundreds  16  Chance  100

;In a ship for 1 turn. Resupply another 1/4 if needed to replenish a 3/4 in total with these 2 good logistics triggers
;1600
;------------------------------------------
Trigger SupplyWealthThouToHun_SS2I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 2


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyShip2_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
          and not Trait PoorLogisticsBGR = 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliedBySea  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  32  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusHundreds  32  Chance  100

;In a ship for 1 turn. Resupply another 1/4 if needed to replenish a half in total with these 2 triggers, only 2nd 1/4 if poor logistician
;3200
;------------------------------------------
Trigger SupplyWealthThouToHun_SS3I
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 2


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyWealthCheck_SS3IReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SS3I_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects WealthCheck  1  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SS3I_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects WealthCheck -1  Chance  100
    Affects Wealth  32  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SS3I_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  32  Chance  100
;------------------------------------------
Trigger SupplyShip3_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
          and Trait Supplies > 1
          and Trait PoorLogisticsBGR > 1
;          and Trait Wealth >= 6
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SuppliedBySea  1  Chance  100
    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  32  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusHundreds  32  Chance  100
;3200
;------------------------------------------
;Trigger SupplyWealthThouToHun_SS4
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait Wealth >= 6
;          and Trait Thousands >= 1
;          and Trait Hundreds < 6
;
;
;    Affects MinusThousands  1  Chance  100
;    Affects Hundreds  10  Chance  100
;
;at least poor, transfer 1 Thou to Hundreds..........SS4 disabled. Now only 3/4 max resupply/turn. If reenabled do wealthchecks.
;------------------------------------------
;Trigger SupplyShip4
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and AtSea
;          and CharacterIsLocal
;          and Trait Supplies > 1
;          and Trait PoorLogisticsBGR > 1
;;          and Trait Wealth >= 6
;          and I_EventCounter inflationon = 0
;;          and Trait Debt < 1
;          and Trait WealthCheck = 1
;
;    Affects SuppliesAdded  2  Chance  100
;    Affects Supplies  1  Chance  100
;    Affects SuppliedBySea  1  Chance  100
;    Affects SupplyCost  1  Chance  100
;    Affects Cost  16  Chance  100
;    Affects Poverty  17  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryWealth  1  Chance  100
;    Affects TreasuryCost  7  Chance  100
;    Affects MinusHundreds  16  Chance  100
;
;In a ship for 1 turn. Resupply another 1/4 if needed to replenish 4/4 in total with these 2 good logistics triggers
;1600
;------------------------------------------
;Trigger SupplyShip4_Inflation
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and AtSea
;          and CharacterIsLocal
;          and Trait Supplies > 1
;          and Trait PoorLogisticsBGR > 1
;;          and Trait Wealth >= 6
;          and I_EventCounter inflationon = 1
;;          and Trait Debt < 1
;          and Trait WealthCheck = 1
;
;    Affects SuppliedBySea  1  Chance  100
;    Affects SuppliesAdded  2  Chance  100
;    Affects Supplies  1  Chance  100
;    Affects SupplyCost  1  Chance  100
;    Affects Cost  32  Chance  100
;    Affects Poverty  33  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryWealth  3  Chance  100
;    Affects TreasuryCost  5  Chance  100
;    Affects MinusHundreds  32  Chance  100
;3200
;------------------------------------------
; Supply Wagon Replenishment (after settlement and ship, if money still available)
; Buy in Settlements
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGSWS_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects WealthCheck  1  Chance  100
    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWS_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects WealthCheck -1  Chance  100
    Affects Wealth  8  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWS_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  8  Chance  100
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGSWS
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 8


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyGetSupplyWagonSettlement
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
;          and Trait Wealth >= 6
;          and Trait Hundreds >= 8
          and HasAncType supplywagon
          and Trait SupplyWagon < 5
          and Trait SupplyCost = 0
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SupplyWagon  1  Chance  100
    Affects Poverty  9  Chance  100
    Affects Wealth  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  8  Chance  100
    Affects TreasuryCost  8  Chance  100
    Affects MinusHundreds  8  Chance  100

;In settlement, with 50% own religion support and with supplywagon reduced. Resupply 1/4 if no General's supplies purchased this turn.
;800
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSIReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGSWSI_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects WealthCheck  1  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSI_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects WealthCheck -1  Chance  100
    Affects Wealth  16  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSI_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  16  Chance  100
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGSWSI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyGetSupplyWagonSettlement_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and PopulationOwnReligion > 50
          and CharacterIsLocal
;          and Trait Wealth >= 6
          and HasAncType supplywagon
          and Trait SupplyWagon < 5
          and Trait SupplyCost < 1
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SupplyWagon  1  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;In settlement, with 50% own religion support and with supplywagon reduced. Resupply 1/4 if no General's supplies purchased this turn.
;1600
;------------------------------------------
; Replenish SupplyWagon in Supply Ships
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGSWSea
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 6


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyGetSupplyWagonSea
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
;          and Trait Wealth >= 6
          and HasAncType supplywagon
          and Trait SupplyWagon < 5
          and Trait SupplyCost = 0
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SupplyWagon  1  Chance  100
    Affects Poverty  17  Chance  100
    Affects Wealth  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  16  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  7  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;In ship with supplywagon reduced. Resupply 1/4 if no General's supplies purchased this turn.
;1600
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSeaIReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100

;------------------------------------------
Trigger SupplyWealthCheck_SGSWSeaI_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 7

    Affects WealthCheck  1  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSeaI_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Wealth <= 6

    Affects WealthCheck -1  Chance  100
    Affects Wealth  32  Chance  100
;------------------------------------------
Trigger SupplyWealthCheck_SGSWSeaI_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait WealthCheck = 1

    Affects Wealth  32  Chance  100
;------------------------------------------
Trigger SupplyWealthCheckThouToHun_SGSWSeaI
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth >= 6
          and Trait Thousands >= 1
          and Trait Hundreds < 2


    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100

;at least poor, transfer 1 Thou to Hundreds
;------------------------------------------
Trigger SupplyGetSupplyWagonSea_Inflation
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and AtSea
          and CharacterIsLocal
;          and Trait Wealth >= 6
          and HasAncType supplywagon
          and Trait SupplyWagon < 5
          and Trait SupplyCost < 1
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait WealthCheck = 1

    Affects SupplyWagon  1  Chance  100
    Affects SupplyCost  1  Chance  100
    Affects Cost  32  Chance  100
    Affects Poverty  33  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  3  Chance  100
    Affects MinusHundreds  2  Chance  100
;3200
;------------------------------------------
; Purchase SupplyIncrement when in Settlement, ship or Encamped. Up to 7/8ths of a supply 1/4. should not need 8.
; Subfractions DO allow purchases to push into poor level, but only when starting with adequate or more.
;
; to do, add religion resriction or remove whole resupply in enemy religion from 1/4s section
; so only subfractions are immune to religion and max purchase would be 7/32ths
;
;
;------------------------------------------
Trigger SupplyIncCostReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait SupplyIncrementCost >= 4

    Affects SupplyIncrementCostReset  5  Chance  100
    Affects SupplyIncrementCost  1  Chance  100

;------------------------------------------
Trigger SupplyIncCostReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait SupplyIncrementCost >= 3

    Affects SupplyIncrementCostReset  4  Chance  100
    Affects SupplyIncrementCost  1  Chance  100

;------------------------------------------
Trigger SupplyIncCostReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait SupplyIncrementCost >= 2

    Affects SupplyIncrementCostReset  3  Chance  100
    Affects SupplyIncrementCost  1  Chance  100

;------------------------------------------
Trigger SupplyIncCostReset4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait SupplyIncrementCost >= 1

    Affects SupplyIncrementCostReset  2  Chance  100
    Affects SupplyIncrementCost  1  Chance  100

;------------------------------------------
Trigger SupplyIncGet_city_NoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_city_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement adds a supply 1/4 then sets the increment to 1/8 remaining.
;------------------------------------------
Trigger SupplyIncGet_city_InflationNoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_Ship_NoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_ship_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_Ship_InflationNoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_NoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_Encamped_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_NoExtra0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement < 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1
          and Trait Supplies = 6
          and Trait PoorLogisticsBGR < 2

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100

;NoExtra triggers move supplies from out to 100% rather than to Emergency for Good Logisticians.
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_0
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement < 1
          and Trait Supplies > 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SuppliesAdded  2  Chance  100
    Affects Supplies  1  Chance  100
    Affects SupplyIncrement  7  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
Trigger SupplyIncGet_city_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusHundreds  1  Chance  100

; buy 1/8th. Standard Price from settlement
;------------------------------------------
Trigger SupplyIncGet_city_Inflation_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. inflation Price from settlement
;------------------------------------------
Trigger SupplyIncGet_ship_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double Standard Price from ship
;------------------------------------------
Trigger SupplyIncGet_ship_Inflation_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and AtSea
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. double standard Price from ship + inflation
;------------------------------------------
Trigger SupplyIncGet_Encamped_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 0
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost  2  Chance  100
    Affects MinusHundreds  2  Chance  100

; buy 1/8th. double standard Price from camp
;------------------------------------------
Trigger SupplyIncGet_Encamped_Inflation_6
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Encamped = 1
          and Trait SupplyIncrement >= 1
          and Trait SupplyCost <= 1
          and Trait Wealth >= 7
          and I_EventCounter inflationon = 1
;          and Trait Debt < 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects SupplyIncrementCost  1  Chance  100
    Affects Cost  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects TreasuryCost 4  Chance  100
    Affects MinusHundreds  4  Chance  100

; buy 1/8th. inflation Price from camp
;------------------------------------------
; should not need 7th as will always have at least 1 already. 1+6=7 & if 8 needed then is done with supply 1/4s anyway.
;------------------------------------------
;Trigger SupplyIncGet_city_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and EndedInSettlement
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 0
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  1  Chance  100
;    Affects Poverty  2  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost  1  Chance  100
;    Affects MinusHundreds  1  Chance  100
;
;; buy 1/8th. Standard Price from settlement
;;------------------------------------------
;Trigger SupplyIncGet_city_Inflation_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and EndedInSettlement
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 1
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  2  Chance  100
;    Affects Poverty  3  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost  2  Chance  100
;    Affects MinusHundreds  2  Chance  100
;
;; buy 1/8th. inflation Price from settlement
;;------------------------------------------
;Trigger SupplyIncGet_ship_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and AtSea
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 0
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  2  Chance  100
;    Affects Poverty  3  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost  2  Chance  100
;    Affects MinusHundreds  2  Chance  100
;
;; buy 1/8th. double Standard Price from ship
;;------------------------------------------
;Trigger SupplyIncGet_ship_Inflation_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and AtSea
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 1
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  4  Chance  100
;    Affects Poverty  5  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost 4  Chance  100
;    Affects MinusHundreds  4  Chance  100
;
;; buy 1/8th. double standard Price from ship + inflation
;;------------------------------------------
;Trigger SupplyIncGet_Encamped_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait Encamped = 1
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 0
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  2  Chance  100
;    Affects Poverty  3  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost  2  Chance  100
;    Affects MinusHundreds  2  Chance  100
;
;; buy 1/8th. double standard Price from camp
;;------------------------------------------
;Trigger SupplyIncGet_Encamped_Inflation_7
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait Encamped = 1
;          and Trait SupplyIncrement >= 1
;          and Trait SupplyCost <= 1
;          and Trait Wealth >= 7
;          and I_EventCounter inflationon = 1
;;          and Trait Debt < 1
;
;    Affects SupplyIncrementReset  2  Chance  100
;    Affects SupplyIncrement  1  Chance  100
;    Affects SupplyIncrementCost  1  Chance  100
;    Affects Cost  4  Chance  100
;    Affects Poverty  5  Chance  100
;    Affects Wealth  1  Chance  100
;    Affects TreasuryCost 4  Chance  100
;    Affects MinusHundreds  4  Chance  100
;
;; buy 1/8th. inflation Price from camp
;;------------------------------------------
; Reset ForageIncrement and TIF when in Settlement
;------------------------------------------
Trigger ForageSizeResetChip4Settlement
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait ForageIncrement >= 4

    Affects ForageIncrementReset  5  Chance  100
    Affects ForageIncrement  1  Chance  100
; -4
;------------------------------------------
Trigger ForageSizeResetChip3Settlement
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait ForageIncrement >= 3

    Affects ForageIncrementReset  4  Chance  100
    Affects ForageIncrement  1  Chance  100
; -3
;------------------------------------------
Trigger ForageSizeResetChip2Settlement
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait ForageIncrement >= 2

    Affects ForageIncrementReset  3  Chance  100
    Affects ForageIncrement  1  Chance  100
; -2
;------------------------------------------
Trigger ForageSizeResetChip1Settlement
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and EndedInSettlement
          and Trait ForageIncrement >= 1

    Affects ForageIncrementReset  2  Chance  100
    Affects ForageIncrement  1  Chance  100
; -1
;------------------------------------------
Trigger TIFReset
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and CharacterIsLocal
          and Trait TimeInField > 2

    Affects TIFReset 10  Chance  100
    Affects TimeInField  8  Chance  100

; In settlement. Chipaway 2x TIF if >2 then -2. Non religious settlement gets field time reset here too but no resupply.
;------------------------------------------
Trigger TIFReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and CharacterIsLocal
          and Trait TimeInField > 1

    Affects TIFReset 10  Chance  100
    Affects TimeInField  9  Chance  100

; In settlement. Chipaway 1x TIF if >1 then -1 should make all tif values to 1
;------------------------------------------
Trigger TIFReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and CharacterIsLocal
          and Trait TimeInField = 1

    Affects TIFReset 10  Chance  100
    Affects TimeInField  9  Chance  100

;In settlement. Chipaway 1x TIF if =1 then -1 should make all tif values to 0. Add more of these e.g if decide to make 5 turns in region possible
;------------------------------------------
; Supply Usage
;------------------------------------------
Trigger SupplyUsedEnemy1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and InEnemyLands
          and Trait TimeInField = 2
          and Trait Supplies = 6

    Affects TimeInField  2  Chance  100

;  1/4 Supplies used in enemy land. Enemy land uses 1/4 per 2 turns. Sets timein field to 4 if supply = out, therefore can be reduced no further.
;Timeinfield set to 4 to show 4th level. Extra Done changed 5 to 6.
;------------------------------------------
Trigger SupplyUsedEnemy2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and InEnemyLands
          and Trait TimeInField = 2
          and Trait Supplies <= 5
;          and Trait SupplyIncrement = 8

;    Affects Supplies  1  Chance  100
    Affects TimeInField  2  Chance  100

;  1/4 Supplies used in enemy land. Enemy land uses 1/4 per 2 turns. Sets timein field to 4 if supplies not out and reduces supplies.
;Timeinfield set to 4 to show 4th level. Extra Done changed 4 to 5.
;------------------------------------------
; SupplyIncrement Prior to Supply Usage
;------------------------------------------
Trigger SupplyIncSize1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 4
          and Trait Supplies <= 5
          and Trait SupplyIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 40
          and Trait ArmySize = 1

    Affects SupplyIncrement  2  Chance  100

; would ideally be supplyinc 1, but such low consumption is bad for gameplay.
; now same for 1/8th army as for 1/4 army.
;------------------------------------------
Trigger SupplyIncSize2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 4
          and Trait Supplies <= 5
          and Trait SupplyIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 20
;          and PercentageUnitAttribute general_unit < 40
          and Trait ArmySize = 2

    Affects SupplyIncrement  2  Chance  100

;------------------------------------------
Trigger SupplyIncSize4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 4
          and Trait Supplies <= 5
          and Trait SupplyIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit >= 10
;          and PercentageUnitAttribute general_unit < 20
          and Trait ArmySize = 3

    Affects SupplyIncrement  4  Chance  100

;------------------------------------------
Trigger SupplyIncSize8
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 4
          and Trait Supplies <= 5
          and Trait SupplyIncrement <= 7
;          and Trait ArmySize >= 1
;          and PercentageUnitAttribute general_unit < 10
          and Trait ArmySize = 4

    Affects SupplyIncrement  8  Chance  100

;------------------------------------------
Trigger SupplyUsedEnemyOrFriendlyLand
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
          and Trait TimeInField = 4
          and Trait Supplies <= 5
          and Trait SupplyIncrement = 8

    Affects SupplyIncrementReset  9  Chance  100
    Affects SupplyIncrement  1  Chance  100
    Affects Supplies  1  Chance  100

;  1/4 Supplies used in enemy land. Enemy land uses 1/4 per 2 turns. Sets timein field to 4 if supplies not out and reduces supplies.
;Timeinfield set to 4 to show 4th level. Extra Done changed 4 to 5.
; should leave some increment if was over 8, i.e. it will be a fraction off the next 1/4 of supplies that is left.
;------------------------------------------
Trigger NoExtraSuppliesLevelJump
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 5
          and not Trait PoorLogisticsBGR > 1

    Affects Supplies  1  Chance  100

;Does not need to change for new supply increment
; if not good logistician(i.e.poorlogistics value2) then jumps the emergency supplies level to go straight to out of supplies. 5=emergency, 6 = outofsupplies. NoExtra done.
;------------------------------------------
; SupplyInc Resets upto 10
; if supplies are out then the increments need to be reset as there is no supply 1/4 left hence no fractions of it.
;------------------------------------------
Trigger SupplyIncResets4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
;          and Trait TimeInField = 4
          and Trait Supplies = 6
          and Trait SupplyIncrement >= 4

    Affects SupplyIncrementReset  5  Chance  100
    Affects SupplyIncrement  1  Chance  100

;------------------------------------------
Trigger SupplyIncResets3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
;          and Trait TimeInField = 4
          and Trait Supplies = 6
          and Trait SupplyIncrement >= 3

    Affects SupplyIncrementReset  4  Chance  100
    Affects SupplyIncrement  1  Chance  100

;------------------------------------------
Trigger SupplyIncResets2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
;          and Trait TimeInField = 4
          and Trait Supplies = 6
          and Trait SupplyIncrement >= 2

    Affects SupplyIncrementReset  3  Chance  100
    Affects SupplyIncrement  1  Chance  100

;------------------------------------------
Trigger SupplyIncResets1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and not AtSea
          and not EndedInSettlement
;          and Trait TimeInField = 4
          and Trait Supplies = 6
          and Trait SupplyIncrement >= 1

    Affects SupplyIncrementReset  2  Chance  100
    Affects SupplyIncrement  1  Chance  100

;------------------------------------------
Trigger PoorLogisticianAdvised
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and EndedInSettlement
          and CharacterIsLocal
          and Trait Supplies = 1
          and Trait PoorLogisticsBGR = 1

    Affects AdvisedOnLogistics  2  Chance  100
    Affects PoorLogisticsBGR  1  Chance  100

;if poor logistician and has now resupplied in a settlement, not ship, then remove poor logistician. He has hopefully learned in the settlement. set to 0
;------------------------------------------
Trigger Starving_Reset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral

          and Trait Starving = 1
          and Trait TimeInField < 4

    Affects StarvingReset  2  Chance  100
    Affects Starving  1  Chance  100

;------------------------------------------
Trigger Starving_Reset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral

          and Trait Starving = 1
          and Trait Supplies < 6

    Affects StarvingReset  2  Chance  100
    Affects Starving  1  Chance  100

;------------------------------------------
Trigger Starving1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral

          and Trait Starving < 1
          and Trait TimeInField = 4
          and Trait Supplies = 6

    Affects Starving  1  Chance  100

;------------------------------------------
; Supply Mirrors for GainMessages
;------------------------------------------
Trigger SupplyMirrorReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies <= 3
          and Trait SupplyMirror = 1

    Affects SupplyMirror -1  Chance  100

; reduces supply mirror if supplies dont require a message
;------------------------------------------
Trigger SupplyMirrorReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies <= 3
          and Trait SupplyMirror = 2

    Affects SupplyMirror -2  Chance  100

; reduces supply mirror if supplies dont require a message
;------------------------------------------
Trigger SupplyMirrorReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies <= 3
          and Trait SupplyMirror = 3

    Affects SupplyMirror -3  Chance  100

; reduces supply mirror if supplies dont require a message. remember SM 3 = lvl 6 not 3.
;------------------------------------------1=4, 2=5, 3=6
Trigger SupplyMirror4a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 4
          and Trait SupplyMirror = 2

    Affects SupplyMirror -1  Chance  100

; if 75%, but mirror = ES drop 1
;------------------------------------------
Trigger SupplyMirror4b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 4
          and Trait SupplyMirror = 3

    Affects SupplyMirror -2  Chance  100

; if 75%, but mirror = out drop 2
;------------------------------------------
Trigger SupplyMirror4c
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 4
          and Trait SupplyMirror = 0

    Affects SupplyMirror  1  Chance  100

; if 75%, but mirror = 0 add 1
;------------------------------------------
Trigger SupplyMirror5a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 5
          and Trait SupplyMirror = 1

    Affects SupplyMirror  1  Chance  100

; if ES%, but mirror = 75 add 1
;------------------------------------------
Trigger SupplyMirror5b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 5
          and Trait SupplyMirror = 3

    Affects SupplyMirror -1  Chance  100

; if ES%, but mirror = out drop 1
;------------------------------------------
Trigger SupplyMirror5c
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 5
          and Trait SupplyMirror = 0

    Affects SupplyMirror  2  Chance  100

; if emergency, but mirror =0 add 2
;------------------------------------------
Trigger SupplyMirror6a
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait SupplyMirror = 1

    Affects SupplyMirror  2  Chance  100

; if out, but mirror = 75 add 2
;------------------------------------------
Trigger SupplyMirror6b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait SupplyMirror = 2

    Affects SupplyMirror 1  Chance  100

; if out, but mirror = ES add 1
;------------------------------------------
Trigger SupplyMirror6c
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Supplies = 6
          and Trait SupplyMirror = 0

    Affects SupplyMirror  3  Chance  100

; if out, but mirror = 0, add 3
;------------------------------------------
; Supply Purchases per Turn Mirror (supplycostmirror)
;------------------------------------------
Trigger SupplyCostMirror1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 1

    Affects SupplyCostMirror  1  Chance  100
    Affects SupplyCostMirrorReset  1  Chance  100

;------------------------------------------
Trigger SupplyCostMirror2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 2

    Affects SupplyCostMirror  2  Chance  100
    Affects SupplyCostMirrorReset  2  Chance  100

;------------------------------------------
Trigger SupplyCostMirror3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 3

    Affects SupplyCostMirror  3  Chance  100
    Affects SupplyCostMirrorReset  3  Chance  100

;------------------------------------------
Trigger SupplyCostMirror4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 4

    Affects SupplyCostMirror  4  Chance  100
    Affects SupplyCostMirrorReset  4  Chance  100

;------------------------------------------
Trigger SupplyCostMirror5
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait SupplyCost = 5

    Affects SupplyCostMirror  5  Chance  100
    Affects SupplyCostMirrorReset  5  Chance  100

;------------------------------------------
; Individual Corruption
;------------------------------------------
Trigger Corruption_Reset
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and Trait Caught = 1

    Affects CaughtReset  1  Chance  100

;------------------------------------------
Trigger Caught_Reset2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and Trait Caught = 2

    Affects CaughtReset  2  Chance  100

;------------------------------------------
Trigger Corruptor_Poor_10_5000
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and GovernorTaxLevel <= tax_extortionate
             and not Trait DefiedOrders >= 3
             and TimeInRegion >= 7
             and Attribute Loyalty <= 3
             and Attribute Piety <= 3
             and Trait Wealth <= 7
             and Trait TreasuryWealth <= 1
             and Trait TreasuryCost <= 8
             and not IsFactionLeader
             and Treasury > 10000
             and Treasury < 30000
          and RandomPercent < 5
             and FactionLeaderTrait CentralisedPower <= 2

    Affects Wealth  50  Chance  100
    Affects TreasuryWealth  5  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  15  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  25

;------------------------------------------
Trigger Corruptor_Poor_30_5000
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and GovernorTaxLevel <= tax_extortionate
             and not Trait DefiedOrders >= 3
             and TimeInRegion >= 7
             and Attribute Loyalty <= 3
             and Attribute Piety <= 3
             and Trait Wealth <= 7
             and Trait TreasuryWealth <= 1
             and Trait TreasuryCost <= 8
             and not IsFactionLeader
             and Treasury >= 30000
          and RandomPercent < 8
             and FactionLeaderTrait CentralisedPower <= 2

    Affects Wealth  50  Chance  100
    Affects TreasuryWealth  5  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  15  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  25

;------------------------------------------
Trigger Corruptor_Rich_20_5000
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and Trait TreasuryWealth <= 1
             and Trait TreasuryCost <= 8
             and not IsFactionLeader
             and Treasury > 20000
             and Treasury < 50000
          and RandomPercent < 7
             and FactionLeaderTrait CentralisedPower <= 2

    Affects Wealth  50  Chance  100
    Affects TreasuryWealth  5  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  15  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Rich_50_5000
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and Trait TreasuryWealth <= 1
             and Trait TreasuryCost <= 8
             and not IsFactionLeader
             and Treasury >= 50000
          and RandomPercent < 20
             and FactionLeaderTrait CentralisedPower <= 2

    Affects Wealth  50  Chance  100
    Affects TreasuryWealth  5  Chance  100
    Affects TreasuryCost  5  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  15  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Poor_Cent_10_8100
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and GovernorTaxLevel <= tax_extortionate
             and not Trait DefiedOrders >= 3
             and TimeInRegion >= 7
             and Attribute Loyalty <= 3
             and Attribute Piety <= 3
             and Trait Wealth <= 7
             and not IsFactionLeader
             and Treasury > 10000
             and Treasury < 30000
          and RandomPercent < 5
             and FactionLeaderTrait CentralisedPower >= 3

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  25

;------------------------------------------
Trigger Corruptor_Poor_Cent_30_8100
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
             and GovernorTaxLevel <= tax_extortionate
             and not Trait DefiedOrders >= 3
             and TimeInRegion >= 7
             and Attribute Loyalty <= 3
             and Attribute Piety <= 3
             and Trait Wealth <= 7
             and not IsFactionLeader
             and Treasury >= 30000
          and RandomPercent < 8
             and FactionLeaderTrait CentralisedPower >= 3

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  25

;------------------------------------------
Trigger Corruptor_Rich_LoDefy_over2_1000c3
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and Trait DefiedOrders >= 1
             and Trait DefiedOrders < 3
             and Attribute Loyalty <= 5
             and Attribute Piety <= 4
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury >= 2000
          and RandomPercent <= 5
             and FactionLeaderTrait CentralisedPower = 3

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  11  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  20

;this one can push faction into debt
;------------------------------------------
Trigger Corruptor_Rich_LoDefy_over2_1000c4
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and Trait DefiedOrders >= 1
             and Trait DefiedOrders < 3
             and Attribute Loyalty <= 5
             and Attribute Piety <= 4
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury >= 2000
          and RandomPercent <= 10
             and FactionLeaderTrait CentralisedPower = 4

    Affects Wealth  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  11  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100
    Affects Caught  1  Chance  20

;this one can push faction into debt
;------------------------------------------
Trigger Corruptor_Rich_Cent_under20_8100
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury >= 5000
             and Treasury <= 20000
          and RandomPercent < 4
             and FactionLeaderTrait CentralisedPower >= 3

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;this one can push faction into debt
;------------------------------------------
Trigger Corruptor_Rich_Cent_20_8100c3
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury > 20000
             and Treasury < 50000
          and RandomPercent < 7
             and FactionLeaderTrait CentralisedPower = 3

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Rich_Cent_20_8100c4_UnL
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury > 20000
             and Treasury < 50000
          and RandomPercent < 10
             and FactionLeaderTrait CentralisedPower = 4

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Rich_Cent_20_8100c4_L
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty > 4
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury > 20000
             and Treasury < 50000
          and RandomPercent < 3
             and FactionLeaderTrait CentralisedPower = 4

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Rich_Cent_50_8100c3
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury >= 50000
          and RandomPercent < 10
             and FactionLeaderTrait CentralisedPower = 3

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger Corruptor_Rich_Cent_50_8100c4
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
             and not InEnemyLands
             and not AtSea
             and not Trait DefiedOrders >= 3
             and Attribute Loyalty <= 4
             and Attribute Piety <= 3
             and Trait Wealth >= 8
             and not IsFactionLeader
             and Treasury >= 50000
          and RandomPercent < 15
             and FactionLeaderTrait CentralisedPower = 4

    Affects Wealth  81  Chance  100
    Affects TreasuryNine  1  Chance  100
    Affects MinusThousands  10  Chance  100
    Affects Thousands  18  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  11  Chance  100
    Affects Caught  1  Chance  20

;------------------------------------------
Trigger AI_Boost
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and not CharacterIsLocal
          and Trait Healing < 1

    Affects Healing 1 Chance 100

;------------------------------------------
Trigger AI_UnBoost
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Healing = 1

    Affects Healing  1 Chance 100

;Ai characters bought by humans lose equalizing trait
;------------------------------------------
Trigger BesiegedReset1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsUnderSiege
          and Trait Besieged > 0

    Affects NotBesieged 2 Chance 100
    Affects Besieged 1 Chance 100

;to reset dishonor when not undersiege
;------------------------------------------
Trigger BesiegedReset2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsUnderSiege
          and Trait Besieged > 0

    Affects NotBesieged 2 Chance 100
    Affects Besieged 1 Chance 100

;to reset dishonor when not undersiege
;------------------------------------------
Trigger BesiegedGeneral1
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and IsUnderSiege
          and Trait Besieged = 0
          and Trait Dishonor >= 2

    Affects Besieged 1 Chance 100

;goes to level 1 if dishonor is at level 2 ( dishonor level 1 is just warning level) and besieged
;General has allowed himself to become besieged. should reset when not besieged.
; triggers whilst besieged so could have warning to get outside help to lift siege. "If this general does not have the sense to call in outside help to initiate an attack..."
;------------------------------------------
Trigger BesiegedGeneral2
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and IsUnderSiege
          and Trait Besieged = 1
          and Trait Dishonor = 3

    Affects Besieged 1 Chance 100

;goes to level 2 if dishonor is at level 3 and besieged
;General has allowed himself to become besieged. should reset when not besieged.
; shows whilst besieged so could have warning to get outside help to lift siege. "If this general does not have the sense to call in outside help to initiate an attack..."
;------------------------------------------
Trigger Neglectedborders
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and I_ConflictType SallyBesieger
          and WasAttacker
          and BattleOdds > 0.5
          and BattleOdds < 1.5
          and Trait Dishonor < 3

    Affects Dishonor 1 Chance 100

;Gen fought and won a sally and is greater than half the size of the enemy.
;01-11-2007 added and is not being besieged by a pesky small ai army.
; (and didn't attack with units from outside of siege). count limit = 5
;------------------------------------------
Trigger FieldBattle
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
;          and WonBattle
          and not I_ConflictType SallyBesieger
          and not I_ConflictType Siege
          and PercentageEnemyKilled > 25
          and BattleOdds < 2
;          and WasAttacker
          and Trait Dishonor > 0

    Affects NoDishonor 10 Chance 100
    Affects Dishonor 9 Chance 100

;Gen fought (win or lose) a field battle. count limit =5. Nodishonour + 1. He doesn't even have to win the battle, at least is not exploiting and not constantly sallying.
;------------------------------------------
Trigger LargeFieldBattle2
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and not I_ConflictType SallyBesieger
          and not I_ConflictType Siege
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
;          and WasAttacker
          and Trait Dishonor > 0
          and PercentageUnitAttribute general_unit < 7

    Affects NoDishonor 10 Chance 100
    Affects Dishonor 9 Chance 100

;Gen fought and WON a major victory battle . count limit = 5 . Nodishonour (another) + 1
;------------------------------------------
;Major Victories and Field Morale Battle section
;------------------------------------------
Trigger Major_Victories_Count
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and PercentageUnitAttribute general_unit < 7

    Affects MVC 1 Chance 100

;------------------------------------------
Trigger Turnsaway_Victories
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Turnsaway > 1
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit < 7

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  36  Chance  100

;improves/reduces turnsaway levels by 4 points on major victory
;------------------------------------------
Trigger Turnsaway_Victories2
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Turnsaway > 1
          and CharacterIsLocal
          and PercentageUnitAttribute general_unit < 7

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  36  Chance  100

;improves/reduces turnsaway levels by 4 more points on major victory, staying within trait levels
;------------------------------------------
Trigger Turnsaway_Victories3
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Turnsaway > 1

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  36  Chance  100

;as above, but for capturing settlement
;------------------------------------------
Trigger Turnsaway_Victories4
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleOdds < 1.2
          and BattleOdds >= 1
          and PercentageEnemyKilled > 40
          and Trait Turnsaway > 1
          and CharacterIsLocal

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  38  Chance  100

;any closely matched victory that is not a major victory reduces turnsaway by a bit: 2 points
;------------------------------------------
Trigger Turnsaway_Victories5
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess < clear
          and BattleSuccess >= average
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Turnsaway > 1
          and CharacterIsLocal

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  36  Chance  100

;improves/reduces turnsaway levels by 4 points on average victory, staying within trait levels
;------------------------------------------
Trigger Five_Major_Victories_Count
    WhenToTest PostBattle

    Condition IsGeneral
          and Trait MVC > 4

    Affects FMVC 1 Chance 100
    Affects MVC -5 Chance 100

;------------------------------------------
Trigger Twenty_Five_Major_Victories_Count
    WhenToTest PostBattle

    Condition IsGeneral
          and Trait FMVC > 4

    Affects TMVC 1 Chance 100
    Affects FMVC -5 Chance 100

;------------------------------------------
; Confidence & Overconfidence
;------------------------------------------
Trigger Small_Battles_OverConfidence1
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and I_ConflictType Normal
          and not GeneralFoughtFaction slave
          and BattleOdds > 1.7
          and Attribute Command > 3
          and Trait MVC < 3
          and Trait FMVC < 1
          and Trait TMVC < 1
          and Trait Ovcon < 3

    Affects Ovcon 1  Chance  100

; Ovcon +1 if fighting weak enemy and won in the field. After five (edit- 3) major battles you are immune to this trigger, not trait. overconfidence only counts up to 14 small battles.
;------------------------------------------
Trigger Small_Battles_OverConfidence2
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not GeneralFoughtFaction slave
          and BattleOdds > 1.7
          and Attribute Command > 3
          and Trait MVC < 3
          and Trait FMVC < 1
          and Trait TMVC < 1
          and Trait Ovcon < 3

    Affects Ovcon 3  Chance  100

; Ovcon +3 if taking a city with weak garrison. After five (edit- 3) major battles you are immune to this trigger, not trait. overconfidence only counts up to 14 small battles.
; and 5 settlement conquests
;------------------------------------------
Trigger Large_Battles_Confidence
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and PercentageEnemyKilled > 40
          and BattleOdds < 1.2
          and not I_ConflictType SallyBesieger

    Affects Con 21 Chance 100
    Affects Ovcon 20  Chance  100

;-1 ovcon
;------------------------------------------
Trigger Major_Victories_Confidence
    WhenToTest PostBattle

    Condition IsGeneral
          and CharacterIsLocal
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and not I_ConflictType SallyBesieger
          and PercentageUnitAttribute general_unit < 7

    Affects Con 22 Chance 100
    Affects Ovcon 20  Chance  100

;-2 ovcon
;------------------------------------------
Trigger EstatesEarnedThroughBattle_xest1
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait MVC = 2
          and Trait DefiedOrders <= 3
          and PercentageUnitAttribute general_unit < 7
          and FactionLeaderTrait xest = 1
          and I_EventCounter inflationon = 0

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
;men given Manorial Estates after 2, then every 5 after. Must come after mvc awarded. not to banished gens.
; treasury covers cost of this award
;------------------------------------------
Trigger EstatesEarnedThroughBattle_Inflation_xest1
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait MVC = 2
          and Trait DefiedOrders <= 3
          and PercentageUnitAttribute general_unit < 7
          and FactionLeaderTrait xest = 1
          and I_EventCounter inflationon = 1

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  4  Chance  100
    Affects TreasuryCost  4  Chance  100
;men given Manorial Estates after 2, then every 5 after. Must come after mvc awarded. not to banished gens.
; treasury covers cost of this award
;------------------------------------------
Trigger EstatesEarnedThroughBattle_xest2
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait MVC = 2
          and Trait DefiedOrders <= 3
          and PercentageUnitAttribute general_unit < 7
          and FactionLeaderTrait xest = 2
          and I_EventCounter inflationon = 0

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  3  Chance  100
;men given Manorial Estates after 2, then every 5 after. Must come after mvc awarded. not to banished gens.
; treasury covers cost of this award
;------------------------------------------
Trigger EstatesEarnedThroughBattle_Inflation_xest2
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait MVC = 2
          and Trait DefiedOrders <= 3
          and PercentageUnitAttribute general_unit < 7
          and FactionLeaderTrait xest = 2
          and I_EventCounter inflationon = 1

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  6  Chance  100
    Affects TreasuryCost  6  Chance  100
;men given Manorial Estates after 2, then every 5 after. Must come after mvc awarded. not to banished gens.
; treasury covers cost of this award
;------------------------------------------
Trigger EstatesEarnedViaConquest_xest1
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders < 3
          and FactionLeaderTrait xest = 1
          and I_EventCounter inflationon = 0

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  2  Chance  100
    Affects TreasuryCost  2  Chance  100
; Treasury pays for this award, gen may have taken it for himself.
;------------------------------------------
Trigger EstatesEarnedViaConquest_Inflation_xest1
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders < 3
          and FactionLeaderTrait xest = 1
          and I_EventCounter inflationon = 1

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  4  Chance  100
    Affects TreasuryCost  4  Chance  100
; Treasury pays for this award, gen may have taken it for himself.
;------------------------------------------
Trigger EstatesEarnedViaConquest_xest2
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders < 3
          and FactionLeaderTrait xest = 2
          and I_EventCounter inflationon = 0

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  3  Chance  100
    Affects TreasuryCost  3  Chance  100
; Treasury pays for this award, gen may have taken it for himself.
;------------------------------------------
Trigger EstatesEarnedViaConquest_Inflation_xest2
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders < 3
          and FactionLeaderTrait xest = 2
          and I_EventCounter inflationon = 1

    Affects Estates  1  Chance  100
    Affects TreasuryWealth  6  Chance  100
    Affects TreasuryCost  6  Chance  100
; Treasury pays for this award, gen may have taken it for himself.
;------------------------------------------
Trigger EstatesEarnedViaConquest_defied
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates <= 2
          and Trait Estates >= 1
          and Trait DefiedOrders >= 3

    Affects Estates  1  Chance  100
; Treasury need not pay for this award, gen may have taken it for himself.
; ok for banished gens carving a personal empire
;------------------------------------------
Trigger EstatesEarnedThroughBattleNewGen
    WhenToTest PostBattle

    Condition IsGeneral
          and WonBattle
          and BattleSuccess >= clear
          and PercentageEnemyKilled > 40
          and BattleOdds < 1
          and Trait Estates = 1
          and Trait MVC = 2
          and not Trait DefiedOrders = 4
          and PercentageUnitAttribute general_unit < 7

    Affects Estates  1  Chance  100
;men given Manorial Estates after 2, then every 5 after. Must come after mvc awarded. not to banished gens.
; treasury could cover cost of this award?
;these two account  for generals who take a city beofe they are auto awarded one next turn. This gives them both now, else he gets none.
;------------------------------------------
Trigger EstatesEarnedViaConquestNewGen
    WhenToTest PostBattle

    Condition IsGeneral
          and WasAttacker
          and WonBattle
          and I_ConflictType Siege
          and not I_ConflictType SallyBesieger
          and Trait Estates = 1

    Affects Estates  1  Chance  100
; Treasury need not pay for this award, gen may have taken it for himself.
; ok for banished gens carving a personal empire
;------------------------------------------
; Reset Reckons ME1 to ME4
;------------------------------------------
Trigger ME1Reset1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 4

    Affects MilitaryExpenses1Reset  5  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
;------------------------------------------
Trigger ME1Reset2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 3

    Affects MilitaryExpenses1Reset  4  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
;------------------------------------------
Trigger ME1Reset3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 2

    Affects MilitaryExpenses1Reset  3  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
;------------------------------------------
Trigger ME1Reset4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 1

    Affects MilitaryExpenses1Reset  2  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
;------------------------------------------
; reset ME2
;------------------------------------------
Trigger ME2Reset1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses2 >= 4

    Affects MilitaryExpenses2Reset  5  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
Trigger ME2Reset2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses2 >= 3

    Affects MilitaryExpenses2Reset  4  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
Trigger ME2Reset3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses2 >= 2

    Affects MilitaryExpenses2Reset  3  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
Trigger ME2Reset4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses2 >= 1

    Affects MilitaryExpenses2Reset  2  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
; reset ME3
;------------------------------------------
Trigger ME3Reset1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses3 >= 4

    Affects MilitaryExpenses3Reset  5  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
Trigger ME3Reset2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses3 >= 3

    Affects MilitaryExpenses3Reset  4  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
Trigger ME3Reset3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses3 >= 2

    Affects MilitaryExpenses3Reset  3  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
Trigger ME3Reset4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses3 >= 1

    Affects MilitaryExpenses3Reset  2  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
; reset ME4
;------------------------------------------
Trigger ME4Reset1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses4 >= 4

    Affects MilitaryExpenses4Reset  5  Chance  100
    Affects MilitaryExpenses4  1  Chance  100
;------------------------------------------
Trigger ME4Reset2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses4 >= 3

    Affects MilitaryExpenses4Reset  4  Chance  100
    Affects MilitaryExpenses4  1  Chance  100
;------------------------------------------
Trigger ME4Reset3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses4 >= 2

    Affects MilitaryExpenses4Reset  3  Chance  100
    Affects MilitaryExpenses4  1  Chance  100
;------------------------------------------
Trigger ME4Reset4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses4 >= 1

    Affects MilitaryExpenses4Reset  2  Chance  100
    Affects MilitaryExpenses4  1  Chance  100
;------------------------------------------
;------------------------------------------
; Add ME (Temp) to Reckon (ME1 to ME4), resetting ME (Temp)
; This 1st set will be different (transfers ME to ME1)
;------------------------------------------
Trigger MEtoME1_1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses = 9

    Affects MilitaryExpensesReset  10  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  9  Chance  100
;------------------------------------------
Trigger MEtoME1_2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses = 9

    Affects MilitaryExpensesReset  10  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  9  Chance  100
;------------------------------------------
Trigger MEtoME1_3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses = 9

    Affects MilitaryExpensesReset  10  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  9  Chance  100
;------------------------------------------
Trigger MEtoME1_4chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses >= 4

    Affects MilitaryExpensesReset  5  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  4  Chance  100
;------------------------------------------
Trigger MEtoME1_5chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses >= 3

    Affects MilitaryExpensesReset  4  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  3  Chance  100
;------------------------------------------
Trigger MEtoME1_6chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses >= 2

    Affects MilitaryExpensesReset  3  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  2  Chance  100
;------------------------------------------
Trigger MEtoME1_7chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses >= 1

    Affects MilitaryExpensesReset  2  Chance  100
    Affects MilitaryExpenses  1  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
; any missed costs that are too high to count (over 3300) will get carried to next turn
;------------------------------------------
; ME1 to ME4 Reckoners
;------------------------------------------
Trigger ME1toME2_1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 = 9

    Affects MilitaryExpenses1Reset  10  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
Trigger ME1toME3_2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 = 9

    Affects MilitaryExpenses1Reset  10  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2Reset  2  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
Trigger ME1toME4_3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 = 9

    Affects MilitaryExpenses1Reset  10  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses3Reset  2  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
    Affects MilitaryExpenses4  1  Chance  100
;------------------------------------------
Trigger ME1toME2_4chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 4
          and Trait MilitaryExpenses2 >= 1

    Affects MilitaryExpenses1Reset  5  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2  4  Chance  100
;------------------------------------------
Trigger ME1toME3_4chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 4
          and Trait MilitaryExpenses3 >= 1

    Affects MilitaryExpenses1Reset  5  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses3  4  Chance  100
;------------------------------------------
Trigger ME1toME4_4chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 4
          and Trait MilitaryExpenses4 >= 1

    Affects MilitaryExpenses1Reset  5  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses4  4  Chance  100
;------------------------------------------
Trigger ME1toME2_3chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 3
          and Trait MilitaryExpenses2 >= 1

    Affects MilitaryExpenses1Reset  4  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2  3  Chance  100
;------------------------------------------
Trigger ME1toME3_3chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 3
          and Trait MilitaryExpenses3 >= 1

    Affects MilitaryExpenses1Reset  4  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses3  3  Chance  100
;------------------------------------------
Trigger ME1toME4_3chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 3
          and Trait MilitaryExpenses4 >= 1

    Affects MilitaryExpenses1Reset  4  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses4  3  Chance  100
;------------------------------------------
Trigger ME1toME2_2chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 2
          and Trait MilitaryExpenses2 >= 1

    Affects MilitaryExpenses1Reset  3  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2  2  Chance  100
;------------------------------------------
Trigger ME1toME3_2chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 2
          and Trait MilitaryExpenses3 >= 1

    Affects MilitaryExpenses1Reset  3  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses3  2  Chance  100
;------------------------------------------
Trigger ME1toME4_2chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 2
          and Trait MilitaryExpenses4 >= 1

    Affects MilitaryExpenses1Reset  3  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses4  2  Chance  100
;------------------------------------------
Trigger ME1toME2_1chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 1
          and Trait MilitaryExpenses2 >= 1

    Affects MilitaryExpenses1Reset  2  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses2  1  Chance  100
;------------------------------------------
Trigger ME1toME3_1chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 1
          and Trait MilitaryExpenses3 >= 1

    Affects MilitaryExpenses1Reset  2  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses3  1  Chance  100
;------------------------------------------
Trigger ME1toME4_1chip
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MilitaryExpenses1 >= 1
          and Trait MilitaryExpenses4 >= 1

    Affects MilitaryExpenses1Reset  2  Chance  100
    Affects MilitaryExpenses1  1  Chance  100
    Affects MilitaryExpenses4  1  Chance  100

;------------------------------------------
;------------------------------------------
;BGR Triggers Part 1 Ends Here. More Triggers at end of file.
;
;NOTE BB&B triggers and traits tweaked to match BGR versions.
;------------------------------------------
;BGR Triggers Part 2 Begins Here.
;------------------------------------------
;next 6 Byg Triggers for use if BBB mod present
;------------------------------------------
;------------------------------------------
Trigger Captured_Settlement
    WhenToTest GeneralCaptureSettlement

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
	and IsFactionLeader

    Affects Offensive_To_Nobles -1  Chance  100

; byg wholly new trigger to bounce leader back from offensive trait... check if generalcapturesett trigger can only affect leader
;------------------------------------------
Trigger Captured_Settlement2
    WhenToTest GeneralCaptureSettlement

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
	and not IsFactionLeader
	and Trait Disobedient >= 1

    Affects Obedient 1 Chance  100

;byg disloyal general becomes loyal on taking settlement, pleased with his leaders mission, obedient  and nothing wont become more obedient though
;------------------------------------------
Trigger Captured_Settlement3
    WhenToTest GeneralCaptureSettlement

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
	and not IsFactionLeader
	and Trait Obedient <= 1

    Affects Obedient 1 Chance  100

;byg obedient or nothing general becomes more obedient on taking settlement, pleased with his leaders mission
;------------------------------------------
Trigger Leader_Major_Victory
    WhenToTest PostBattle

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
          and IsFactionLeader
          and WonBattle
          and not BattleOdds < 1
          and PercentageEnemyKilled > 40
          and PercentageUnitAttribute general_unit < 7

    Affects Offensive_To_Nobles -1  Chance  100

;byg new trait cancels offends nobility by 1 level if leader wins major victory
;------------------------------------------
Trigger Loyalty_Realism
    WhenToTest CharacterTurnEnd

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
	and IsGeneral
	and not IsFactionLeader
                and Trait Loyal >= 2
	and Trait Disobedient >= 1

    Affects Obedient 1 Chance  50

;byg may set any disobedient gens with loyal trait very loyal or better as obedient
;------------------------------------------
Trigger No_Offending_for_AI
    WhenToTest CharacterTurnEnd

    Condition FactionLeaderTrait Offensive_To_Nobles >= 1
	and IsFactionLeader
	and not CharacterIsLocal

    Affects Offensive_To_Nobles -1  Chance  100

; byg enable/disable this trigger to stop/start ai offending nobles.
;in mid campaign will recover ai if save game compatible
;------------------------------------------
; Field Morale System
;------------------------------------------
Trigger SetGensReady
    WhenToTest CharacterTurnStart

    Condition I_TurnNumber = 0
          and Trait Supplies = 0

    Affects Turnsaway  12  Chance  100
    Affects Supplies  1  Chance  100

; So all Gens start at Turnsaway level Ready. Removed "and CharacterIsLocal"
;------------------------------------------
Trigger Turns_Away_NewGen
    WhenToTest CharacterTurnEnd

    Condition Trait Supplies < 1

    Affects Turnsaway  12  Chance  100
    Affects Supplies  3  Chance  100

; ready level to new gens, CharacterTurnStart didn't work for new gens. Removed "and CharacterIsLocal"
;------------------------------------------
Trigger Turns_Away
    WhenToTest CharacterTurnEnd

    Condition EndedInSettlement
          and PopulationOwnReligion < 50
          and CharacterIsLocal

    Affects Away  1  Chance  100

;In settlement, but in low religion home territory
;------------------------------------------
Trigger Turns_Away2
    WhenToTest CharacterTurnEnd

    Condition not EndedInSettlement
          and CharacterIsLocal

    Affects Away  1  Chance  100

; if you aren't in a settlement then you are away
;------------------------------------------
Trigger Turns_Away3
    WhenToTest CharacterTurnEnd

    Condition EndedInSettlement
          and Trait Away > 0
          and CharacterIsLocal
          and SettlementBuildingExists >= wooden_pallisade

    Affects Away  -1  Chance  100

; if settlement has no military buildings (you destroyed them or weren't built) then you are NOT away (old method)
; general and army recuperates if in city, even if <50 religion.
; in summary, armies recover in any settlement except castles below 50% own religion. CHANGED GOVERNORBUILDING TO SETTLEMENT >=wooden etc
; because was only affecting the governor, not other generals in town
;------------------------------------------
Trigger Home_decrease1
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway > 2

    Affects Turnshome 40  Chance  100
    Affects Turnsaway 36  Chance  100

;reduces levels ready to mutinous by 1 level
;------------------------------------------
Trigger Home_decrease2
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway = 3

    Affects Turnshome  40  Chance  100
    Affects Turnsaway  36  Chance  100

;ready and what was originally weary now go down to eager
;------------------------------------------
Trigger Home_Increase1
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway = 2

    Affects Turnshome  39  Chance  100
    Affects Turnsaway  40  Chance  100

; these next 4 triggers add 1 to eager until ready, at 12 points. now, original eager, ready and weary all at 12 points on ready.
;------------------------------------------
Trigger Home_Increase2
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway = 2

    Affects Turnshome  39  Chance  100
    Affects Turnsaway  40  Chance  100

;------------------------------------------
Trigger Home_Increase3
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway = 2

    Affects Turnshome  39  Chance  100
    Affects Turnsaway  40  Chance  100

;------------------------------------------
Trigger Home_Increase4
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway = 2

    Affects Turnshome  39  Chance  100
    Affects Turnsaway  40  Chance  100

;NOTE could just put Turnsaway  1 Chance  100, Turnshome only needed if reducing turnsaway!
;------------------------------------------
Trigger Home_Increase5
    WhenToTest CharacterTurnEnd

    Condition Trait Away < 1
          and CharacterIsLocal
          and Trait Turnsaway < 2

    Affects Turnshome  20  Chance  100
    Affects Turnsaway  21  Chance  100

; adds 1 points (not level) to anything below eager. So Bent takes 4x longer to lose than eager in a native city.
;------------------------------------------
;Trigger Turns_Away_Limit
;    WhenToTest CharacterTurnEnd
;
;    Condition Trait Away > 0
;           and Trait Turnsaway = 8
;          and CharacterIsLocal
;
;    Affects Turnshome  40  Chance  100
;    Affects Turnsaway  39  Chance  100
;
;;Mutinous, from previous turn, reduce one point, so mutinous never > 32 points-----------edited allowed over 32, prevents multigains
;------------------------------------------
Trigger Turns_Away_Increment
    WhenToTest CharacterTurnEnd

    Condition Trait Away > 0
          and CharacterIsLocal

    Affects Turnsaway  1  Chance  100
    Affects Away -1  Chance  100

; if NOT in settlement (non julii) or legion settlement increase turnsaway
;------------------------------------------
;King's Authority (Supplies Related)
;------------------------------------------
Trigger Kings_Authority_Reset1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait SuppressAuthority >= 4

    Affects AntiSuppress 10  Chance  100
    Affects SuppressAuthority  6  Chance  100

;7 to 3, 6 to 2, 5 to 1, 4 to 0 (-4 equivalent)
;------------------------------------------
Trigger Kings_Authority_Reset2
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait SuppressAuthority >= 2

    Affects AntiSuppress 10  Chance  100
    Affects SuppressAuthority  8  Chance  100

; 3 to 1, 2 to 0 (-2 equivalent)
;------------------------------------------
Trigger Kings_Authority_Reset3
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait SuppressAuthority >= 1

    Affects AntiSuppress 10  Chance  100
    Affects SuppressAuthority  9  Chance  100

; 1 to 0 (-1 equivalent)
;3 triggers above drop SuppressAuthority trait to 0 from any number upto 7.
;------------------------------------------
; CRIME & PUNISHMENT
;------------------------------------------
; Attacks Against Orders
;------------------------------------------
; Gives NotComplied Trait Section
;------------------------------------------
Trigger AttackAgainstOrdersNC
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and not HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 3
;	and Trait Orders > 2
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
	and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;If 'and notcomplied = 0' is removed it lets notcomplied go over 1 thresh. Means multiple breeches would make compliance take longer to achieve.
;i.e. even once a gen banished himself would take one extra turn per breech to clam faction down.
;------------------------------------------
Trigger AttackAgainstOrdersNCcp4a
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and not IsFactionHeir
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 4
;	and Trait Orders > 2
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
	and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;picks up logens and wcs who are not the heir
;------------------------------------------
Trigger AttackAgainstOrdersNCcp4b
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and not HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 4
;	and Trait Orders > 2
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
	and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

; picks up logens and heir if not a wc
;------------------------------------------
Trigger AttackAgainstOrdersNCDO
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower >= 3
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
	and Trait NotComplied = 0
        and Trait DefiedOrders >= 3

    Affects NotComplied  1  Chance  100

; covers WC criminals (summoned or banished) reflecting orders being broken again.
;------------------------------------------
; Not Complied Good and Bad
;------------------------------------------
Trigger NotReleaseAgainstOrdersNCDO
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType release
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;For not sparing prisoners
;------------------------------------------
Trigger ExterminateAgainstOrdersNCDO
    WhenToTest ExterminatePopulation

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;For not occupying settlement
;------------------------------------------
Trigger OccupyAgainstOrdersNCDO
    WhenToTest OccupySettlement

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;For occupying settlement if Bad
;------------------------------------------
Trigger NotExecutingAgainstOrdersNCDO
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType execute
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait NotComplied = 0

    Affects NotComplied  1  Chance  100

;for not executing prisoners
;------------------------------------------
; Giving Defied Orders Good and Bad Section (0 to 3 or 4)
;------------------------------------------
Trigger NotReleaseAgainstOrdersDO1
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType release
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders < 1

    Affects DefiedOrders  3  Chance  100

;For not sparing prisoners
;------------------------------------------
Trigger ExterminateAgainstOrdersDO1
    WhenToTest ExterminatePopulation

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders < 1

    Affects DefiedOrders  3  Chance  100

;For not occupying settlement
;------------------------------------------
Trigger OccupyAgainstOrdersDO1
    WhenToTest OccupySettlement

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders < 1

    Affects DefiedOrders  4  Chance  100

;For occupying settlement if Bad
;------------------------------------------
Trigger NotExecutingAgainstOrdersDO1
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType execute
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders < 1

    Affects DefiedOrders  4  Chance  100

;for not executing prisoners
;------------------------------------------
; Giving Defied Orders Good and Bad Section (1 to 3 or 4)
;------------------------------------------
Trigger NotReleaseAgainstOrdersDO2
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType release
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 1

    Affects DefiedOrders  2  Chance  100

;For not sparing prisoners
;------------------------------------------
Trigger ExterminateAgainstOrdersDO2
    WhenToTest ExterminatePopulation

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 1

    Affects DefiedOrders  2  Chance  100

;For not occupying settlement
;------------------------------------------
Trigger OccupyAgainstOrdersDO2
    WhenToTest OccupySettlement

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 1

    Affects DefiedOrders  3  Chance  100

;For occupying settlement if Bad
;------------------------------------------
Trigger NotExecutingAgainstOrdersDO2
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType execute
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 1

    Affects DefiedOrders  3  Chance  100

;for not executing prisoners
;------------------------------------------
; Giving Defied Orders Good and Bad Section (2 to 3 or 4)
;------------------------------------------
Trigger NotReleaseAgainstOrdersDO3
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType release
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 2

    Affects DefiedOrders  1  Chance  100

;For not sparing prisoners
;------------------------------------------
Trigger ExterminateAgainstOrdersDO3
    WhenToTest ExterminatePopulation

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Good = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 2

    Affects DefiedOrders  1  Chance  100

;For not occupying settlement
;------------------------------------------
Trigger OccupyAgainstOrdersDO3
    WhenToTest OccupySettlement

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 2

    Affects DefiedOrders  2  Chance  100

;For occupying settlement if Bad
;------------------------------------------
Trigger NotExecutingAgainstOrdersDO3
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType execute
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 2

    Affects DefiedOrders  2  Chance  100

;for not executing prisoners
;------------------------------------------
; Giving Defied Orders Good and Bad Section (3 to 4)
;------------------------------------------
Trigger OccupyAgainstOrdersDO4
    WhenToTest OccupySettlement

    Condition IsGeneral
        and CharacterIsLocal
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 3

    Affects DefiedOrders  1  Chance  100

;For occupying settlement if Bad
;------------------------------------------
Trigger NotExecutingAgainstOrdersDO4
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition not RansomType execute
        and CharacterIsLocal
        and IsGeneral
        and not IsFactionLeader
;        and FactionLeaderTrait CentralisedPower = 4
        and FactionLeaderTrait Bad = 1
        and not AtSea
        and not IsOnCrusade
        and not IsOnJihad
        and Trait DefiedOrders = 3

    Affects DefiedOrders  1  Chance  100

;for not executing prisoners
;------------------------------------------
; Gives Defied Orders Attack Against Orders Trait Section
;------------------------------------------
Trigger AttackAgainstOrdersDONC
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 3
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
        and Trait DefiedOrders = 3
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100

;catches criminal WCs (summoned & in prof recruitment time) commiting crime again whether obeying prior punishment or not.
; so if they are crim3, then get wc anc, they can't suddenely get away with another transgression.
;------------------------------------------
Trigger AttackAgainstOrdersDO
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and not HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 3
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
        and Trait DefiedOrders < 4
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100

;increments punishment for general or begins punishment. fine here too?
;------------------------------------------
Trigger AttackAgainstOrdersDOcp4a
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and IsFactionHeir
	and not HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 4
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
        and Trait DefiedOrders < 4
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100

;picks up heir without being in WC, cp4
;increments punishment for general or begins punishment. fine here too?
;------------------------------------------
Trigger AttackAgainstOrdersDOcp4b
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and HasAncType warcouncil
	and not IsFactionHeir
	and not IsFactionLeader
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 4
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
        and Trait DefiedOrders < 4
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100

; picks up wc without being heir or king cp4
;increments punishment for general or begins punishment. fine here too?
;------------------------------------------
Trigger AttackAgainstOrdersDOcp4c
    WhenToTest PostBattle

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
	and not IsFactionHeir
	and not HasAncType warcouncil
	and InEnemyLands
	and WasAttacker
	and not GeneralFoughtFaction slave
	and FactionLeaderTrait CentralisedPower = 4
	and not AtSea
        and PercentageUnitAttribute general_unit < 100
        and Trait DefiedOrders < 4
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100

;increments punishment for general or begins punishment. fine here too?
;picks up not heir, not wc, not king, cp4
;------------------------------------------
;  Gain if Pardon available
;------------------------------------------
Trigger Announce_Pardon_Available
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and I_EventCounter ready_pardon = 1
                and Trait PardonAvailable < 1

    Affects PardonAvailable  1  Chance  100
;------------------------------------------
Trigger Announce_Pardon_Available_Reset1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 1
                and Trait PardonAvailable = 1

    Affects PardonAvailable  -1  Chance  100
;------------------------------------------
Trigger Announce_Pardon_Available_Reset2
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
	and IsFactionLeader
                and I_EventCounter ready_pardon = 0
                and Trait PardonAvailable = 1

    Affects PardonAvailable  -1  Chance  100
;------------------------------------------
;  Pardons  Order Issued From Current & New Leader
;------------------------------------------
;  Current Leader Offers Pardon to Rabble Rousers
;------------------------------------------
Trigger CurrentLeaderOffersPardonGens1
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 1
                and I_EventCounter random_accept = 1

    Affects PardonAccepted  1  Chance  100

;------------------------------------------
;Trigger CurrentLeaderOffersPardonGens2
;    WhenToTest CharacterTurnEnd
;
;    Condition CharacterIsLocal
;	and IsFactionLeader
;                and Trait Pardon = 0
;                and Trait LeaderDefied > 0
;                and I_EventCounter pardon_attempt = 1
;                and PardonAccepted = 0
;
;    Affects PardonAccepted  2  Chance  100
;
;; if random rabblerouser did not accept the pardon 60% (1) then set PardonAccepted to 2. trigger not needed.
;------------------------------------------
Trigger CurrentLeaderWeakGrip1
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 1
                and Trait ReinsOfPower = 0

    Affects ReinsOfPower  1  Chance  100
; 0 to 1, weak if attempted
;------------------------------------------
Trigger CurrentLeaderWeakGrip2
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 1
                and Trait ReinsOfPower = 2

    Affects ReinsOfPowerReset  2  Chance  100
    Affects ReinsOfPower  1  Chance  100
;2 to 1, weak if attempted
;------------------------------------------
Trigger CurrentLeaderTightGrip1
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 2
                and Trait ReinsOfPower = 0

    Affects ReinsOfPower  2  Chance  100
; 0 to 2, strong if not attempted
;------------------------------------------
Trigger CurrentLeaderTightGrip2
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 2
                and Trait ReinsOfPower = 1

    Affects ReinsOfPower  1  Chance  100
; 1 to 2, strong now if not attempted, but previously did.
;------------------------------------------

Trigger CurrentLeaderNotPardoningGens2
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait Pardon = 0
                and Trait LeaderDefied > 0
                and I_EventCounter pardon_attempt = 1
                and Trait PardonAccepted = 0

    Affects PardonAccepted  2  Chance  100
    Affects PardonAcceptedReset  3  Chance  100
    Affects PardonAccepted  1  Chance  100

;gives message and is then removed. 1=accepted 2= not accepted
;------------------------------------------
Trigger CurrentLeaderPardonsGens3
;    WhenToTest GovernorCityRebels
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsFactionLeader
                and Trait PardonAccepted = 1
                and Trait Pardon = 0

    Affects Pardon  1  Chance  100
    Affects PardonAcceptedReset  2  Chance  100
    Affects PardonAccepted  1  Chance  100

;gives message and is then removed. Gives Pardon FL.
;------------------------------------------
; New Leader Issues Pardon
;------------------------------------------
Trigger NewLeaderPardonsGens
    WhenToTest BecomesFactionLeader

    Condition Trait Pardon < 1
;    Condition CharacterIsLocal*crashes with becomesfl
;          and Trait Pardon = 0
          and I_TurnNumber >= 1

    Affects Pardon  1  Chance  100

;reset done nr end
;------------------------------------------
; Pardons Removed from Gens then Reapplied if FL has given Pardon Order
;------------------------------------------
; crusade pardoned section
;------------------------------------------
Trigger JoinCrusadeOrJihadPardonsGen
    WhenToTest GeneralJoinCrusade

    Condition CharacterIsLocal
          and Trait Pardoned = 0
          and Trait DefiedOrders >= 3

    Affects Pardoned  1  Chance  100

;------------------------------------------
Trigger GensPardonedReset
    WhenToTest CharacterTurnEnd

    Condition Trait Pardoned = 1
          and not Trait crusadecost = 1
          and not Trait jihadcost = 1

    Affects PardonedReset  2  Chance  100
    Affects Pardoned  1  Chance  100

; Reset except when just joined crusade or jihad (done separately below)
;------------------------------------------
Trigger GensJoinCrusadePardonedDO3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait DefiedOrders = 3
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  4  Chance  100
    Affects DefiedOrders  1  Chance  100
    Affects PardonedReset  2  Chance  100
    Affects Pardoned  1  Chance  100

;pardoned for summons when joined crusade then resets pardoned
;------------------------------------------
Trigger GensJoinCrusadePardonedDO4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait DefiedOrders = 4
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  5  Chance  100
    Affects DefiedOrders  1  Chance  100
    Affects PardonedReset  2  Chance  100
    Affects Pardoned  1  Chance  100

;pardoned for banishment when joined crusade then resets pardoned
;------------------------------------------
; Current Leader Gives Pardoned Section
;------------------------------------------
Trigger CurrentLeaderGensPardoned3and4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
;          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders >= 3
          and Trait Pardoned = 0
          and I_EventCounter pardon_attempt = 1
          and I_EventCounter random_accept = 1

    Affects Pardoned  1  Chance  100

;  Pardoned Order Received by Criminal Gens if summoned or banished only.
; Need this separate section to catch gens read pre FL so no refs to FL here.
;------------------------------------------
Trigger CurrentLeaderGensPardonedRemoveDO3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait DefiedOrders = 3
          and Trait Pardoned = 1
          and I_EventCounter pardon_attempt = 1
          and I_EventCounter random_accept = 1

    Affects DefiedOrdersReset  4  Chance  100
    Affects DefiedOrders  1  Chance  100

;pardoned for summons
;------------------------------------------
Trigger CurrentLeaderGensPardonedRemoveDO4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait DefiedOrders = 4
          and Trait Pardoned = 1
          and I_EventCounter pardon_attempt = 1
          and I_EventCounter random_accept = 1

    Affects DefiedOrdersReset  5  Chance  100
    Affects DefiedOrders  1  Chance  100

;pardoned for banishment
;------------------------------------------
; New Leader Gives Pardoned Section
;------------------------------------------
Trigger NewLeaderGensPardonedAll
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders >= 1
          and Trait Pardoned = 0

    Affects Pardoned  1  Chance  100

;  Issues Pardon Order to Criminal Gens
;------------------------------------------
Trigger NewLeaderGensPardoned1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders = 1
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  2  Chance  100
    Affects DefiedOrders  1  Chance  100

;pardoned for warning
;------------------------------------------
Trigger NewLeaderGensPardoned2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders = 2
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  3  Chance  100
    Affects DefiedOrders  1  Chance  100

; pardoned for fine - but paid if same turn, record removed if later turn
;------------------------------------------
Trigger NewLeaderGensPardoned3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders = 3
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  4  Chance  100
    Affects DefiedOrders  1  Chance  100

;pardoned for summons
;------------------------------------------
Trigger NewLeaderGensPardoned4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and FactionLeaderTrait Pardon = 1
          and Trait DefiedOrders = 4
          and Trait Pardoned = 1

    Affects DefiedOrdersReset  5  Chance  100
    Affects DefiedOrders  1  Chance  100

;pardoned for banishment
;------------------------------------------
; Removes Not Complied if Defied Orders Removed
;------------------------------------------
Trigger PardonedRemovesNotComplied
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
;          and Trait Pardoned = 1
          and Trait DefiedOrders = 0
          and Trait NotComplied = 1

    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100

;removes not complied if exists if defied orders has been removed
;------------------------------------------
; New FL Pardons Self
;------------------------------------------
Trigger NewLeaderPardonsSelf1
    WhenToTest BecomesFactionLeader

    Condition Trait DefiedOrders = 1

    Affects DefiedOrdersReset  2  Chance  100
    Affects DefiedOrders  1  Chance  100

; could use pardoned instead of these triggers, but FL pardoned by himself looks wrong....will need to have notcomplied removed if exists..do elsewhere?
; Could negate all by removing 4 regardless of level as leader will never need this trait again.
; but would need to remove antitrait or it would show.
;------------------------------------------
Trigger NewLeaderPardonsSelf2
    WhenToTest BecomesFactionLeader

    Condition Trait DefiedOrders = 2

    Affects DefiedOrdersReset  3  Chance  100
    Affects DefiedOrders  1  Chance  100

;------------------------------------------
Trigger NewLeaderPardonsSelf3
    WhenToTest BecomesFactionLeader

    Condition Trait DefiedOrders = 3

    Affects DefiedOrdersReset  4  Chance  100
    Affects DefiedOrders  1  Chance  100

;------------------------------------------
Trigger NewLeaderPardonsSelf4
    WhenToTest BecomesFactionLeader

    Condition Trait DefiedOrders = 4

    Affects DefiedOrdersReset  5  Chance  100
    Affects DefiedOrders  1  Chance  100

;------------------------------------------
; Removes Not Complied if Defied Orders Removed For New FL
;------------------------------------------
Trigger RemovesNotCompliedFL
    WhenToTest BecomesFactionLeader

    Condition Trait NotComplied = 1

    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100

;removes not complied if exists in  NEW FL
;------------------------------------------
; Fines resets go at End turn - following deductions at start turn.
;------------------------------------------
Trigger FinesResetEnd1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
;          and CharacterIsLocal
          and Trait Fines >= 5

    Affects FinesReset  6  Chance  100
    Affects Fines  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger FinesResetEnd2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
;          and CharacterIsLocal
          and Trait Fines >= 3

    Affects FinesReset  4  Chance  100
    Affects Fines  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger FinesResetEnd3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
;          and CharacterIsLocal
          and Trait Fines >= 2

    Affects FinesReset  3  Chance  100
    Affects Fines  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
Trigger FinesResetEnd4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
;          and CharacterIsLocal
          and Trait Fines >= 1

    Affects FinesReset  2  Chance  100
    Affects Fines  1  Chance  100
;these trigs should come after script deduct
;------------------------------------------
; Fined for Corruption
;------------------------------------------
Trigger FinedForCorruption
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Caught = 1

    Affects Fines  8  Chance  100
    Affects Poverty  41  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  4  Chance  100

;Fined 4000, no effect on public order factionwide, does not affects criminal record. Corruption is common, but he simply got caught for it.
;------------------------------------------
; Checks for compliance with punishments
;------------------------------------------
;Trigger NotCompliedReset1
;   WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and Trait NotComplied = 1
;
;    Affects NotCompliedReset  2  Chance  100
;    Affects NotComplied  1  Chance  100
;
;resets NotComplied before re-adding
;------------------------------------------
Trigger Complied1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait DefiedOrders = 1
          and Trait NotComplied > 0

    Affects Fines  1  Chance  100
    Affects Poverty  6  Chance  100
    Affects Wealth  1  Chance  100
    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100
    Affects MinusHundreds  5  Chance  100

;if warning held for this turn then NotComplied = 0, Complied with punishment. Fined 500
; Note faction will still reel for a turn as DO causes are mirrored in script.
;------------------------------------------
Trigger Complied2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait DefiedOrders = 2
          and Trait NotComplied > 0

    Affects Fines  4  Chance  100
    Affects Poverty  21  Chance  100
    Affects Wealth  1  Chance  100
    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100
    Affects MinusThousands  2  Chance  100

;if fined held for this turn then NotComplied = 0, Complied with punishment. Fined 2000
;------------------------------------------
Trigger Complied3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait DefiedOrders = 3
          and DistanceCapital <= 3
          and Trait NotComplied > 0

    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100

;if in or next to capital then NotComplied = 0, Complied with punishment
;------------------------------------------
Trigger Complied4EnemyLand
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait DefiedOrders = 4
          and InEnemyLands
          and Trait NotComplied > 0

    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100

;if in foreign lands then NotComplied = 0, Complied with punishment
;------------------------------------------
Trigger Complied4AtSea
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait DefiedOrders = 4
          and AtSea
          and Trait NotComplied > 0

    Affects NotCompliedReset  2  Chance  100
    Affects NotComplied  1  Chance  100

;if at sea then NotComplied = 0, Complied with punishment
;------------------------------------------
; END SECTION reckoner 5 after supplies (-4800max (3x1600)) and fine (-500max)(5,300) and corruptor(only thousands currently).
; with ship+inflation, could be up to 9,600......................either reduce ship supply amounts or increase reckoners.
; Quadruple reckoner (copes to -5400).
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 1
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 2
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 3
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 4
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 5
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions pt 6
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEndComply6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1EndComply6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2EndComply6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEndComply
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEndComply
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; Check for non-compliance with orders
;------------------------------------------
Trigger NotCompliedSummoned3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait DefiedOrders = 3
          and DistanceCapital >= 4
          and Trait NotComplied < 1

    Affects NotComplied  1  Chance  100

;if far from capital or wasn't, but left, then NotComplied = 1,  Not Complied with punishment
;------------------------------------------
Trigger NotCompliedBanishment4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait DefiedOrders = 4
          and not InEnemyLands
          and not AtSea
          and Trait NotComplied < 1

    Affects NotComplied  1  Chance  100

;if in home lands or wasn't ,but returned, then NotComplied = 1,  Not Complied with punishment
;------------------------------------------
Trigger DefyingOrdersRemovesHasWarchest
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	and IsGeneral
	and not IsFactionLeader
;	and not HasAncType warcouncil
	and Trait DefiedOrders >= 3
;          and Trait NotComplied = 1--------not needed, will now stop recruitment for any summons or banishment history
	and Trait HasWarchest = 1

    Affects HasWarchestReset  2  Chance  100
    Affects HasWarchest  1  Chance  100

; removes haswarchest (recruiting authority), stops 1 level of recruitment
;------------------------------------------
Trigger DefyingOrdersStopsRecruit
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	  and IsGeneral
          and Trait StopR = 0
          and Trait DefiedOrders >= 3
;          and Trait NotComplied = 1--------not needed, will now stop recruitment for any summons or banishment history

    Affects StopR  1  Chance  100

; if summoned or banished stops another level of recruitment
;------------------------------------------
Trigger DefyingOrdersRemoveCPEffect
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
	  and IsGeneral
          and Trait CentralisedPowerEffect = 1
          and Trait DefiedOrders >= 3
;          and Trait NotComplied = 1--------not needed, will now stop recruitment for any summons or banishment history

    Affects CentralisedPowerReset  2  Chance  100
    Affects CentralisedPowerEffect  1  Chance  100

; if summoned or banished stops another level of recruitment
;------------------------------------------
; Leader defied reset
;------------------------------------------n-------add start turns compliance check here?
Trigger LeaderDefiedReset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait LeaderDefied = 4
          and I_EventCounter stilldefy = 0

    Affects LeaderDefiedReset  5  Chance  100
    Affects LeaderDefied  1  Chance  100

;Resets leaderdefied prior to readding each turn. for all gens
;------------------------------------------
Trigger LeaderDefiedReset2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait LeaderDefied = 3
          and I_EventCounter stilldefy = 0

    Affects LeaderDefiedReset  4  Chance  100
    Affects LeaderDefied  1  Chance  100

;Resets leaderdefied prior to readding each turn. for all gens
;------------------------------------------
Trigger LeaderDefiedReset3
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait LeaderDefied = 2
          and I_EventCounter stilldefy = 0

    Affects LeaderDefiedReset  3  Chance  100
    Affects LeaderDefied  1  Chance  100

;Resets leaderdefied prior to readding each turn. for all gens
;------------------------------------------
Trigger LeaderDefiedReset4
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and Trait LeaderDefied = 1
          and I_EventCounter stilldefy = 0

    Affects LeaderDefiedReset  2  Chance  100
    Affects LeaderDefied  1  Chance  100

;Resets leaderdefied prior to readding each turn. for all gens
;------------------------------------------
;Kings Authority Leveller
;------------------------------------------
Trigger Kings_Authority_Leveller1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Attribute Authority >= 7

    Affects SuppressAuthority  4  Chance  100

;------------------------------------------
Trigger Kings_Authority_Leveller2
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Attribute Authority >= 5

    Affects SuppressAuthority  2  Chance  100

;------------------------------------------
Trigger Kings_Authority_Leveller3
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Attribute Authority >= 4

    Affects SuppressAuthority  1  Chance  100

;above 3 triggers reduce authority to 3 from a max of 10, authority above 10 stays relatively larger. 11=4, 12=5 etc
;------------------------------------------
; Leader Defied
;------------------------------------------
; Attacking Against Orders
;------------------------------------------
Trigger LeaderDefiedByBattle0
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority < 1
          and Trait LeaderDefied = 0
          and I_EventCounter battledefy = 1

    Affects LeaderDefied  1  Chance  100

;Effect on the leader when Gens defy orders. levels only vary to deal with diff auth, effectively only 1 level
;------------------------------------------
Trigger LeaderDefiedByBattle1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority >= 3
          and Trait LeaderDefied = 0
          and I_EventCounter battledefy = 1

    Affects LeaderDefied  4  Chance  100

;Effect on the leader when Gens defy orders. This trait previously reset.brings 3 auth to 0, > 3 to 3 less
;------------------------------------------
Trigger LeaderDefiedByBattle2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority = 2
          and Trait LeaderDefied = 0
          and I_EventCounter battledefy = 1

    Affects LeaderDefied  3  Chance  100

;Effect on the leader when Gens defy orders. brings 2 auth to 0
;------------------------------------------
Trigger LeaderDefiedByBattle3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority = 1
          and Trait LeaderDefied = 0
          and I_EventCounter battledefy = 1

    Affects LeaderDefied  2  Chance  100

;Effect on the leader when Gens defy orders. brings 1 auth to 0
;------------------------------------------
; Defying summons or banishment Orders FL
;------------------------------------------
Trigger LeaderStillDefiedByBattle0
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority < 1
          and Trait LeaderDefied = 0
          and I_EventCounter stilldefy = 1

    Affects LeaderDefied  1  Chance  100

;Effect on the leader when Gens defy orders. levels only vary to deal with diff auth, effectively only 1 level
;------------------------------------------
Trigger LeaderStillDefiedByBattle1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority >= 3
          and Trait LeaderDefied = 0
          and I_EventCounter stilldefy = 1

    Affects LeaderDefied  4  Chance  100

;Effect on the leader when Gens defy orders. This trait previously reset.brings 3 auth to 0, > 3 to 3 less
;------------------------------------------
Trigger LeaderStillDefiedByBattle2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority = 2
          and Trait LeaderDefied = 0
          and I_EventCounter stilldefy = 1

    Affects LeaderDefied  3  Chance  100

;Effect on the leader when Gens defy orders. brings 2 auth to 0
;------------------------------------------
Trigger LeaderStillDefiedByBattle3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsFactionLeader
          and Attribute Authority = 1
          and Trait LeaderDefied = 0
          and I_EventCounter stilldefy = 1

    Affects LeaderDefied  2  Chance  100

;Effect on the leader when Gens defy orders. brings 1 auth to 0
;------------------------------------------
;  Defying summons or banishment Orders for non FL Gens
;------------------------------------------
Trigger LeaderDefiedByBattleDisloyalGensAffected
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait LeaderDefied = 0
          and FactionLeaderTrait LeaderDefied >= 1
          and Attribute Loyalty <= 2

    Affects LeaderDefied  1  Chance  100

;Effect on the other generals when Gens defy orders.Gens use level 1 only. This trait previously reset. Two or less Loyalty
;------------------------------------------
Trigger LeaderDefiedByBattleAllOffenderGensAffected2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait LeaderDefied = 0
          and FactionLeaderTrait LeaderDefied >= 1
          and Trait DefiedOrders > 0

    Affects LeaderDefied  1  Chance  100

;Effect on the other generals when Gens defy orders.Gens use level 1 only. This trait previously reset. Previous & Current Offenders
;------------------------------------------
;------------------------------------------
; Reckoner1 TCosts to TWealth for any end turn cost section
; (Moves TreasuryCosts over to TreasuryWealths in 9s) (up to 10,800 moved)
;------------------------------------------
;------------------------------------------
Trigger TCostReckoner1x1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent treasurycost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x7
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x8
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x9
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x10
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x11
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent cost exceeding 9
;------------------------------------------
Trigger TCostReckoner1x12
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait TreasuryCost = 9

    Affects TCReset  10  Chance  100
    Affects TreasuryCost  1  Chance  100
    Affects TreasuryWealth  1  Chance  100

;required after any 'whentotest'to prevent treasury cost exceeding 9
;------------------------------------------
; EXPENSES (for supplies, mercenary hire) (recruitment now separate)
;------------------------------------------
; Treasury too low to pay generals back
;------------------------------------------
;Trigger NoTreasuryforExpenses1
;    WhenToTest CharacterTurnEnd
;
;    Condition CharacterIsLocal
;          and IsGeneral
;          and Trait HasWarchest = 1
;          and Trait Cost = 1
;          and Treasury < 100
;
;    Affects Cost -1  Chance  100
;
; Use triggers like this etc to prevent costs being reclaimed. Script would require changes too.
; or use similar to "expenses not claimed section" further down.
;------------------------------------------
; Reclaiming Expenses for all Recruitment Cost Authorised Generals (FL, WCs, Pro Trainers)
; ( Cost is for supplies and Mercenary hire only. Needs to cover about 10,000, covers 12,200)
;------------------------------------------
Trigger ExpensesClaimed1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100

; reclaims costs over 9 from treasury wealth as gen will be paying with own money.
; Treasury already paid, now add total turn expenses (Cost) back to personal Wealth
;------------------------------------------
Trigger ExpensesClaimed2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed7
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100

; reclaims costs over 9 from treasury wealth as gen will be paying with own money.
; Treasury already paid, now add total turn expenses (Cost) back to personal Wealth
;------------------------------------------
Trigger ExpensesClaimed8
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed9
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed10
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed11
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimed12
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost = 9

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  9  Chance  100
    Affects Hundreds  9  Chance  100
;------------------------------------------
Trigger ExpensesClaimedChip1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost >= 5

    Affects CostReset  6  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  5  Chance  100
    Affects Hundreds  5  Chance  100

;------------------------------------------
Trigger ExpensesClaimedChip2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost >= 3

    Affects CostReset  4  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  3  Chance  100
    Affects Hundreds  3  Chance  100

;------------------------------------------
Trigger ExpensesClaimedChip3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost >= 2

    Affects CostReset  3  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  2  Chance  100
    Affects Hundreds  2  Chance  100

;------------------------------------------
Trigger ExpensesClaimedChip4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait HasWarchest = 1
          and Trait Cost >= 1

    Affects CostReset  2  Chance  100
    Affects Cost  1  Chance  100
    Affects Wealth  1  Chance  100
    Affects Hundreds  1  Chance  100

;------------------------------------------
; END SECTION Reckoner
; Needed for Additions Or Both Additions and Deductions (double reckoner)
;------------------------------------------
Trigger HundredsWealthCheckResetEnd4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1End4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2End4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
Trigger HundredsWealthCheckResetEnd4b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1End4b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2End4b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEnd4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEnd4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; When Expenses Not Claimed
; for anyone without HasWarchest (recruit auth) Cost offset vs TreasuryCost/TreasuryWealth
; works for upto about 8,300. Add more if needed.
;------------------------------------------
Trigger ExpensesNotClaimedOver9a900
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.
;------------------------------------------
Trigger ExpensesNotClaimedOver9b1800
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9c2700
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9d3600
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9e4500
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9f5400
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9g6300
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9h7200
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9i8100
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9j9000
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9k9900
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
;------------------------------------------
Trigger ExpensesNotClaimedOver9k10800
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost = 9
          and Trait TreasuryWealth > 0

    Affects CostReset  10  Chance  100
    Affects Cost  1  Chance  100
    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100

; deducts costs over 9 from treasurywealth as gen will be paying with own money.Not FL and not WC could now be covered by haswc=0
; these triggers having to cover supplies
;------------------------------------------
Trigger ExpensesNotClaimedTwealthToTcost1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 5
          and Trait TreasuryCost < 5
          and Trait TreasuryWealth > 0

    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  9  Chance  100

; in the event that tcost has been passed into twealth
; need to deduct cost from twealth instead
;------------------------------------------
Trigger ExpensesNotClaimed1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 5
          and Trait TreasuryCost >= 5

    Affects CostReset  6  Chance  100
    Affects Cost  1  Chance  100
    Affects TCReset  6  Chance  100
    Affects TreasuryCost  1  Chance  100

; deducts costs from treasury costs as treasury will not be paying these costs
;------------------------------------------
Trigger ExpensesNotClaimedTwealthToTcost2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 3
          and Trait TreasuryCost < 3
          and Trait TreasuryWealth > 0

    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  9  Chance  100

; in the event that tcost has been passed into twealth
; need to deduct cost from twealth instead
;------------------------------------------
Trigger ExpensesNotClaimed2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 3
          and Trait TreasuryCost >= 3

    Affects CostReset  4  Chance  100
    Affects Cost  1  Chance  100
    Affects TCReset  4  Chance  100
    Affects TreasuryCost  1  Chance  100

;------------------------------------------
Trigger ExpensesNotClaimedTwealthToTcost3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 2
          and Trait TreasuryCost < 2
          and Trait TreasuryWealth > 0

    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  9  Chance  100

; in the event that tcost has been passed into twealth
; need to deduct cost from twealth instead
;------------------------------------------
Trigger ExpensesNotClaimed3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 2
          and Trait TreasuryCost >= 2

    Affects CostReset  3  Chance  100
    Affects Cost  1  Chance  100
    Affects TCReset  3  Chance  100
    Affects TreasuryCost  1  Chance  100

;------------------------------------------
Trigger ExpensesNotClaimedTwealthToTcost4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 1
          and Trait TreasuryCost < 1
          and Trait TreasuryWealth > 0

    Affects TWReset  2  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryCost  9  Chance  100

; in the event that tcost has been passed into twealth
; need to deduct cost from twealth instead
;------------------------------------------
Trigger ExpensesNotClaimed4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and not IsFactionLeader
          and Trait HasWarchest = 0
;          and not HasAncType warcouncil
          and Trait Cost >= 1
          and Trait TreasuryCost >= 1

    Affects CostReset  2  Chance  100
    Affects Cost  1  Chance  100
    Affects TCReset  2  Chance  100
    Affects TreasuryCost  1  Chance  100

;------------------------------------------
; Treasury Nine Reckoner
;puts excess treasury wealth into nines
;------------------------------------------
Trigger TreasuryNine_Reckoner1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner7
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner8
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
Trigger TreasuryNine_Reckoner9
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait TreasuryWealth = 9

    Affects TWReset  10  Chance  100
    Affects TreasuryWealth  1  Chance  100
    Affects TreasuryNine  1  Chance  100

;------------------------------------------
;------------------------------------------
; Test Cost Missed Removal (useful for bugcheck)
;no value for cost should remain
; if it does trigger should only trigger for gens who do not use cost.
;------------------------------------------
;------------------------------------------
Trigger CostTestShouldNotTrigger
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Cost >= 1

    Affects CostReset  2  Chance  100
    Affects Cost  1  Chance  100

; if this trigger fires then need to do 1 to 9 level removal.
;------------------------------------------
;------------------------------------------
; CRUSADES and JIHADS Section (donations)
;------------------------------------------
;------------------------------------------
; Crusades/Jihads deducts resets (donations)
;------------------------------------------
Trigger deductforcrusadereset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait bgrdeduct = 1
          and CharacterReligion catholic
          and not I_CrusadeInProgress

    Affects bgrdeduct -1  Chance  100

; crusade not in progress, reset bgrdeduct
;------------------------------------------
Trigger deductforcrusadereset2
    WhenToTest GeneralJoinCrusade

    Condition IsCrusade
          and CharacterReligion catholic
          and IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeduct = 1

    Affects bgrdeduct -1  Chance  100

;reset bgrdeduct if fl joins crusade for FL
;------------------------------------------
Trigger deductforcrusadereset2b
    WhenToTest GeneralJoinCrusade

    Condition IsCrusade
          and CharacterReligion catholic
          and IsFactionLeader
          and CharacterIsLocal
          and Trait ReligiousWarTax = 1

    Affects ReligiousWarTax -1  Chance  100

;reset ReligiousWarTax if fl joins crusade for FL
;------------------------------------------
Trigger deductforcrusadereset3
    WhenToTest CharacterTurnEnd

    Condition CharacterReligion catholic
          and IsGeneral
          and CharacterIsLocal
          and FactionLeaderTrait bgrdeduct = 0
          and Trait bgrdeduct = 1

    Affects bgrdeduct -1  Chance  100

;reset bgrdeduct if FL joined crusade. for Generals
;------------------------------------------
Trigger deductforcrusadereset4
    WhenToTest GeneralJoinCrusade

    Condition IsCrusade
          and CharacterReligion catholic
          and IsGeneral
          and CharacterIsLocal
          and Trait bgrdeduct = 1

    Affects bgrdeduct -1  Chance  100

;reset bgrdeduct if GENERAL joins crusade, for him only
;------------------------------------------
Trigger deductforcrusadereset5
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterReligion catholic
          and not I_CrusadeInProgress
;          and CharacterIsLocal
          and Trait bgrdeduct = 1

    Affects bgrdeduct -1  Chance  100

;removes trait at start turn if was deactivated during ai turn - just for show (removes for ai too)
;------------------------------------------
Trigger deductforcrusadereset5b
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterReligion catholic
          and not I_CrusadeInProgress
          and CharacterIsLocal
          and Trait ReligiousWarTax = 1

    Affects ReligiousWarTax -1  Chance  100

;removes trait at start turn if was deactivated during ai turn - just for show
;------------------------------------------
Trigger deductforjihadreset1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait bgrdeductislam = 1
          and CharacterReligion islam
          and not I_JihadInProgress

    Affects bgrdeductislam -1  Chance  100

;jihad not in progress reset bgrdeductislam - at end turn
;------------------------------------------
Trigger deductforjihadreset2
    WhenToTest GeneralJoinCrusade

    Condition IsJihad
          and CharacterReligion islam
          and IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeductislam = 1

    Affects bgrdeductislam -1  Chance  100

;reset bgrdeductislam for FL if FL joins jihad - instantly
;------------------------------------------
Trigger deductforjihadreset2b
    WhenToTest GeneralJoinCrusade

    Condition IsJihad
          and CharacterReligion islam
          and IsFactionLeader
          and CharacterIsLocal
          and Trait ReligiousWarTax = 1

    Affects ReligiousWarTax -1  Chance  100

;reset ReligiousWarTax if fl joins jihad for FL
;------------------------------------------
Trigger deductforjihadreset3
    WhenToTest CharacterTurnEnd

    Condition CharacterReligion islam
          and IsGeneral
          and CharacterIsLocal
          and FactionLeaderTrait bgrdeductislam = 0
          and Trait bgrdeductislam = 1

    Affects bgrdeductislam -1  Chance  100

;reset bgrdeductislam if fl joins jihad. for generals - at end turn
;------------------------------------------
Trigger deductforjihadreset4
    WhenToTest GeneralJoinCrusade

    Condition IsJihad
          and CharacterReligion islam
          and IsGeneral
          and CharacterIsLocal
          and Trait bgrdeductislam = 1

    Affects bgrdeductislam -1  Chance  100

;reset bgrdeductislam if general joins jihad
;------------------------------------------
Trigger deductforjihadreset5
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterReligion islam
          and not I_JihadInProgress
          and CharacterIsLocal
          and Trait bgrdeductislam = 1

    Affects bgrdeductislam -1  Chance  100

;removes trait at start turn if was deactivated during ai turn - just for show as will be done at end turn if not here.
;------------------------------------------
Trigger deductforjihadreset5b
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterReligion islam
          and not I_JihadInProgress
          and CharacterIsLocal
          and Trait ReligiousWarTax = 1

    Affects ReligiousWarTax -1  Chance  100

;removes trait at start turn if was deactivated during ai turn - just for show
;------------------------------------------
Trigger RemoveReligiousWarTaxAI
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and not CharacterIsLocal
          and Trait ReligiousWarTax = 1

    Affects ReligiousWarTax -1  Chance  100

;removes trait at start turn if was bribed to ai or rebelled
;------------------------------------------
;deduct (donations) section for crusades and jihads
;------------------------------------------
Trigger deductforcrusadeTaxFL1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterReligion catholic
          and I_CrusadeInProgress
          and CharacterIsLocal
          and Trait bgrdeduct = 0
          and not IsOnCrusade
          and not FactionExcommunicated

    Affects ReligiousWarTax  1  Chance  100
    Affects bgrdeduct  1  Chance  100

;sets deduct if crusade on and FL is not, FL donates 400
;------------------------------------------
Trigger deductforcrusadeTaxFL1b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeduct = 1

    Affects Tax  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  4  Chance  100

;sets taxes if crusade on and FL is not, FL donates 400
;------------------------------------------
Trigger deductforcrusadeTaxGen2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterReligion catholic
          and I_CrusadeInProgress
          and CharacterIsLocal
          and Trait bgrdeduct = 0
          and FactionLeaderTrait bgrdeduct = 1
          and not IsOnCrusade
          and not FactionExcommunicated
          and not Trait DefiedOrders = 4

    Affects bgrdeduct  1  Chance  100

;sets deduct if crusade on and general is not and FL is already donating, setting the precedent
;------------------------------------------
Trigger deductforcrusadeTaxGen2b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeduct = 1

    Affects Tax  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  4  Chance  100

;sets tax if crusade on and general is not and FL is already donating, setting the precedent
;------------------------------------------
Trigger deductjoinscrusade
    WhenToTest GeneralJoinCrusade

    Condition IsCrusade
          and IsGeneral
          and CharacterReligion catholic
          and CharacterIsLocal

    Affects crusadecost  1  Chance  100
    Affects Poverty  51  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  5  Chance  100

;cost of joining a crusade per army = 5000 personal, 5000 faction, one off charge.
;faction always pays as donations are received factionwide
;------------------------------------------
Trigger deductforjihadTaxFL1
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterReligion islam
          and I_JihadInProgress
          and CharacterIsLocal
          and not Trait bgrdeductislam = 1
          and not IsOnJihad

    Affects ReligiousWarTax  1  Chance  100
    Affects bgrdeductislam  1  Chance  100

;fl
;------------------------------------------
Trigger deductforjihadTaxFL1b
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeductislam = 1

    Affects Tax  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  4  Chance  100

;fl
;------------------------------------------
Trigger deductforjihadTaxGen2
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterReligion islam
          and I_JihadInProgress
          and CharacterIsLocal
          and Trait bgrdeductislam = 0
          and FactionLeaderTrait bgrdeductislam = 1
          and not IsOnJihad
          and not Trait DefiedOrders = 4

    Affects bgrdeductislam  1  Chance  100

;gen
;------------------------------------------
Trigger deductforjihadTaxGen2b
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and not IsFactionLeader
          and CharacterIsLocal
          and Trait bgrdeductislam = 1

    Affects Tax  4  Chance  100
    Affects Poverty  5  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  4  Chance  100

;sets tax if crusade on and general is not and FL is already donating, setting the precedent
;------------------------------------------
Trigger deductjoinsjihad
    WhenToTest GeneralJoinCrusade

    Condition IsJihad
          and IsGeneral
          and CharacterReligion islam
          and CharacterIsLocal

    Affects jihadcost  1  Chance  100
    Affects Poverty  51  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusThousands  5  Chance  100

;cost of joining a jihad per army = 5000 personal, 5000 faction, one off charge.
;------------------------------------------
; Personal Crusade/Jihad Cost Reset
;------------------------------------------
Trigger deductforcrusade2reset
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait crusadecost = 1

    Affects crusadecost  -1  Chance  100

;all - removes one off crusade joining fee notifier trait
;------------------------------------------
Trigger deductforjihad2reset
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and Trait jihadcost = 1

    Affects jihadcost  -1  Chance  100

;all
;------------------------------------------
; WEALTH TAX Part 2 (tax generals)
;------------------------------------------
Trigger WealthTaxesPaid1Estate
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 2
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and not FactionLeaderTrait ReinsOfPower = 1

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;does not affect banished gens. for 1 estate held. This tax requires the last 2 points of Tax( 8 & 9) dont let other taxes use.
; other taxes must not pass total tax of 7
;------------------------------------------
Trigger WealthTaxesPaid2Estates
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 3
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and not FactionLeaderTrait ReinsOfPower = 1

    Affects Tax  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100
;does not affect banished gens. for 2 estates held
;------------------------------------------
;------------------------------------------
Trigger WealthTaxesPaid1Estate_Rich
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 2
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and not FactionLeaderTrait ReinsOfPower = 1
        and Trait Wealth >= 8
        and FactionLeaderTrait FactionZeal <= 2

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;does not affect banished gens. for 1 estate held. This tax requires the last 2 points of Tax( 8 & 9) dont let other taxes use.
; other taxes must not pass total tax of 7
;------------------------------------------
Trigger WealthTaxesPaid2Estates_Rich
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 3
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and not FactionLeaderTrait ReinsOfPower = 1
        and Trait Wealth >= 8
        and Trait CentralisedPower <= 2
        and FactionLeaderTrait FactionZeal <= 2

    Affects Tax  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100
;does not affect banished gens. for 2 estates held
;------------------------------------------
Trigger WealthTaxesPaid1EstateWeakGrip
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 2
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and FactionLeaderTrait ReinsOfPower = 1
        and Attribute Loyalty >= 2

    Affects Tax  1  Chance  100
    Affects Poverty  2  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  1  Chance  100
;does not affect banished gens. for 1 estate held. This tax requires the last 2 points of Tax( 8 & 9) dont let other taxes use.
; other taxes must not pass total tax of 7
; only loyal gens pay if leaders grip is weak
;------------------------------------------
Trigger WealthTaxesPaid2EstatesWeakGrip
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
        and not IsFactionLeader
        and CharacterIsLocal
        and FactionLeaderTrait WealthTax = 1
        and Trait Estates = 3
        and Trait Tax <= 7
        and not Trait DefiedOrders = 4
        and FactionLeaderTrait ReinsOfPower = 1
        and Attribute Loyalty >= 2

    Affects Tax  2  Chance  100
    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100
;does not affect banished gens. for 2 estates held
; only loyal gens pay if leaders grip is weak
;------------------------------------------
; END SECTION 3
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEnd3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1End3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2End3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEnd3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEnd3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
;------------------------------------------
;Trigger testdeduct
;    WhenToTest CharacterTurnStart
;
;    Condition IsFactionLeader
;          and I_TurnNumber = 2
;          and CharacterIsLocal
;          and not Trait bgrdeduct = 1
;
;    Affects bgrdeduct  1  Chance  100
;
;------------------------------------------
Trigger NewLeaderPardonsGensReset
    WhenToTest CharacterTurnEnd

    Condition Trait Pardon = 1

    Affects PardonReset  2  Chance  100
    Affects Pardon  1  Chance  100

;------------------------------------------
;
; Repayment Scheme
; Interest Payments
; Estates Forfeit and Sold
; Banishment for Vagabonds
; Cancel Debt
; Transfer Negative Wealth to Debt
;  (can escape banishment by being on a crusade when in debt & no money & estate confiscated)
;
;------------------------------------------
;------------------------------------------
;------------------------------------------
; Repayment Sceme
;------------------------------------------
;------------------------------------------
Trigger Repayments
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt > 0
          and Trait Wealth >= 8
;*          and Trait Thousands >= 4

    Affects Poverty  21  Chance  100
    Affects Wealth  1  Chance  100
    Affects DebtReset  2  Chance  100
    Affects Debt  1  Chance  100
    Affects MinusThousands  2  Chance  100

;transfers 2000 wealth to decrease debt if wealth over adequate (rich or more) at 2000/turn
;Thousands would require min of 4000. * reckoner needed pre this section for accurate total
;------------------------------------------
;------------------------------------------
; Interest Payments---------------------------should come before debt (so it comes the turn after debt gained)
;------------------------------------------
;------------------------------------------
Trigger InterestPayments1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt >= 3

    Affects Poverty  7  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;interest at 10%/200 per debt level: 600
;------------------------------------------
Trigger InterestPayments2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt >= 6

    Affects Poverty  7  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;interest at 10%/200 per debt level: 600
;------------------------------------------
Trigger InterestPayments3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt = 9

    Affects Poverty  7  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  6  Chance  100

;interest at 10%/200 per debt level: 600
;------------------------------------------
Trigger InterestPayments4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt > 0
          and not Trait Debt = 3
          and not Trait Debt = 6
          and not Trait Debt = 9

    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100

;interest at 10%/200 per debt level: 200
;------------------------------------------
Trigger InterestPayments5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt > 0
          and not Trait Debt = 1
          and not Trait Debt = 3
          and not Trait Debt = 4
          and not Trait Debt = 6
          and not Trait Debt = 7
          and not Trait Debt = 9

    Affects Poverty  3  Chance  100
    Affects Wealth  1  Chance  100
    Affects MinusHundreds  2  Chance  100

;interest at 10%/200 per debt level: 200. would need 9 of these triggers but did a CHIPAWAY in 5.
;------------------------------------------
; END SECTION 2
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions (2 repeats to cope with 18 Minus hundreds possible in previous Interest section)
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEnd2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1End2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2End2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEnd2b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1End2b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2End2b
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEnd2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEnd2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
;------------------------------------------
; Estates Forfeit and Sold
;------------------------------------------
;------------------------------------------
Trigger EstatePurchaseReset
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait EstatePurchased = 1

    Affects EstatePurchasedReset  2  Chance  100
    Affects EstatePurchased  1  Chance  100
;------------------------------------------
Trigger EstateForfeitAndSold
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth <= 4
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait Estates >= 2
          and Trait Debt > 0

    Affects EstatesReset  2  Chance  100
    Affects Estates  1  Chance  100
    Affects EstatePurchased  1  Chance  100

;put after all payments made, but before borrowing more money.
;moneylenders sieze estates, which Treasury now purchases back for faction. -2,000 to -6000
;if any debt already + no money + has estates = forfeit estates + Treasury buys back for -2000 to -6000
;------------------------------------------
;------------------------------------------
; Banishment for Vagabonds
;
; (WCs & Crusaders Protected From Banishment via debt.)
;------------------------------------------
;------------------------------------------
Trigger VagabondBanished1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait Estates = 1
          and Trait Debt > 0
          and Trait Wealth <= 4
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait DefiedOrders = 0
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  4  Chance  100

;banished for borrowing money that he cannot pay the interest on due to no estates & negative wealth, warning is in "no estates"
;cannot borrow money again until has an estate so no further danger of banishment until then
;needs doing for each level of DO
; estates 1 is no estates
; HunThou hopefully catches 0 wealth or less(in antitrait)
;------------------------------------------
Trigger VagabondBanished2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait Estates = 1
          and Trait Debt > 0
          and Trait Wealth <= 4
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait DefiedOrders = 1
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  3  Chance  100
;------------------------------------------
Trigger VagabondBanished3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait Estates = 1
          and Trait Debt > 0
          and Trait Wealth <= 4
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait DefiedOrders = 2
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  2  Chance  100
;------------------------------------------
Trigger VagabondBanished4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and not IsFactionLeader
          and not HasAncType warcouncil
          and Trait Estates = 1
          and Trait Debt > 0
          and Trait Wealth <= 4
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait DefiedOrders = 3
          and not IsOnCrusade
          and not IsOnJihad

    Affects DefiedOrders  1  Chance  100
;------------------------------------------
;------------------------------------------
; Cancel Debt (due to assets siezed)
;------------------------------------------
;------------------------------------------
Trigger DebtCancelled1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt >= 5
          and Trait EstatePurchased = 1

    Affects DebtReset  6  Chance  100
    Affects Debt  1  Chance  100

;removes 5 debt. Chipaway triggers.
;------------------------------------------
Trigger DebtCancelled2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt >= 3
          and Trait EstatePurchased = 1

    Affects DebtReset  4  Chance  100
    Affects Debt  1  Chance  100

;removes 3 debt
;------------------------------------------
Trigger DebtCancelled3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Debt >= 2
          and Trait EstatePurchased = 1

    Affects DebtReset  3  Chance  100
    Affects Debt  1  Chance  100

;removes 2 debt
;------------------------------------------
Trigger DebtCancelled4
    WhenToTest CharacterTurnEnd

    Condition Trait Debt >= 1
          and Trait EstatePurchased = 1

    Affects DebtReset  2  Chance  100
    Affects Debt  1  Chance  100

;removes 1 debt (for ai as well will remove 1 per turn if was bribed over)
;------------------------------------------
;------------------------------------------
; Transfer Negative Wealth to Debt (Borrowed) (up to 8000/turn)
;------------------------------------------
; (cannot go into debt again after siezure unless has more estates. Will still have some negative wealth)
;------------------------------------------
Trigger WealthToDebt1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth < 5
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait Estates > 1

    Affects Wealth  20  Chance  100
    Affects Debt  1  Chance  100
    Affects Thousands  2  Chance  100

;transfers negative wealth to debt
;------------------------------------------
;Trigger WealthToDebt1a
;    WhenToTest CharacterTurnEnd
;
;    Condition CharacterIsLocal
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
;          and Trait Estates > 1
;
;    Affects Wealth  20  Chance  100
;    Affects Debt  1  Chance  100
;    Affects Thousands  2  Chance  100
;
;transfers negative wealth to debt. Example triggers to simulate "or" for use if wealth is replaced by HunThou
; can't pickup debt with single trigger so also picks up 0 money. (would need 3 to catch all -money, 1 for -hun, 1 for -thou, 1 for -hun and -thou)
;------------------------------------------
Trigger WealthToDebt2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth < 5
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait Estates > 1

    Affects Wealth  20  Chance  100
    Affects Debt  1  Chance  100
    Affects Thousands  2  Chance  100

;transfers negative wealth to debt
;------------------------------------------
Trigger WealthToDebt3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth < 5
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait Estates > 1

    Affects Wealth  20  Chance  100
    Affects Debt  1  Chance  100
    Affects Thousands  2  Chance  100

;transfers negative wealth to debt
;------------------------------------------
Trigger WealthToDebt4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth < 5
;*          and Trait Thousands = 0
;*          and Trait Hundreds = 0;*************will this work?
          and Trait Estates > 1

    Affects Wealth  20  Chance  100
    Affects Debt  1  Chance  100
    Affects Thousands  2  Chance  100

;transfers negative wealth to debt
;------------------------------------------
; Scutage (part 2. must go at end of end turns)
;------------------------------------------
Trigger Is_Ready_For_Scutage_Reset
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
;        and CharacterIsLocal
        and Trait ReadyForScutage = 1

    Affects ReadyForScutageReset  2  Chance  100
    Affects ReadyForScutage  1  Chance  100

;------------------------------------------
Trigger Is_Ready_For_Scutage
    WhenToTest CharacterTurnEnd

    Condition IsFactionLeader
        and CharacterIsLocal
        and Trait ExpeditionTaxOrder = 0
        and Trait CentralisedPower > 1
        and Trait ReadyForScutage = 0

    Affects ReadyForScutage  1  Chance  100

;is able to enact scutage
;------------------------------------------
;Trigger AttackAgainstOrdersDOTest
;    WhenToTest CharacterTurnEnd
;
;    Condition CharacterIsLocal
;	and IsGeneral
;	and not IsFactionLeader
;	and not HasAncType warcouncil
;	and InEnemyLands
;        and Trait DefiedOrders = 0
;;          and not IsOnCrusade
;;          and not IsOnJihad
;                and I_TurnNumber <= 3
;
;    Affects DefiedOrders  4  Chance  100
;
;; test, gives DO4 to any non-WC gen with no criminal record if in enemy lands TEST ONLY. REMOVE THIS!!!!!!!!!!!!!!!!1
;------------------------------------------
;Trigger AttackAgainstOrdersDOTest2
;    WhenToTest CharacterTurnEnd
;
;    Condition CharacterIsLocal
;	and IsGeneral
;;	and InEnemyLands
;        and Trait LeaderDefied = 0
;;          and not IsOnCrusade
;;          and not IsOnJihad
;
;    Affects LeaderDefied  4  Chance  100
;
;; test, gives DO4 to any non-WC gen with no criminal record if in enemy lands TEST ONLY. REMOVE THIS!!!!!!!!!!!!!!!!1
;;------------------------------------------
; START SECTION
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckReset
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckReset
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousands
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousands
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; MERC HIRE SECTION
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckResetHM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1HM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2HM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousands1HM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
Trigger MinusHundredsFromThousands2HM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
Trigger MinusHundredsFromThousands3HM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsHM
    WhenToTest HireMercenaries

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; RANSOM SECTION
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetR
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1R
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition CharacterIsLocal
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2R
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsR
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsR
    WhenToTest GeneralPrisonersRansomedCaptor

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; CONQUEST SECTION
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetC
    WhenToTest GeneralCaptureSettlement

    Condition Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1C
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2C
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsC
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsC
    WhenToTest GeneralCaptureSettlement

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; SACK SECTION
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetSack
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1Sack
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2Sack
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsSack
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsSack
    WhenToTest SackSettlement

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; GENERAL MARRIES SECTION
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetGM
    WhenToTest CharacterMarries

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1GM
    WhenToTest CharacterMarries

    Condition CharacterIsLocal
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2GM
    WhenToTest CharacterMarries

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsGM
    WhenToTest CharacterMarries

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsGM
    WhenToTest CharacterMarries

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; GENERAL MARRIES PRINCESS SECTION
;------------------------------------------
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetGMP
    WhenToTest CharacterMarriesPrincess

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1GMP
    WhenToTest CharacterMarriesPrincess

    Condition CharacterIsLocal
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2GMP
    WhenToTest CharacterMarriesPrincess

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsGMP
    WhenToTest CharacterMarriesPrincess

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsGMP
    WhenToTest CharacterMarriesPrincess

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; UNITS TRAINED SECTION
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckResetTrained
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1Trained
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2Trained
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsTrained
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsTrained
    WhenToTest GovernorUnitTrained

    Condition CharacterIsLocal
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
; END SECTION
; Needed for Additions Or Both Additions and Deductions
;------------------------------------------
Trigger HundredsWealthCheckResetEnd
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for Hundreds
;------------------------------------------
Trigger HundredsReckoner1End
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds = 9

    Affects Thousands  1  Chance  100
    Affects MinusHundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger HundredsReckoner2End
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait MinusHundreds = 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; Needed for Deductions Or Both Additions and Deductions
;------------------------------------------
Trigger MinusHundredsWealthCheckResetEnd
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1

    Affects WealthCheck -1  Chance  100
; for MinusHundreds
;------------------------------------------
Trigger MinusHundredsReckoner1End
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds = 9

    Affects MinusThousands  1  Chance  100
    Affects Hundreds  10  Chance  100
    Affects WealthCheck  1  Chance  100
;------------------------------------------
Trigger MinusHundredsReckoner2End
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait WealthCheck = 1
          and Trait Hundreds = 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
    Affects WealthCheck -1  Chance  100
;------------------------------------------
; If Thousands + & Hundreds -
;------------------------------------------
Trigger MinusHundredsFromThousandsEnd
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds >= 1
          and Trait Thousands >= 1

    Affects Hundreds  10  Chance  100
    Affects MinusThousands  1  Chance  100
;------------------------------------------
; If Thousands - & Hundreds +
;------------------------------------------
Trigger HundredsFromMinusThousandsEnd
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds >= 1
          and Trait MinusThousands >= 1

    Affects MinusHundreds  10  Chance  100
    Affects Thousands  1  Chance  100
;------------------------------------------
Trigger TraitsListSorter1Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait Wealth > 0

;    Affects DefiedOrdersReset  5  Chance  100
;    Affects DefiedOrders  5  Chance  100
    Affects Poverty  300  Chance  100
    Affects Wealth  300  Chance  100
    Affects TaxEffectReset  5  Chance  100
    Affects TaxEffect  5  Chance  100
    Affects TaxReset  30  Chance  100
    Affects Tax  30  Chance  100
    Affects EarnReset  30  Chance  100
    Affects Earn  30  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter2Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait Wealth > 0

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  2  Chance  100
    Affects FinesReset  30  Chance  100
    Affects Fines  30  Chance  100
    Affects CostReset  40  Chance  100
    Affects Cost  40  Chance  100
    Affects MilitaryExpensesReset  40  Chance  100
    Affects MilitaryExpenses  40  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter2StartME
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait Wealth > 0

    Affects MilitaryExpenses1Reset  20  Chance  100
    Affects MilitaryExpenses1  20  Chance  100
    Affects MilitaryExpenses2Reset  20  Chance  100
    Affects MilitaryExpenses2  20  Chance  100
    Affects MilitaryExpenses3Reset  20  Chance  100
    Affects MilitaryExpenses3  20  Chance  100
    Affects MilitaryExpenses4Reset  20  Chance  100
    Affects MilitaryExpenses4  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter2bStart
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and Trait Supplies > 0

    Affects GeneralZealReset  10  Chance  100
    Affects GeneralZeal  10  Chance  100
    Affects ForageIncrementReset  10  Chance  100
    Affects ForageIncrement  10  Chance  100
    Affects TIFReset  10  Chance  100
    Affects TimeInField  10  Chance  100
    Affects SupplyIncrementReset  10  Chance  100
    Affects SupplyIncrement  10  Chance  100
    Affects SuppliesAdded  7  Chance  100
    Affects Supplies  7  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
; Orders Section (orders may sometimes be seen by those who they do not apply to too)
;------------------------------------------
Trigger OrdersReset1Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 3

    Affects Orders -2  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger OrdersReset2Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 2

    Affects Orders -2  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger OrdersReset3Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Orders >= 1

    Affects Orders -1  Chance  100

;removes from all gens including a new FL
;------------------------------------------
Trigger Orders1Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and FactionLeaderTrait CentralisedPower = 1

    Affects Orders  1  Chance  100
;------------------------------------------
Trigger Orders2Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
;          and not HasAncType warcouncil
          and Trait HasWarchest = 0
          and FactionLeaderTrait CentralisedPower = 2

    Affects Orders  2  Chance  100

; orders to all except king, Warchest holders (text is specific)
;------------------------------------------
Trigger Orders3Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
;          and not HasAncType warcouncil
;          and Trait HasWarchest = 0
          and FactionLeaderTrait CentralisedPower = 3

    Affects Orders  3  Chance  100

; NEW orders to all but king
;------------------------------------------
Trigger Orders4newStart
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and not IsFactionLeader
          and FactionLeaderTrait CentralisedPower = 4

    Affects Orders  4  Chance  100

; NEW orders to all but king
;------------------------------------------
; Traits List Sorters for HunThou Start
;------------------------------------------
Trigger TraitsListSorter3Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Thousands > 0

    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter4Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusThousands > 0

    Affects Thousands  20  Chance  100
    Affects MinusThousands  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter5Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds > 0

    Affects MinusHundreds  20  Chance  100
    Affects Hundreds  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter6Start
    WhenToTest CharacterTurnStart

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds > 0

    Affects Hundreds  20  Chance  100
    Affects MinusHundreds  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
; Poor Wealth Prevents Recruitment JrWC
;------------------------------------------
Trigger GivesCentralPowerEffect1
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait HasWarchest = 0
          and FactionLeaderTrait CentralisedPower = 1
          and Trait Wealth >= 7
;*          and Trait Thousands >= 2
          and not Trait JrWarCouncillor = 2

    Affects CentralisedPowerEffect  1  Chance  100

;done for wealth debt. Gens must be adequate or above to recruit 3rd level units
; (Old - WC always retains ability to recruit)-----------allows universal recruitment for logens of high units...CAUTION will GIVE CP EFFECT to late WC(prior to warcouncil anc)
; New -  All gens now boosted with CPeffect when NOT HasWarchest trait AND warchest Anc.(needs 2 trigs)
;------------------------------------------
;Trigger GivesCentralPowerEffect1b
;    WhenToTest CharacterTurnEnd
;
;    Condition IsGeneral
;          and CharacterIsLocal
;          and Trait CentralisedPowerEffect = 0
;          and not HasAncType warchest
;          and FactionLeaderTrait CentralisedPower = 1
;          and Trait Wealth >= 7
;;*          and Trait Thousands >= 2
;
;    Affects CentralisedPowerEffect  1  Chance  100
;
; Don't think this trigger is required any longer because haswarchest trigger above covers it.
;------------------------------------------
Trigger JrWC_Off_WealthLow
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait JrWCOff < 1
          and Trait Wealth <= 6
          and Trait RecruitLimit >= 1

    Affects JrWCOff  1  Chance  100

; set jrwcoff if too poor
;------------------------------------------
Trigger StopRecruitPoorOrLessNoAuth
    WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait StopR = 0
          and Trait Wealth <= 6
;*          and Trait Thousands <= 1
          and Trait HasWarchest = 0

    Affects StopR  1  Chance  100

;stop recruiting if poor (2000) or less. exempt expense claimants
; for thousands could be any thing up to 1,900 *
;------------------------------------------
; Recruitment Summary Traits
; actual recruitment ability is set at end of last turn
; and put into effect after character end turn
; can be wrong as may show recruit ability at start update due to wealth gained during ai turn (ransoms etc)
; yet may not be able to recruit due to previous turn effects
;------------------------------------------
Trigger Recruitment_desc_reset1Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_desc_reset2Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_desc_reset3Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Trait RecruitmentAbility > 0

    Affects RecruitmentAbility -1  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions1Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm = 10

    Affects RecruitmentAbility  1  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions2Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm <= 9
          and Attribute Charm >= 5

    Affects RecruitmentAbility  2  Chance 100

;------------------------------------------
Trigger Recruitment_Descriptions3Start
    WhenToTest CharacterTurnStart

    Condition IsGeneral
          and CharacterIsLocal
          and Attribute Charm <= 4

    Affects RecruitmentAbility  3  Chance 100

;------------------------------------------
; End Turn Description Traits and Sorters
;------------------------------------------
Trigger TraitsListSorter1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth > 0

;    Affects DefiedOrdersReset  5  Chance  100
;    Affects DefiedOrders  5  Chance  100
    Affects Poverty  300  Chance  100
    Affects Wealth  300  Chance  100
    Affects EarnReset  30  Chance  100
    Affects Earn  30  Chance  100
    Affects TaxEffectReset  5  Chance  100
    Affects TaxEffect  5  Chance  100
    Affects TaxReset  30  Chance  100
    Affects Tax  30  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter2
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and Trait Wealth > 0

    Affects ExpeditionTaxReset  2  Chance  100
    Affects ExpeditionTax  2  Chance  100
    Affects FinesReset  30  Chance  100
    Affects Fines  30  Chance  100
    Affects CostReset  40  Chance  100
    Affects Cost  40  Chance  100
    Affects MilitaryExpensesReset  40  Chance  100
    Affects MilitaryExpenses  40  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
; Traits List Sorters for HunThou
;------------------------------------------
Trigger TraitsListSorter3
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Thousands > 0

    Affects MinusThousands  20  Chance  100
    Affects Thousands  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter4
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusThousands > 0

    Affects Thousands  20  Chance  100
    Affects MinusThousands  20  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter5
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Hundreds > 0

    Affects MinusHundreds  10  Chance  100
    Affects Hundreds  10  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
Trigger TraitsListSorter6
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait MinusHundreds > 0

    Affects Hundreds  10  Chance  100
    Affects MinusHundreds  10  Chance  100

;moves traits to end of list, in order.
;------------------------------------------
; BGRIV NOTES
;    WhenToTest CharacterTurnStart**Done
;    WhenToTest OfferedForAdoption-- new gens so no reckoner needed
;    WhenToTest OfferedForMarriage-- new gens so no reckoner needed
;    WhenToTest CharacterComesOfAge-- new gens so no reckoner needed
;    WhenToTest HireMercenaries**Done
;    WhenToTest GeneralPrisonersRansomedCaptor**Done
;    WhenToTest GeneralCaptureSettlement**Done
;    WhenToTest SackSettlement**Done
;    WhenToTest LesserGeneralOfferedForAdoption-- new gens only, so no reckoner needed
;    WhenToTest CharacterMarriesPrincess**Done
;    WhenToTest CharacterMarries**Done
;    WhenToTest GovernorUnitTrained**Done
;    WhenToTest CharacterTurnEnd**Done
; Other end turn reckoners added mid script between sections that need or in future may need to see a HunThou total.
; If wealth is removed to replace with Huns and Thous then search "*" for lines to enable to take over, some may still need work.
;------------------------------------------
;Inflation Triggers (should remain as last End Turn triggers)
;------------------------------------------
Trigger InflationCheckReset
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Inflation = 1

    Affects InflationReset  1  Chance  100

;done for all gens at the moment
;------------------------------------------
Trigger InflationCheck1
    WhenToTest CharacterTurnEnd

    Condition CharacterIsLocal
          and IsGeneral
          and Trait Inflation < 1
          and I_EventCounter inflationon = 1

    Affects Inflation  1  Chance  100

;------------------------------------------
;Trigger Kings_Authority_ResetCheckTest
;   WhenToTest CharacterTurnEnd
;
;    Condition IsFactionLeader
;          and CharacterIsLocal
;          and Trait SuppressAuthority = 7
;
;    Affects Girls  50  Chance  100
;
;applies Girls to FL if suppress is at top level
;------------------------------------------
;unhid inflation



Trigger WHTSyncTestH
   WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth <= 5
          and Trait Hundreds >= 1

    Affects Girls  50  Chance  100

;applies Girls to character
;------------------------------------------
Trigger WHTSyncTestT
   WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth <= 5
          and Trait Thousands >= 1

    Affects Girls  50  Chance  100

;applies Girls to character
;------------------------------------------
Trigger WHTSyncTestH1
   WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth <= 6
          and Trait Thousands = 2
          and Trait Hundreds >= 1

    Affects Girls  50  Chance  100

;applies Girls to character
;------------------------------------------
Trigger WHTSyncTestT1
   WhenToTest CharacterTurnEnd

    Condition IsGeneral
          and CharacterIsLocal
          and Trait Wealth <= 6
          and Trait Thousands >= 3

    Affects Girls  50  Chance  100

;applies Girls to character
;------------------------------------------