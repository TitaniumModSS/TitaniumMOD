; Titanium - Early Era Campaign Script
;========================================================
;===================== CONTENTS =========================
;========================================================
;* Prelude
;* 1) CAMP PREPARE
;---- Setup AI
;---- Setup Events
;------ Pirate Cleanup Script
;------ TEUTONIC AND REPUBLICS DEATH SCRIPT WORKAROUND
;* 2) PREPARE FOR NEW FACTION'S TURN
;---- Reset counters
;---- Whose turn is on?
;---- AI Citadel check
;---x Ageing Script
;---x Great People Ancillaries
;* 3) OTHER AI STUFF
;---- Byzantine Leader Battle Models
;---- Church Titles
;---- Hanseatic System
;---- Faction Leader Global Traits
;---- Faction Killer Workaround
;---- AI REINFORCEMENTS
;---- Money Script
;---- Kill Crusader and Jihad units Script
;* 4)PLAYER PART
;---- Looting Script Compact
;---- Besiege Upkeep
;---- City Reveal
;---- Major Events
;---- Player notification
;---- Interactive Events
;* 5)EMERGENT FACTIONS/NATIONAL UPRISINGS
;---- William Wallace Uprising
;---- Saladin Emergent
;---- Teutonic Order Emergent
;---- Golden Horde Emergent
;---- Bulgarian Uprising
;---x Timurids Invasion
;* 6) G5 BAI STUFF
;* 7) TITANIUM ADDITIONAL SCRIPTS
;---- Loan Script
;---- KINGDOM EMPIRE AND REPUBLICS SCRIPTS
;---- Settlements Auto-Rename
;---- Re-emerging Factions
;---- Faction Leader Religion Excomunication Script
;---- Religion Change Script
;---- DIPLOMACY FACTION DESTROYED WORK AROUND
;---- Conquered Crowns Script (TBD)
;* 8) ADDITIONAL SCRIPTS
;---- Hotseat Treasurer
;---- Stratmap UI toggle on/off


;******** Prelude (WIP)**********
; CS file based on Melooo182's bugfix compilation v1.26
; original SS6.4 file edited by gracul Jan-2011
; gracul's file edited by Melooo182 Sept-2014
; last edited by gsthoed for Titanium_Alpha Rev.31
; last edited by melooo182 for Titanium_Alpha Rev.53

; G5 BAI v5.7 by Germanicu5


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
script
restrict_strat_radar false


;========================================================
;********************************************************
;************** AI STUFF & CAMP PREPARE *****************
;********************************************************
;========================================================

;Checking Factions and Settlements
;Used in:
;	KINGDOM EMPIRE AND REPUBLICS SCRIPTS
;	Re-Emerging Factions script
;
declare_counter orleans_exist
set_counter orleans_exist 1
set_event_counter obotrites_exist 1; For use in other files
set_event_counter abbasids_exist 1; For use in other files
set_event_counter georgia_exist 1; For use in other files
set_event_counter zirids_exist 1; For use in other files
set_event_counter hafsids_exist 0; For use in other files
set_event_counter bulgaria_exist 0; For use in other files

;====================== Setup AI ========================
set_event_counter DifficultyLevel 2 ; default level is medium

monitor_event PreFactionTurnStart CampaignDifficulty >= hard

	set_event_counter DifficultyLevel 3

	link_faction_ai england catholic
	link_faction_ai france catholic
	link_faction_ai hre catholic
	link_faction_ai spain catholic
	link_faction_ai venice catholic
	link_faction_ai sicily catholic
	link_faction_ai milan catholic
	link_faction_ai scotland catholic
	link_faction_ai cumans pagan
	link_faction_ai byzantium byzantium_faction
	link_faction_ai russia default
	link_faction_ai moors islam
	link_faction_ai turks islam
	link_faction_ai egypt islam
	link_faction_ai denmark catholic
	link_faction_ai portugal islam
	link_faction_ai poland catholic
	link_faction_ai hungary catholic
	link_faction_ai lithuania pagan
	link_faction_ai kievan_rus default
	link_faction_ai aragon catholic
	link_faction_ai norway catholic
	link_faction_ai kwarezm islam
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols mongols_faction
	link_faction_ai timurids islam
	link_faction_ai teutonic_order catholic
	link_faction_ai jerusalem catholic
	link_faction_ai georgia default
	link_faction_ai slave slave_faction

	terminate_monitor
end_monitor

monitor_event PreFactionTurnStart CampaignDifficulty = very_hard

	set_event_counter DifficultyLevel 4

	historic_event difficulty_very_hard
	historic_event titanium_message

	if I_IsFactionAIControlled england
		increment_kings_purse england 1900
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 1800
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 1700
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 1600
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 1500
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 1600
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 1300
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 1500
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 1800
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 1500
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 1700
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 1700
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 1700
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 1700
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 1800
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 1700
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 1800
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 1900
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 1600
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 1500
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 1700
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 1500
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 1800
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 1800
	end_if
	if I_IsFactionAIControlled georgia
		increment_kings_purse georgia 1700
	end_if
	if I_IsFactionAIControlled timurids
		increment_kings_purse timurids 2500
	end_if
	increment_kings_purse mongols 2500
	increment_kings_purse teutonic_order 1500
	increment_kings_purse papal_states 600
	increment_kings_purse slave 3500

 terminate_monitor
end_monitor

monitor_event PreFactionTurnStart CampaignDifficulty != medium

 if I_EventCounter DifficultyLevel = 2 ;so if it is not >=hard
	set_event_counter DifficultyLevel 1

	historic_event difficulty_easy
	historic_event titanium_message

	link_faction_ai england default
	link_faction_ai france default
	link_faction_ai hre default
	link_faction_ai spain default
	link_faction_ai venice default
	link_faction_ai sicily default
	link_faction_ai milan default
	link_faction_ai scotland default
	link_faction_ai cumans default
	link_faction_ai byzantium default
	link_faction_ai russia default
	link_faction_ai moors default
	link_faction_ai turks default
	link_faction_ai egypt default
	link_faction_ai denmark default
	link_faction_ai portugal default
	link_faction_ai poland default
	link_faction_ai hungary default
	link_faction_ai lithuania default
	link_faction_ai kievan_rus default
	link_faction_ai aragon default
	link_faction_ai norway default
	link_faction_ai kwarezm default
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols default
	link_faction_ai timurids default
	link_faction_ai teutonic_order default
	link_faction_ai jerusalem default
	link_faction_ai georgia default
	link_faction_ai slave default

	if I_IsFactionAIControlled england
		increment_kings_purse england 700
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 600
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 500
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 500
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 700
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 700
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 400
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 400
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 600
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 600
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 500
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 500
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 600
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 600
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 700
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 600
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 600
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 600
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 500
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 600
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 600
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 300
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 700
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 700
	end_if
	if I_IsFactionAIControlled georgia
		increment_kings_purse georgia 600
	end_if
	if I_IsFactionAIControlled timurids
		increment_kings_purse timurids 300
	end_if
	increment_kings_purse mongols 300
	increment_kings_purse teutonic_order 300
	increment_kings_purse papal_states 300
	increment_kings_purse slave 1500

 end_if
 terminate_monitor
end_monitor

monitor_event PreFactionTurnStart

 if I_EventCounter DifficultyLevel = 3

	historic_event difficulty_hard
	historic_event titanium_message

	if I_IsFactionAIControlled england
		increment_kings_purse england 1400
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 1300
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 1200
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 1100
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 1000
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 1100
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 900
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 900
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 1300
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 1000
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 1200
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 1200
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 1200
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 1200
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 1300
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 1200
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 1300
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 1200
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 1100
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 1000
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 1200
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 1000
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 1300
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 1300
	end_if
	if I_IsFactionAIControlled georgia
		increment_kings_purse georgia 1200
	end_if
	if I_IsFactionAIControlled timurids
		increment_kings_purse timurids 1500
	end_if
	increment_kings_purse mongols 1500
	increment_kings_purse teutonic_order 1000
	increment_kings_purse papal_states 500
	increment_kings_purse slave 2700
	terminate_monitor
 end_if

 if I_EventCounter DifficultyLevel = 2

	historic_event difficulty_medium
	historic_event titanium_message

	link_faction_ai england catholic
	link_faction_ai france catholic
	link_faction_ai hre catholic
	link_faction_ai spain catholic
	link_faction_ai venice catholic
	link_faction_ai sicily catholic
	link_faction_ai milan catholic
	link_faction_ai scotland catholic
	link_faction_ai cumans pagan
	link_faction_ai byzantium default
	link_faction_ai russia default
	link_faction_ai moors islam
	link_faction_ai turks islam
	link_faction_ai egypt islam
	link_faction_ai denmark catholic
	link_faction_ai portugal islam
	link_faction_ai poland catholic
	link_faction_ai hungary catholic
	link_faction_ai lithuania pagan
	link_faction_ai kievan_rus default
	link_faction_ai aragon catholic
	link_faction_ai norway catholic
	link_faction_ai kwarezm islam
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols mongols_faction
	link_faction_ai timurids islam
	link_faction_ai teutonic_order catholic
	link_faction_ai jerusalem catholic
	link_faction_ai georgia default
	link_faction_ai slave slave_faction

	if I_IsFactionAIControlled england
		increment_kings_purse england 900
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 800
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 700
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 700
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 900
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 900
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 700
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 600
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 800
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 800
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 700
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 700
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 700
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 700
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 900
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 800
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 900
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 800
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 700
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 600
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 800
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 500
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 900
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 800
	end_if
	if I_IsFactionAIControlled georgia
		increment_kings_purse georgia 700
	end_if
	if I_IsFactionAIControlled timurids
		increment_kings_purse timurids 500
	end_if
	increment_kings_purse mongols 500
	increment_kings_purse teutonic_order 500
	increment_kings_purse papal_states 400
	increment_kings_purse slave 2000
 end_if

 terminate_monitor
end_monitor

;==================== Setup Events ======================
monitor_event PreFactionTurnStart

	if I_EventCounter DifficultyLevel >= 3
		if not I_IsFactionAIControlled england
			console_command give_trait england4leader HarshRuler 2
			console_command give_trait england4heir Arse 1
			console_command give_trait england4heir PublicAtheism 1
			console_command give_trait england4heir Feck 1
			console_command give_trait england4general1 Embezzler 1
			console_command give_trait england4general1 Corrupt 1
		end_if
		if not I_IsFactionAIControlled france
			console_command give_trait france4general1 DiscontentGeneral 1
			console_command give_trait france4general2 DiscontentGeneral 1
			console_command give_trait france4general3 DiscontentGeneral 1
		end_if
		if not I_IsFactionAIControlled hre
			console_command give_trait hre4leader Offensive_To_Nobles 1
			console_command give_trait hre4leader PublicAtheism 1
			console_command give_trait hre4heir DiscontentGeneral 1
			console_command diplomatic_stance hre venice neutral
			console_command diplomatic_stance hre milan neutral
		end_if
		if not I_IsFactionAIControlled venice
			console_command diplomatic_stance venice papal_states neutral
			console_command diplomatic_stance venice hre neutral
		end_if
		if not I_IsFactionAIControlled sicily
			console_command diplomatic_stance sicily papal_states neutral
		end_if
		if not I_IsFactionAIControlled milan
			console_command diplomatic_stance milan papal_states neutral
			console_command diplomatic_stance milan hre neutral
		end_if
		if not I_IsFactionAIControlled russia
			console_command diplomatic_stance russia kievan_rus neutral
		end_if
		if not I_IsFactionAIControlled kievan_rus
			console_command diplomatic_stance kievan_rus russia neutral
		end_if
		if not I_IsFactionAIControlled kwarezm
			console_command give_trait kwarezm4leader Paranoia 1
		end_if
	end_if

	 ;Crusader States "Historical Character Relocation" for player only
	 if not I_IsFactionAIControlled jerusalem ; Moves Bertrand de Toulouse and fleet to Toulouse_Province
		console_command move_character "Bertrand de_Toulouse" 100,157 ;to toulouse province
		console_command move_character "Claude de_Pise" 102,157 ;to toulouse coast
		console_command create_unit "Bertrand de_Toulouse" "Knights Hospitaller" 1 1 0 0
		console_command create_unit "Bertrand de_Toulouse" "Dismounted Knights Hospitaller" 1 1 0 0
		console_command create_unit "Bertrand de_Toulouse" "Sergeant Spearmen" 2 1 3 0
		console_command create_unit "Bertrand de_Toulouse" "Pilgrims" 1 0 0 0
		console_command create_unit "Bertrand de_Toulouse" "Peasant Archers" 1 0 2 0
		console_command create_unit "Bertrand de_Toulouse" "Crossbow Militia" 1 0 2 0
		console_command create_unit "Bertrand de_Toulouse" "Pisan and Geonese sailors" 2 3 0 0
		;Increase rebel Acre garrison if Medium+
		if I_EventCounter DifficultyLevel = 2
			console_command create_unit Acre "ME Spear Militia" 2 0 0 0
			console_command create_unit Acre "Desert Archers" 1 0 0 0
		end_if
		if I_EventCounter DifficultyLevel > 2
			console_command create_unit Acre "ME Spear Militia" 3 0 0 0
			console_command create_unit Acre "Desert Archers" 2 0 0 0
		end_if
	 end_if

 terminate_monitor
end_monitor

declare_counter pirate_cleanup
;declare_counter status_teutonic_order; used in Re-emerging factions script
set_event_counter status_teutonic_order -1; Faction does not exist at campaign start
declare_counter status_mongols
set_counter status_mongols -1; Faction does not exist at campaign start
declare_counter status_timurids
set_counter status_timurids -1; Faction does not exist at campaign start
monitor_event CeasedFactionLeader FactionType teutonic_order
	set_event_counter status_teutonic_order 0
end_monitor
monitor_event BecomesFactionLeader FactionType teutonic_order
	set_event_counter status_teutonic_order 1
end_monitor
monitor_event CeasedFactionLeader FactionType mongols
	set_counter status_mongols 0
end_monitor
monitor_event BecomesFactionLeader FactionType mongols
	set_counter status_mongols 1
end_monitor
monitor_event CeasedFactionLeader FactionType timurids
	set_counter status_timurids 0
end_monitor
monitor_event BecomesFactionLeader FactionType timurids; even if abbasids they'll get this at campaign start
	set_counter status_timurids 1
end_monitor
monitor_event FactionTurnEnd FactionType slave
	;--- Pirate Cleanup Script --- 

		inc_counter pirate_cleanup 1
		if I_CompareCounter pirate_cleanup = 20
			set_counter pirate_cleanup 0
			destroy_units slave pirate ship
		end_if
	;TEUTONIC AND REPUBLICS DEATH SCRIPT WORKAROUND, Might be obsolete needs check
	;---- Venice ----
		if I_NumberOfSettlements venice < 1
			console_command kill_faction venice
		end_if
	;---- Genoa ----
		if I_NumberOfSettlements milan < 1
			console_command kill_faction milan
		end_if
	;---- Novgorod ----
		if I_NumberOfSettlements russia < 1
			console_command kill_faction russia
		end_if
	;---- Teutonic Order ----
		if I_EventCounter status_teutonic_order = 0
		and I_NumberOfSettlements teutonic_order < 1
			console_command kill_faction teutonic_order
		end_if
end_monitor

;========================================================
;********************************************************
;************ Prepare for new faction's turn ************
;********************************************************
;========================================================

;==================== Reset counters ====================
declare_counter new_fturn
declare_counter christian_faction
set_event_counter lithuania_catholic 0 ; Used in descr_faction_standing.txt
set_event_counter PaganLithuania 1 ; Used in the EDU

monitor_event PreFactionTurnStart not IsFactionAIControlled
	set_counter new_fturn 0
	set_event_counter is_the_ai 0
end_monitor


monitor_event PreFactionTurnStart

	set_counter turn_fid 0
	set_event_counter CatholicLithuania 0
	set_counter christian_faction 0

 if I_CompareCounter new_fturn = 1
	set_event_counter is_the_ai 1
 end_if
	set_counter new_fturn 1

 set_event_counter freeze_recr_pool 0
 set_event_counter citadel_boost 0
 set_event_counter hanseatic_count -1 ; "Hanseatic System"

 ;--- "Faction Leader Global Traits"
 set_event_counter thinks_of_his_people 0
 set_event_counter wise_administrator 0
 set_event_counter strictly_religious 0
 set_event_counter protector 0
 set_event_counter merchant_skills 0
 set_event_counter greedy_ruler 0
 set_event_counter shady_connections 0

end_monitor


monitor_event FactionTurnEnd

 set_event_counter killed_factions_count 0 ;"Faction Killer Workaround"

 ;--- "Church Titles"
 if I_CompareCounter christian_faction = 1
 set_event_counter Patriarch 0
 set_event_counter AppointBishop 0
 set_event_counter StripBishop 0
 set_event_counter Ordain_Antipope 0
 set_counter bishop_count 0
 set_counter holiness_count 0
 end_if

 ;--- "Interactive Events"
 if I_EventCounter is_the_ai = 0
 set_event_counter great_fair_accepted 0
 set_event_counter great_fair_declined 0
 set_event_counter great_tourney_accepted 0
 set_event_counter great_tourney_declined 0
 set_event_counter troubadours_event_accepted 0
 set_event_counter troubadours_event_declined 0
 if I_CompareCounter awaiting_answer_ie > 0; (hotseat)just in case current faction had been destroyed in this turn
 set_counter awaiting_answer_ie 0
 set_counter awaiting_answer_great_fair 0
 set_counter awaiting_answer_great_tourney 0
 set_counter awaiting_answer_troubadours 0
 end_if
 end_if

end_monitor


;================== Whose turn is on? ===================
declare_counter turn_fid

monitor_event PreFactionTurnStart FactionType egypt
	set_counter turn_fid 1
	set_counter dead_diplomacy_egypt 0
end_monitor
monitor_event PreFactionTurnStart FactionType turks
	set_counter turn_fid 2
	set_counter dead_diplomacy_turks 0
end_monitor
monitor_event PreFactionTurnStart FactionType timurids
	set_counter turn_fid 3
	set_counter dead_diplomacy_timurids 0
end_monitor
monitor_event PreFactionTurnStart FactionType kwarezm
	set_counter turn_fid 4
	set_counter dead_diplomacy_kwarezm 0
end_monitor
monitor_event PreFactionTurnStart FactionType moors
	set_counter turn_fid 5
	set_counter dead_diplomacy_moors 0
end_monitor
monitor_event PreFactionTurnStart FactionType lithuania
	set_counter turn_fid 6
	if I_EventCounter lithuania_conversion_accepted = 1
		set_event_counter CatholicLithuania 1
		set_counter christian_faction 1
	end_if
	set_counter dead_diplomacy_lithuania 0
end_monitor
monitor_event PreFactionTurnStart FactionType cumans
	set_counter turn_fid 7
	set_counter dead_diplomacy_cumans 0
end_monitor
monitor_event PreFactionTurnStart FactionType mongols
	set_counter turn_fid 8
	set_counter dead_diplomacy_mongols 0
end_monitor
monitor_event PreFactionTurnStart FactionType byzantium
	set_counter turn_fid 9
	set_counter christian_faction 1
	set_counter dead_diplomacy_byzantium 0
end_monitor
monitor_event PreFactionTurnStart FactionType russia
	set_counter turn_fid 10
	set_counter christian_faction 1
	set_counter dead_diplomacy_russia 0
end_monitor
monitor_event PreFactionTurnStart FactionType kievan_rus
	set_counter turn_fid 11
	set_counter christian_faction 1
	set_counter dead_diplomacy_kievan_rus 0
end_monitor
monitor_event PreFactionTurnStart FactionType venice
	set_counter turn_fid 12
	set_counter christian_faction 1
	set_counter dead_diplomacy_venice 0
end_monitor
monitor_event PreFactionTurnStart FactionType sicily
	set_counter turn_fid 13
	set_counter christian_faction 1
	set_counter dead_diplomacy_sicily 0
end_monitor
monitor_event PreFactionTurnStart FactionType milan
	set_counter turn_fid 14
	set_counter christian_faction 1
	set_counter dead_diplomacy_milan 0
end_monitor
monitor_event PreFactionTurnStart FactionType denmark
	set_counter turn_fid 15
	set_counter christian_faction 1
	set_counter dead_diplomacy_denmark 0
end_monitor
monitor_event PreFactionTurnStart FactionType scotland
	set_counter turn_fid 16
	set_counter christian_faction 1
	set_counter dead_diplomacy_scotland 0
end_monitor
monitor_event PreFactionTurnStart FactionType france
	set_counter turn_fid 17
	set_counter christian_faction 1
	set_counter dead_diplomacy_france 0
end_monitor
monitor_event PreFactionTurnStart FactionType hre
	set_counter turn_fid 18
	set_counter christian_faction 1
	set_counter dead_diplomacy_hre 0
end_monitor
monitor_event PreFactionTurnStart FactionType england
	set_counter turn_fid 19
	set_counter christian_faction 1
	set_counter dead_diplomacy_england 0
end_monitor
monitor_event PreFactionTurnStart FactionType portugal
	set_counter turn_fid 20
	set_counter dead_diplomacy_portugal 0
end_monitor
monitor_event PreFactionTurnStart FactionType poland
	set_counter turn_fid 21
	set_counter christian_faction 1
	set_counter dead_diplomacy_poland 0
end_monitor
monitor_event PreFactionTurnStart FactionType spain
	set_counter turn_fid 22
	set_counter christian_faction 1
	set_counter dead_diplomacy_spain 0
end_monitor
monitor_event PreFactionTurnStart FactionType hungary
	set_counter turn_fid 23
	set_counter christian_faction 1
	set_counter dead_diplomacy_hungary 0
end_monitor
monitor_event PreFactionTurnStart FactionType aragon
	set_counter turn_fid 24
	set_counter christian_faction 1
	set_counter dead_diplomacy_aragon 0
end_monitor
monitor_event PreFactionTurnStart FactionType teutonic_order
	set_counter turn_fid 25
	set_counter christian_faction 1
	set_counter dead_diplomacy_teutonic_order 0
end_monitor
monitor_event PreFactionTurnStart FactionType norway
	set_counter turn_fid 26
	set_counter christian_faction 1
	set_counter dead_diplomacy_norway 0
end_monitor
monitor_event PreFactionTurnStart FactionType jerusalem
	set_counter turn_fid 27
	set_counter christian_faction 1
	set_counter dead_diplomacy_jerusalem 0
end_monitor
monitor_event PreFactionTurnStart FactionType papal_states
	set_counter turn_fid 28
	set_counter christian_faction 1
end_monitor
monitor_event PreFactionTurnStart FactionType georgia
	set_counter turn_fid 29
	set_counter christian_faction 1
	set_counter dead_diplomacy_georgia 0
end_monitor

;=================== AI Citadel check ===================
monitor_event PreFactionTurnStart IsFactionAIControlled
	and not FactionBuildingExists = citadel
	and I_TurnNumber > 120

	set_event_counter citadel_boost 1
end_monitor


;=================== AGEING SCRIPT ======================
;==================================================
;===================== DISABLED =====================
;==================================================

;============= Great People Ancillaries =================
;========== was moved to descr_events.txt ===========
;========================================================


;========================================================
;********************************************************
;****************** OTHER AI STUFF **********************
;********************************************************
;========================================================

;========== Byzantine Leader Battle Models ==============
monitor_event BecomesFactionLeader FactionType byzantium
	change_battle_model byzantium leader byzantine_emperor
end_monitor

monitor_event BecomesFactionHeir FactionType byzantium
	change_battle_model byzantium heir byzantine_heir
end_monitor

;=================== Church Titles ======================
; This is linked with the "Is the AI" section
declare_counter bishop_count
declare_counter holiness_count

; france or hre excommunicated
monitor_event FactionExcommunicated I_CompareCounter turn_fid >= 17
	and I_CompareCounter turn_fid <= 18

	set_event_counter Ordain_Antipope 1
end_monitor

monitor_event CharacterTurnStart AgentType = priest
	and Trait PriestLevel >= 3

	set_event_counter Ordain_Antipope 0
	set_event_counter Patriarch 1
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and ! Religion islam
	and ! Religion pagan
	and Attribute Piety > 4
	and I_CompareCounter holiness_count < 2

	if I_CompareCounter holiness_count = 1
		set_event_counter Ordain_Antipope 0
		set_event_counter Patriarch 1
	end_if

	inc_counter holiness_count 1
end_monitor

monitor_event CharacterTurnStart AgentType = priest
	and Trait PriestLevel = 1

	inc_counter bishop_count 1
end_monitor

monitor_event SettlementTurnStart I_CompareCounter christian_faction = 1 ; christian factions

	inc_counter bishop_count -1
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and not Religion islam
	and not Religion pagan
	and Trait PriestLevel = 0

	if I_CompareCounter bishop_count = 0
		set_event_counter AppointBishop 0
	end_if

	if I_CompareCounter bishop_count < 0
		set_event_counter AppointBishop 1
		inc_counter bishop_count 1
	end_if
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and Trait PriestLevel = 1; so he's a christian bishop
	and I_CompareCounter bishop_count >= 0

	if I_CompareCounter bishop_count = 0
		set_event_counter StripBishop 0
	end_if

	if I_CompareCounter bishop_count > 0
		set_event_counter StripBishop 1
		inc_counter bishop_count -1
	end_if
end_monitor

;================== Hanseatic System ====================
; this was moved to the "Is the AI?" section
;monitor_event PreFactionTurnStart TrueCondition
;	set_event_counter hanseatic_count -1
;end_monitor

monitor_event CharacterTurnStart GovernorPlugInExists = hansa
	and I_EventCounter hanseatic_league = 1

	inc_event_counter hanseatic_count 1
end_monitor

monitor_event CharacterTurnStart GovernorPlugInExists = c_hansa
	and I_EventCounter hanseatic_league = 1

	inc_event_counter hanseatic_count 1
end_monitor

	set_event_counter hanseatic_constructed 0

monitor_event GuildUpgraded BuildingName = hanseatic_guild
	set_event_counter hanseatic_constructed 1
	reset_guild_standing hanseatic_guild
end_monitor

monitor_event BuildingDestroyed BuildingName = hanseatic_guild
	set_event_counter hanseatic_constructed 0
	reset_guild_standing hanseatic_guild
end_monitor


;=========== Faction Leader Global Traits ===============
; This section is linked with "Is the AI?" section

monitor_event CharacterTurnStart IsFactionLeader
	and Trait ThinksOfHisPeople > 0
	set_event_counter thinks_of_his_people 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait WiseAdministrator > 0
	set_event_counter wise_administrator 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait StrictlyReligious > 0
	set_event_counter strictly_religious 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait Protector > 0
	set_event_counter protector 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait MerchantSkills > 0
	set_event_counter merchant_skills 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait GreedyRuler > 0
	set_event_counter greedy_ruler 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait ShadyConnections > 0
	set_event_counter shady_connections 1
end_monitor

;============== Faction Killer Workaround ===============
;This script is linked with EDCT and "Reset counters"

monitor_event CeasedFactionLeader not FactionType papal_states
	and not FactionType dummies
	and FactionHasRank
	inc_event_counter killed_factions_count 1
end_monitor

monitor_event BecomesFactionLeader not FactionType papal_states
	and not FactionType dummies
	and FactionHasRank ; to filter (re)emerging factions

	inc_event_counter killed_factions_count -1
end_monitor

;Faction Killer special cases with child faction leaders/heirs
add_events
	event	counter	FK_special_event
	date	4
	event	counter	FK_special_event
	date	5
	event	counter	FK_special_event
	date	6
	event	counter	FK_special_event
	date	7
	event	counter	FK_special_event
	date	8
	event	counter	FK_special_event
	date	9
	event	counter	FK_special_event
	date	10
	event	counter	FK_special_event
	date	11
end_add_events
declare_counter sicily_died
declare_counter egypt_died
declare_counter portugal_died
declare_counter spain_died
declare_counter abbasids_died
declare_counter FK_special

monitor_event PreFactionTurnStart I_EventCounter FK_special_event <= 7	;1110AD
	set_counter FK_special 0
	if I_CompareCounter turn_fid = 0
	and I_EventCounter FK_special_event = 7	;1110AD
		terminate_monitor
	end_if
end_monitor
monitor_event CeasedFactionLeader CharFactionType sicily
	if I_EventCounter FK_special_event > 4;	1107AD
		terminate_monitor
	end_if
	set_counter sicily_died 1
end_monitor
monitor_event CeasedFactionLeader CharFactionType egypt
	if I_EventCounter FK_special_event > 7	;1110AD
		terminate_monitor
	end_if
	set_counter egypt_died 1
end_monitor
monitor_event CeasedFactionLeader CharFactionType spain
	if I_EventCounter FK_special_event > 1	;1104AD
		terminate_monitor
	end_if
	set_counter spain_died 1
end_monitor
monitor_event CeasedFactionLeader CharFactionType timurids
and I_EventCounter abbasids_exist = 1
	if I_EventCounter FK_special_event > 3;	1106AD
		terminate_monitor
	end_if
	set_counter abbasids_died 1
end_monitor
monitor_event CharacterTurnEnd I_CompareCounter FK_special < 1
	if I_EventCounter FK_special_event >= 7	;1110AD
	and I_CompareCounter turn_fid = 0
		terminate_monitor
	end_if
	set_counter FK_special 1
	if I_CompareCounter egypt_died = 1
	and I_EventCounter FK_special_event <= 7	;1110AD
	and I_NumberOfSettlements egypt >= 1
		set_counter egypt_died 0
		inc_event_counter killed_factions_count -1
		if I_FactionLeaderAttribute egypt Command < 999
			inc_event_counter killed_factions_count 1
		end_if
	end_if
	if I_CompareCounter portugal_died = 1
	and I_EventCounter FK_special_event <= 5	;1108AD
	and I_NumberOfSettlements portugal >= 1
		set_counter portugal_died 0
		inc_event_counter killed_factions_count -1
		if I_FactionLeaderAttribute portugal Command < 999
			inc_event_counter killed_factions_count 1
		end_if
	end_if
	if I_CompareCounter sicily_died = 1
	and I_EventCounter FK_special_event <= 4	;1107AD
	and I_NumberOfSettlements sicily >= 1
		set_counter sicily_died 0
		inc_event_counter killed_factions_count -1
		if I_FactionLeaderAttribute sicily Command < 999
			inc_event_counter killed_factions_count 1
		end_if
	end_if
	if I_CompareCounter abbasids_died = 1
	and I_EventCounter FK_special_event <= 3	;1106AD
	and I_NumberOfSettlements timurids >= 1
		set_counter abbasids_died 0
		inc_event_counter killed_factions_count -1
		if I_FactionLeaderAttribute timurids Command < 999
			inc_event_counter killed_factions_count 1
		end_if
	end_if
	if I_CompareCounter spain_died = 1
	and I_EventCounter FK_special_event <= 1	;1104AD
	and I_NumberOfSettlements spain >= 1
		set_counter spain_died 0
		inc_event_counter killed_factions_count -1
		if I_FactionLeaderAttribute spain Command < 999
			inc_event_counter killed_factions_count 1
		end_if
	end_if
end_monitor
;End of Faction Killer special cases

;========================================================
;================== AI REINFORCEMENTS ===================
;========================================================
;---- Section's Contents
;- Constantinople JIHAD garrison script
;- Jerusalem JIHAD garrison script
;- Startup Reinforcements
;- Merchant&Priest&Ship Support Spawn with Turn10 Reinforcement
;- No Heir Reinforcement

;========= Constantinople JIHAD garrison script =========
declare_counter conple_jgs
declare_counter delay_cjgs
if not I_HotseatEnabled
and I_LocalFaction byzantium
 set_counter conple_jgs 10
end_if

monitor_event GeneralArrivesCrusadeTargetRegion IsRegionOneOf Constantinople_Province
	and IsOnJihad
	and IsJihad
	and TargetFactionType byzantium
	and I_CompareCounter conple_jgs != 1

	if I_CompareCounter conple_jgs = 10
	 terminate_monitor
	end_if

	set_counter conple_jgs 1
end_monitor

monitor_event Transgression TransgressionName = TC_INSTIGATE_SIEGE
	and TargetFactionType byzantium
	and I_CompareCounter conple_jgs > 0
	and not I_SettlementUnderSiege Constantinople

	if I_CompareCounter conple_jgs = 10
	 terminate_monitor
	end_if

 if I_JihadInProgress
 and I_SettlementOwner Constantinople = byzantium
 and I_IsFactionAIControlled byzantium

	campaign_wait 0.1
	
	if I_CompareCounter delay_cjgs > 9
		set_counter delay_cjgs 0
	end_if
	if I_SettlementUnderSiege Constantinople
	and I_CompareCounter delay_cjgs < 5
		console_command create_unit Constantinople "Contaratoi" 3 0 0 0
		console_command create_unit Constantinople "Toxotae" 4 0 1 0
	end_if
 end_if

	set_counter conple_jgs 0
	inc_counter delay_cjgs 1
end_monitor

;========= Jerusalem JIHAD garrison script =========
declare_counter jeru_jgs
declare_counter delay_jjgs
if not I_HotseatEnabled
and I_LocalFaction jerusalem
 set_counter jeru_jgs 10
end_if

monitor_event GeneralArrivesCrusadeTargetRegion IsRegionOneOf Jerusalem_Province
	and IsOnJihad
	and IsJihad
	and TargetFactionType jerusalem
	and I_CompareCounter jeru_jgs != 1

	if I_CompareCounter jeru_jgs = 10
	 terminate_monitor
	end_if

	set_counter jeru_jgs 1
end_monitor

monitor_event Transgression TransgressionName = TC_INSTIGATE_SIEGE
	and TargetFactionType jerusalem
	and I_CompareCounter jeru_jgs > 0
	and not I_SettlementUnderSiege Jerusalem

	if I_CompareCounter jeru_jgs = 10
	 terminate_monitor
	end_if

 if I_JihadInProgress
 and I_SettlementOwner Jerusalem = jerusalem
 and I_IsFactionAIControlled jerusalem

	campaign_wait 0.1
	
	if I_CompareCounter delay_jjgs > 9
		set_counter delay_jjgs 0
	end_if
	if I_SettlementUnderSiege Jerusalem
	and I_CompareCounter delay_jjgs < 5
		console_command create_unit Jerusalem "Spear Militia" 4 2 3 0
		console_command create_unit Jerusalem "Peasant Archers" 4 2 2 0
	end_if
 end_if

	set_counter jeru_jgs 0
	inc_counter delay_jjgs 1
end_monitor

;================ Startup Reinforcements ================
monitor_event FactionTurnStart

 ;Seljuk Reinforcement
 if I_EventCounter DifficultyLevel > 1
	if not I_IsFactionAIControlled byzantium
	and I_IsFactionAIControlled turks
		spawn_army 
		faction turks
		character	Kasim, general, age 28, x 293, y 135
		unit		ME Bodyguard		exp 1 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
		end
		add_money turks 8000
	end_if
 ;Constantinople Reinforcement
	if not I_IsFactionAIControlled turks
	and I_IsFactionAIControlled byzantium
		console_command create_unit Constantinople "Spartharii tou Vasileos" 4 3 0 0
		console_command create_unit Constantinople "Mourtatoi" 2 3 0 0
	end_if
 end_if

 if I_EventCounter DifficultyLevel <= 2
	if I_IsFactionAIControlled england
		spawn_army
		faction england
		character	David de_Normandie, named character, age 20, x 83, y 220, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army 
		faction france
		character	Amaury Capet, named character, age 20, x 92, y 202, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
		faction hre
		character	Arnoldt von_Hohenstaufen, named character, age 20, x 143, y 207, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
		faction spain
		character	Enrique de_Castilla, named character, age 20, x 32, y 148, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
		faction venice
		character	Barbus Selvo, named character, age 20, x 161, y 173, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
		faction sicily
		character	Ettore d_Altavilla, named character, age 20, x 177, y 114, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
		faction milan
		character	Azolino Rossi, named character, age 20, x 137, y 168, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
		faction scotland
		character	Comgell mac_Donnchada, named character, age 20, x 53, y 253, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
		faction cumans
		character	Balamir of_the_Oghuz, named character, age 20, x 440, y 250, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
		unit	Cuman Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
		faction byzantium
		character	Areovindos Komnenos, named character, age 20, x 278, y 148, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
		unit	Greek Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
		faction russia
		character	Domazhir Novgorodskii, named character, age 20, x 301, y 275, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
		faction poland
		character	Dobromir Piast, named character, age 20, x 222, y 213, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
		faction moors
		character	Ayyub Al_Andalusi, named character, age 20, x 40, y 113, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
		faction turks
		character	Bahadir Celaluddevle, named character, age 20, x 339, y 133, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
		faction egypt
		character	Abdul_Malik Al_Fatimiyyun, named character, age 20, x 309, y 60, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
		faction denmark
		character	Birger Svendsen, named character, age 20, x 146, y 253, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
		faction portugal
		character	Abdul_Aziz ibn_Al_Muizz, named character, age 20, x 146, y 110, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
		faction hungary
		character	Bod Arpadhazi, named character, age 20, x 206, y 179, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army 
		faction jerusalem
		character	Colin de_Boulogne, named character, age 20, x 329, y 78, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Jerusalem 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
		faction lithuania
		character	Kestutis, named character, age 20, x 153, y 230, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
		unit	Lith Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
		faction kievan_rus
		character	Dobroslav Yaroslavich, named character, age 20, x 292, y 214, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
		faction aragon
		character	Alvar Ramirez, named character, age 20, x 83, y 150, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
		faction norway
		character	Erik Haakonsson, named character, age 20, x 114, y 280, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
		faction kwarezm
		character	Baha Mohammed, named character, age 20, x 449, y 93, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled timurids
		spawn_army
		faction timurids
		character	Abdullah Al_Abbasi, named character, age 20, x 396, y 90, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Timurid 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled georgia
		spawn_army
		faction georgia
		character	Basil Bagrationi, named character, age 20, x 400, y 149, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1 , Royal_Blood_Georgia 1 
		unit	Royal Monaspa	exp 2 armour 0 weapon_lvl 0
		end
	end_if
 end_if
 if I_EventCounter DifficultyLevel >= 3
	if I_IsFactionAIControlled england
		spawn_army
		faction england
		character	David de_Normandie, named character, age 30, x 78, y 218, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Fyrd Spearmen	exp 1 armour 0 weapon_lvl 0
		unit	Fyrd Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 1 armour 0 weapon_lvl 0
		unit	Fyrd Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army
		faction france
		character	Amaury Capet, named character, age 30, x 94, y 199, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
		faction hre
		character	Arnoldt von_Hohenstaufen, named character, age 30, x 156, y 201, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
		faction spain
		character	Enrique de_Castilla, named character, age 30, x 38, y 152, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
		faction venice
		character	Barbus Selvo, named character, age 30, x 165, y 173, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
		faction sicily
		character	Ettore d_Altavilla, named character, age 30, x 170, y 117, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
		faction milan
		character	Azolino Rossi, named character, age 30, x 139, y 168, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
		faction scotland
		character	Comgell mac_Donnchada, named character, age 30, x 62, y 247, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 0 armour 0 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 0 armour 0 weapon_lvl 0
		unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
		faction cumans
		character	Balamir of_the_Oghuz, named character, age 30, x 431, y 250, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
		unit	Cuman Bodyguard	exp 2 armour 1 weapon_lvl 0
		unit	Yasi Archers	exp 1 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 2 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 1 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 1 armour 0 weapon_lvl 0
		unit	Kasogi Senior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Kasogi Senior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
		faction byzantium
		character	Areovindos Komnenos, named character, age 30, x 282, y 143, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
		unit	Greek Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Skythikoi	exp 1 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 1 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Mourtatoi	exp 1 armour 0 weapon_lvl 0
		unit	Toxotae	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
		faction russia
		character	Domazhir Novgorodskii, named character, age 30, x 301, y 269, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Pechenegs		exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
		faction poland
		character	Dobromir Piast, named character, age 30, x 215, y 210, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 3 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Polish Shooters	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
		faction moors
		character	Ayyub Al_Andalusi, named character, age 30, x 44, y 119, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 3 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
		faction turks
		character	Bahadir Celaluddevle, named character, age 30, x 312, y 119, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Turkomans	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Turkish Archers	exp 1 armour 0 weapon_lvl 0
		unit	Turkish Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
		faction egypt
		character	Abdul_Malik Al_Fatimiyyun, named character, age 30, x 302, y 59, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 1 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
		faction denmark
		character	Birger Svendsen, named character, age 30, x 147, y 246, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 1 armour 0 weapon_lvl 0
		unit	Norse Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
		faction portugal
		character	Abdul_Aziz ibn_Al_Muizz, named character, age 30, x 146, y 110, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 1 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
		faction hungary
		character	Bod Arpadhazi, named character, age 30, x 215, y 188, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Magyar Cavalry	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army 
		faction jerusalem
		character	Colin de_Boulogne, named character, age 30, x 331, y 77, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Jerusalem 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Mounted Sergeants	exp 1 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 1 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Pilgrims	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Pilgrims	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
		faction lithuania
		character	Kestutis, named character, age 30, x 153, y 230, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
		unit	Lith Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Lithuanian Axemen	exp 1 armour 0 weapon_lvl 0
		unit	Lithuanian Axemen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
		faction kievan_rus
		character	Dobroslav Yaroslavich, named character, age 30, x 295, y 209, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Pechenegs		exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
		unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
		faction aragon
		character	Alvar Ramirez, named character, age 30, x 76, y 147, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
		faction norway
		character	Erik Haakonsson, named character, age 30, x 116, y 279, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Viking Raiders	exp 1 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 0 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
		faction kwarezm
		character	Baha Mohammed, named character, age 30, x 499, y 93, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Turkomans	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Afghan Javelinmen	exp 1 armour 0 weapon_lvl 0
		unit	Daylami Light Infantry	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled timurids
		spawn_army
		faction timurids
		character	Abdullah Al_Abbasi, named character, age 30, x 396, y 90, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Timurid 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 1 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled georgia
		spawn_army
		faction georgia
		character	Basil Bagrationi, named character, age 20, x 400, y 149, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1 , Royal_Blood_Georgia 1 
		unit	Royal Monaspa	exp 2 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Metsikhovne Archers	exp 1 armour 0 weapon_lvl 0
		unit	Metsikhovne Archers	exp 0 armour 0 weapon_lvl 0
		unit	Metsikhovne Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
 end_if

 terminate_monitor
end_monitor


;==========  Merchant&Priest&Ship Support Spawn =========
;================ & Turn10 Reinforcement ================
add_events
	event	counter	Ranked_merchants_priest_reinforcement
	date	15
	event	counter	Ranked_merchants_priest_reinforcement
	date	30
	event	counter	Ranked_merchants_priest_reinforcement
	date	45
	event	counter	Ranked_merchants_priest_reinforcement
	date	70
	event	counter	Ranked_merchants_priest_reinforcement
	date	90
	event	counter	Ranked_merchants_priest_reinforcement
	date	140
	event	counter	Slave_merchants_reinforcement
	date	0
	event	counter	Slave_merchants_reinforcement
	date	35
	event	counter	Slave_merchants_reinforcement
	date	70
	event	counter	Ranked_merchant_reinforcement
	date	2 summer
	event	counter	Ranked_merchant_reinforcement
	date	5
	event	counter	Ships_reinforcement
	date	40
	event	counter	Ships_reinforcement
	date	80
	event	counter	Turn10Reinforcement
	date	5
	event	counter	MPSSS
	date	0
	event	counter	MPSSS
	date	2 summer
	event	counter	MPSSS
	date	5
	event	counter	MPSSS
	date	15
	event	counter	MPSSS
	date	30
	event	counter	MPSSS
	date	35
	event	counter	MPSSS
	date	40
	event	counter	MPSSS
	date	45
	event	counter	MPSSS
	date	70
	event	counter	MPSSS
	date	80
	event	counter	MPSSS
	date	90
	event	counter	MPSSS
	date	140
end_add_events

declare_counter rmpr_set
monitor_event PreFactionTurnStart FactionType slave
	and I_EventCounter MPSSS = 1

 if I_EventCounter Ranked_merchants_priest_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_character england random_name, merchant, age 20, x 222, y 238
		spawn_character england random_name, merchant, age 20, x 222, y 238
		spawn_character england random_name, priest, age 20, x 222, y 238
	end_if
	if I_IsFactionAIControlled france
	and I_NumberOfSettlements france > 1
		spawn_character france random_name, merchant, age 20, x 94, y 199
		spawn_character france random_name, merchant, age 20, x 94, y 199
		spawn_character france random_name, priest, age 20, x 94, y 199
	end_if
	if I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre > 1
		spawn_character hre random_name, merchant, age 20, x 156, y 201
		spawn_character hre random_name, merchant, age 20, x 156, y 201
		spawn_character hre random_name, priest, age 20, x 156, y 201
	end_if
	if I_IsFactionAIControlled spain
	and I_NumberOfSettlements spain > 1
		spawn_character spain random_name, merchant, age 20, x 38, y 152
		spawn_character spain random_name, merchant, age 20, x 38, y 152
		spawn_character spain random_name, priest, age 20, x 38, y 152
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_character venice random_name, merchant, age 20, x 165, y 173
		spawn_character venice random_name, merchant, age 20, x 165, y 173
		spawn_character venice random_name, priest, age 20, x 165, y 173
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
		spawn_character sicily random_name, priest, age 20, x 170, y 117
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_character milan random_name, merchant, age 20, x 139, y 168
		spawn_character milan random_name, merchant, age 20, x 139, y 168
		spawn_character milan random_name, priest, age 20, x 139, y 168
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
		spawn_character scotland random_name, priest, age 20, x 62, y 247
	end_if
	if I_IsFactionAIControlled cumans
	and I_NumberOfSettlements cumans > 1
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
		spawn_character cumans random_name, priest, age 20, x 431, y 250
	end_if
	if I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium > 1
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
		spawn_character byzantium random_name, priest, age 20, x 282, y 143
	end_if
	if I_IsFactionAIControlled russia
	and I_NumberOfSettlements russia > 1
		spawn_character russia random_name, merchant, age 20, x 301, y 269
		spawn_character russia random_name, merchant, age 20, x 301, y 269
		spawn_character russia random_name, priest, age 20, x 301, y 269
	end_if
	if I_IsFactionAIControlled moors
	and I_NumberOfSettlements moors > 1
		spawn_character moors random_name, merchant, age 20, x 44, y 119
		spawn_character moors random_name, merchant, age 20, x 44, y 119
		spawn_character moors random_name, priest, age 20, x 44, y 119
	end_if
	if I_IsFactionAIControlled turks
	and I_NumberOfSettlements turks > 1
		spawn_character turks random_name, merchant, age 20, x 312, y 119
		spawn_character turks random_name, merchant, age 20, x 312, y 119
		spawn_character turks random_name, priest, age 20, x 312, y 119
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
		spawn_character egypt random_name, priest, age 20, x 302, y 59
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
		spawn_character denmark random_name, priest, age 20, x 147, y 246
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_character portugal random_name, merchant, age 20, x 150, y 109
		spawn_character portugal random_name, merchant, age 20, x 150, y 109
		spawn_character portugal random_name, priest, age 20, x 150, y 109
	end_if
	if I_IsFactionAIControlled poland
	and I_NumberOfSettlements poland > 1
		spawn_character poland random_name, merchant, age 20, x 215, y 210
		spawn_character poland random_name, merchant, age 20, x 215, y 210
		spawn_character poland random_name, priest, age 20, x 215, y 210
	end_if
	if I_IsFactionAIControlled hungary
	and I_NumberOfSettlements hungary > 1
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
		spawn_character hungary random_name, priest, age 20, x 215, y 188
	end_if
	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfSettlements kievan_rus > 1
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
		spawn_character kievan_rus random_name, priest, age 20, x 295, y 209
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
		spawn_character aragon random_name, priest, age 20, x 76, y 147
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_character norway random_name, merchant, age 20, x 116, y 279
		spawn_character norway random_name, merchant, age 20, x 116, y 279
		spawn_character norway random_name, priest, age 20, x 116, y 279
	end_if
	if I_IsFactionAIControlled lithuania
	and I_NumberOfSettlements lithuania > 1
		spawn_character lithuania random_name, merchant, age 20, x 153, y 230
		spawn_character lithuania random_name, merchant, age 20, x 153, y 230
		spawn_character lithuania random_name, priest, age 20, x 153, y 230
	end_if
	if I_IsFactionAIControlled kwarezm
	and I_NumberOfSettlements kwarezm > 1
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
		spawn_character kwarezm random_name, priest, age 20, x 449, y 93
	end_if
	if I_IsFactionAIControlled timurids
	and I_NumberOfSettlements timurids > 1
		spawn_character timurids random_name, merchant, age 20, x 396, y 92
		spawn_character timurids random_name, merchant, age 20, x 396, y 92
		spawn_character timurids random_name, priest, age 20, x 396, y 92
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_NumberOfSettlements jerusalem > 1
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
		spawn_character jerusalem random_name, priest, age 20, x 331, y 77
	end_if
	if I_IsFactionAIControlled georgia
	and I_NumberOfSettlements georgia > 1
		spawn_character georgia random_name, merchant, age 20, x 400, y 145
		spawn_character georgia random_name, merchant, age 20, x 400, y 145
		spawn_character georgia random_name, priest, age 20, x 400, y 145
	end_if

	if I_CompareCounter rmpr_set = 5
	 terminate_monitor
	end_if
	inc_counter rmpr_set 1

  set_event_counter Ranked_merchants_priest_reinforcement 0
 end_if

 if I_EventCounter Slave_merchants_reinforcement = 1
	spawn_character slave random_name, merchant, age 20, x 138, y 101
	spawn_character slave random_name, merchant, age 20, x 66, y 131
	spawn_character slave random_name, merchant, age 20, x 349, y 89
	spawn_character slave random_name, merchant, age 20, x 428, y 218
	spawn_character slave random_name, merchant, age 20, x 234, y 218
	spawn_character slave random_name, merchant, age 20, x 81, y 184
	spawn_character slave random_name, merchant, age 20, x 57, y 233
	spawn_character slave random_name, merchant, age 20, x 178, y 248
	spawn_character slave random_name, merchant, age 20, x 184, y 144
	spawn_character slave random_name, merchant, age 20, x 223, y 157
	spawn_character slave random_name, merchant, age 20, x 482, y 104
	spawn_character slave random_name, merchant, age 20, x 20, y 125
	spawn_character slave random_name, merchant, age 20, x 30, y 237
	spawn_character slave random_name, merchant, age 20, x 238, y 118
  set_event_counter Slave_merchants_reinforcement 0
 end_if

 if I_EventCounter Ranked_merchant_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_character england random_name, merchant, age 20, x 222, y 238
	end_if
	if I_IsFactionAIControlled france
	and I_NumberOfSettlements france > 1
		spawn_character france random_name, merchant, age 20, x 94, y 199
	end_if
	if I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre > 1
		spawn_character hre random_name, merchant, age 20, x 156, y 201
	end_if
	if I_IsFactionAIControlled spain
	and I_NumberOfSettlements spain > 1
		spawn_character spain random_name, merchant, age 20, x 38, y 152
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_character venice random_name, merchant, age 20, x 165, y 173
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_character milan random_name, merchant, age 20, x 139, y 168
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
	end_if
	if I_IsFactionAIControlled cumans
	and I_NumberOfSettlements cumans > 1
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
	end_if
	if I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium > 1
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
	end_if
	if I_IsFactionAIControlled russia
	and I_NumberOfSettlements russia > 1
		spawn_character russia random_name, merchant, age 20, x 301, y 269
	end_if
	if I_IsFactionAIControlled moors
	and I_NumberOfSettlements moors > 1
		spawn_character moors random_name, merchant, age 20, x 44, y 119
	end_if
	if I_IsFactionAIControlled turks
	and I_NumberOfSettlements turks > 1
		spawn_character turks random_name, merchant, age 20, x 312, y 119
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_character portugal random_name, merchant, age 20, x 147, y 105
	end_if
	if I_IsFactionAIControlled poland
	and I_NumberOfSettlements poland > 1
		spawn_character poland random_name, merchant, age 20, x 215, y 210
	end_if
	if I_IsFactionAIControlled hungary
	and I_NumberOfSettlements hungary > 1
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
	end_if
	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfSettlements kievan_rus > 1
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_character norway random_name, merchant, age 20, x 116, y 279
	end_if
	if I_IsFactionAIControlled lithuania
	and I_NumberOfSettlements lithuania > 1
		spawn_character lithuania random_name, merchant, age 20, x 153, y 230
	end_if
	if I_IsFactionAIControlled kwarezm
	and I_NumberOfSettlements kwarezm > 1
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
	end_if
	if I_IsFactionAIControlled timurids
	and I_NumberOfSettlements timurids > 1
		spawn_character timurids random_name, merchant, age 20, x 418, y 67
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_NumberOfSettlements jerusalem > 1
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
	end_if
	if I_IsFactionAIControlled georgia
	and I_NumberOfSettlements georgia > 1
		spawn_character georgia random_name, merchant, age 20, x 400, y 145
	end_if
  set_event_counter Ranked_merchant_reinforcement 0
 end_if

 if I_EventCounter Ships_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_army
			faction england
			character random_name, admiral, age 20, x 76, y 211
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_army
			faction venice
			character random_name, admiral, age 20, x 171, y 170
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_army
			faction sicily
			character random_name, admiral, age 20, x 170, y 122
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_army
			faction milan
			character random_name, admiral, age 20, x 76, y 211
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_army
			faction scotland
			character random_name, admiral, age 20, x 61, y 253
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_army
			faction egypt
			character random_name, admiral, age 20, x 76, y 211
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_army
			faction denmark
			character random_name, admiral, age 20, x 170, y 242
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_army
			faction portugal
			character random_name, admiral, age 20, x 153, y 118
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_army
			faction aragon
			character random_name, admiral, age 20, x 96, y 143
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_army
			faction norway
			character random_name, admiral, age 20, x 154, y 270
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
		end
	end_if
  set_event_counter Ships_reinforcement 0
 end_if

 if I_EventCounter Turn10Reinforcement = 1
	if I_IsFactionAIControlled england
		spawn_army
			faction england
			character	Fulk de_Normandie, named character, age 30, x 78, y 218, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Fyrd Spearmen		exp 1 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Archer Militia		exp 1 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Archer Militia		exp 0 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army
			faction france
			character	Gautier Capet, named character, age 30, x 94, y 199, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 1 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
			faction hre
			character	Bruno von_Hohenstaufen, named character, age 30, x 156, y 201, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
			faction spain
			character	Eusebio de_Castilla, named character, age 30, x 38, y 152, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
			faction venice
			character	Bucello Selvo, named character, age 30, x 165, y 173, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
			faction sicily
			character	Guaimario d_Altavilla, named character, age 30, x 170, y 117, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
			faction milan
			character	Lapo Rossi, named character, age 30, x 139, y 168, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
			faction scotland
			character	Amlaib mac_Donnchada, named character, age 30, x 62, y 247, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Highlanders		exp 1 armour 0 weapon_lvl 0
			unit	Highlanders		exp 0 armour 0 weapon_lvl 0
			unit	Highlanders		exp 0 armour 0 weapon_lvl 0
			unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
			unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
			faction cumans
			character	Bartan of_the_Oghuz, named character, age 30, x 431, y 250, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
			unit	Cuman Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit	Yasi Archers	exp 1 armour 0 weapon_lvl 0
			unit	Cuman Horse Militia	exp 2 armour 0 weapon_lvl 0
			unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
			unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
			faction byzantium
			character	Arsenios Komnenos, named character, age 30, x 282, y 143, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
			unit	Greek Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 1 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Mourtatoi		exp 1 armour 0 weapon_lvl 0
			unit	Toxotae		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
			faction russia
			character	Gorislav Novgorodskii, named character, age 30, x 301, y 269, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
			unit	EE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
			faction moors
			character	Bakr Al_Andalusi, named character, age 30, x 44, y 119, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
			faction turks
			character	Ali Celaluddevle, named character, age 30, x 312, y 119, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Turkomans		exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Turkish Archers		exp 1 armour 0 weapon_lvl 0
			unit	Turkish Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
			faction egypt
			character	Dinar Al_Fatimiyyun, named character, age 30, x 302, y 59, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 1 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
			faction denmark
			character	Bue Svendsen, named character, age 30, x 147, y 246, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 1 armour 0 weapon_lvl 0
			unit	Norse Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
			faction portugal
			character	Salah ibn_Zakariyya, named character, age 30, x 150, y 107, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 1 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
			faction poland
			character	Ignacy Piast, named character, age 30, x 215, y 210, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Polish Shooters		exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
			faction hungary
			character	Bank Arpadhazi, named character, age 30, x 215, y 188, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Magyar Cavalry		exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
			faction kievan_rus
			character	Gavriil Yaroslavich, named character, age 30, x 295, y 209, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
			unit	EE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Archer Militia	exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
			faction aragon
			character	Jimeno Ramirez, named character, age 30, x 76, y 147, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 1 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
			faction norway
			character	Yngwie Haakonsson, named character, age 30, x 116, y 279, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Viking Raiders		exp 1 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 0 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
			faction lithuania
			character	Vasalgas, named character, age 30, x 153, y 230, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
			unit	Lith Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Lithuanian Axemen	exp 1 armour 0 weapon_lvl 0
			unit	Lithuanian Axemen	exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
			faction kwarezm
			character	Melik Mohammed, named character, age 30, x 449, y 93, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Turkomans		exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Afghan Javelinmen	exp 1 armour 0 weapon_lvl 0
			unit	Daylami Light Infantry	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled timurids
		spawn_army
			faction timurids
			character	Sharif Al_Abbasi, named character, age 30, x 395, y 90, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Timurid 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 1 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army
			faction jerusalem
			character	Simon de_Brienne, named character, age 30, x 331, y 77, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0	  
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled georgia
		spawn_army
			faction georgia
			character	Varken Bagrationi, named character, age 30, x 395, y 147, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1, BiologicalSon 1 , Royal_Blood_Georgia 1 
			unit	Royal Monaspa		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Metsikhovne Archers	exp 1 armour 0 weapon_lvl 0
			unit	Metsikhovne Archers	exp 0 armour 0 weapon_lvl 0
			unit	Metsikhovne Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
  set_event_counter Turn10Reinforcement 0
 end_if

 set_event_counter MPSSS 0
end_monitor

;================ No Heir Reinforcement =================
declare_counter heir_venice
declare_counter heir_sicily
declare_counter heir_milan
declare_counter heir_denmark
declare_counter heir_egypt
declare_counter heir_scotland
declare_counter heir_cumans
declare_counter heir_mongols
declare_counter heir_turks
declare_counter heir_france
declare_counter heir_hre
declare_counter heir_england
declare_counter heir_portugal
declare_counter heir_poland
declare_counter heir_byzantium
declare_counter heir_moors
declare_counter heir_russia
declare_counter heir_spain
declare_counter heir_hungary
declare_counter heir_aragon
declare_counter heir_lithuania
declare_counter heir_kievan_rus
declare_counter heir_teutonic_order
declare_counter heir_timurids
declare_counter heir_norway
declare_counter heir_jerusalem
declare_counter heir_kwarezm
declare_counter heir_georgia
declare_counter no_other_heir_spawn

monitor_event FactionTurnStart FactionType slave

	if I_IsFactionAIControlled england
	and I_NumberOfHeirs england < 4
	and I_CompareCounter heir_england < 3
	and I_NumberOfSettlements england >= 1
		spawn_army
			faction england
			character	random_name, named character, age 20, x 83, y 220, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_england 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled scotland
	and I_NumberOfHeirs scotland < 4
	and I_CompareCounter heir_scotland < 3
	and I_NumberOfSettlements scotland >= 1
		spawn_army
			faction scotland
			character	random_name, named character, age 20, x 53, y 253, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_scotland 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled denmark
	and I_NumberOfHeirs denmark < 4
	and I_CompareCounter heir_denmark < 3
	and I_NumberOfSettlements denmark >= 1
		spawn_army
			faction denmark
			character	random_name, named character, age 20, x 146, y 253, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_denmark 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled norway
	and I_NumberOfHeirs norway < 4
	and I_CompareCounter heir_norway < 3
	and I_NumberOfSettlements norway >= 1
		spawn_army
			faction norway
			character	random_name, named character, age 20, x 114, y 280, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_norway 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled france
	and I_NumberOfHeirs france < 4
	and I_CompareCounter heir_france < 3
	and I_NumberOfSettlements france >= 1
		spawn_army
			faction france
			character	random_name, named character, age 20, x 92, y 202, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_france 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled hre
	and I_NumberOfHeirs hre < 4
	and I_CompareCounter heir_hre < 3
	and I_NumberOfSettlements hre >= 1
		spawn_army
			faction hre
			character	random_name, named character, age 20, x 143, y 207, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_hre 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled milan
	and I_NumberOfHeirs milan < 4
	and I_CompareCounter heir_milan < 3
	and I_NumberOfSettlements milan >= 1
		spawn_army
			faction milan
			character	random_name, named character, age 20, x 137, y 168, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_milan 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled aragon
	and I_NumberOfHeirs aragon < 4
	and I_CompareCounter heir_aragon < 3
	and I_NumberOfSettlements aragon >= 1
		spawn_army
			faction aragon
			character	random_name, named character, age 20, x 83, y 150, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_aragon 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled spain
	and I_NumberOfHeirs spain < 4
	and I_CompareCounter heir_spain < 3
	and I_NumberOfSettlements spain >= 1
		spawn_army
			faction spain
			character	random_name, named character, age 20, x 32, y 148, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_spain 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled portugal
	and I_NumberOfHeirs portugal < 4
	and I_CompareCounter heir_portugal < 3
	and I_NumberOfSettlements portugal >= 1
		spawn_army
			faction portugal
			character	random_name, named character, age 20, x 150, y 108, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_portugal 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled venice
	and I_NumberOfHeirs venice < 4
	and I_CompareCounter heir_venice < 3
	and I_NumberOfSettlements venice >= 1
		spawn_army
			faction venice
			character	random_name, named character, age 20, x 161, y 173, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_venice 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled sicily
	and I_NumberOfHeirs sicily < 4
	and I_CompareCounter heir_sicily < 3
	and I_NumberOfSettlements sicily >= 1
		spawn_army
			faction sicily
			character	random_name, named character, age 20, x 177, y 114, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_sicily 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled poland
	and I_NumberOfHeirs poland < 4
	and I_CompareCounter heir_poland < 3
	and I_NumberOfSettlements poland >= 1
		spawn_army
			faction poland
			character	random_name, named character, age 20, x 222, y 213, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_poland 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled hungary
	and I_NumberOfHeirs hungary < 4
	and I_CompareCounter heir_hungary < 3
	and I_NumberOfSettlements hungary >= 1
		spawn_army
			faction hungary
			character	random_name, named character, age 20, x 206, y 179, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_hungary 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfHeirs kievan_rus < 4
	and I_CompareCounter heir_kievan_rus < 3
	and I_NumberOfSettlements kievan_rus >= 1
		spawn_army
			faction kievan_rus
			character	random_name, named character, age 20, x 292, y 214, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	EE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_kievan_rus 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled russia
	and I_NumberOfHeirs russia < 4
	and I_CompareCounter heir_russia < 3
	and I_NumberOfSettlements russia >= 1
		spawn_army
			faction russia
			character	random_name, named character, age 20, x 301, y 275, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	EE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_russia 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled byzantium
	and I_NumberOfHeirs byzantium < 4
	and I_CompareCounter heir_byzantium < 3
	and I_NumberOfSettlements byzantium >= 1
		spawn_army
			faction byzantium
			character	random_name, named character, age 20, x 278, y 148, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Greek Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_byzantium 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled lithuania
	and I_NumberOfHeirs lithuania < 4
	and I_CompareCounter heir_lithuania < 3
	and I_NumberOfSettlements lithuania >= 1
		spawn_army
			faction lithuania
			character	random_name, named character, age 20, x 155, y 232, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Lith Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_lithuania 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled teutonic_order
	and I_FactionLeaderAttribute teutonic_order Command < 999
	and I_NumberOfHeirs teutonic_order < 4
	and I_CompareCounter heir_teutonic_order < 3
		spawn_army
			faction teutonic_order
			character	random_name, named character, age 20, x 232, y 237, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	TO Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_teutonic_order 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled jerusalem
	and I_NumberOfHeirs jerusalem < 4
	and I_CompareCounter heir_jerusalem < 3
	and I_NumberOfSettlements jerusalem >= 1
		spawn_army
			faction jerusalem
			character	random_name, named character, age 20, x 329, y 78, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_jerusalem 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled turks
	and I_NumberOfHeirs turks < 4
	and I_CompareCounter heir_turks < 3
	and I_NumberOfSettlements turks >= 1
		spawn_army
			faction turks
			character	random_name, named character, age 20, x 339, y 133, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_turks 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled egypt
	and I_NumberOfHeirs egypt < 4
	and I_CompareCounter heir_egypt < 3
	and I_NumberOfSettlements egypt >= 1
		spawn_army
			faction egypt
			character	random_name, named character, age 20, x 309, y 60, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_egypt 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled moors
	and I_NumberOfHeirs moors < 4
	and I_CompareCounter heir_moors < 3
	and I_NumberOfSettlements moors >= 1
		spawn_army
			faction moors
			character	random_name, named character, age 20, x 40, y 113, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_moors 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled kwarezm
	and I_NumberOfHeirs kwarezm < 4
	and I_CompareCounter heir_kwarezm < 3
	and I_NumberOfSettlements kwarezm >= 1
		spawn_army
			faction kwarezm
			character	random_name, named character, age 20, x 449, y 93, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_kwarezm 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled cumans
	and I_NumberOfHeirs cumans < 4
	and I_CompareCounter heir_cumans < 3
	and I_NumberOfSettlements cumans >= 1
		spawn_army
			faction cumans
			character	random_name, named character, age 20, x 440, y 250, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_cumans 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled georgia
	and I_NumberOfHeirs georgia < 4
	and I_CompareCounter heir_georgia < 3
	and I_NumberOfSettlements georgia >= 1
		spawn_army
			faction georgia
			character	random_name, named character, age 20, x 400, y 149, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Royal Monaspa		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_georgia 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled mongols
	and I_FactionLeaderAttribute mongols Command < 999
	and I_NumberOfHeirs mongols < 4
	and I_CompareCounter heir_mongols < 3
	;and I_EventCounter mongols_invasion > 0
		spawn_army
			faction mongols
			character	random_name, named character, age 20, x 502, y 160, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Keshikten Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_mongols 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled timurids
	and I_FactionLeaderAttribute timurids Command < 999
	and I_NumberOfHeirs timurids < 4
	and I_CompareCounter heir_timurids < 3
	;and I_EventCounter timurids_invasion > 0
		spawn_army
			faction timurids
			;character	random_name, named character, age 20, x 502, y 161, family
			character	random_name, named character, age 20, x 396, y 90, family	; ABBASIDS
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			;unit	Keshikten Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0	; ABBASIDS
		end
		inc_counter heir_timurids 1
		inc_counter no_other_heir_spawn 1
	end_if
	
	;if I_CompareCounter no_other_heir_spawn = 84; [3 times x 28 factions]
	;	terminate_monitor
	;end_if
end_monitor

;===================== MONEY SCRIPT =====================
;--- FES religion islam
declare_counter freeze_egypt
declare_counter freeze_turks
declare_counter freeze_timurids
declare_counter freeze_kwarezm
declare_counter freeze_moors
;--- FES religion pagan 
declare_counter freeze_lithuania
declare_counter freeze_cumans
declare_counter freeze_mongols
;--- FES religion orthodox 
declare_counter freeze_byzantium
declare_counter freeze_russia
declare_counter freeze_kievan_rus
declare_counter freeze_georgia
;--- FES religion catholic 
declare_counter freeze_venice
declare_counter freeze_sicily
declare_counter freeze_milan
declare_counter freeze_denmark
declare_counter freeze_scotland
declare_counter freeze_france
declare_counter freeze_hre
declare_counter freeze_england
declare_counter freeze_portugal
declare_counter freeze_poland
declare_counter freeze_spain
declare_counter freeze_hungary
declare_counter freeze_aragon
declare_counter freeze_teutonic_order
declare_counter freeze_norway
declare_counter freeze_jerusalem
declare_counter freeze_papal_states

; Rich AI faction
monitor_event PreFactionTurnStart not FactionType slave
	;and IsFactionAIControlled
	and Treasury > 85000

	if I_CompareCounter turn_fid = 1
		add_money egypt -10000
	end_if
	if I_CompareCounter turn_fid = 2
		add_money turks -10000
	end_if
	if I_CompareCounter turn_fid = 3
		add_money timurids -10000
	end_if
	if I_CompareCounter turn_fid = 4
		add_money kwarezm -10000
	end_if
	if I_CompareCounter turn_fid = 5
		add_money moors -10000
	end_if
	if I_CompareCounter turn_fid = 6
		add_money lithuania -10000
	end_if
	if I_CompareCounter turn_fid = 7
		add_money cumans -10000
	end_if
	if I_CompareCounter turn_fid = 8
		add_money mongols -10000
	end_if
	if I_CompareCounter turn_fid = 9
		add_money byzantium -10000
	end_if
	if I_CompareCounter turn_fid = 10
		add_money russia -10000
	end_if
	if I_CompareCounter turn_fid = 11
		add_money kievan_rus -10000
	end_if
	if I_CompareCounter turn_fid = 12
		add_money venice -10000
	end_if
	if I_CompareCounter turn_fid = 13
		add_money sicily -10000
	end_if
	if I_CompareCounter turn_fid = 14
		add_money milan -10000
	end_if
	if I_CompareCounter turn_fid = 15
		add_money denmark -10000
	end_if
	if I_CompareCounter turn_fid = 16
		add_money scotland -10000
	end_if
	if I_CompareCounter turn_fid = 17
		add_money france -10000
	end_if
	if I_CompareCounter turn_fid = 18
		add_money hre -10000
	end_if
	if I_CompareCounter turn_fid = 19
		add_money england -10000
	end_if
	if I_CompareCounter turn_fid = 20
		add_money portugal -10000
	end_if
	if I_CompareCounter turn_fid = 21
		add_money poland -10000
	end_if
	if I_CompareCounter turn_fid = 22
		add_money spain -10000
	end_if
	if I_CompareCounter turn_fid = 23
		add_money hungary -10000
	end_if
	if I_CompareCounter turn_fid = 24
		add_money aragon -10000
	end_if
	if I_CompareCounter turn_fid = 25
		add_money teutonic_order -10000
	end_if
	if I_CompareCounter turn_fid = 26
		add_money norway -10000
	end_if
	if I_CompareCounter turn_fid = 27
		add_money jerusalem -10000
	end_if
	if I_CompareCounter turn_fid = 28
		add_money papal_states -10000
	end_if
	if I_CompareCounter turn_fid = 29
		add_money georgia -10000
	end_if
end_monitor

; Small FactionIncome at their TurnStart - prepare to freeze their recruitment pool if next turn they 'll start with small Treasury
monitor_event FactionTurnStart IsFactionAIControlled
	and not FactionType slave
	and FactionIncome < 1000

	if I_CompareCounter turn_fid = 1
		set_counter freeze_egypt 1
	end_if
	if I_CompareCounter turn_fid = 2
		set_counter freeze_turks 1
	end_if
	if I_CompareCounter turn_fid = 3
		set_counter freeze_timurids 1
	end_if
	if I_CompareCounter turn_fid = 4
		set_counter freeze_kwarezm 1
	end_if
	if I_CompareCounter turn_fid = 5
		set_counter freeze_moors 1
	end_if
	if I_CompareCounter turn_fid = 6
		set_counter freeze_lithuania 1
	end_if
	if I_CompareCounter turn_fid = 7
		set_counter freeze_cumans 1
	end_if
	if I_CompareCounter turn_fid = 8
		set_counter freeze_mongols 1
	end_if
	if I_CompareCounter turn_fid = 9
		set_counter freeze_byzantium 1
	end_if
	if I_CompareCounter turn_fid = 10
		set_counter freeze_russia 1
	end_if
	if I_CompareCounter turn_fid = 11
		set_counter freeze_kievan_rus 1
	end_if
	if I_CompareCounter turn_fid = 12
		set_counter freeze_venice 1
	end_if
	if I_CompareCounter turn_fid = 13
		set_counter freeze_sicily 1
	end_if
	if I_CompareCounter turn_fid = 14
		set_counter freeze_milan 1
	end_if
	if I_CompareCounter turn_fid = 15
		set_counter freeze_denmark 1
	end_if
	if I_CompareCounter turn_fid = 16
		set_counter freeze_scotland 1
	end_if
	if I_CompareCounter turn_fid = 17
		set_counter freeze_france 1
	end_if
	if I_CompareCounter turn_fid = 18
		set_counter freeze_hre 1
	end_if
	if I_CompareCounter turn_fid = 19
		set_counter freeze_england 1
	end_if
	if I_CompareCounter turn_fid = 20
		set_counter freeze_portugal 1
	end_if
	if I_CompareCounter turn_fid = 21
		set_counter freeze_poland 1
	end_if
	if I_CompareCounter turn_fid = 22
		set_counter freeze_spain 1
	end_if
	if I_CompareCounter turn_fid = 23
		set_counter freeze_hungary 1
	end_if
	if I_CompareCounter turn_fid = 24
		set_counter freeze_aragon 1
	end_if
	if I_CompareCounter turn_fid = 25
		set_counter freeze_teutonic_order 1
	end_if
	if I_CompareCounter turn_fid = 26
		set_counter freeze_norway 1
	end_if
	if I_CompareCounter turn_fid = 27
		set_counter freeze_jerusalem 1
	end_if
	if I_CompareCounter turn_fid = 28
		set_counter freeze_papal_states 1
	end_if
	if I_CompareCounter turn_fid = 29
		set_counter freeze_georgia 1
	end_if
end_monitor

;Great AI debt - if they are not slaves, disband their mercenaries
monitor_event PreFactionTurnStart IsFactionAIControlled
	and Treasury < -5000

	if I_CompareCounter turn_fid = 0
		add_money slave -2147478647
		add_money slave 2147483647
		add_money slave 101
	end_if

	if I_CompareCounter turn_fid = 1
		destroy_units egypt, mercenary_unit
		add_money egypt -2147478647
		add_money egypt 2147483647
		add_money egypt 101
		set_counter freeze_egypt 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 2
		destroy_units turks, mercenary_unit
		add_money turks -2147478647
		add_money turks 2147483647
		add_money turks 101
		set_counter freeze_turks 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 3
		destroy_units timurids, mercenary_unit
		add_money timurids -2147478647
		add_money timurids 2147483647
		add_money timurids 101
		set_counter freeze_timurids 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 4
		destroy_units kwarezm, mercenary_unit
		add_money kwarezm -2147478647
		add_money kwarezm 2147483647
		add_money kwarezm 101
		set_counter freeze_kwarezm 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 5
		destroy_units moors, mercenary_unit
		add_money moors -2147478647
		add_money moors 2147483647
		add_money moors 101
		set_counter freeze_moors 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 6
		destroy_units lithuania, mercenary_unit
		add_money lithuania -2147478647
		add_money lithuania 2147483647
		add_money lithuania 101
		set_counter freeze_lithuania 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 7
		destroy_units cumans, mercenary_unit
		add_money cumans -2147478647
		add_money cumans 2147483647
		add_money cumans 101
		set_counter freeze_cumans 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 8
		destroy_units mongols, mercenary_unit
		add_money mongols -2147478647
		add_money mongols 2147483647
		add_money mongols 101
		set_counter freeze_mongols 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 9
		destroy_units byzantium, mercenary_unit
		add_money byzantium -2147478647
		add_money byzantium 2147483647
		add_money byzantium 101
		set_counter freeze_byzantium 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 10
		destroy_units russia, mercenary_unit
		add_money russia -2147478647
		add_money russia 2147483647
		add_money russia 101
		set_counter freeze_russia 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 11
		destroy_units kievan_rus, mercenary_unit
		add_money kievan_rus -2147478647
		add_money kievan_rus 2147483647
		add_money kievan_rus 101
		set_counter freeze_kievan_rus 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 12
		destroy_units venice, mercenary_unit
		add_money venice -2147478647
		add_money venice 2147483647
		add_money venice 101
		set_counter freeze_venice 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 13
		destroy_units sicily, mercenary_unit
		add_money sicily -2147478647
		add_money sicily 2147483647
		add_money sicily 101
		set_counter freeze_sicily 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 14
		destroy_units milan, mercenary_unit
		add_money milan -2147478647
		add_money milan 2147483647
		add_money milan 101
		set_counter freeze_milan 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 15
		destroy_units denmark, mercenary_unit
		add_money denmark -2147478647
		add_money denmark 2147483647
		add_money denmark 101
		set_counter freeze_denmark 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 16
		destroy_units scotland, mercenary_unit
		add_money scotland -2147478647
		add_money scotland 2147483647
		add_money scotland 101
		set_counter freeze_scotland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 17
		destroy_units france, mercenary_unit
		add_money france -2147478647
		add_money france 2147483647
		add_money france 101
		set_counter freeze_france 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 18
		destroy_units hre, mercenary_unit
		add_money hre -2147478647
		add_money hre 2147483647
		add_money hre 101
		set_counter freeze_hre 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 19
		destroy_units england, mercenary_unit
		add_money england -2147478647
		add_money england 2147483647
		add_money england 101
		set_counter freeze_england 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 20
		destroy_units portugal, mercenary_unit
		add_money portugal -2147478647
		add_money portugal 2147483647
		add_money portugal 101
		set_counter freeze_portugal 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 21
		destroy_units poland, mercenary_unit
		add_money poland -2147478647
		add_money poland 2147483647
		add_money poland 101
		set_counter freeze_poland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 22
		destroy_units spain, mercenary_unit
		add_money spain -2147478647
		add_money spain 2147483647
		add_money spain 101
		set_counter freeze_spain 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 23
		destroy_units hungary, mercenary_unit
		add_money hungary -2147478647
		add_money hungary 2147483647
		add_money hungary 101
		set_counter freeze_hungary 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 24
		destroy_units aragon, mercenary_unit
		add_money aragon -2147478647
		add_money aragon 2147483647
		add_money aragon 101
		set_counter freeze_aragon 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 25
		destroy_units teutonic_order, mercenary_unit
		add_money teutonic_order -2147478647
		add_money teutonic_order 2147483647
		add_money teutonic_order 101
		set_counter freeze_teutonic_order 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 26
		destroy_units norway, mercenary_unit
		add_money norway -2147478647
		add_money norway 2147483647
		add_money norway 101
		set_counter freeze_norway 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 27
		destroy_units jerusalem, mercenary_unit
		add_money jerusalem -2147478647
		add_money jerusalem 2147483647
		add_money jerusalem 101
		set_counter freeze_jerusalem 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 28
		destroy_units papal_states, mercenary_unit
		add_money papal_states -2147478647
		add_money papal_states 2147483647
		add_money papal_states 101
		set_counter freeze_papal_states 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 29
		destroy_units georgia, mercenary_unit
		add_money georgia -2147478647
		add_money georgia 2147483647
		add_money georgia 101
		set_counter freeze_georgia 0
		set_event_counter freeze_recr_pool 1
	end_if
end_monitor

;Small AI debt - don't disband their mercenaries
monitor_event PreFactionTurnStart IsFactionAIControlled
	and Treasury < 0

	if I_CompareCounter turn_fid = 0
		add_money slave -2147483647
		add_money slave 2147483647
		add_money slave 101
	end_if

	if I_CompareCounter turn_fid = 1
		add_money egypt -2147483647
		add_money egypt 2147483647
		add_money egypt 101
		set_counter freeze_egypt 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 2
		add_money turks -2147483647
		add_money turks 2147483647
		add_money turks 101
		set_counter freeze_turks 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 3
		add_money timurids -2147483647
		add_money timurids 2147483647
		add_money timurids 101
		set_counter freeze_timurids 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 4
		add_money kwarezm -2147483647
		add_money kwarezm 2147483647
		add_money kwarezm 101
		set_counter freeze_kwarezm 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 5
		add_money moors -2147483647
		add_money moors 2147483647
		add_money moors 101
		set_counter freeze_moors 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 6
		add_money lithuania -2147483647
		add_money lithuania 2147483647
		add_money lithuania 101
		set_counter freeze_lithuania 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 7
		add_money cumans -2147483647
		add_money cumans 2147483647
		add_money cumans 101
		set_counter freeze_cumans 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 8
		add_money mongols -2147483647
		add_money mongols 2147483647
		add_money mongols 101
		set_counter freeze_mongols 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 9
		add_money byzantium -2147483647
		add_money byzantium 2147483647
		add_money byzantium 101
		set_counter freeze_byzantium 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 10
		add_money russia -2147483647
		add_money russia 2147483647
		add_money russia 101
		set_counter freeze_russia 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 11
		add_money kievan_rus -2147483647
		add_money kievan_rus 2147483647
		add_money kievan_rus 101
		set_counter freeze_kievan_rus 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 12
		add_money venice -2147483647
		add_money venice 2147483647
		add_money venice 101
		set_counter freeze_venice 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 13
		add_money sicily -2147483647
		add_money sicily 2147483647
		add_money sicily 101
		set_counter freeze_sicily 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 14
		add_money milan -2147483647
		add_money milan 2147483647
		add_money milan 101
		set_counter freeze_milan 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 15
		add_money denmark -2147483647
		add_money denmark 2147483647
		add_money denmark 101
		set_counter freeze_denmark 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 16
		add_money scotland -2147483647
		add_money scotland 2147483647
		add_money scotland 101
		set_counter freeze_scotland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 17
		add_money france -2147483647
		add_money france 2147483647
		add_money france 101
		set_counter freeze_france 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 18
		add_money hre -2147483647
		add_money hre 2147483647
		add_money hre 101
		set_counter freeze_hre 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 19
		add_money england -2147483647
		add_money england 2147483647
		add_money england 101
		set_counter freeze_england 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 20
		add_money portugal -2147483647
		add_money portugal 2147483647
		add_money portugal 101
		set_counter freeze_portugal 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 21
		add_money poland -2147483647
		add_money poland 2147483647
		add_money poland 101
		set_counter freeze_poland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 22
		add_money spain -2147483647
		add_money spain 2147483647
		add_money spain 101
		set_counter freeze_spain 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 23
		add_money hungary -2147483647
		add_money hungary 2147483647
		add_money hungary 101
		set_counter freeze_hungary 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 24
		add_money aragon -2147483647
		add_money aragon 2147483647
		add_money aragon 101
		set_counter freeze_aragon 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 25
		add_money teutonic_order -2147483647
		add_money teutonic_order 2147483647
		add_money teutonic_order 101
		set_counter freeze_teutonic_order 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 26
		add_money norway -2147483647
		add_money norway 2147483647
		add_money norway 101
		set_counter freeze_norway 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 27
		add_money jerusalem -2147483647
		add_money jerusalem 2147483647
		add_money jerusalem 101
		set_counter freeze_jerusalem 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 28
		add_money papal_states -2147483647
		add_money papal_states 2147483647
		add_money papal_states 101
		set_counter freeze_papal_states 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 29
		add_money georgia -2147483647
		add_money georgia 2147483647
		add_money georgia 101
		set_counter freeze_georgia 0
		set_event_counter freeze_recr_pool 1
	end_if
end_monitor

; Poor AI faction
monitor_event PreFactionTurnStart IsFactionAIControlled
	and not FactionType slave
	and Treasury < 10000
	and I_EventCounter freeze_recr_pool = 0

	if I_CompareCounter turn_fid = 1
	and I_CompareCounter freeze_egypt = 1
		if not I_FactionBesieged egypt
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_egypt 0
	end_if
	if I_CompareCounter turn_fid = 2
	and I_CompareCounter freeze_turks = 1
		if not I_FactionBesieged turks
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_turks 0
	end_if
	if I_CompareCounter turn_fid = 3
	and I_CompareCounter freeze_timurids = 1
		if not I_FactionBesieged timurids
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_timurids 0
	end_if
	if I_CompareCounter turn_fid = 4
	and I_CompareCounter freeze_kwarezm = 1
		if not I_FactionBesieged kwarezm
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_kwarezm 0
	end_if
	if I_CompareCounter turn_fid = 5
	and I_CompareCounter freeze_moors = 1
		if not I_FactionBesieged moors
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_moors 0
	end_if
	if I_CompareCounter turn_fid = 6
	and I_CompareCounter freeze_lithuania = 1
		if not I_FactionBesieged lithuania
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_lithuania 0
	end_if
	if I_CompareCounter turn_fid = 7
	and I_CompareCounter freeze_cumans = 1
		if not I_FactionBesieged cumans
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_cumans 0
	end_if
	if I_CompareCounter turn_fid = 8
	and I_CompareCounter freeze_mongols = 1
		if not I_FactionBesieged mongols
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_mongols 0
	end_if
	if I_CompareCounter turn_fid = 9
	and I_CompareCounter freeze_byzantium = 1
		if not I_FactionBesieged byzantium
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_byzantium 0
	end_if
	if I_CompareCounter turn_fid = 10
	and I_CompareCounter freeze_russia = 1
		if not I_FactionBesieged russia
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_russia 0
	end_if
	if I_CompareCounter turn_fid = 11
	and I_CompareCounter freeze_kievan_rus = 1
		if not I_FactionBesieged kievan_rus
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_kievan_rus 0
	end_if
	if I_CompareCounter turn_fid = 12
	and I_CompareCounter freeze_venice = 1
		if not I_FactionBesieged venice
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_venice 0
	end_if
	if I_CompareCounter turn_fid = 13
	and I_CompareCounter freeze_sicily = 1
		if not I_FactionBesieged sicily
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_sicily 0
	end_if
	if I_CompareCounter turn_fid = 14
	and I_CompareCounter freeze_milan = 1
		if not I_FactionBesieged milan
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_milan 0
	end_if
	if I_CompareCounter turn_fid = 15
	and I_CompareCounter freeze_denmark = 1
		if not I_FactionBesieged denmark
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_denmark 0
	end_if
	if I_CompareCounter turn_fid = 16
	and I_CompareCounter freeze_scotland = 1
		if not I_FactionBesieged scotland
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_scotland 0
	end_if
	if I_CompareCounter turn_fid = 17
	and I_CompareCounter freeze_france = 1
		if not I_FactionBesieged france
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_france 0
	end_if
	if I_CompareCounter turn_fid = 18
	and I_CompareCounter freeze_hre = 1
		if not I_FactionBesieged hre
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_hre 0
	end_if
	if I_CompareCounter turn_fid = 19
	and I_CompareCounter freeze_england = 1
		if not I_FactionBesieged england
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_england 0
	end_if
	if I_CompareCounter turn_fid = 20
	and I_CompareCounter freeze_portugal = 1
		if not I_FactionBesieged portugal
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_portugal 0
	end_if
	if I_CompareCounter turn_fid = 21
	and I_CompareCounter freeze_poland = 1
		if not I_FactionBesieged poland
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_poland 0
	end_if
	if I_CompareCounter turn_fid = 22
	and I_CompareCounter freeze_spain = 1
		if not I_FactionBesieged spain
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_spain 0
	end_if
	if I_CompareCounter turn_fid = 23
	and I_CompareCounter freeze_hungary = 1
		if not I_FactionBesieged hungary
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_hungary 0
	end_if
	if I_CompareCounter turn_fid = 24
	and I_CompareCounter freeze_aragon = 1
		if not I_FactionBesieged aragon
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_aragon 0
	end_if
	if I_CompareCounter turn_fid = 25
	and I_CompareCounter freeze_teutonic_order = 1
		if not I_FactionBesieged teutonic_order
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_teutonic_order 0
	end_if
	if I_CompareCounter turn_fid = 26
	and I_CompareCounter freeze_norway = 1
		if not I_FactionBesieged norway
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_norway 0
	end_if
	if I_CompareCounter turn_fid = 27
	and I_CompareCounter freeze_jerusalem = 1
		if not I_FactionBesieged jerusalem
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_jerusalem 0
	end_if
	if I_CompareCounter turn_fid = 28
	and I_CompareCounter freeze_papal_states = 1
		if not I_FactionBesieged papal_states
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_papal_states 0
	end_if
	if I_CompareCounter turn_fid = 29
	and I_CompareCounter freeze_georgia = 1
		if not I_FactionBesieged georgia
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_georgia 0
	end_if
end_monitor

;========================================================
;==== Kill Crusader and Jihad units Script ==============
;========================================================

monitor_event PreFactionTurnStart FactionType slave
if I_TurnsSinceLastCrusade = 5
	if I_IsFactionAIControlled venice
		destroy_units venice disband_1
	end_if
	if I_IsFactionAIControlled sicily
		destroy_units sicily disband_1
	end_if
	if I_IsFactionAIControlled milan
		destroy_units milan disband_1
	end_if
	if I_IsFactionAIControlled papal_states
		destroy_units papal_states disband_1
	end_if
	if I_IsFactionAIControlled spain
		destroy_units spain disband_1
	end_if
	if I_IsFactionAIControlled aragon
		destroy_units aragon disband_1
	end_if
	if I_IsFactionAIControlled france
		destroy_units france disband_1
	end_if
	if I_IsFactionAIControlled england
		destroy_units england disband_1
	end_if
	if I_IsFactionAIControlled scotland
		destroy_units scotland disband_1
	end_if
	if I_IsFactionAIControlled hre
		destroy_units hre disband_1
	end_if
	if I_IsFactionAIControlled denmark
		destroy_units denmark disband_1
	end_if
	if I_IsFactionAIControlled norway
		destroy_units norway disband_1
	end_if
	if I_IsFactionAIControlled hungary
		destroy_units hungary disband_1
	end_if
	if I_IsFactionAIControlled poland
		destroy_units poland disband_1
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_EventCounter council_of_troyes = 1
		destroy_units jerusalem disband_1
	end_if
	if I_IsFactionAIControlled teutonic_order
		destroy_units teutonic_order disband_1
	end_if
	if I_IsFactionAIControlled lithuania
	and I_EventCounter lithuania_catholic = 1
		destroy_units lithuania disband_1
	end_if
end_if
if I_TurnsSinceLastCrusade = 8
	if I_IsFactionAIControlled venice
		destroy_units venice disband_2
	end_if
	if I_IsFactionAIControlled sicily
		destroy_units sicily disband_2
	end_if
	if I_IsFactionAIControlled milan
		destroy_units milan disband_2
	end_if
	if I_IsFactionAIControlled papal_states
		destroy_units papal_states disband_2
	end_if
	if I_IsFactionAIControlled spain
		destroy_units spain disband_2
	end_if
	if I_IsFactionAIControlled aragon
		destroy_units aragon disband_2
	end_if
	if I_IsFactionAIControlled france
		destroy_units france disband_2
	end_if
	if I_IsFactionAIControlled england
		destroy_units england disband_2
	end_if
	if I_IsFactionAIControlled scotland
		destroy_units scotland disband_2
	end_if
	if I_IsFactionAIControlled hre
		destroy_units hre disband_2
	end_if
	if I_IsFactionAIControlled denmark
		destroy_units denmark disband_2
	end_if
	if I_IsFactionAIControlled norway
		destroy_units norway disband_2
	end_if
	if I_IsFactionAIControlled hungary
		destroy_units hungary disband_2
	end_if
	if I_IsFactionAIControlled poland
		destroy_units poland disband_2
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_EventCounter council_of_troyes = 1
		destroy_units jerusalem disband_2
	end_if
	if I_IsFactionAIControlled teutonic_order
		destroy_units teutonic_order disband_2
	end_if
	if I_IsFactionAIControlled lithuania
	and I_EventCounter lithuania_catholic = 1
		destroy_units lithuania disband_2
	end_if
end_if
if I_TurnsSinceLastJihad = 5
	if I_IsFactionAIControlled egypt
		destroy_units egypt disband_1
	end_if
	if I_IsFactionAIControlled turks
		destroy_units turks disband_1
	end_if
	if I_IsFactionAIControlled moors
		destroy_units moors disband_1
	end_if
	if I_IsFactionAIControlled kwarezm
		destroy_units kwarezm disband_1
	end_if
	if I_IsFactionAIControlled timurids
		destroy_units timurids disband_1
	end_if
	if I_IsFactionAIControlled portugal
		destroy_units portugal disband_1
	end_if
end_if
if I_TurnsSinceLastJihad = 8
	if I_IsFactionAIControlled egypt
		destroy_units egypt disband_2
	end_if
	if I_IsFactionAIControlled turks
		destroy_units turks disband_2
	end_if
	if I_IsFactionAIControlled moors
		destroy_units moors disband_2
	end_if
	if I_IsFactionAIControlled kwarezm
		destroy_units kwarezm disband_2
	end_if
	if I_IsFactionAIControlled timurids
		destroy_units timurids disband_2
	end_if
	if I_IsFactionAIControlled portugal
		destroy_units portugal disband_2
	end_if
end_if
end_monitor

;========================================================
;********************************************************
;********************* PLAYER PART **********************
;********************************************************
;========================================================

;================== BESIEGE UPKEEP ======================
monitor_event CharacterTurnStart CharacterIsLocal
	and Trait ArmyCost > 0

	if I_TurnNumber < 20
	console_command add_money -150
	end_if

	if I_TurnNumber < 40
	and I_TurnNumber >= 20
	 console_command add_money -210
	end_if

	if I_TurnNumber < 80
	and I_TurnNumber >= 40
	 console_command add_money -300
	end_if

	if I_TurnNumber >= 80
	 console_command add_money -400
	end_if

end_monitor

;========= G5 LOOTING SCRIPT COMPACT (tweaked) ==========
declare_counter sizearmy_levl

monitor_event BattleConflictPhaseCommenced FactionIsLocal
	and I_BattleEnemyArmyNumberOfUnits > 2

	set_counter sizearmy_levl 1

	if I_BattleEnemyArmyNumberOfUnits > 8
		set_counter sizearmy_levl 2
	end_if

	if I_BattleEnemyArmyNumberOfUnits > 14
		set_counter sizearmy_levl 3
	end_if

end_monitor

monitor_event PostBattle FactionIsLocal
	and WonBattle
	and not I_ConflictType Naval
	and I_CompareCounter sizearmy_levl > 0

	if RandomPercent > 25
	if I_CompareCounter sizearmy_levl = 1
		console_command add_money 50
	end_if
	if I_CompareCounter sizearmy_levl = 2
		console_command add_money 100
	end_if
	if I_CompareCounter sizearmy_levl = 3
		console_command add_money 200
	end_if
	end_if

	set_counter sizearmy_levl 0
end_monitor

monitor_event PostBattle FactionIsLocal
	and not WonBattle
	and not I_ConflictType Naval
	and I_CompareCounter sizearmy_levl > 0

	if RandomPercent > 90
		console_command add_money -100
	end_if

	if RandomPercent > 55
		console_command add_money -100
	end_if

	console_command add_money -100

;	historic_event sack_player

	set_counter sizearmy_levl 0
end_monitor

;==================== City Reveal (fixed) =======================
;Not Hotseat compatible, as reveal_tile command seems to only work for player 1 exclusively

monitor_event FactionTurnStart

	;catholic
	if I_CompareCounter turn_fid >= 12 
	and I_CompareCounter turn_fid != 20 ;portugal/zirids see below
	and I_CompareCounter turn_fid != 29
		reveal_tile 330, 74;	Jerusalem
		reveal_tile 169, 146;	Rome
		reveal_tile 16, 155;	Santiago
	end_if

	;orthodox
	if I_CompareCounter turn_fid <= 11
	and I_CompareCounter turn_fid >= 9
		reveal_tile 330, 74;	Jerusalem
		reveal_tile 284, 142;	Constantinople
		if I_CompareCounter turn_fid = 9
		reveal_tile 169, 146;	Rome
		end_if
	end_if

	;georgia orthodox
	if I_CompareCounter turn_fid = 29
		reveal_tile 330, 74;	Jerusalem
		reveal_tile 284, 142;	Constantinople
	end_if

	;pagan Cumans
	if I_CompareCounter turn_fid = 7
		reveal_tile 284, 142;	Constantinople
		reveal_tile 416, 94;	Baghdad
	end_if

	;islam
	if I_CompareCounter turn_fid <= 5
		reveal_tile 330, 74;	Jerusalem
		reveal_tile 396, 88;	Baghdad
		reveal_tile 359, 23;	Medina
		reveal_tile 360, 6;	Mecca
	end_if

	;zirids islam
	if I_CompareCounter turn_fid = 20
		reveal_tile 330, 74;	Jerusalem
		reveal_tile 396, 88;	Baghdad
		reveal_tile 359, 23;	Medina
		reveal_tile 360, 6;	Mecca
	end_if
	
	if not I_HotseatEnabled
		hide_all_revealed_tiles
		terminate_monitor
	end_if
	
	;Hotseat Workaround
	if I_HotseatEnabled
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter turn_fid != 1
		;spawn_character egypt Muhammad Al_Abbasi, priest, age 30, x 330, y 74 ;	Jerusalem
		;console_command kill_character "Muhammad Al_Abbasi"
		spawn_character egypt Imran Al_Abbasi, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Imran Al_Abbasi"
		console_command kill_character "Imran Al_Abbasi"
		spawn_character egypt Umar Al_Abbasi, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Umar Al_Abbasi"
		spawn_character egypt Tahir Al_Abbasi, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Tahir Al_Abbasi"
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turn_fid != 2
		spawn_character turks Mehmed Muzaffer, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Mehmed Muzaffer"
		console_command kill_character "Mehmed Muzaffer"
		spawn_character turks Zengi Muzaffer, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Zengi Muzaffer"
		console_command kill_character "Zengi Muzaffer"
		spawn_character turks Selim Muzaffer, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Selim Muzaffer"
		spawn_character turks Al_Maqtadi Muzaffer, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Al_Maqtadi Muzaffer"
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter turn_fid != 3
		spawn_character turks Al_Mustazhir ibn_Qasim, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Al_Mustazhir ibn_Qasim"
		console_command kill_character "Al_Mustazhir ibn_Qasim"
		spawn_character turks Al_Watiq ibn_Qasim, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Al_Watiq ibn_Qasim"
		spawn_character turks Al_Muqtadi ibn_Qasim, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Al_Muqtadi ibn_Qasim"
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter turn_fid != 4
		spawn_character kwarezm Qudbaddin Altayli, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Qudbaddin Altayli"
		console_command kill_character "Qudbaddin Altayli"
		spawn_character kwarezm Atsiz Altayli, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Atsiz Altayli"
		console_command kill_character "Atsiz Altayli"
		spawn_character kwarezm Derya Altayli, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Derya Altayli"
		spawn_character kwarezm Hayati Altayli, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Hayati Altayli"
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter turn_fid != 5
		spawn_character moors Amjad ibn_Farraj, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Amjad ibn_Farraj"
		console_command kill_character "Amjad ibn_Farraj"
		spawn_character moors Bashar ibn_Farraj, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Bashar ibn_Farraj"
		console_command kill_character "Bashar ibn_Farraj"
		spawn_character moors Shakir ibn_Farraj, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Shakir ibn_Farraj"
		spawn_character moors Muhammad ibn_Farraj, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Muhammad ibn_Farraj"
	end_if
	;if not I_IsFactionAIControlled lithuania
	;and I_CompareCounter turn_fid != 6
	;end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter turn_fid != 7
		spawn_character cumans Bonyak of_Kazan, priest, age 30, x 284, y 142 ;	Constantinople
		send_character_off_map "Bonyak of_Kazan"
		console_command kill_character "Bonyak of_Kazan"
		spawn_character cumans Sotan of_Kazan, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Sotan of_Kazan"
		console_command kill_character "Sotan of_Kazan"
	end_if
	;if not I_IsFactionAIControlled mongols
	;and I_CompareCounter turn_fid != 8
	;end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter turn_fid != 9
		;spawn_character byzantium Frankoulis Grammatikos, priest, age 30, x 284, y 142 ;	Constantinople
		;console_command kill_character "Frankoulis Grammatikos"
		spawn_character byzantium Kyrillos Grammatikos, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Kyrillos Grammatikos"
		console_command kill_character "Kyrillos Grammatikos"
		spawn_character byzantium Dimitrios Grammatikos, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Dimitrios Grammatikos"
		console_command kill_character "Dimitrios Grammatikos"
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter turn_fid != 10
		spawn_character russia Lyutobor Istoma, priest, age 30, x 284, y 142 ;	Constantinople
		send_character_off_map "Lyutobor Istoma"
		console_command kill_character "Lyutobor Istoma"
		spawn_character russia Aleksei Istoma, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Aleksei Istoma"
		console_command kill_character "Aleksei Istoma"
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter turn_fid != 11
		spawn_character kievan_rus Vladimir Kalita, priest, age 30, x 284, y 142 ;	Constantinople
		send_character_off_map "Vladimir Kalita"
		console_command kill_character "Vladimir Kalita"
		spawn_character kievan_rus Georgii Kalita, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Georgii Kalita"
		console_command kill_character "Georgii Kalita"
	end_if
	;if not I_IsFactionAIControlled venice; Venice is by default player faction 1
	;and I_CompareCounter turn_fid != 12
	;	spawn_character venice Victor Grissani, priest, age 30, x 330, y 74 ;	Jerusalem
	;	console_command kill_character "Victor Grissani"
	;	spawn_character venice Tusco Grissani, priest, age 30, x 169, y 146 ;	Rome
	;	console_command kill_character "Tusco Grissani"
	;	spawn_character venice Nicolo Grissani, priest, age 30, x 16, y 155 ;	Santiago
	;	console_command kill_character "Nicolo Grissani"
	;end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter turn_fid != 13
		spawn_character sicily Rubbertu di_Palermo, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Rubbertu di_Palermo"
		console_command kill_character "Rubbertu di_Palermo"
		spawn_character sicily Serlo di_Palermo, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Serlo di_Palermo"
		console_command kill_character "Serlo di_Palermo"
		spawn_character sicily Pietro di_Palermo, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Pietro di_Palermo"
		console_command kill_character "Pietro di_Palermo"
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter turn_fid != 14
		spawn_character milan Tommaso da_Genova, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Tommaso da_Genova"
		console_command kill_character "Tommaso da_Genova"
		spawn_character milan Oberto da_Genova, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Oberto da_Genova"
		console_command kill_character "Oberto da_Genova"
		spawn_character milan Ansaldo da_Genova, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Ansaldo da_Genova"
		console_command kill_character "Ansaldo da_Genova"
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter turn_fid != 15
		spawn_character denmark Svend Bjornsen, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Svend Bjornsen"
		console_command kill_character "Svend Bjornsen"
		spawn_character denmark Budle Bjornsen, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Budle Bjornsen"
		console_command kill_character "Budle Bjornsen"
		spawn_character denmark Toke Bjornsen, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Toke Bjornsen"
		console_command kill_character "Toke Bjornsen"
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter turn_fid != 16
		spawn_character scotland Etgar mac_Ideid, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Etgar mac_Ideid"
		console_command kill_character "Etgar mac_Ideid"
		spawn_character scotland Alaxandair mac_Ideid, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Alaxandair mac_Ideid"
		console_command kill_character "Alaxandair mac_Ideid"
		spawn_character scotland Dabid mac_Ideid, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Dabid mac_Ideid"
		console_command kill_character "Dabid mac_Ideid"
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter turn_fid != 17
		spawn_character france Bertrand Febre, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Bertrand Febre"
		console_command kill_character "Bertrand Febre"
		spawn_character france Frederic Febre, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Frederic Febre"
		console_command kill_character "Frederic Febre"
		spawn_character france Etienne Febre, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Etienne Febre"
		console_command kill_character "Etienne Febre"
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter turn_fid != 18
		spawn_character hre Rainald von_Koln, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Rainald von_Koln"
		console_command kill_character "Rainald von_Koln"
		spawn_character hre Conrad von_Koln, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Conrad von_Koln"
		console_command kill_character "Conrad von_Koln"
		spawn_character hre Kurt von_Koln, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Kurt von_Koln"
		console_command kill_character "Kurt von_Koln"
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter turn_fid != 19
		spawn_character england Samuel de_Blois, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Samuel de_Blois"
		console_command kill_character "Samuel de_Blois"
		spawn_character england Laurence de_Blois, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Laurence de_Blois"
		console_command kill_character "Laurence de_Blois"
		spawn_character england Anselm de_Blois, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Anselm de_Blois"
		console_command kill_character "Anselm de_Blois"
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter turn_fid != 20
		spawn_character portugal Amjad ibn_Harun, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Amjad ibn_Harun"
		console_command kill_character "Amjad ibn_Harun"
		spawn_character portugal Bashar ibn_Harun, priest, age 30, x 396, y 88 ;	Baghdad
		send_character_off_map "Bashar ibn_Harun"
		console_command kill_character "Bashar ibn_Harun"
		spawn_character portugal Shakir ibn_Harun, priest, age 30, x 359, y 23 ;	Medina
		console_command kill_character "Shakir ibn_Harun"
		spawn_character portugal Muhammad ibn_Harun, priest, age 30, x 360, y 6 ;	Mecca
		console_command kill_character "Muhammad ibn_Harun"
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter turn_fid != 21
		spawn_character poland Wladyslaw Sandomierski, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Wladyslaw Sandomierski"
		console_command kill_character "Wladyslaw Sandomierski"
		spawn_character poland Zbigniew Sandomierski, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Zbigniew Sandomierski"
		console_command kill_character "Zbigniew Sandomierski"
		spawn_character poland Boleslaw Sandomierski, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Boleslaw Sandomierski"
		console_command kill_character "Boleslaw Sandomierski"
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter turn_fid != 22
		spawn_character spain Alfonso Franco, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Alfonso Franco"
		console_command kill_character "Alfonso Franco"
		spawn_character spain Goncalo Franco, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Goncalo Franco"
		console_command kill_character "Goncalo Franco"
		;spawn_character spain Raimundo Franco, priest, age 30, x 16, y 155 ;	Santiago
		;console_command kill_character "Raimundo Franco"
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter turn_fid != 23
		spawn_character hungary Kalman Brankovics, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Kalman Brankovics"
		console_command kill_character "Kalman Brankovics"
		spawn_character hungary Bodomer Brankovics, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Bodomer Brankovics"
		console_command kill_character "Bodomer Brankovics"
		spawn_character hungary Kozma Brankovics, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Kozma Brankovics"
		console_command kill_character "Kozma Brankovics"
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter turn_fid != 24
		spawn_character aragon Mauricio Maranon, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Mauricio Maranon"
		console_command kill_character "Mauricio Maranon"
		spawn_character aragon Ordono Maranon, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Ordono Maranon"
		console_command kill_character "Ordono Maranon"
		spawn_character aragon Pedro Maranon, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Pedro Maranon"
		console_command kill_character "Pedro Maranon"
	end_if
	;if not I_IsFactionAIControlled teutonic_order
	;and I_CompareCounter turn_fid != 25
	;end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter turn_fid != 26
		spawn_character norway Magnus Guddrodson, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Magnus Guddrodson"
		console_command kill_character "Magnus Guddrodson"
		spawn_character norway Sigurd Guddrodson, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Sigurd Guddrodson"
		console_command kill_character "Sigurd Guddrodson"
		spawn_character norway Eystein Guddrodson, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Eystein Guddrodson"
		console_command kill_character "Eystein Guddrodson"
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter turn_fid != 27
		;spawn_character jerusalem Baudouin de_Toulouse, priest, age 30, x 330, y 74 ;	Jerusalem
		;console_command kill_character "Baudouin de_Toulouse"
		spawn_character jerusalem Joscelin de_Toulouse, priest, age 30, x 169, y 146 ;	Rome
		send_character_off_map "Joscelin de_Toulouse"
		console_command kill_character "Joscelin de_Toulouse"
		spawn_character jerusalem Bohemond de_Toulouse, priest, age 30, x 16, y 155 ;	Santiago
		send_character_off_map "Bohemond de_Toulouse"
		console_command kill_character "Bohemond de_Toulouse"
	end_if
	if not I_IsFactionAIControlled georgia
	and I_CompareCounter turn_fid != 29
		spawn_character georgia Rati Gelovani, priest, age 30, x 284, y 142 ;	Constantinople
		send_character_off_map "Rati Gelovani"
		console_command kill_character "Rati Gelovani"
		spawn_character georgia Saba Gelovani, priest, age 30, x 330, y 74 ;	Jerusalem
		send_character_off_map "Saba Gelovani"
		console_command kill_character "Saba Gelovani"
	end_if
	;if not I_IsFactionAIControlled papal_states
	;and I_CompareCounter turn_fid != 28
	;end_if
	hide_all_revealed_tiles
	terminate_monitor
	end_if

end_monitor


;==================== Major Events ====================== 
;--- Jerusalem Captured
monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and not CharacterReligion islam
	and not CharacterReligion pagan
	and not CharacterReligion heretic
	if not I_SettlementOwner Jerusalem = byzantium
	and not I_SettlementOwner Jerusalem = russia
	and not I_SettlementOwner Jerusalem = kievan_rus
	and not I_SettlementOwner Jerusalem = venice
	and not I_SettlementOwner Jerusalem = sicily
	and not I_SettlementOwner Jerusalem = milan
	and not I_SettlementOwner Jerusalem = denmark
	and not I_SettlementOwner Jerusalem = scotland
	and not I_SettlementOwner Jerusalem = france
	and not I_SettlementOwner Jerusalem = hre
	and not I_SettlementOwner Jerusalem = england
	and not I_SettlementOwner Jerusalem = poland
	and not I_SettlementOwner Jerusalem = spain
	and not I_SettlementOwner Jerusalem = hungary
	and not I_SettlementOwner Jerusalem = aragon
	and not I_SettlementOwner Jerusalem = teutonic_order
	and not I_SettlementOwner Jerusalem = norway
	and not I_SettlementOwner Jerusalem = jerusalem
	and not I_SettlementOwner Jerusalem = papal_states
	and not I_SettlementOwner Jerusalem = georgia
		if I_EventCounter lithuania_catholic != 1
			historic_event jerusalem_christian event/Christians_Capture_Jerusalem.bik
		end_if
		if I_EventCounter lithuania_catholic = 1
		and not I_SettlementOwner Jerusalem = lithuania
			historic_event jerusalem_christian event/Christians_Capture_Jerusalem.bik
		end_if
	end_if
terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and CharacterReligion islam
	if not I_SettlementOwner Jerusalem = turks
	and not I_SettlementOwner Jerusalem = egypt
	and not I_SettlementOwner Jerusalem = moors
	and not I_SettlementOwner Jerusalem = kwarezm
	and not I_SettlementOwner Jerusalem = timurids
	and not I_SettlementOwner Jerusalem = portugal
		historic_event jerusalem_muslim event/Muslims_Capture_Jerusalem.bik
	end_if
terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and CharacterReligion pagan
	and not FactionIsLocal
	if not I_SettlementOwner Jerusalem = cumans
	and not I_SettlementOwner Jerusalem = mongols
		if I_EventCounter lithuania_catholic != 1
		and not I_SettlementOwner Jerusalem = lithuania
			historic_event jerusalem_pagan
		end_if
		if I_EventCounter lithuania_catholic = 1
			historic_event jerusalem_pagan
		end_if
	end_if
terminate_monitor
end_monitor

;--- World is round 
monitor_event EventCounter EventCounterType world_is_round
	and EventCounter > 0

	historic_event america_discovered event/america_discovered.bik
terminate_monitor
end_monitor

;-- Player built first great temple
monitor_event BuildingCompleted not IsFactionAIControlled
	and SettlementBuildingFinished = huge_cathedral

	historic_event player_first_huge_cathedral event/huge_cathedral_built.bik
terminate_monitor
end_monitor

monitor_event BuildingCompleted not IsFactionAIControlled
	and SettlementBuildingFinished = great_jama

	historic_event player_first_great_jama event/great_mosque_created.bik
terminate_monitor
end_monitor

;--- Capital Change
monitor_event FactionNewCapital not IsFactionAIControlled

	if I_EventCounter DifficultyLevel = 1
		terminate_monitor
	end_if

	if not I_HotseatEnabled
		historic_event capital_change
	end_if

 if I_HotseatEnabled
	if I_LocalFaction egypt
  historic_event capital_change false factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event capital_change false factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event capital_change false factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event capital_change false factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event capital_change false factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event capital_change false factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event capital_change false factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event capital_change false factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event capital_change false factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event capital_change false factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event capital_change false factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event capital_change false factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event capital_change false factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event capital_change false factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event capital_change false factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event capital_change false factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event capital_change false factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event capital_change false factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event capital_change false factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event capital_change false factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event capital_change false factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event capital_change false factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event capital_change false factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event capital_change false factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event capital_change false factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event capital_change false factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event capital_change false factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event capital_change false factions { papal_states, }
	end_if
	if I_LocalFaction georgia
  historic_event capital_change false factions { georgia, }
	end_if
 end_if

	if I_EventCounter DifficultyLevel = 2
		console_command add_money -2000
	end_if

	if I_EventCounter DifficultyLevel > 2
		console_command add_money -5000
	end_if

end_monitor

;================= Player Notification ==================
;--- Death of Leaders
;--- Usurper/Regents
;--- Civil Wars/Unrest
;***COUNTERS***
	declare_counter moors_civil_war_counter;	1=Offensive to Nobles	2=Usurper
	declare_counter turks_civil_war_counter
	declare_counter egypt_civil_war_counter
	declare_counter kwarezm_civil_war_counter
	declare_counter portugal_civil_war_counter
	declare_counter spain_civil_war_counter
	declare_counter aragon_civil_war_counter
	declare_counter venice_civil_war_counter
	declare_counter milan_civil_war_counter
	declare_counter sicily_civil_war_counter
	declare_counter byzantium_civil_war_counter
	declare_counter hre_civil_war_counter
	declare_counter france_civil_war_counter
	declare_counter england_civil_war_counter
	declare_counter scotland_civil_war_counter
	declare_counter jerusalem_civil_war_counter
	declare_counter teutonic_order_civil_war_counter
	declare_counter denmark_civil_war_counter
	declare_counter norway_civil_war_counter
	declare_counter poland_civil_war_counter
	declare_counter hungary_civil_war_counter
	declare_counter kievan_rus_civil_war_counter
	declare_counter russia_civil_war_counter
	declare_counter lithuania_civil_war_counter
	declare_counter timurids_civil_war_counter
	declare_counter mongols_civil_war_counter
	declare_counter cumans_civil_war_counter
	declare_counter georgia_civil_war_counter
	;
	declare_counter moors_king;		1=King died		2=Regent/Usurper died
	declare_counter turks_king
	declare_counter egypt_king
	declare_counter kwarezm_king
	declare_counter portugal_king
	declare_counter spain_king
	declare_counter aragon_king
	declare_counter venice_king
	declare_counter milan_king
	declare_counter sicily_king
	declare_counter byzantium_king
	declare_counter hre_king
	declare_counter france_king
	declare_counter england_king
	declare_counter scotland_king
	declare_counter jerusalem_king
	declare_counter teutonic_order_king
	declare_counter denmark_king
	declare_counter norway_king
	declare_counter poland_king
	declare_counter hungary_king
	declare_counter kievan_rus_king
	declare_counter russia_king
	declare_counter lithuania_king
	declare_counter timurids_king
	declare_counter mongols_king
	declare_counter cumans_king
	declare_counter georgia_king
	;
	declare_counter moors_anarchy;	unlock Civil Unrest notification
	declare_counter turks_anarchy
	declare_counter egypt_anarchy
	declare_counter kwarezm_anarchy
	declare_counter portugal_anarchy
	declare_counter spain_anarchy
	declare_counter aragon_anarchy
	declare_counter venice_anarchy
	declare_counter milan_anarchy
	declare_counter sicily_anarchy
	declare_counter byzantium_anarchy
	declare_counter hre_anarchy
	declare_counter france_anarchy
	declare_counter england_anarchy
	declare_counter scotland_anarchy
	declare_counter jerusalem_anarchy
	declare_counter teutonic_order_anarchy
	declare_counter denmark_anarchy
	declare_counter norway_anarchy
	declare_counter poland_anarchy
	declare_counter hungary_anarchy
	declare_counter kievan_rus_anarchy
	declare_counter russia_anarchy
	declare_counter lithuania_anarchy
	declare_counter timurids_anarchy
	declare_counter mongols_anarchy
	declare_counter cumans_anarchy
	declare_counter georgia_anarchy

;***TRACK LEADER DEATHS***
;MOORS
	monitor_event CeasedFactionLeader FactionType moors
		if I_IsFactionAIControlled moors
			if I_FactionLeaderTrait moors FactionUsurper < 1
			and I_FactionLeaderTrait moors FactionRegent < 1
				set_counter moors_king 1
			end_if
			if I_FactionLeaderTrait moors Factionleader < 1
				set_counter moors_king 2
			end_if
		end_if
		set_counter moors_anarchy 1
		inc_counter heir_moors -1 ; used for generals spawn script
	end_monitor
;TURKS
	monitor_event CeasedFactionLeader FactionType turks
		if I_IsFactionAIControlled turks
			if I_FactionLeaderTrait turks FactionUsurper < 1
			and I_FactionLeaderTrait turks FactionRegent < 1
				set_counter turks_king 1
			end_if
			if I_FactionLeaderTrait turks Factionleader < 1
				set_counter turks_king 2
			end_if
		end_if
		set_counter turks_anarchy 1
		inc_counter heir_turks -1 ; used for generals spawn script
	end_monitor
;EGYPT
	monitor_event CeasedFactionLeader FactionType egypt
		if I_IsFactionAIControlled egypt
			if I_FactionLeaderTrait egypt FactionUsurper < 1
			and I_FactionLeaderTrait egypt FactionRegent < 1
				set_counter egypt_king 1
			end_if
			if I_FactionLeaderTrait egypt Factionleader < 1
				set_counter egypt_king 2
			end_if
		end_if
		set_counter egypt_anarchy 1
		inc_counter heir_egypt -1 ; used for generals spawn script
	end_monitor
;KWAREZM
	monitor_event CeasedFactionLeader FactionType kwarezm
		if I_IsFactionAIControlled kwarezm
			if I_FactionLeaderTrait kwarezm FactionUsurper < 1
			and I_FactionLeaderTrait kwarezm FactionRegent < 1
				set_counter kwarezm_king 1
			end_if
			if I_FactionLeaderTrait kwarezm Factionleader < 1
				set_counter kwarezm_king 2
			end_if
		end_if
		set_counter kwarezm_anarchy 1
		inc_counter heir_kwarezm -1 ; used for generals spawn script
	end_monitor
;SPAIN
	monitor_event CeasedFactionLeader FactionType spain
		if I_IsFactionAIControlled spain
			if I_FactionLeaderTrait spain FactionUsurper < 1
			and I_FactionLeaderTrait spain FactionRegent < 1
				set_counter spain_king 1
			end_if
			if I_FactionLeaderTrait spain Factionleader < 1
				set_counter spain_king 2
			end_if
		end_if
		set_counter spain_anarchy 1
		inc_counter heir_spain -1 ; used for generals spawn script
	end_monitor
;ARAGON
	monitor_event CeasedFactionLeader FactionType aragon
		if I_IsFactionAIControlled aragon
			if I_FactionLeaderTrait aragon FactionUsurper < 1
			and I_FactionLeaderTrait aragon FactionRegent < 1
				set_counter aragon_king 1
			end_if
			if I_FactionLeaderTrait aragon Factionleader < 1
				set_counter aragon_king 2
			end_if
		end_if
		set_counter aragon_anarchy 1
		inc_counter heir_aragon -1 ; used for generals spawn script
	end_monitor
;PORTUGAL
	monitor_event CeasedFactionLeader FactionType portugal
		if I_IsFactionAIControlled portugal
			if I_FactionLeaderTrait portugal FactionUsurper < 1
			and I_FactionLeaderTrait portugal FactionRegent < 1
				set_counter portugal_king 1
			end_if
			if I_FactionLeaderTrait portugal Factionleader < 1
				set_counter portugal_king 2
			end_if
		end_if
		set_counter portugal_anarchy 1
		inc_counter heir_portugal -1 ; used for generals spawn script
	end_monitor
;VENICE
	monitor_event CeasedFactionLeader FactionType venice
		if I_IsFactionAIControlled venice
			set_counter venice_king 1
		end_if
		set_counter venice_anarchy 1
		inc_counter heir_venice -1 ; used for generals spawn script
	end_monitor
;MILAN/GENOA
	monitor_event CeasedFactionLeader FactionType milan
		if I_IsFactionAIControlled milan
			set_counter milan_king 1
		end_if
		set_counter milan_anarchy 1
		inc_counter heir_milan -1 ; used for generals spawn script
	end_monitor
;SICILY
	monitor_event CeasedFactionLeader FactionType sicily
		if I_IsFactionAIControlled sicily
			if I_FactionLeaderTrait sicily FactionUsurper < 1
			and I_FactionLeaderTrait sicily FactionRegent < 1
				set_counter sicily_king 1
			end_if
			if I_FactionLeaderTrait sicily Factionleader < 1
				set_counter sicily_king 2
			end_if
		end_if
		set_counter sicily_anarchy 1
		inc_counter heir_sicily -1 ; used for generals spawn script
	end_monitor
;BYZANTIUM
	monitor_event CeasedFactionLeader FactionType byzantium
		if I_IsFactionAIControlled byzantium
			if I_FactionLeaderTrait byzantium FactionUsurper < 1
			;and I_FactionLeaderTrait byzantium FactionRegent < 1
				set_counter byzantium_king 1
			end_if
			if I_FactionLeaderTrait byzantium Factionleader < 1
				set_counter byzantium_king 2
			end_if
		end_if
		set_counter byzantium_anarchy 1
		inc_counter heir_byzantium -1 ; used for generals spawn script
	end_monitor
;HRE
	monitor_event CeasedFactionLeader FactionType hre
		if I_IsFactionAIControlled hre
			if I_FactionLeaderTrait hre FactionUsurper < 1
			;and I_FactionLeaderTrait hre FactionRegent < 1
				set_counter hre_king 1
			end_if
			if I_FactionLeaderTrait hre Factionleader < 1
				set_counter hre_king 2
			end_if
		end_if
		set_counter hre_anarchy 1
		inc_counter heir_hre -1 ; used for generals spawn script
	end_monitor
;FRANCE
	monitor_event CeasedFactionLeader FactionType france
		if I_IsFactionAIControlled france
			if I_FactionLeaderTrait france FactionUsurper < 1
			and I_FactionLeaderTrait france FactionRegent < 1
				set_counter france_king 1
			end_if
			if I_FactionLeaderTrait france Factionleader < 1
				set_counter france_king 2
			end_if
		end_if
		set_counter france_anarchy 1
		inc_counter heir_france -1 ; used for generals spawn script
	end_monitor
;ENGLAND
	monitor_event CeasedFactionLeader FactionType england
		if I_IsFactionAIControlled england
			if I_FactionLeaderTrait england FactionUsurper < 1
			and I_FactionLeaderTrait england FactionRegent < 1
				set_counter england_king 1
			end_if
			if I_FactionLeaderTrait england Factionleader < 1
				set_counter england_king 2
			end_if
		end_if
		set_counter england_anarchy 1
		inc_counter heir_england -1 ; used for generals spawn script
	end_monitor
;SCOTLAND
	monitor_event CeasedFactionLeader FactionType scotland
		if I_IsFactionAIControlled scotland
			if I_FactionLeaderTrait scotland FactionUsurper < 1
			and I_FactionLeaderTrait scotland FactionRegent < 1
				set_counter scotland_king 1
			end_if
			if I_FactionLeaderTrait scotland Factionleader < 1
				set_counter scotland_king 2
			end_if
		end_if
		set_counter scotland_anarchy 1
		inc_counter heir_scotland -1 ; used for generals spawn script
	end_monitor
;DENMARK
	monitor_event CeasedFactionLeader FactionType denmark
		if I_IsFactionAIControlled denmark
			if I_FactionLeaderTrait denmark FactionUsurper < 1
			and I_FactionLeaderTrait denmark FactionRegent < 1
				set_counter denmark_king 1
			end_if
			if I_FactionLeaderTrait denmark Factionleader < 1
				set_counter denmark_king 2
			end_if
		end_if
		set_counter denmark_anarchy 1
		inc_counter heir_denmark -1 ; used for generals spawn script
	end_monitor
;NORWAY
	monitor_event CeasedFactionLeader FactionType norway
		if I_IsFactionAIControlled norway
			if I_FactionLeaderTrait norway FactionUsurper < 1
			and I_FactionLeaderTrait norway FactionRegent < 1
				set_counter norway_king 1
			end_if
			if I_FactionLeaderTrait norway Factionleader < 1
				set_counter norway_king 2
			end_if
		end_if
		set_counter norway_anarchy 1
		inc_counter heir_norway -1 ; used for generals spawn script
	end_monitor
;JERUSALEM/CRUSADER STATES
	monitor_event CeasedFactionLeader FactionType jerusalem
		if I_IsFactionAIControlled jerusalem
			if I_FactionLeaderTrait jerusalem Crusader_Factionleader = 2
				set_counter jerusalem_king 1
			end_if
			if I_FactionLeaderTrait jerusalem Crusader_Factionleader < 2
				set_counter jerusalem_king 2
			end_if
		end_if
		set_counter jerusalem_anarchy 1
		inc_counter heir_jerusalem -1 ; used for generals spawn script
	end_monitor
;TEUTONIC ORDER
	monitor_event CeasedFactionLeader FactionType teutonic_order
		if I_IsFactionAIControlled teutonic_order
			set_counter teutonic_order_king 1
		end_if
		set_counter teutonic_order_anarchy 1
		inc_counter heir_teutonic_order -1 ; used for generals spawn script
	end_monitor
;POLAND
	monitor_event CeasedFactionLeader FactionType poland
		if I_IsFactionAIControlled poland
			if I_FactionLeaderTrait poland FactionUsurper < 1
			and I_FactionLeaderTrait poland FactionRegent < 1
				set_counter poland_king 1
			end_if
			if I_FactionLeaderTrait poland Factionleader < 1
				set_counter poland_king 2
			end_if
		end_if
		set_counter poland_anarchy 1
		inc_counter heir_poland -1 ; used for generals spawn script
	end_monitor
;HUNGARY
	monitor_event CeasedFactionLeader FactionType hungary
		if I_IsFactionAIControlled hungary
			if I_FactionLeaderTrait hungary FactionUsurper < 1
			and I_FactionLeaderTrait hungary FactionRegent < 1
				set_counter hungary_king 1
			end_if
			if I_FactionLeaderTrait hungary Factionleader < 1
				set_counter hungary_king 2
			end_if
		end_if
		set_counter hungary_anarchy 1
		inc_counter heir_hungary -1 ; used for generals spawn script
	end_monitor
;RUSSIA/NOVGOROD
	monitor_event CeasedFactionLeader FactionType russia
		if I_IsFactionAIControlled russia
			set_counter russia_king 1
		end_if
		set_counter russia_anarchy 1
		inc_counter heir_russia -1 ; used for generals spawn script
	end_monitor
;KIEVAN RUS
	monitor_event CeasedFactionLeader FactionType kievan_rus
		if I_IsFactionAIControlled kievan_rus
			if I_FactionLeaderTrait kievan_rus FactionUsurper < 1
			and I_FactionLeaderTrait kievan_rus FactionRegent < 1
				set_counter kievan_rus_king 1
			end_if
			if I_FactionLeaderTrait kievan_rus Factionleader < 1
				set_counter kievan_rus_king 2
			end_if
		end_if
		set_counter kievan_rus_anarchy 1
		inc_counter heir_kievan_rus -1 ; used for generals spawn script
	end_monitor
;LITHUANIA
	monitor_event CeasedFactionLeader FactionType lithuania
		if I_IsFactionAIControlled lithuania
			if I_FactionLeaderTrait lithuania FactionUsurper < 1
			and I_FactionLeaderTrait lithuania FactionRegent < 1
				set_counter lithuania_king 1
			end_if
			if I_FactionLeaderTrait lithuania Factionleader < 1
				set_counter lithuania_king 2
			end_if
		end_if
		set_counter lithuania_anarchy 1
		inc_counter heir_lithuania -1 ; used for generals spawn script
		set_counter convert_lith_fl 0 ; used for conversion script
	end_monitor
;CUMANS
	monitor_event CeasedFactionLeader FactionType cumans
		if I_IsFactionAIControlled cumans
			if I_FactionLeaderTrait cumans FactionUsurper < 1
			and I_FactionLeaderTrait cumans FactionRegent < 1
				set_counter cumans_king 1
			end_if
			if I_FactionLeaderTrait cumans Factionleader < 1
				set_counter cumans_king 2
			end_if
		end_if
		set_counter cumans_anarchy 1
		inc_counter heir_cumans -1 ; used for generals spawn script
	end_monitor
;GEORGIA
	monitor_event CeasedFactionLeader FactionType georgia
		if I_IsFactionAIControlled georgia
			if I_FactionLeaderTrait georgia FactionUsurper < 1
			and I_FactionLeaderTrait georgia FactionRegent < 1
				set_counter georgia_king 1
			end_if
			if I_FactionLeaderTrait england Factionleader < 1
				set_counter georgia_king 2
			end_if
		end_if
		set_counter georgia_anarchy 1
		inc_counter heir_georgia -1 ; used for generals spawn script
	end_monitor
;TIMURIDS/ABBASIDS
	monitor_event CeasedFactionLeader FactionType timurids
		if I_IsFactionAIControlled timurids
			if I_FactionLeaderTrait timurids FactionUsurper < 1
			and I_FactionLeaderTrait timurids FactionRegent < 1
				set_counter timurids_king 1
			end_if
			if I_FactionLeaderTrait timurids Factionleader < 1
				set_counter timurids_king 2
			end_if
		end_if
		set_counter timurids_anarchy 1
		inc_counter heir_timurids -1 ; used for generals spawn script
	end_monitor
;MONGOLS
	monitor_event CeasedFactionLeader FactionType mongols
		if I_IsFactionAIControlled mongols
			if I_FactionLeaderTrait mongols FactionUsurper < 1
			and I_FactionLeaderTrait mongols FactionRegent < 1
				set_counter mongols_king 1
			end_if
			if I_FactionLeaderTrait mongols Factionleader < 1
				set_counter mongols_king 2
			end_if
		end_if
		set_counter mongols_anarchy 1
		inc_counter heir_mongols -1 ; used for generals spawn script
	end_monitor

;***TRIGGER EVENTS***
monitor_event FactionTurnStart not IsFactionAIControlled
;MOORS
	if I_CompareCounter turn_fid = 5; check only once per round
		if I_FactionLeaderTrait moors Civil_Unrest >= 1
		and I_CompareCounter moors_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter moors_anarchy = 1
				historic_event civil_unrest { moors, }
			end_if
			if I_FactionLeaderTrait moors Civil_Unrest = 1
			historic_event civil_unrest1 factions { moors, }
			end_if
			if I_FactionLeaderTrait moors Civil_Unrest = 2
			historic_event civil_unrest2 factions { moors, }
			end_if
			if I_FactionLeaderTrait moors Civil_Unrest = 3
			historic_event civil_unrest3 factions { moors, }
			end_if
		end_if
		set_counter moors_anarchy 0
		if I_CompareCounter moors_king = 0
			if I_CompareCounter moors_civil_war_counter = 1
			and I_FactionLeaderTrait moors Offensive_To_Nobles < 1
				set_counter moors_civil_war_counter 0
				historic_event moors_civil_war_end
			end_if
			if I_CompareCounter moors_civil_war_counter = 2
				if I_FactionLeaderTrait moors Offensive_To_Nobles = 2
					set_counter moors_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait moors Offensive_To_Nobles = 1
					historic_event moors_civil_war_continue2 factions { moors, }
				end_if
				if I_FactionLeaderTrait moors Offensive_To_Nobles < 1
					set_counter moors_civil_war_counter 0
					historic_event moors_civil_war_end
				end_if
			end_if
			if I_CompareCounter moors_civil_war_counter = 3
				if I_FactionLeaderTrait moors FactionUsurper < 1
				and I_FactionLeaderTrait moors Offensive_To_Nobles = 1
					set_counter moors_civil_war_counter 2
					historic_event moors_civil_war_continue2 factions { moors, }
				end_if
				if I_FactionLeaderTrait moors FactionUsurper < 1
				and I_FactionLeaderTrait moors Offensive_To_Nobles < 1
					set_counter moors_civil_war_counter 0
					historic_event moors_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter moors_civil_war_counter = 0
			and I_FactionLeaderTrait moors Offensive_To_Nobles = 2
				historic_event moors_civil_war_start
				set_counter moors_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter moors_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait moors FactionUsurper < 1
		and I_FactionLeaderTrait moors FactionRegent < 1
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 1
				historic_event moors_king_event
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 2
				historic_event moors_king_event2
			end_if
			if I_CompareCounter moors_civil_war_counter >= 1
				historic_event moors_civil_war_end_king
				set_counter moors_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait moors FactionRegent >= 1
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 1
				historic_event moors_regent_event
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 2
				historic_event moors_regent_event2
			end_if
			if I_CompareCounter moors_civil_war_counter >= 1
				historic_event moors_civil_war_end_regent
				set_counter moors_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait moors FactionUsurper >= 1
			if I_CompareCounter moors_civil_war_counter >= 1
				historic_event moors_civil_war_continue
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
				historic_event moors_civil_war
				set_counter moors_civil_war_counter 3
			end_if
		end_if
		set_counter moors_king 0
	end_if
;TURKS
	if I_CompareCounter turn_fid = 2; check only once per round
		if I_FactionLeaderTrait turks Civil_Unrest >= 1
		and I_CompareCounter turks_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter turks_anarchy = 1
				historic_event civil_unrest { turks, }
			end_if
			if I_FactionLeaderTrait turks Civil_Unrest = 1
			historic_event civil_unrest1 factions { turks, }
			end_if
			if I_FactionLeaderTrait turks Civil_Unrest = 2
			historic_event civil_unrest2 factions { turks, }
			end_if
			if I_FactionLeaderTrait turks Civil_Unrest = 3
			historic_event civil_unrest3 factions { turks, }
			end_if
		end_if
		set_counter turks_anarchy 0
		if I_CompareCounter turks_king = 0
			if I_CompareCounter turks_civil_war_counter = 1
			and I_FactionLeaderTrait turks Offensive_To_Nobles < 1
				set_counter turks_civil_war_counter 0
				historic_event turks_civil_war_end
			end_if
			if I_CompareCounter turks_civil_war_counter = 2
				if I_FactionLeaderTrait turks Offensive_To_Nobles = 2
					set_counter turks_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait turks Offensive_To_Nobles = 1
					historic_event turks_civil_war_continue2 factions { turks, }
				end_if
				if I_FactionLeaderTrait turks Offensive_To_Nobles < 1
					set_counter turks_civil_war_counter 0
					historic_event turks_civil_war_end
				end_if
			end_if
			if I_CompareCounter turks_civil_war_counter = 3
				if I_FactionLeaderTrait turks FactionUsurper < 1
				and I_FactionLeaderTrait turks Offensive_To_Nobles = 1
					set_counter turks_civil_war_counter 2
					historic_event turks_civil_war_continue2 factions { turks, }
				end_if
				if I_FactionLeaderTrait turks FactionUsurper < 1
				and I_FactionLeaderTrait turks Offensive_To_Nobles < 1
					set_counter turks_civil_war_counter 0
					historic_event turks_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter turks_civil_war_counter = 0
			and I_FactionLeaderTrait turks Offensive_To_Nobles = 2
				historic_event turks_civil_war_start
				set_counter turks_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter turks_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait turks FactionUsurper < 1
		and I_FactionLeaderTrait turks FactionRegent < 1
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 1
				historic_event turks_king_event
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 2
				historic_event turks_king_event2
			end_if
			if I_CompareCounter turks_civil_war_counter >= 1
				historic_event turks_civil_war_end_king
				set_counter turks_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait turks FactionRegent >= 1
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 1
				historic_event turks_regent_event
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 2
				historic_event turks_regent_event2
			end_if
			if I_CompareCounter turks_civil_war_counter >= 1
				historic_event turks_civil_war_end_regent
				set_counter turks_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait turks FactionUsurper >= 1
			if I_CompareCounter turks_civil_war_counter >= 1
				historic_event turks_civil_war_continue
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
				historic_event turks_civil_war
				set_counter turks_civil_war_counter 3
			end_if
		end_if
		set_counter turks_king 0
	end_if
;EGYPT
	if I_CompareCounter turn_fid = 1; check only once per round
		if I_FactionLeaderTrait egypt Civil_Unrest >= 1
		and I_CompareCounter egypt_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter egypt_anarchy = 1
				historic_event civil_unrest { egypt, }
			end_if
			if I_FactionLeaderTrait egypt Civil_Unrest = 1
			historic_event civil_unrest1 factions { egypt, }
			end_if
			if I_FactionLeaderTrait egypt Civil_Unrest = 2
			historic_event civil_unrest2 factions { egypt, }
			end_if
			if I_FactionLeaderTrait egypt Civil_Unrest = 3
			historic_event civil_unrest3 factions { egypt, }
			end_if
		end_if
		set_counter egypt_anarchy 0
		if I_CompareCounter egypt_king = 0
			if I_CompareCounter egypt_civil_war_counter = 1
			and I_FactionLeaderTrait egypt Offensive_To_Nobles < 1
				set_counter egypt_civil_war_counter 0
				historic_event egypt_civil_war_end
			end_if
			if I_CompareCounter egypt_civil_war_counter = 2
				if I_FactionLeaderTrait egypt Offensive_To_Nobles = 2
					set_counter egypt_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait egypt Offensive_To_Nobles = 1
					historic_event egypt_civil_war_continue2 factions { egypt, }
				end_if
				if I_FactionLeaderTrait egypt Offensive_To_Nobles < 1
					set_counter egypt_civil_war_counter 0
					historic_event egypt_civil_war_end
				end_if
			end_if
			if I_CompareCounter egypt_civil_war_counter = 3
				if I_FactionLeaderTrait egypt FactionUsurper < 1
				and I_FactionLeaderTrait egypt Offensive_To_Nobles = 1
					set_counter egypt_civil_war_counter 2
					historic_event egypt_civil_war_continue2 factions { egypt, }
				end_if
				if I_FactionLeaderTrait egypt FactionUsurper < 1
				and I_FactionLeaderTrait egypt Offensive_To_Nobles < 1
					set_counter egypt_civil_war_counter 0
					historic_event egypt_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter egypt_civil_war_counter = 0
			and I_FactionLeaderTrait egypt Offensive_To_Nobles = 2
				historic_event egypt_civil_war_start
				set_counter egypt_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter egypt_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait egypt FactionUsurper < 1
		and I_FactionLeaderTrait egypt FactionRegent < 1
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 1
				historic_event egypt_king_event
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 2
				historic_event egypt_king_event2
			end_if
			if I_CompareCounter egypt_civil_war_counter >= 1
				historic_event egypt_civil_war_end_king
				set_counter egypt_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait egypt FactionRegent >= 1
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 1
				historic_event egypt_regent_event
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 2
				historic_event egypt_regent_event2
			end_if
			if I_CompareCounter egypt_civil_war_counter >= 1
				historic_event egypt_civil_war_end_regent
				set_counter egypt_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait egypt FactionUsurper >= 1
			if I_CompareCounter egypt_civil_war_counter >= 1
				historic_event egypt_civil_war_continue
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
				historic_event egypt_civil_war
				set_counter egypt_civil_war_counter 3
			end_if
		end_if
		set_counter egypt_king 0
	end_if
;KWAREZM
	if I_CompareCounter turn_fid = 4; check only once per round
		if I_FactionLeaderTrait kwarezm Civil_Unrest >= 1
		and I_CompareCounter kwarezm_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter kwarezm_anarchy = 1
				historic_event civil_unrest { kwarezm, }
			end_if
			if I_FactionLeaderTrait kwarezm Civil_Unrest = 1
			historic_event civil_unrest1 factions { kwarezm, }
			end_if
			if I_FactionLeaderTrait kwarezm Civil_Unrest = 2
			historic_event civil_unrest2 factions { kwarezm, }
			end_if
			if I_FactionLeaderTrait kwarezm Civil_Unrest = 3
			historic_event civil_unrest3 factions { kwarezm, }
			end_if
		end_if
		set_counter kwarezm_anarchy 0
		if I_CompareCounter kwarezm_king = 0
			if I_CompareCounter kwarezm_civil_war_counter = 1
			and I_FactionLeaderTrait kwarezm Offensive_To_Nobles < 1
				set_counter kwarezm_civil_war_counter 0
				historic_event kwarezm_civil_war_end
			end_if
			if I_CompareCounter kwarezm_civil_war_counter = 2
				if I_FactionLeaderTrait kwarezm Offensive_To_Nobles = 2
					set_counter kwarezm_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait kwarezm Offensive_To_Nobles = 1
					historic_event kwarezm_civil_war_continue2 factions { kwarezm, }
				end_if
				if I_FactionLeaderTrait kwarezm Offensive_To_Nobles < 1
					set_counter kwarezm_civil_war_counter 0
					historic_event kwarezm_civil_war_end
				end_if
			end_if
			if I_CompareCounter kwarezm_civil_war_counter = 3
				if I_FactionLeaderTrait kwarezm FactionUsurper < 1
				and I_FactionLeaderTrait kwarezm Offensive_To_Nobles = 1
					set_counter kwarezm_civil_war_counter 2
					historic_event kwarezm_civil_war_continue2 factions { kwarezm, }
				end_if
				if I_FactionLeaderTrait kwarezm FactionUsurper < 1
				and I_FactionLeaderTrait kwarezm Offensive_To_Nobles < 1
					set_counter kwarezm_civil_war_counter 0
					historic_event kwarezm_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter kwarezm_civil_war_counter = 0
			and I_FactionLeaderTrait kwarezm Offensive_To_Nobles = 2
				historic_event kwarezm_civil_war_start
				set_counter kwarezm_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter kwarezm_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait kwarezm FactionUsurper < 1
		and I_FactionLeaderTrait kwarezm FactionRegent < 1
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 1
				historic_event kwarezm_king_event
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 2
				historic_event kwarezm_king_event2
			end_if
			if I_CompareCounter kwarezm_civil_war_counter >= 1
				historic_event kwarezm_civil_war_end_king
				set_counter kwarezm_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kwarezm FactionRegent >= 1
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 1
				historic_event kwarezm_regent_event
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 2
				historic_event kwarezm_regent_event2
			end_if
			if I_CompareCounter kwarezm_civil_war_counter >= 1
				historic_event kwarezm_civil_war_end_regent
				set_counter kwarezm_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kwarezm FactionUsurper >= 1
			if I_CompareCounter kwarezm_civil_war_counter >= 1
				historic_event kwarezm_civil_war_continue
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
				historic_event kwarezm_civil_war
				set_counter kwarezm_civil_war_counter 3
			end_if
		end_if
		set_counter kwarezm_king 0
	end_if
;SPAIN
	if I_CompareCounter turn_fid = 22; check only once per round
		if I_FactionLeaderTrait spain Civil_Unrest >= 1
		and I_CompareCounter spain_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter spain_anarchy = 1
				historic_event civil_unrest { spain, }
			end_if
			if I_FactionLeaderTrait spain Civil_Unrest = 1
			historic_event civil_unrest1 factions { spain, }
			end_if
			if I_FactionLeaderTrait spain Civil_Unrest = 2
			historic_event civil_unrest2 factions { spain, }
			end_if
			if I_FactionLeaderTrait spain Civil_Unrest = 3
			historic_event civil_unrest3 factions { spain, }
			end_if
		end_if
		set_counter spain_anarchy 0
		if I_CompareCounter spain_king = 0
			if I_CompareCounter spain_civil_war_counter = 1
			and I_FactionLeaderTrait spain Offensive_To_Nobles < 1
				set_counter spain_civil_war_counter 0
				historic_event spain_civil_war_end
			end_if
			if I_CompareCounter spain_civil_war_counter = 2
				if I_FactionLeaderTrait spain Offensive_To_Nobles = 2
					set_counter spain_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait spain Offensive_To_Nobles = 1
					historic_event spain_civil_war_continue2 factions { spain, }
				end_if
				if I_FactionLeaderTrait spain Offensive_To_Nobles < 1
					set_counter spain_civil_war_counter 0
					historic_event spain_civil_war_end
				end_if
			end_if
			if I_CompareCounter spain_civil_war_counter = 3
				if I_FactionLeaderTrait spain FactionUsurper < 1
				and I_FactionLeaderTrait spain Offensive_To_Nobles = 1
					set_counter spain_civil_war_counter 2
					historic_event spain_civil_war_continue2 factions { spain, }
				end_if
				if I_FactionLeaderTrait spain FactionUsurper < 1
				and I_FactionLeaderTrait spain Offensive_To_Nobles < 1
					set_counter spain_civil_war_counter 0
					historic_event spain_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter spain_civil_war_counter = 0
			and I_FactionLeaderTrait spain Offensive_To_Nobles = 2
				historic_event spain_civil_war_start
				set_counter spain_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter spain_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait spain FactionUsurper < 1
		and I_FactionLeaderTrait spain FactionRegent < 1
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 1
				historic_event spain_king_event
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 2
				historic_event spain_king_event2
			end_if
			if I_CompareCounter spain_civil_war_counter >= 1
				historic_event spain_civil_war_end_king
				set_counter spain_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait spain FactionRegent >= 1
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 1
				historic_event spain_regent_event
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 2
				historic_event spain_regent_event2
			end_if
			if I_CompareCounter spain_civil_war_counter >= 1
				historic_event spain_civil_war_end_regent
				set_counter spain_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait spain FactionUsurper >= 1
			if I_CompareCounter spain_civil_war_counter >= 1
				historic_event spain_civil_war_continue
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
				historic_event spain_civil_war
				set_counter spain_civil_war_counter 3
			end_if
		end_if
		set_counter spain_king 0
	end_if
;ARAGON
	if I_CompareCounter turn_fid = 24; check only once per round
		if I_FactionLeaderTrait aragon Civil_Unrest >= 1
		and I_CompareCounter aragon_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter aragon_anarchy = 1
				historic_event civil_unrest { aragon, }
			end_if
			if I_FactionLeaderTrait aragon Civil_Unrest = 1
			historic_event civil_unrest1 factions { aragon, }
			end_if
			if I_FactionLeaderTrait aragon Civil_Unrest = 2
			historic_event civil_unrest2 factions { aragon, }
			end_if
			if I_FactionLeaderTrait aragon Civil_Unrest = 3
			historic_event civil_unrest3 factions { aragon, }
			end_if
		end_if
		set_counter aragon_anarchy 0
		if I_CompareCounter aragon_king = 0
			if I_CompareCounter aragon_civil_war_counter = 1
			and I_FactionLeaderTrait aragon Offensive_To_Nobles < 1
				set_counter aragon_civil_war_counter 0
				historic_event aragon_civil_war_end
			end_if
			if I_CompareCounter aragon_civil_war_counter = 2
				if I_FactionLeaderTrait aragon Offensive_To_Nobles = 2
					set_counter aragon_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait aragon Offensive_To_Nobles = 1
					historic_event aragon_civil_war_continue2 factions { aragon, }
				end_if
				if I_FactionLeaderTrait aragon Offensive_To_Nobles < 1
					set_counter aragon_civil_war_counter 0
					historic_event aragon_civil_war_end
				end_if
			end_if
			if I_CompareCounter aragon_civil_war_counter = 3
				if I_FactionLeaderTrait aragon FactionUsurper < 1
				and I_FactionLeaderTrait aragon Offensive_To_Nobles = 1
					set_counter aragon_civil_war_counter 2
					historic_event aragon_civil_war_continue2 factions { aragon, }
				end_if
				if I_FactionLeaderTrait aragon FactionUsurper < 1
				and I_FactionLeaderTrait aragon Offensive_To_Nobles < 1
					set_counter aragon_civil_war_counter 0
					historic_event aragon_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter aragon_civil_war_counter = 0
			and I_FactionLeaderTrait aragon Offensive_To_Nobles = 2
				historic_event aragon_civil_war_start
				set_counter aragon_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter aragon_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait aragon FactionUsurper < 1
		and I_FactionLeaderTrait aragon FactionRegent < 1
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 1
				historic_event aragon_king_event
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 2
				historic_event aragon_king_event2
			end_if
			if I_CompareCounter aragon_civil_war_counter >= 1
				historic_event aragon_civil_war_end_king
				set_counter aragon_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait aragon FactionRegent >= 1
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 1
				historic_event aragon_regent_event
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 2
				historic_event aragon_regent_event2
			end_if
			if I_CompareCounter aragon_civil_war_counter >= 1
				historic_event aragon_civil_war_end_regent
				set_counter aragon_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait aragon FactionUsurper >= 1
			if I_CompareCounter aragon_civil_war_counter >= 1
				historic_event aragon_civil_war_continue
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
				historic_event aragon_civil_war
				set_counter aragon_civil_war_counter 3
			end_if
		end_if
		set_counter aragon_king 0
	end_if
;PORTUGAL
	if I_CompareCounter turn_fid = 20; check only once per round
		if I_FactionLeaderTrait portugal Civil_Unrest >= 1
		and I_CompareCounter portugal_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter portugal_anarchy = 1
				historic_event civil_unrest { portugal, }
			end_if
			if I_FactionLeaderTrait portugal Civil_Unrest = 1
			historic_event civil_unrest1 factions { portugal, }
			end_if
			if I_FactionLeaderTrait portugal Civil_Unrest = 2
			historic_event civil_unrest2 factions { portugal, }
			end_if
			if I_FactionLeaderTrait portugal Civil_Unrest = 3
			historic_event civil_unrest3 factions { portugal, }
			end_if
		end_if
		set_counter portugal_anarchy 0
		if I_CompareCounter portugal_king = 0
			if I_CompareCounter portugal_civil_war_counter = 1
			and I_FactionLeaderTrait portugal Offensive_To_Nobles < 1
				set_counter portugal_civil_war_counter 0
				historic_event portugal_civil_war_end
			end_if
			if I_CompareCounter portugal_civil_war_counter = 2
				if I_FactionLeaderTrait portugal Offensive_To_Nobles = 2
					set_counter portugal_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait portugal Offensive_To_Nobles = 1
					historic_event portugal_civil_war_continue2 factions { portugal, }
				end_if
				if I_FactionLeaderTrait portugal Offensive_To_Nobles < 1
					set_counter portugal_civil_war_counter 0
					historic_event portugal_civil_war_end
				end_if
			end_if
			if I_CompareCounter portugal_civil_war_counter = 3
				if I_FactionLeaderTrait portugal FactionUsurper < 1
				and I_FactionLeaderTrait portugal Offensive_To_Nobles = 1
					set_counter portugal_civil_war_counter 2
					historic_event portugal_civil_war_continue2 factions { portugal, }
				end_if
				if I_FactionLeaderTrait portugal FactionUsurper < 1
				and I_FactionLeaderTrait portugal Offensive_To_Nobles < 1
					set_counter portugal_civil_war_counter 0
					historic_event portugal_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter portugal_civil_war_counter = 0
			and I_FactionLeaderTrait portugal Offensive_To_Nobles = 2
				historic_event portugal_civil_war_start
				set_counter portugal_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter portugal_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait portugal FactionUsurper < 1
		and I_FactionLeaderTrait portugal FactionRegent < 1
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 1
				historic_event portugal_king_event
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 2
				historic_event portugal_king_event2
			end_if
			if I_CompareCounter portugal_civil_war_counter >= 1
				historic_event portugal_civil_war_end_king
				set_counter portugal_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait portugal FactionRegent >= 1
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 1
				historic_event portugal_regent_event
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 2
				historic_event portugal_regent_event2
			end_if
			if I_CompareCounter portugal_civil_war_counter >= 1
				historic_event portugal_civil_war_end_regent
				set_counter portugal_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait portugal FactionUsurper >= 1
			if I_CompareCounter portugal_civil_war_counter >= 1
				historic_event portugal_civil_war_continue
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
				historic_event portugal_civil_war
				set_counter portugal_civil_war_counter 3
			end_if
		end_if
		set_counter portugal_king 0
	end_if
;VENICE
	if I_CompareCounter turn_fid = 12; check only once per round
		if I_FactionLeaderTrait venice Civil_Unrest >= 1
		and I_CompareCounter venice_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter venice_anarchy = 1
				historic_event civil_unrest { venice, }
			end_if
			if I_FactionLeaderTrait venice Civil_Unrest = 1
			historic_event civil_unrest1 factions { venice, }
			end_if
			if I_FactionLeaderTrait venice Civil_Unrest = 2
			historic_event civil_unrest2 factions { venice, }
			end_if
			if I_FactionLeaderTrait venice Civil_Unrest = 3
			historic_event civil_unrest3 factions { venice, }
			end_if
		end_if
		set_counter venice_anarchy 0
		if I_CompareCounter venice_king = 0
			if I_CompareCounter venice_civil_war_counter < 1
			and I_FactionLeaderTrait venice Offensive_To_Nobles = 2
				set_counter venice_civil_war_counter 1
				historic_event venice_civil_war_start
			end_if
			if I_CompareCounter venice_civil_war_counter = 1
				if I_FactionLeaderTrait venice Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event venice_civil_war_continue factions { venice, }
				end_if
				if I_FactionLeaderTrait venice Offensive_To_Nobles < 1
					set_counter venice_civil_war_counter 0
					historic_event venice_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter venice_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait venice Offensive_To_Nobles < 1
			if I_CompareCounter venice_civil_war_counter < 1
				historic_event venice_king_event
			end_if
			if I_CompareCounter venice_civil_war_counter = 1
				historic_event venice_civil_war_end_king
				set_counter venice_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait venice Offensive_To_Nobles >= 1
			if I_CompareCounter venice_civil_war_counter = 1
				historic_event venice_civil_war_continue
			end_if
			if I_CompareCounter venice_civil_war_counter < 1
				historic_event venice_civil_war
				set_counter venice_civil_war_counter 1
			end_if
		end_if
		set_counter venice_king 0
	end_if
;MILAN/GENOA
	if I_CompareCounter turn_fid = 14; check only once per round
		if I_FactionLeaderTrait milan Civil_Unrest >= 1
		and I_CompareCounter milan_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter milan_anarchy = 1
				historic_event civil_unrest { milan, }
			end_if
			if I_FactionLeaderTrait milan Civil_Unrest = 1
			historic_event civil_unrest1 factions { milan, }
			end_if
			if I_FactionLeaderTrait milan Civil_Unrest = 2
			historic_event civil_unrest2 factions { milan, }
			end_if
			if I_FactionLeaderTrait milan Civil_Unrest = 3
			historic_event civil_unrest3 factions { milan, }
			end_if
		end_if
		set_counter milan_anarchy 0
		if I_CompareCounter milan_king = 0
			if I_CompareCounter milan_civil_war_counter < 1
			and I_FactionLeaderTrait milan Offensive_To_Nobles = 2
				set_counter milan_civil_war_counter 1
				historic_event milan_civil_war_start
			end_if
			if I_CompareCounter milan_civil_war_counter = 1
				if I_FactionLeaderTrait milan Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event milan_civil_war_continue factions { milan, }
				end_if
				if I_FactionLeaderTrait milan Offensive_To_Nobles < 1
					set_counter milan_civil_war_counter 0
					historic_event milan_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter milan_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait milan Offensive_To_Nobles < 1
			if I_CompareCounter milan_civil_war_counter < 1
				historic_event milan_king_event
			end_if
			if I_CompareCounter milan_civil_war_counter = 1
				historic_event milan_civil_war_end_king
				set_counter milan_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait milan Offensive_To_Nobles >= 1
			if I_CompareCounter milan_civil_war_counter = 1
				historic_event milan_civil_war_continue
			end_if
			if I_CompareCounter milan_civil_war_counter < 1
				historic_event milan_civil_war
				set_counter milan_civil_war_counter 1
			end_if
		end_if
		set_counter milan_king 0
	end_if
;SICILY
	if I_CompareCounter turn_fid = 13; check only once per round
		if I_FactionLeaderTrait sicily Civil_Unrest >= 1
		and I_CompareCounter sicily_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter sicily_anarchy = 1
				historic_event civil_unrest { sicily, }
			end_if
			if I_FactionLeaderTrait sicily Civil_Unrest = 1
			historic_event civil_unrest1 factions { sicily, }
			end_if
			if I_FactionLeaderTrait sicily Civil_Unrest = 2
			historic_event civil_unrest2 factions { sicily, }
			end_if
			if I_FactionLeaderTrait sicily Civil_Unrest = 3
			historic_event civil_unrest3 factions { sicily, }
			end_if
		end_if
		set_counter sicily_anarchy 0
		if I_CompareCounter sicily_king = 0
			if I_CompareCounter sicily_civil_war_counter = 1
			and I_FactionLeaderTrait sicily Offensive_To_Nobles < 1
				set_counter sicily_civil_war_counter 0
				historic_event sicily_civil_war_end
			end_if
			if I_CompareCounter sicily_civil_war_counter = 2
				if I_FactionLeaderTrait sicily Offensive_To_Nobles = 2
					set_counter sicily_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait sicily Offensive_To_Nobles = 1
					historic_event sicily_civil_war_continue2 factions { sicily, }
				end_if
				if I_FactionLeaderTrait sicily Offensive_To_Nobles < 1
					set_counter sicily_civil_war_counter 0
					historic_event sicily_civil_war_end
				end_if
			end_if
			if I_CompareCounter sicily_civil_war_counter = 3
				if I_FactionLeaderTrait sicily FactionUsurper < 1
				and I_FactionLeaderTrait sicily Offensive_To_Nobles = 1
					set_counter sicily_civil_war_counter 2
					historic_event sicily_civil_war_continue2 factions { sicily, }
				end_if
				if I_FactionLeaderTrait sicily FactionUsurper < 1
				and I_FactionLeaderTrait sicily Offensive_To_Nobles < 1
					set_counter sicily_civil_war_counter 0
					historic_event sicily_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter sicily_civil_war_counter = 0
			and I_FactionLeaderTrait sicily Offensive_To_Nobles = 2
				historic_event sicily_civil_war_start
				set_counter sicily_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter sicily_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait sicily FactionUsurper < 1
		and I_FactionLeaderTrait sicily FactionRegent < 1
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 1
				historic_event sicily_king_event
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 2
				historic_event sicily_king_event2
			end_if
			if I_CompareCounter sicily_civil_war_counter >= 1
				historic_event sicily_civil_war_end_king
				set_counter sicily_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait sicily FactionRegent >= 1
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 1
				historic_event sicily_regent_event
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 2
				historic_event sicily_regent_event2
			end_if
			if I_CompareCounter sicily_civil_war_counter >= 1
				historic_event sicily_civil_war_end_regent
				set_counter sicily_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait sicily FactionUsurper >= 1
			if I_CompareCounter sicily_civil_war_counter >= 1
				historic_event sicily_civil_war_continue
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
				historic_event sicily_civil_war
				set_counter sicily_civil_war_counter 3
			end_if
		end_if
		set_counter sicily_king 0
	end_if
;BYZANTIUM
	if I_CompareCounter turn_fid = 9; check only once per round
		if I_FactionLeaderTrait byzantium Civil_Unrest >= 1
		and I_CompareCounter byzantium_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter byzantium_anarchy = 1
				historic_event civil_unrest { byzantium, }
			end_if
			if I_FactionLeaderTrait byzantium Civil_Unrest = 1
			historic_event civil_unrest1 factions { byzantium, }
			end_if
			if I_FactionLeaderTrait byzantium Civil_Unrest = 2
			historic_event civil_unrest2 factions { byzantium, }
			end_if
			if I_FactionLeaderTrait byzantium Civil_Unrest = 3
			historic_event civil_unrest3 factions { byzantium, }
			end_if
		end_if
		set_counter byzantium_anarchy 0
		if I_CompareCounter byzantium_king = 0
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_FactionLeaderTrait byzantium Offensive_To_Nobles = 2
				set_counter byzantium_civil_war_counter 1
				historic_event byzantium_civil_war_start
			end_if
			if I_CompareCounter byzantium_civil_war_counter = 1
				if I_FactionLeaderTrait byzantium Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event byzantium_civil_war_continue2 factions { byzantium, }
				end_if
				if I_FactionLeaderTrait byzantium Offensive_To_Nobles < 1
					set_counter byzantium_civil_war_counter 0
					historic_event byzantium_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter byzantium_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait byzantium Offensive_To_Nobles < 1
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_CompareCounter byzantium_king = 1
				historic_event byzantium_king_event
			end_if
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_CompareCounter byzantium_king = 2
				historic_event byzantium_king_event2
			end_if
			if I_CompareCounter byzantium_civil_war_counter = 1
				historic_event byzantium_civil_war_end_king
				set_counter byzantium_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait byzantium Offensive_To_Nobles >= 1
			if I_CompareCounter byzantium_civil_war_counter = 1
				historic_event byzantium_civil_war_continue
			end_if
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_FactionLeaderTrait byzantium Offensive_To_Nobles = 2
				historic_event byzantium_civil_war
				set_counter byzantium_civil_war_counter 1
			end_if
		end_if
		set_counter byzantium_king 0
	end_if
;HRE
	if I_CompareCounter turn_fid = 18; check only once per round
		if I_FactionLeaderTrait hre Civil_Unrest >= 1
		and I_CompareCounter hre_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter hre_anarchy = 1
				historic_event civil_unrest { hre, }
			end_if
			if I_FactionLeaderTrait hre Civil_Unrest = 1
			historic_event civil_unrest1 factions { hre, }
			end_if
			if I_FactionLeaderTrait hre Civil_Unrest = 2
			historic_event civil_unrest2 factions { hre, }
			end_if
			if I_FactionLeaderTrait hre Civil_Unrest = 3
			historic_event civil_unrest3 factions { hre, }
			end_if
		end_if
		set_counter hre_anarchy 0
		if I_CompareCounter hre_king = 0
			if I_CompareCounter hre_civil_war_counter = 1
			and I_FactionLeaderTrait hre Offensive_To_Nobles < 1
				set_counter hre_civil_war_counter 0
				historic_event hre_civil_war_end
			end_if
			if I_CompareCounter hre_civil_war_counter = 2
				if I_FactionLeaderTrait hre Offensive_To_Nobles = 2
					set_counter hre_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait hre Offensive_To_Nobles = 1
					historic_event hre_civil_war_continue2 factions { hre, }
				end_if
				if I_FactionLeaderTrait hre Offensive_To_Nobles < 1
					set_counter hre_civil_war_counter 0
					historic_event hre_civil_war_end
				end_if
			end_if
			if I_CompareCounter hre_civil_war_counter = 3
				if I_FactionLeaderTrait hre FactionUsurper < 1
				and I_FactionLeaderTrait hre Offensive_To_Nobles = 1
					set_counter hre_civil_war_counter 2
					historic_event hre_civil_war_continue2 factions { hre, }
				end_if
				if I_FactionLeaderTrait hre FactionUsurper < 1
				and I_FactionLeaderTrait hre Offensive_To_Nobles < 1
					set_counter hre_civil_war_counter 0
					historic_event hre_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter hre_civil_war_counter = 0
			and I_FactionLeaderTrait hre Offensive_To_Nobles = 2
				historic_event hre_civil_war_start
				set_counter hre_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter hre_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait hre FactionUsurper < 1
			if I_CompareCounter hre_civil_war_counter < 1
			and I_CompareCounter hre_king = 1
				historic_event hre_king_event
			end_if
			if I_CompareCounter hre_civil_war_counter < 1
			and I_CompareCounter hre_king = 2
				historic_event hre_king_event2
			end_if
			if I_CompareCounter hre_civil_war_counter >= 1
				historic_event hre_civil_war_end_king
				set_counter hre_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hre FactionUsurper >= 1
			if I_CompareCounter hre_civil_war_counter >= 1
				historic_event hre_civil_war_continue
			end_if
			if I_CompareCounter hre_civil_war_counter < 1
				historic_event hre_civil_war
				set_counter hre_civil_war_counter 2
			end_if
		end_if
		set_counter hre_king 0
	end_if
;FRANCE
	if I_CompareCounter turn_fid = 17; check only once per round
		if I_FactionLeaderTrait france Civil_Unrest >= 1
		and I_CompareCounter france_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter france_anarchy = 1
				historic_event civil_unrest { france, }
			end_if
			if I_FactionLeaderTrait france Civil_Unrest = 1
			historic_event civil_unrest1 factions { france, }
			end_if
			if I_FactionLeaderTrait france Civil_Unrest = 2
			historic_event civil_unrest2 factions { france, }
			end_if
			if I_FactionLeaderTrait france Civil_Unrest = 3
			historic_event civil_unrest3 factions { france, }
			end_if
		end_if
		set_counter france_anarchy 0
		if I_CompareCounter france_king = 0
			if I_CompareCounter france_civil_war_counter = 1
			and I_FactionLeaderTrait france Offensive_To_Nobles < 1
				set_counter france_civil_war_counter 0
				historic_event france_civil_war_end
			end_if
			if I_CompareCounter france_civil_war_counter = 2
				if I_FactionLeaderTrait france Offensive_To_Nobles = 2
					set_counter france_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait france Offensive_To_Nobles = 1
					historic_event france_civil_war_continue2 factions { france, }
				end_if
				if I_FactionLeaderTrait france Offensive_To_Nobles < 1
					set_counter france_civil_war_counter 0
					historic_event france_civil_war_end
				end_if
			end_if
			if I_CompareCounter france_civil_war_counter = 3
				if I_FactionLeaderTrait france FactionUsurper < 1
				and I_FactionLeaderTrait france Offensive_To_Nobles = 1
					set_counter france_civil_war_counter 2
					historic_event france_civil_war_continue2 factions { france, }
				end_if
				if I_FactionLeaderTrait france FactionUsurper < 1
				and I_FactionLeaderTrait france Offensive_To_Nobles < 1
					set_counter france_civil_war_counter 0
					historic_event france_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter france_civil_war_counter = 0
			and I_FactionLeaderTrait france Offensive_To_Nobles = 2
				historic_event france_civil_war_start
				set_counter france_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter france_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait france FactionUsurper < 1
		and I_FactionLeaderTrait france FactionRegent < 1
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 1
				historic_event france_king_event
			end_if
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 2
				historic_event france_king_event2
			end_if
			if I_CompareCounter france_civil_war_counter >= 1
				historic_event france_civil_war_end_king
				set_counter france_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait france FactionRegent >= 1
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 1
				historic_event france_regent_event
			end_if
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 2
				historic_event france_regent_event2
			end_if
			if I_CompareCounter france_civil_war_counter >= 1
				historic_event france_civil_war_end_regent
				set_counter france_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait france FactionUsurper >= 1
			if I_CompareCounter france_civil_war_counter >= 1
				historic_event france_civil_war_continue
			end_if
			if I_CompareCounter france_civil_war_counter < 1
				historic_event france_civil_war
				set_counter france_civil_war_counter 3
			end_if
		end_if
		set_counter france_king 0
	end_if
;ENGLAND
	if I_CompareCounter turn_fid = 19; check only once per round
		if I_FactionLeaderTrait england Civil_Unrest >= 1
		and I_CompareCounter england_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter england_anarchy = 1
				historic_event civil_unrest { england, }
			end_if
			if I_FactionLeaderTrait england Civil_Unrest = 1
			historic_event civil_unrest1 factions { england, }
			end_if
			if I_FactionLeaderTrait england Civil_Unrest = 2
			historic_event civil_unrest2 factions { england, }
			end_if
			if I_FactionLeaderTrait england Civil_Unrest = 3
			historic_event civil_unrest3 factions { england, }
			end_if
		end_if
		set_counter england_anarchy 0
		if I_CompareCounter england_king = 0
			if I_CompareCounter england_civil_war_counter = 1
			and I_FactionLeaderTrait england Offensive_To_Nobles < 1
				set_counter england_civil_war_counter 0
				historic_event england_civil_war_end
			end_if
			if I_CompareCounter england_civil_war_counter = 2
				if I_FactionLeaderTrait england Offensive_To_Nobles = 2
					set_counter england_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait england Offensive_To_Nobles = 1
					historic_event england_civil_war_continue2 factions { england, }
				end_if
				if I_FactionLeaderTrait england Offensive_To_Nobles < 1
					set_counter england_civil_war_counter 0
					historic_event england_civil_war_end
				end_if
			end_if
			if I_CompareCounter england_civil_war_counter = 3
				if I_FactionLeaderTrait england FactionUsurper < 1
				and I_FactionLeaderTrait england Offensive_To_Nobles = 1
					set_counter england_civil_war_counter 2
					historic_event england_civil_war_continue2 factions { england, }
				end_if
				if I_FactionLeaderTrait england FactionUsurper < 1
				and I_FactionLeaderTrait england Offensive_To_Nobles < 1
					set_counter england_civil_war_counter 0
					historic_event england_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter england_civil_war_counter = 0
			and I_FactionLeaderTrait england Offensive_To_Nobles = 2
				historic_event england_civil_war_start
				set_counter england_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter england_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait england FactionUsurper < 1
		and I_FactionLeaderTrait england FactionRegent < 1
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 1
				historic_event england_king_event
			end_if
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 2
				historic_event england_king_event2
			end_if
			if I_CompareCounter england_civil_war_counter >= 1
				historic_event england_civil_war_end_king
				set_counter england_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait england FactionRegent >= 1
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 1
				historic_event england_regent_event
			end_if
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 2
				historic_event england_regent_event2
			end_if
			if I_CompareCounter england_civil_war_counter >= 1
				historic_event england_civil_war_end_regent
				set_counter england_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait england FactionUsurper >= 1
			if I_CompareCounter england_civil_war_counter >= 1
				historic_event england_civil_war_continue
			end_if
			if I_CompareCounter england_civil_war_counter < 1
				historic_event england_civil_war
				set_counter england_civil_war_counter 3
			end_if
		end_if
		set_counter england_king 0
	end_if
;SCOTLAND
	if I_CompareCounter turn_fid = 16; check only once per round
		if I_FactionLeaderTrait scotland Civil_Unrest >= 1
		and I_CompareCounter scotland_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter scotland_anarchy = 1
				historic_event civil_unrest { scotland, }
			end_if
			if I_FactionLeaderTrait scotland Civil_Unrest = 1
			historic_event civil_unrest1 factions { scotland, }
			end_if
			if I_FactionLeaderTrait scotland Civil_Unrest = 2
			historic_event civil_unrest2 factions { scotland, }
			end_if
			if I_FactionLeaderTrait scotland Civil_Unrest = 3
			historic_event civil_unrest3 factions { scotland, }
			end_if
		end_if
		set_counter scotland_anarchy 0
		if I_CompareCounter scotland_king = 0
			if I_CompareCounter scotland_civil_war_counter = 1
			and I_FactionLeaderTrait scotland Offensive_To_Nobles < 1
				set_counter scotland_civil_war_counter 0
				historic_event scotland_civil_war_end
			end_if
			if I_CompareCounter scotland_civil_war_counter = 2
				if I_FactionLeaderTrait scotland Offensive_To_Nobles = 2
					set_counter scotland_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait scotland Offensive_To_Nobles = 1
					historic_event scotland_civil_war_continue2 factions { scotland, }
				end_if
				if I_FactionLeaderTrait scotland Offensive_To_Nobles < 1
					set_counter scotland_civil_war_counter 0
					historic_event scotland_civil_war_end
				end_if
			end_if
			if I_CompareCounter scotland_civil_war_counter = 3
				if I_FactionLeaderTrait scotland FactionUsurper < 1
				and I_FactionLeaderTrait scotland Offensive_To_Nobles = 1
					set_counter scotland_civil_war_counter 2
					historic_event scotland_civil_war_continue2 factions { scotland, }
				end_if
				if I_FactionLeaderTrait scotland FactionUsurper < 1
				and I_FactionLeaderTrait scotland Offensive_To_Nobles < 1
					set_counter scotland_civil_war_counter 0
					historic_event scotland_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter scotland_civil_war_counter = 0
			and I_FactionLeaderTrait scotland Offensive_To_Nobles = 2
				historic_event scotland_civil_war_start
				set_counter scotland_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter scotland_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait scotland FactionUsurper < 1
		and I_FactionLeaderTrait scotland FactionRegent < 1
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 1
				historic_event scotland_king_event
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 2
				historic_event scotland_king_event2
			end_if
			if I_CompareCounter scotland_civil_war_counter >= 1
				historic_event scotland_civil_war_end_king
				set_counter scotland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait scotland FactionRegent >= 1
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 1
				historic_event scotland_regent_event
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 2
				historic_event scotland_regent_event2
			end_if
			if I_CompareCounter scotland_civil_war_counter >= 1
				historic_event scotland_civil_war_end_regent
				set_counter scotland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait scotland FactionUsurper >= 1
			if I_CompareCounter scotland_civil_war_counter >= 1
				historic_event scotland_civil_war_continue
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
				historic_event scotland_civil_war
				set_counter scotland_civil_war_counter 3
			end_if
		end_if
		set_counter scotland_king 0
	end_if
;DENMARK
	if I_CompareCounter turn_fid = 15; check only once per round
		if I_FactionLeaderTrait denmark Civil_Unrest >= 1
		and I_CompareCounter denmark_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter denmark_anarchy = 1
				historic_event civil_unrest { denmark, }
			end_if
			if I_FactionLeaderTrait denmark Civil_Unrest = 1
			historic_event civil_unrest1 factions { denmark, }
			end_if
			if I_FactionLeaderTrait denmark Civil_Unrest = 2
			historic_event civil_unrest2 factions { denmark, }
			end_if
			if I_FactionLeaderTrait denmark Civil_Unrest = 3
			historic_event civil_unrest3 factions { denmark, }
			end_if
		end_if
		set_counter denmark_anarchy 0
		if I_CompareCounter denmark_king = 0
			if I_CompareCounter denmark_civil_war_counter = 1
			and I_FactionLeaderTrait denmark Offensive_To_Nobles < 1
				set_counter denmark_civil_war_counter 0
				historic_event denmark_civil_war_end
			end_if
			if I_CompareCounter denmark_civil_war_counter = 2
				if I_FactionLeaderTrait denmark Offensive_To_Nobles = 2
					set_counter denmark_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait denmark Offensive_To_Nobles = 1
					historic_event denmark_civil_war_continue2 factions { denmark, }
				end_if
				if I_FactionLeaderTrait denmark Offensive_To_Nobles < 1
					set_counter denmark_civil_war_counter 0
					historic_event denmark_civil_war_end
				end_if
			end_if
			if I_CompareCounter denmark_civil_war_counter = 3
				if I_FactionLeaderTrait denmark FactionUsurper < 1
				and I_FactionLeaderTrait denmark Offensive_To_Nobles = 1
					set_counter denmark_civil_war_counter 2
					historic_event denmark_civil_war_continue2 factions { denmark, }
				end_if
				if I_FactionLeaderTrait denmark FactionUsurper < 1
				and I_FactionLeaderTrait denmark Offensive_To_Nobles < 1
					set_counter denmark_civil_war_counter 0
					historic_event denmark_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter denmark_civil_war_counter = 0
			and I_FactionLeaderTrait denmark Offensive_To_Nobles = 2
				historic_event denmark_civil_war_start
				set_counter denmark_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter denmark_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait denmark FactionUsurper < 1
		and I_FactionLeaderTrait denmark FactionRegent < 1
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 1
				historic_event denmark_king_event
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 2
				historic_event denmark_king_event2
			end_if
			if I_CompareCounter denmark_civil_war_counter >= 1
				historic_event denmark_civil_war_end_king
				set_counter denmark_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait denmark FactionRegent >= 1
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 1
				historic_event denmark_regent_event
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 2
				historic_event denmark_regent_event2
			end_if
			if I_CompareCounter denmark_civil_war_counter >= 1
				historic_event denmark_civil_war_end_regent
				set_counter denmark_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait denmark FactionUsurper >= 1
			if I_CompareCounter denmark_civil_war_counter >= 1
				historic_event denmark_civil_war_continue
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
				historic_event denmark_civil_war
				set_counter denmark_civil_war_counter 3
			end_if
		end_if
		set_counter denmark_king 0
	end_if
;NORWAY
	if I_CompareCounter turn_fid = 26; check only once per round
		if I_FactionLeaderTrait norway Civil_Unrest >= 1
		and I_CompareCounter norway_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter norway_anarchy = 1
				historic_event civil_unrest { norway, }
			end_if
			if I_FactionLeaderTrait norway Civil_Unrest = 1
			historic_event civil_unrest1 factions { norway, }
			end_if
			if I_FactionLeaderTrait norway Civil_Unrest = 2
			historic_event civil_unrest2 factions { norway, }
			end_if
			if I_FactionLeaderTrait norway Civil_Unrest = 3
			historic_event civil_unrest3 factions { norway, }
			end_if
		end_if
		set_counter norway_anarchy 0
		if I_CompareCounter norway_king = 0
			if I_CompareCounter norway_civil_war_counter = 1
			and I_FactionLeaderTrait norway Offensive_To_Nobles < 1
				set_counter norway_civil_war_counter 0
				historic_event norway_civil_war_end
			end_if
			if I_CompareCounter norway_civil_war_counter = 2
				if I_FactionLeaderTrait norway Offensive_To_Nobles = 2
					set_counter norway_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait norway Offensive_To_Nobles = 1
					historic_event norway_civil_war_continue2 factions { norway, }
				end_if
				if I_FactionLeaderTrait norway Offensive_To_Nobles < 1
					set_counter norway_civil_war_counter 0
					historic_event norway_civil_war_end
				end_if
			end_if
			if I_CompareCounter norway_civil_war_counter = 3
				if I_FactionLeaderTrait norway FactionUsurper < 1
				and I_FactionLeaderTrait norway Offensive_To_Nobles = 1
					set_counter norway_civil_war_counter 2
					historic_event norway_civil_war_continue2 factions { norway, }
				end_if
				if I_FactionLeaderTrait norway FactionUsurper < 1
				and I_FactionLeaderTrait norway Offensive_To_Nobles < 1
					set_counter norway_civil_war_counter 0
					historic_event norway_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter norway_civil_war_counter = 0
			and I_FactionLeaderTrait norway Offensive_To_Nobles = 2
				historic_event norway_civil_war_start
				set_counter norway_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter norway_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait norway FactionUsurper < 1
		and I_FactionLeaderTrait norway FactionRegent < 1
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 1
				historic_event norway_king_event
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 2
				historic_event norway_king_event2
			end_if
			if I_CompareCounter norway_civil_war_counter >= 1
				historic_event norway_civil_war_end_king
				set_counter norway_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait norway FactionRegent >= 1
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 1
				historic_event norway_regent_event
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 2
				historic_event norway_regent_event2
			end_if
			if I_CompareCounter norway_civil_war_counter >= 1
				historic_event norway_civil_war_end_regent
				set_counter norway_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait norway FactionUsurper >= 1
			if I_CompareCounter norway_civil_war_counter >= 1
				historic_event norway_civil_war_continue
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
				historic_event norway_civil_war
				set_counter norway_civil_war_counter 3
			end_if
		end_if
		set_counter norway_king 0
	end_if
;JERUSALEM/CRUSADER STATES
	if I_CompareCounter turn_fid = 27; check only once per round
		if I_FactionLeaderTrait jerusalem Civil_Unrest >= 1
		and I_CompareCounter jerusalem_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter jerusalem_anarchy = 1
				historic_event civil_unrest { jerusalem, }
			end_if
			if I_FactionLeaderTrait jerusalem Civil_Unrest = 1
			historic_event civil_unrest1 factions { jerusalem, }
			end_if
			if I_FactionLeaderTrait jerusalem Civil_Unrest = 2
			historic_event civil_unrest2 factions { jerusalem, }
			end_if
			if I_FactionLeaderTrait jerusalem Civil_Unrest = 3
			historic_event civil_unrest3 factions { jerusalem, }
			end_if
		end_if
		set_counter jerusalem_anarchy 0
		if I_CompareCounter jerusalem_king = 0
			if I_CompareCounter jerusalem_civil_war_counter < 1
			and I_FactionLeaderTrait jerusalem Offensive_To_Nobles = 2
				set_counter jerusalem_civil_war_counter 1
				historic_event jerusalem_civil_war_start
			end_if
			if I_CompareCounter jerusalem_civil_war_counter = 1
				if I_FactionLeaderTrait jerusalem Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event jerusalem_civil_war_continue factions { jerusalem, }
				end_if
				if I_FactionLeaderTrait jerusalem Offensive_To_Nobles < 1
					set_counter jerusalem_civil_war_counter 0
					historic_event jerusalem_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter jerusalem_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait jerusalem Offensive_To_Nobles < 1
			if I_CompareCounter jerusalem_civil_war_counter < 1
				if I_CompareCounter jerusalem_king = 1
					historic_event jerusalem_king_event
				end_if
				if I_CompareCounter jerusalem_king = 2
					historic_event jerusalem_regent_event
				end_if
			end_if
			if I_CompareCounter jerusalem_civil_war_counter = 1
				if I_CompareCounter jerusalem_king = 1
					historic_event jerusalem_civil_war_end_king
				end_if
				if I_CompareCounter jerusalem_king = 2
					historic_event jerusalem_civil_war_end_regent
				end_if
				set_counter jerusalem_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait jerusalem Offensive_To_Nobles >= 1
			if I_CompareCounter jerusalem_civil_war_counter = 1
				historic_event jerusalem_civil_war_continue
			end_if
			if I_CompareCounter jerusalem_civil_war_counter < 1
				historic_event jerusalem_civil_war
				set_counter jerusalem_civil_war_counter 1
			end_if
		end_if
		set_counter jerusalem_king 0
	end_if
;TEUTONIC ORDER
	if I_CompareCounter turn_fid = 25; check only once per round
		if I_FactionLeaderTrait teutonic_order Civil_Unrest >= 1
		and I_CompareCounter teutonic_order_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter teutonic_order_anarchy = 1
				historic_event civil_unrest { teutonic_order, }
			end_if
			if I_FactionLeaderTrait teutonic_order Civil_Unrest = 1
			historic_event civil_unrest1 factions { teutonic_order, }
			end_if
			if I_FactionLeaderTrait teutonic_order Civil_Unrest = 2
			historic_event civil_unrest2 factions { teutonic_order, }
			end_if
			if I_FactionLeaderTrait teutonic_order Civil_Unrest = 3
			historic_event civil_unrest3 factions { teutonic_order, }
			end_if
		end_if
		set_counter teutonic_order_anarchy 0
		if I_CompareCounter teutonic_order_king = 0
			if I_CompareCounter teutonic_order_civil_war_counter < 1
			and I_FactionLeaderTrait teutonic_order Offensive_To_Nobles = 2
				set_counter teutonic_order_civil_war_counter 1
				historic_event teutonic_order_civil_war_start
			end_if
			if I_CompareCounter teutonic_order_civil_war_counter = 1
				if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event teutonic_order_civil_war_continue factions { teutonic_order, }
				end_if
				if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles < 1
					set_counter teutonic_order_civil_war_counter 0
					historic_event teutonic_order_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter teutonic_order_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles < 1
			if I_CompareCounter teutonic_order_civil_war_counter < 1
				historic_event teutonic_order_king_event
			end_if
			if I_CompareCounter teutonic_order_civil_war_counter = 1
				historic_event teutonic_order_civil_war_end_king
				set_counter teutonic_order_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles >= 1
			if I_CompareCounter teutonic_order_civil_war_counter = 1
				historic_event teutonic_order_civil_war_continue
			end_if
			if I_CompareCounter teutonic_order_civil_war_counter < 1
				historic_event teutonic_order_civil_war
				set_counter teutonic_order_civil_war_counter 1
			end_if
		end_if
		set_counter teutonic_order_king 0
	end_if
;POLAND
	if I_CompareCounter turn_fid = 21; check only once per round
		if I_FactionLeaderTrait poland Civil_Unrest >= 1
		and I_CompareCounter poland_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter poland_anarchy = 1
				historic_event civil_unrest { poland, }
			end_if
			if I_FactionLeaderTrait poland Civil_Unrest = 1
			historic_event civil_unrest1 factions { poland, }
			end_if
			if I_FactionLeaderTrait poland Civil_Unrest = 2
			historic_event civil_unrest2 factions { poland, }
			end_if
			if I_FactionLeaderTrait poland Civil_Unrest = 3
			historic_event civil_unrest3 factions { poland, }
			end_if
		end_if
		set_counter poland_anarchy 0
		if I_CompareCounter poland_king = 0
			if I_CompareCounter poland_civil_war_counter = 1
			and I_FactionLeaderTrait poland Offensive_To_Nobles < 1
				set_counter poland_civil_war_counter 0
				historic_event poland_civil_war_end
			end_if
			if I_CompareCounter poland_civil_war_counter = 2
				if I_FactionLeaderTrait poland Offensive_To_Nobles = 2
					set_counter poland_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait poland Offensive_To_Nobles = 1
					historic_event poland_civil_war_continue2 factions { poland, }
				end_if
				if I_FactionLeaderTrait poland Offensive_To_Nobles < 1
					set_counter poland_civil_war_counter 0
					historic_event poland_civil_war_end
				end_if
			end_if
			if I_CompareCounter poland_civil_war_counter = 3
				if I_FactionLeaderTrait poland FactionUsurper < 1
				and I_FactionLeaderTrait poland Offensive_To_Nobles = 1
					set_counter poland_civil_war_counter 2
					historic_event poland_civil_war_continue2 factions { poland, }
				end_if
				if I_FactionLeaderTrait poland FactionUsurper < 1
				and I_FactionLeaderTrait poland Offensive_To_Nobles < 1
					set_counter poland_civil_war_counter 0
					historic_event poland_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter poland_civil_war_counter = 0
			and I_FactionLeaderTrait poland Offensive_To_Nobles = 2
				historic_event poland_civil_war_start
				set_counter poland_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter poland_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait poland FactionUsurper < 1
		and I_FactionLeaderTrait poland FactionRegent < 1
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 1
				historic_event poland_king_event
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 2
				historic_event poland_king_event2
			end_if
			if I_CompareCounter poland_civil_war_counter >= 1
				historic_event poland_civil_war_end_king
				set_counter poland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait poland FactionRegent >= 1
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 1
				historic_event poland_regent_event
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 2
				historic_event poland_regent_event2
			end_if
			if I_CompareCounter poland_civil_war_counter >= 1
				historic_event poland_civil_war_end_regent
				set_counter poland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait poland FactionUsurper >= 1
			if I_CompareCounter poland_civil_war_counter >= 1
				historic_event poland_civil_war_continue
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
				historic_event poland_civil_war
				set_counter poland_civil_war_counter 3
			end_if
		end_if
		set_counter poland_king 0
	end_if
;HUNGARY
	if I_CompareCounter turn_fid = 23; check only once per round
		if I_FactionLeaderTrait hungary Civil_Unrest >= 1
		and I_CompareCounter hungary_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter hungary_anarchy = 1
				historic_event civil_unrest { hungary, }
			end_if
			if I_FactionLeaderTrait hungary Civil_Unrest = 1
			historic_event civil_unrest1 factions { hungary, }
			end_if
			if I_FactionLeaderTrait hungary Civil_Unrest = 2
			historic_event civil_unrest2 factions { hungary, }
			end_if
			if I_FactionLeaderTrait hungary Civil_Unrest = 3
			historic_event civil_unrest3 factions { hungary, }
			end_if
		end_if
		set_counter hungary_anarchy 0
		if I_CompareCounter hungary_king = 0
			if I_CompareCounter hungary_civil_war_counter = 1
			and I_FactionLeaderTrait hungary Offensive_To_Nobles < 1
				set_counter hungary_civil_war_counter 0
				historic_event hungary_civil_war_end
			end_if
			if I_CompareCounter hungary_civil_war_counter = 2
				if I_FactionLeaderTrait hungary Offensive_To_Nobles = 2
					set_counter hungary_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait hungary Offensive_To_Nobles = 1
					historic_event hungary_civil_war_continue2 factions { hungary, }
				end_if
				if I_FactionLeaderTrait hungary Offensive_To_Nobles < 1
					set_counter hungary_civil_war_counter 0
					historic_event hungary_civil_war_end
				end_if
			end_if
			if I_CompareCounter hungary_civil_war_counter = 3
				if I_FactionLeaderTrait hungary FactionUsurper < 1
				and I_FactionLeaderTrait hungary Offensive_To_Nobles = 1
					set_counter hungary_civil_war_counter 2
					historic_event hungary_civil_war_continue2 factions { hungary, }
				end_if
				if I_FactionLeaderTrait hungary FactionUsurper < 1
				and I_FactionLeaderTrait hungary Offensive_To_Nobles < 1
					set_counter hungary_civil_war_counter 0
					historic_event hungary_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter hungary_civil_war_counter = 0
			and I_FactionLeaderTrait hungary Offensive_To_Nobles = 2
				historic_event hungary_civil_war_start
				set_counter hungary_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter hungary_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait hungary FactionUsurper < 1
		and I_FactionLeaderTrait hungary FactionRegent < 1
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 1
				historic_event hungary_king_event
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 2
				historic_event hungary_king_event2
			end_if
			if I_CompareCounter hungary_civil_war_counter >= 1
				historic_event hungary_civil_war_end_king
				set_counter hungary_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hungary FactionRegent >= 1
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 1
				historic_event hungary_regent_event
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 2
				historic_event hungary_regent_event2
			end_if
			if I_CompareCounter hungary_civil_war_counter >= 1
				historic_event hungary_civil_war_end_regent
				set_counter hungary_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hungary FactionUsurper >= 1
			if I_CompareCounter hungary_civil_war_counter >= 1
				historic_event hungary_civil_war_continue
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
				historic_event hungary_civil_war
				set_counter hungary_civil_war_counter 3
			end_if
		end_if
		set_counter hungary_king 0
	end_if
;RUSSIA/NOVGOROD
	if I_CompareCounter turn_fid = 10; check only once per round
		if I_FactionLeaderTrait russia Civil_Unrest >= 1
		and I_CompareCounter russia_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter russia_anarchy = 1
				historic_event civil_unrest { russia, }
			end_if
			if I_FactionLeaderTrait russia Civil_Unrest = 1
			historic_event civil_unrest1 factions { russia, }
			end_if
			if I_FactionLeaderTrait russia Civil_Unrest = 2
			historic_event civil_unrest2 factions { russia, }
			end_if
			if I_FactionLeaderTrait russia Civil_Unrest = 3
			historic_event civil_unrest3 factions { russia, }
			end_if
		end_if
		set_counter russia_anarchy 0
		if I_CompareCounter russia_king = 0
			if I_CompareCounter russia_civil_war_counter < 1
			and I_FactionLeaderTrait russia Offensive_To_Nobles = 2
				set_counter russia_civil_war_counter 1
				historic_event russia_civil_war_start
			end_if
			if I_CompareCounter russia_civil_war_counter = 1
				if I_FactionLeaderTrait russia Offensive_To_Nobles >= 1
				and I_EventCounter is_the_ai = 0
					historic_event russia_civil_war_continue factions { russia, }
				end_if
				if I_FactionLeaderTrait russia Offensive_To_Nobles < 1
					set_counter russia_civil_war_counter 0
					historic_event russia_civil_war_end
				end_if
			end_if
		end_if
	end_if
	if I_CompareCounter russia_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait russia Offensive_To_Nobles < 1
			if I_CompareCounter russia_civil_war_counter < 1
				historic_event russia_king_event
			end_if
			if I_CompareCounter russia_civil_war_counter = 1
				historic_event russia_civil_war_end_king
				set_counter russia_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait russia Offensive_To_Nobles >= 1
			if I_CompareCounter russia_civil_war_counter = 1
				historic_event russia_civil_war_continue
			end_if
			if I_CompareCounter russia_civil_war_counter < 1
				historic_event russia_civil_war
				set_counter russia_civil_war_counter 1
			end_if
		end_if
		set_counter russia_king 0
	end_if
;KIEVAN RUS
	if I_CompareCounter turn_fid = 11; check only once per round
		if I_FactionLeaderTrait kievan_rus Civil_Unrest >= 1
		and I_CompareCounter kievan_rus_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter kievan_rus_anarchy = 1
				historic_event civil_unrest { kievan_rus, }
			end_if
			if I_FactionLeaderTrait kievan_rus Civil_Unrest = 1
			historic_event civil_unrest1 factions { kievan_rus, }
			end_if
			if I_FactionLeaderTrait kievan_rus Civil_Unrest = 2
			historic_event civil_unrest2 factions { kievan_rus, }
			end_if
			if I_FactionLeaderTrait kievan_rus Civil_Unrest = 3
			historic_event civil_unrest3 factions { kievan_rus, }
			end_if
		end_if
		set_counter kievan_rus_anarchy 0
		if I_CompareCounter kievan_rus_king = 0
			if I_CompareCounter kievan_rus_civil_war_counter = 1
			and I_FactionLeaderTrait kievan_rus Offensive_To_Nobles < 1
				set_counter kievan_rus_civil_war_counter 0
				historic_event kievan_rus_civil_war_end
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter = 2
				if I_FactionLeaderTrait kievan_rus Offensive_To_Nobles = 2
					set_counter kievan_rus_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait kievan_rus Offensive_To_Nobles = 1
					historic_event kievan_rus_civil_war_continue2 factions { kievan_rus, }
				end_if
				if I_FactionLeaderTrait kievan_rus Offensive_To_Nobles < 1
					set_counter kievan_rus_civil_war_counter 0
					historic_event kievan_rus_civil_war_end
				end_if
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter = 3
				if I_FactionLeaderTrait kievan_rus FactionUsurper < 1
				and I_FactionLeaderTrait kievan_rus Offensive_To_Nobles = 1
					set_counter kievan_rus_civil_war_counter 2
					historic_event kievan_rus_civil_war_continue2 factions { kievan_rus, }
				end_if
				if I_FactionLeaderTrait kievan_rus FactionUsurper < 1
				and I_FactionLeaderTrait kievan_rus Offensive_To_Nobles < 1
					set_counter kievan_rus_civil_war_counter 0
					historic_event kievan_rus_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter = 0
			and I_FactionLeaderTrait kievan_rus Offensive_To_Nobles = 2
				historic_event kievan_rus_civil_war_start
				set_counter kievan_rus_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter kievan_rus_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait kievan_rus FactionUsurper < 1
		and I_FactionLeaderTrait kievan_rus FactionRegent < 1
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 1
				historic_event kievan_rus_king_event
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 2
				historic_event kievan_rus_king_event2
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter >= 1
				historic_event kievan_rus_civil_war_end_king
				set_counter kievan_rus_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kievan_rus FactionRegent >= 1
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 1
				historic_event kievan_rus_regent_event
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 2
				historic_event kievan_rus_regent_event2
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter >= 1
				historic_event kievan_rus_civil_war_end_regent
				set_counter kievan_rus_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kievan_rus FactionUsurper >= 1
			if I_CompareCounter kievan_rus_civil_war_counter >= 1
				historic_event kievan_rus_civil_war_continue
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
				historic_event kievan_rus_civil_war
				set_counter kievan_rus_civil_war_counter 3
			end_if
		end_if
		set_counter kievan_rus_king 0
	end_if
;LITHUANIA
	if I_CompareCounter turn_fid = 6; check only once per round
		if I_FactionLeaderTrait lithuania Civil_Unrest >= 1
		and I_CompareCounter lithuania_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter lithuania_anarchy = 1
				historic_event civil_unrest { lithuania, }
			end_if
			if I_FactionLeaderTrait lithuania Civil_Unrest = 1
			historic_event civil_unrest1 factions { lithuania, }
			end_if
			if I_FactionLeaderTrait lithuania Civil_Unrest = 2
			historic_event civil_unrest2 factions { lithuania, }
			end_if
			if I_FactionLeaderTrait lithuania Civil_Unrest = 3
			historic_event civil_unrest3 factions { lithuania, }
			end_if
		end_if
		set_counter lithuania_anarchy 0
		if I_CompareCounter lithuania_king = 0
			if I_CompareCounter lithuania_civil_war_counter = 1
			and I_FactionLeaderTrait lithuania Offensive_To_Nobles < 1
				set_counter lithuania_civil_war_counter 0
				historic_event lithuania_civil_war_end
			end_if
			if I_CompareCounter lithuania_civil_war_counter = 2
				if I_FactionLeaderTrait lithuania Offensive_To_Nobles = 2
					set_counter lithuania_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait lithuania Offensive_To_Nobles = 1
					historic_event lithuania_civil_war_continue2 factions { lithuania, }
				end_if
				if I_FactionLeaderTrait lithuania Offensive_To_Nobles < 1
					set_counter lithuania_civil_war_counter 0
					historic_event lithuania_civil_war_end
				end_if
			end_if
			if I_CompareCounter lithuania_civil_war_counter = 3
				if I_FactionLeaderTrait lithuania FactionUsurper < 1
				and I_FactionLeaderTrait lithuania Offensive_To_Nobles = 1
					set_counter lithuania_civil_war_counter 2
					historic_event lithuania_civil_war_continue2 factions { lithuania, }
				end_if
				if I_FactionLeaderTrait lithuania FactionUsurper < 1
				and I_FactionLeaderTrait lithuania Offensive_To_Nobles < 1
					set_counter lithuania_civil_war_counter 0
					historic_event lithuania_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter lithuania_civil_war_counter = 0
			and I_FactionLeaderTrait lithuania Offensive_To_Nobles = 2
				historic_event lithuania_civil_war_start
				set_counter lithuania_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter lithuania_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait lithuania FactionUsurper < 1
		and I_FactionLeaderTrait lithuania FactionRegent < 1
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 1
				historic_event lithuania_king_event
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 2
				historic_event lithuania_king_event2
			end_if
			if I_CompareCounter lithuania_civil_war_counter >= 1
				historic_event lithuania_civil_war_end_king
				set_counter lithuania_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait lithuania FactionRegent >= 1
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 1
				historic_event lithuania_regent_event
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 2
				historic_event lithuania_regent_event2
			end_if
			if I_CompareCounter lithuania_civil_war_counter >= 1
				historic_event lithuania_civil_war_end_regent
				set_counter lithuania_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait lithuania FactionUsurper >= 1
			if I_CompareCounter lithuania_civil_war_counter >= 1
				historic_event lithuania_civil_war_continue
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
				historic_event lithuania_civil_war
				set_counter lithuania_civil_war_counter 3
			end_if
		end_if
		set_counter lithuania_king 0
	end_if
;CUMANS
	if I_CompareCounter turn_fid = 7; check only once per round
		if I_FactionLeaderTrait cumans Civil_Unrest >= 1
		and I_CompareCounter cumans_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter cumans_anarchy = 1
				historic_event civil_unrest { cumans, }
			end_if
			if I_FactionLeaderTrait cumans Civil_Unrest = 1
			historic_event civil_unrest1 factions { cumans, }
			end_if
			if I_FactionLeaderTrait cumans Civil_Unrest = 2
			historic_event civil_unrest2 factions { cumans, }
			end_if
			if I_FactionLeaderTrait cumans Civil_Unrest = 3
			historic_event civil_unrest3 factions { cumans, }
			end_if
		end_if
		set_counter cumans_anarchy 0
		if I_CompareCounter cumans_king = 0
			if I_CompareCounter cumans_civil_war_counter = 1
			and I_FactionLeaderTrait cumans Offensive_To_Nobles < 1
				set_counter cumans_civil_war_counter 0
				historic_event cumans_civil_war_end
			end_if
			if I_CompareCounter cumans_civil_war_counter = 2
				if I_FactionLeaderTrait cumans Offensive_To_Nobles = 2
					set_counter cumans_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait cumans Offensive_To_Nobles = 1
					historic_event cumans_civil_war_continue2 factions { cumans, }
				end_if
				if I_FactionLeaderTrait cumans Offensive_To_Nobles < 1
					set_counter cumans_civil_war_counter 0
					historic_event cumans_civil_war_end
				end_if
			end_if
			if I_CompareCounter cumans_civil_war_counter = 3
				if I_FactionLeaderTrait cumans FactionUsurper < 1
				and I_FactionLeaderTrait cumans Offensive_To_Nobles = 1
					set_counter cumans_civil_war_counter 2
					historic_event cumans_civil_war_continue2 factions { cumans, }
				end_if
				if I_FactionLeaderTrait cumans FactionUsurper < 1
				and I_FactionLeaderTrait cumans Offensive_To_Nobles < 1
					set_counter cumans_civil_war_counter 0
					historic_event cumans_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter cumans_civil_war_counter = 0
			and I_FactionLeaderTrait cumans Offensive_To_Nobles = 2
				historic_event cumans_civil_war_start
				set_counter cumans_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter cumans_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait cumans FactionUsurper < 1
		and I_FactionLeaderTrait cumans FactionRegent < 1
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 1
				historic_event cumans_king_event
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 2
				historic_event cumans_king_event2
			end_if
			if I_CompareCounter cumans_civil_war_counter >= 1
				historic_event cumans_civil_war_end_king
				set_counter cumans_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait cumans FactionRegent >= 1
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 1
				historic_event cumans_regent_event
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 2
				historic_event cumans_regent_event2
			end_if
			if I_CompareCounter cumans_civil_war_counter >= 1
				historic_event cumans_civil_war_end_regent
				set_counter cumans_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait cumans FactionUsurper >= 1
			if I_CompareCounter cumans_civil_war_counter >= 1
				historic_event cumans_civil_war_continue
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
				historic_event cumans_civil_war
				set_counter cumans_civil_war_counter 3
			end_if
		end_if
		set_counter cumans_king 0
	end_if
;GEORGIA
	if I_CompareCounter turn_fid = 29; check only once per round
		if I_FactionLeaderTrait georgia Civil_Unrest >= 1
		and I_CompareCounter georgia_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter georgia_anarchy = 1
				historic_event civil_unrest { georgia, }
			end_if
			if I_FactionLeaderTrait georgia Civil_Unrest = 1
			historic_event civil_unrest1 factions { georgia, }
			end_if
			if I_FactionLeaderTrait georgia Civil_Unrest = 2
			historic_event civil_unrest2 factions { georgia, }
			end_if
			if I_FactionLeaderTrait georgia Civil_Unrest = 3
			historic_event civil_unrest3 factions { georgia, }
			end_if
		end_if
		set_counter georgia_anarchy 0
		if I_CompareCounter georgia_king = 0
			if I_CompareCounter georgia_civil_war_counter = 1
			and I_FactionLeaderTrait georgia Offensive_To_Nobles < 1
				set_counter georgia_civil_war_counter 0
				historic_event georgia_civil_war_end
			end_if
			if I_CompareCounter georgia_civil_war_counter = 2
				if I_FactionLeaderTrait georgia Offensive_To_Nobles = 2
					set_counter georgia_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait georgia Offensive_To_Nobles = 1
					historic_event georgia_civil_war_continue2 factions { georgia, }
				end_if
				if I_FactionLeaderTrait georgia Offensive_To_Nobles < 1
					set_counter georgia_civil_war_counter 0
					historic_event georgia_civil_war_end
				end_if
			end_if
			if I_CompareCounter georgia_civil_war_counter = 3
				if I_FactionLeaderTrait georgia FactionUsurper < 1
				and I_FactionLeaderTrait georgia Offensive_To_Nobles = 1
					set_counter georgia_civil_war_counter 2
					historic_event georgia_civil_war_continue2 factions { georgia, }
				end_if
				if I_FactionLeaderTrait georgia FactionUsurper < 1
				and I_FactionLeaderTrait georgia Offensive_To_Nobles < 1
					set_counter georgia_civil_war_counter 0
					historic_event georgia_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter georgia_civil_war_counter = 0
			and I_FactionLeaderTrait georgia Offensive_To_Nobles = 2
				historic_event georgia_civil_war_start
				set_counter georgia_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter georgia_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait georgia FactionUsurper < 1
		and I_FactionLeaderTrait georgia FactionRegent < 1
			if I_CompareCounter georgia_civil_war_counter < 1
			and I_CompareCounter georgia_king = 1
				historic_event georgia_king_event
			end_if
			if I_CompareCounter georgia_civil_war_counter < 1
			and I_CompareCounter georgia_king = 2
				historic_event georgia_king_event2
			end_if
			if I_CompareCounter georgia_civil_war_counter >= 1
				historic_event georgia_civil_war_end_king
				set_counter georgia_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait georgia FactionRegent >= 1
			if I_CompareCounter georgia_civil_war_counter < 1
			and I_CompareCounter georgia_king = 1
				historic_event georgia_regent_event
			end_if
			if I_CompareCounter georgia_civil_war_counter < 1
			and I_CompareCounter georgia_king = 2
				historic_event georgia_regent_event2
			end_if
			if I_CompareCounter georgia_civil_war_counter >= 1
				historic_event georgia_civil_war_end_regent
				set_counter georgia_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait georgia FactionUsurper >= 1
			if I_CompareCounter georgia_civil_war_counter >= 1
				historic_event georgia_civil_war_continue
			end_if
			if I_CompareCounter georgia_civil_war_counter < 1
				historic_event georgia_civil_war
				set_counter georgia_civil_war_counter 3
			end_if
		end_if
		set_counter georgia_king 0
	end_if
;TIMURIDS/ABBASIDS
	if I_CompareCounter turn_fid = 3; check only once per round
		if I_FactionLeaderTrait timurids Civil_Unrest >= 1
		and I_CompareCounter timurids_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter timurids_anarchy = 1
				historic_event civil_unrest { timurids, }
			end_if
			if I_FactionLeaderTrait timurids Civil_Unrest = 1
			historic_event civil_unrest1 factions { timurids, }
			end_if
			if I_FactionLeaderTrait timurids Civil_Unrest = 2
			historic_event civil_unrest2 factions { timurids, }
			end_if
			if I_FactionLeaderTrait timurids Civil_Unrest = 3
			historic_event civil_unrest3 factions { timurids, }
			end_if
		end_if
		set_counter timurids_anarchy 0
		if I_CompareCounter timurids_king = 0
			if I_CompareCounter timurids_civil_war_counter = 1
			and I_FactionLeaderTrait timurids Offensive_To_Nobles < 1
				set_counter timurids_civil_war_counter 0
				historic_event timurids_civil_war_end
			end_if
			if I_CompareCounter timurids_civil_war_counter = 2
				if I_FactionLeaderTrait timurids Offensive_To_Nobles = 2
					set_counter timurids_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait timurids Offensive_To_Nobles = 1
					historic_event timurids_civil_war_continue2 factions { timurids, }
				end_if
				if I_FactionLeaderTrait timurids Offensive_To_Nobles < 1
					set_counter timurids_civil_war_counter 0
					historic_event timurids_civil_war_end
				end_if
			end_if
			if I_CompareCounter timurids_civil_war_counter = 3
				if I_FactionLeaderTrait timurids FactionUsurper < 1
				and I_FactionLeaderTrait timurids Offensive_To_Nobles = 1
					set_counter timurids_civil_war_counter 2
					historic_event timurids_civil_war_continue2 factions { timurids, }
				end_if
				if I_FactionLeaderTrait timurids FactionUsurper < 1
				and I_FactionLeaderTrait timurids Offensive_To_Nobles < 1
					set_counter timurids_civil_war_counter 0
					historic_event timurids_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter timurids_civil_war_counter = 0
			and I_FactionLeaderTrait timurids Offensive_To_Nobles = 2
				historic_event timurids_civil_war_start
				set_counter timurids_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter timurids_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait timurids FactionUsurper < 1
		and I_FactionLeaderTrait timurids FactionRegent < 1
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 1
				historic_event timurids_king_event
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 2
				historic_event timurids_king_event2
			end_if
			if I_CompareCounter timurids_civil_war_counter >= 1
				historic_event timurids_civil_war_end_king
				set_counter timurids_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait timurids FactionRegent >= 1
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 1
				historic_event timurids_regent_event
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 2
				historic_event timurids_regent_event2
			end_if
			if I_CompareCounter timurids_civil_war_counter >= 1
				historic_event timurids_civil_war_end_regent
				set_counter timurids_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait timurids FactionUsurper >= 1
			if I_CompareCounter timurids_civil_war_counter >= 1
				historic_event timurids_civil_war_continue
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
				historic_event timurids_civil_war
				set_counter timurids_civil_war_counter 3
			end_if
		end_if
		set_counter timurids_king 0
	end_if
;MONGOLS
	if I_CompareCounter turn_fid = 8; check only once per round
		if I_FactionLeaderTrait mongols Civil_Unrest >= 1
		and I_CompareCounter mongols_civil_war_counter < 1
		and I_EventCounter is_the_ai = 0
			if I_CompareCounter mongols_anarchy = 1
				historic_event civil_unrest { mongols, }
			end_if
			if I_FactionLeaderTrait mongols Civil_Unrest = 1
			historic_event civil_unrest1 factions { mongols, }
			end_if
			if I_FactionLeaderTrait mongols Civil_Unrest = 2
			historic_event civil_unrest2 factions { mongols, }
			end_if
			if I_FactionLeaderTrait mongols Civil_Unrest = 3
			historic_event civil_unrest3 factions { mongols, }
			end_if
		end_if
		set_counter mongols_anarchy 0
		if I_CompareCounter mongols_king = 0
			if I_CompareCounter mongols_civil_war_counter = 1
			and I_FactionLeaderTrait mongols Offensive_To_Nobles < 1
				set_counter mongols_civil_war_counter 0
				historic_event mongols_civil_war_end
			end_if
			if I_CompareCounter mongols_civil_war_counter = 2
				if I_FactionLeaderTrait mongols Offensive_To_Nobles = 2
					set_counter mongols_civil_war_counter 3
				end_if
				if I_FactionLeaderTrait mongols Offensive_To_Nobles = 1
					historic_event mongols_civil_war_continue2 factions { mongols, }
				end_if
				if I_FactionLeaderTrait mongols Offensive_To_Nobles < 1
					set_counter mongols_civil_war_counter 0
					historic_event mongols_civil_war_end
				end_if
			end_if
			if I_CompareCounter mongols_civil_war_counter = 3
				if I_FactionLeaderTrait mongols FactionUsurper < 1
				and I_FactionLeaderTrait mongols Offensive_To_Nobles = 1
					set_counter mongols_civil_war_counter 2
					historic_event mongols_civil_war_continue2 factions { mongols, }
				end_if
				if I_FactionLeaderTrait mongols FactionUsurper < 1
				and I_FactionLeaderTrait mongols Offensive_To_Nobles < 1
					set_counter mongols_civil_war_counter 0
					historic_event mongols_civil_war_end_usurper
				end_if
			end_if
			if I_CompareCounter mongols_civil_war_counter = 0
			and I_FactionLeaderTrait mongols Offensive_To_Nobles = 2
				historic_event mongols_civil_war_start
				set_counter mongols_civil_war_counter 1
			end_if
		end_if
	end_if
	if I_CompareCounter mongols_king >= 1
	and I_EventCounter is_the_ai = 0
		if I_FactionLeaderTrait mongols FactionUsurper < 1
		and I_FactionLeaderTrait mongols FactionRegent < 1
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 1
				historic_event mongols_king_event
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 2
				historic_event mongols_king_event2
			end_if
			if I_CompareCounter mongols_civil_war_counter >= 1
				historic_event mongols_civil_war_end_king
				set_counter mongols_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait mongols FactionRegent >= 1
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 1
				historic_event mongols_regent_event
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 2
				historic_event mongols_regent_event2
			end_if
			if I_CompareCounter mongols_civil_war_counter >= 1
				historic_event mongols_civil_war_end_regent
				set_counter mongols_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait mongols FactionUsurper >= 1
			if I_CompareCounter mongols_civil_war_counter >= 1
				historic_event mongols_civil_war_continue
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
				historic_event mongols_civil_war
				set_counter mongols_civil_war_counter 3
			end_if
		end_if
		set_counter mongols_king 0
	end_if
	
end_monitor

;========================================================
;================= Interactive Events ===================
;========================================================
; This section is link with the "Reset Counters" section
; No interactive event is available for the slave faction

;=========== Reload-safe Yes/No Events ==========
declare_counter awaiting_answer_ie
declare_counter awaiting_answer_great_fair
declare_counter awaiting_answer_great_tourney
declare_counter awaiting_answer_troubadours
declare_counter awaiting_answer_great_council

monitor_event GameReloaded I_CompareCounter awaiting_answer_ie > 0

		campaign_wait 0.1

 if I_HotseatEnabled
	if I_CompareCounter awaiting_answer_great_fair = 1
		set_event_counter HS_Great_Fair 0
	end_if
	if I_CompareCounter awaiting_answer_great_tourney = 1
		set_event_counter HS_Great_Tourney 0
	end_if
	if I_CompareCounter awaiting_answer_troubadours = 1
		set_event_counter HS_Troubadours_Event 0
	end_if
	if I_CompareCounter awaiting_answer_great_council = 1
		set_event_counter HS_Great_Council 0
	end_if
 end_if

 if not I_HotseatEnabled
	if I_CompareCounter awaiting_answer_great_fair = 1
		historic_event great_fair true
	end_if
	if I_CompareCounter awaiting_answer_great_tourney = 1
		historic_event great_tourney true
	end_if
	if I_CompareCounter awaiting_answer_troubadours = 1
		historic_event troubadours_event true
	end_if
	if I_CompareCounter awaiting_answer_great_council = 1
		historic_event great_council true
	end_if
 end_if

end_monitor

;============== Great Trade Fairs ===============
monitor_event FactionTurnStart not IsFactionAIControlled
	and RandomPercent < 6
	and FactionBuildingExists > fairground
	and Treasury > 20000

	if I_HotseatEnabled
	 inc_event_counter HS_Great_Fair 1
	end_if

	if not I_HotseatEnabled
	 historic_event great_fair true
	end_if

	set_counter awaiting_answer_great_fair 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Great_Fair

	if not I_HotseatEnabled
	 terminate_monitor
	end_if

;	if I_LocalFaction slave
;  historic_event great_fair true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event great_fair true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event great_fair true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event great_fair true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event great_fair true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event great_fair true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event great_fair true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event great_fair true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event great_fair true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event great_fair true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_fair true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_fair true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_fair true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_fair true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_fair true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_fair true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_fair true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_fair true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_fair true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_fair true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event great_fair true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event great_fair true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_fair true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_fair true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_fair true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_fair true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_fair true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_fair true factions { jerusalem, }
	end_if
	if I_LocalFaction georgia
  historic_event great_fair true factions { georgia, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_fair true factions { papal_states, }
	end_if

end_monitor
if not I_HotseatEnabled ; terminate previous monitor
 set_event_counter HS_Great_Fair 1
end_if

; answered "yes"
monitor_event EventCounter EventCounterType great_fair_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_great_fair 0
	inc_counter awaiting_answer_ie -1
end_monitor

; answered "no"
monitor_event EventCounter EventCounterType great_fair_declined
	and EventCounter = 1

	set_counter awaiting_answer_great_fair 0
	inc_counter awaiting_answer_ie -1
end_monitor 

;================ Great Tourney =================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and FactionBuildingExists > jousting_lists
	and RandomPercent < 7
	and Treasury > 15000

	if not I_HotseatEnabled
   historic_event great_tourney true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Great_Tourney 1
	end_if

	set_counter awaiting_answer_great_tourney 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Great_Tourney

	if not I_HotseatEnabled
	 terminate_monitor
	end_if

;	if I_LocalFaction slave
;  historic_event great_tourney true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event great_tourney true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event great_tourney true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event great_tourney true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event great_tourney true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event great_tourney true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event great_tourney true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event great_tourney true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event great_tourney true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event great_tourney true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_tourney true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_tourney true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_tourney true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_tourney true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_tourney true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_tourney true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_tourney true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_tourney true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_tourney true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_tourney true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event great_tourney true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event great_tourney true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_tourney true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_tourney true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_tourney true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_tourney true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_tourney true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_tourney true factions { jerusalem, }
	end_if
	if I_LocalFaction georgia
  historic_event great_tourney true factions { georgia, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_tourney true factions { papal_states, }
	end_if

end_monitor
if not I_HotseatEnabled
 set_event_counter HS_Great_Tourney 1
end_if

monitor_event EventCounter EventCounterType great_tourney_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_great_tourney 0
	inc_counter awaiting_answer_ie -1
end_monitor

monitor_event EventCounter EventCounterType great_tourney_declined
	and EventCounter = 1

	set_counter awaiting_answer_great_tourney 0
	inc_counter awaiting_answer_ie -1
end_monitor 


;================= Troubadours ==================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and RandomPercent < 3
	and FactionBuildingExists > town_hall
	and Treasury > 10000

	if not I_HotseatEnabled
   historic_event troubadours_event true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Troubadours_Event 1
	end_if

	set_counter awaiting_answer_troubadours 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Troubadours_Event

	if not I_HotseatEnabled
	 terminate_monitor
	end_if
;	if I_LocalFaction slave
;  historic_event troubadours_event true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event troubadours_event true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event troubadours_event true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event troubadours_event true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event troubadours_event true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event troubadours_event true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event troubadours_event true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event troubadours_event true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event troubadours_event true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event troubadours_event true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event troubadours_event true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event troubadours_event true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event troubadours_event true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event troubadours_event true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event troubadours_event true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event troubadours_event true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event troubadours_event true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event troubadours_event true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event troubadours_event true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event troubadours_event true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event troubadours_event true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event troubadours_event true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event troubadours_event true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event troubadours_event true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event troubadours_event true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event troubadours_event true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event troubadours_event true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event troubadours_event true factions { jerusalem, }
	end_if
	if I_LocalFaction georgia
  historic_event troubadours_event true factions { georgia, }
	end_if
	if I_LocalFaction papal_states
  historic_event troubadours_event true factions { papal_states, }
	end_if
end_monitor
if not I_HotseatEnabled
 set_event_counter HS_Troubadours_Event 1
end_if

;-- answered "yes"
monitor_event EventCounter EventCounterType troubadours_event_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_troubadours 0
	inc_counter awaiting_answer_ie -1
end_monitor

;-- answered "no"
monitor_event EventCounter EventCounterType troubadours_event_declined
	and EventCounter = 1

	set_counter awaiting_answer_troubadours 0
	inc_counter awaiting_answer_ie -1
end_monitor 


;================ Great Councils ================

add_events
	event    counter    L_Council_END
	date     211
end_add_events

;--- hotseat game only
monitor_event EventCounter EventCounterType HS_Great_Council

	if I_EventCounter L_Council = 10
	 terminate_monitor
	end_if

	if I_LocalFaction byzantium
  historic_event great_council true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_council true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_council true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_council true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_council true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_council true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_council true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_council true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_council true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_council true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_council true factions { england, }
	end_if
	if I_LocalFaction poland
  historic_event great_council true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_council true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_council true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_council true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_council true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_council true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_council true factions { jerusalem, }
	end_if
	if I_LocalFaction georgia
  historic_event great_council true factions { georgia, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_council true factions { papal_states, }
	end_if
	if I_LocalFaction lithuania
	and I_EventCounter lithuania_catholic = 1
  historic_event great_council true factions { lithuania, }
	end_if
end_monitor

;--- Great Councils Setup
; no great councils if it's not a hotseat game and the local faction is not christian
if not I_HotseatEnabled

	set_event_counter L_Council 10
	set_event_counter HS_Great_Council 1

	if not I_LocalFaction egypt
	and not I_LocalFaction turks
	and not I_LocalFaction timurids
	and not I_LocalFaction kwarezm
	and not I_LocalFaction moors
	and not I_LocalFaction cumans
	and not I_LocalFaction portugal
	;and not I_LocalFaction lithuania
		set_event_counter L_Council 0
	end_if

end_if

; These are the dates that lateran_council events take place
if I_EventCounter L_Council = 0
 add_events
	event    counter    L_Council
	date     24
	event    counter    L_Council
	date     40
	event    counter    L_Council
	date     78
	event    counter    L_Council
	date     116
	event    counter    L_Council
	date     145
	event    counter    L_Council
	date     174
	event    counter    L_Council
	date     211
 end_add_events
end_if

;--- Great Councils main
monitor_event FactionTurnStart I_EventCounter L_Council > 0

	set_event_counter great_council_accepted 0
	;set_event_counter great_council_declined 0
	set_counter awaiting_answer_great_council 0

	if I_EventCounter L_Council = 10
		set_event_counter great_council_accepted 1
		inc_event_counter great_council_declined 1
	 terminate_monitor
	end_if

	if I_HotseatEnabled
		if I_EventCounter is_the_ai = 0
		and I_CompareCounter christian_faction = 1 ; it has to be a christian faction's turn 
			inc_event_counter HS_Great_Council 1

			set_counter awaiting_answer_great_council 1
			inc_counter awaiting_answer_ie 1
		end_if

		if I_CompareCounter turn_fid = 0 ; slaves' turn
			if I_EventCounter L_Council_END = 1 ; terminate "Great Councils"
				set_event_counter L_Council 10
				inc_event_counter HS_Great_Council 1
				set_event_counter great_council_accepted 1
				set_event_counter great_council_declined 1
				terminate_monitor
			end_if
			set_event_counter L_Council 0
		end_if
	end_if


	if not I_HotseatEnabled
		if I_EventCounter is_the_ai = 1
	 		set_event_counter L_Council 0
		end_if

		if I_EventCounter is_the_ai = 0
			historic_event great_council true

			set_counter awaiting_answer_great_council 1
			inc_counter awaiting_answer_ie 1
		end_if

		if I_EventCounter L_Council_END = 1
			set_event_counter L_Council 10 ; in order to terminate great councils next turn
		end_if

	end_if

end_monitor

;--- answered "yes"
monitor_event EventCounter EventCounterType great_council_accepted
	and EventCounter > 0

	if I_EventCounter L_Council = 10
	 set_event_counter great_council_accepted 0
	 terminate_monitor
	end_if

	console_command add_money -1500

	set_counter awaiting_answer_great_council 0
	inc_counter awaiting_answer_ie -1

end_monitor

;--- answered "no"
monitor_event EventCounter EventCounterType great_council_declined
	;and EventCounter > 0

	if I_EventCounter L_Council = 10
	 ;set_event_counter great_council_declined 0
	 terminate_monitor
	end_if

	set_counter awaiting_answer_great_council 0
	inc_counter awaiting_answer_ie -1

end_monitor


;=================== Pirates ====================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and Treasury > 75000
	and FactionBuildingExists >= port
	and RandomPercent < 5

	if not I_HotseatEnabled
   historic_event pirates true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Pirates 1
	end_if

	set_counter awaiting_answer_pirates 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Pirates

	if not I_HotseatEnabled
	 terminate_monitor
	end_if
	if I_LocalFaction egypt
  historic_event pirates true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event pirates true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event pirates true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event pirates true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event pirates true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event pirates true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event pirates true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event pirates true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event pirates true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event pirates true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event pirates true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event pirates true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event pirates true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event pirates true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event pirates true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event pirates true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event pirates true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event pirates true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event pirates true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event pirates true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event pirates true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event pirates true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event pirates true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event pirates true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event pirates true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event pirates true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event pirates true factions { jerusalem, }
	end_if
	if I_LocalFaction georgia
  historic_event pirates true factions { georgia, }
	end_if
	if I_LocalFaction papal_states
  historic_event pirates true factions { papal_states, }
	end_if

end_monitor

if not I_HotseatEnabled
 set_event_counter HS_Pirates 1
end_if

; answered "yes"
monitor_event EventCounter EventCounterType pirates_accepted

	console_command add_money -5000

	set_counter awaiting_answer_pirates 0
	inc_counter awaiting_answer_ie -1
end_monitor

; answered "no"
monitor_event EventCounter EventCounterType pirates_declined

	set_counter awaiting_answer_pirates 0
	inc_counter awaiting_answer_ie -1

	if RandomPercent > 50
	console_command add_money -12000
	end_if
end_monitor 



;========================================================
;********************************************************
;******** EMERGENT FACTIONS/NATIONAL UPRISINGS **********
;********************************************************
;========================================================

;============== William Wallace Uprising ================
add_events
	event	counter	WilliamWallaceSet
	date	60
	event	counter	WilliamWallaceSet
	date	131
	event	counter	WilliamWallaceSet
	date	180
end_add_events

declare_counter wallace_spawned
set_counter wallace_spawned 0

monitor_event FactionTurnStart FactionType scotland
	and I_EventCounter WilliamWallaceSet = 3

	if I_CompareCounter wallace_spawned = 0
	and I_NumberOfSettlements scotland < 4
		set_counter wallace_spawned 1
	end_if
	
terminate_monitor
end_monitor

monitor_event FactionTurnStart FactionType scotland
	and I_EventCounter WilliamWallaceSet >= 1
	and I_NumberOfSettlements scotland < 2

	if I_CompareCounter wallace_spawned = 0
	set_counter wallace_spawned 1
	end_if

terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement FactionType england
	and TargetFactionType scotland
	and I_EventCounter WilliamWallaceSet >= 2

	if I_CompareCounter wallace_spawned = 0
	set_counter wallace_spawned 1
	end_if

terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionType scotland
	and I_CompareCounter wallace_spawned = 1

	spawn_army 
		faction scotland
		;OLD;character	William Wallace, named character, age 20, x 55, y 253, direction SE, battle_model Wallace_General, portrait wallace, label scotland4wallace
		character	Uilliam Wallace, named character, age 20, x 56, y 252, direction SE, battle_model Wallace_General, portrait wallace, label scotland4wallace
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , ScotlandHero 1 , LoyaltyStarter 1, BattleChivalry 2 , Loyal 2 , Just 2 , Rabblerouser 3 , Hardened 1 , Upright 2 , Austere 2 
		unit		Highland Nobles	exp 4 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 2 armour 0 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
	end	   

	spawn_army 
		faction scotland
		character	random_name, named character, age 26, x 54, y 254
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , LoyaltyStarter 1, BattleChivalry 2 , Loyal 2 , Just 2 , Rabblerouser 3 , Hardened 1 
		unit		Highland Nobles	exp 4 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 2 armour 0 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
	end

	historic_event scotland_wallace event/william_wallace.bik
	set_counter wallace_spawned 2
terminate_monitor
end_monitor

monitor_event CharacterTurnStart CharFactionType scotland
	and Trait ScotlandHero = 1
	and I_IsFactionAIControlled scotland
	
	if I_SettlementOwner Edinburgh = scotland
		terminate_monitor
	end_if
	
	if I_AtSea scotland4wallace ; to avoid the case he lost a battle and retreated at a ship near Edinburgh
		set_counter wallace_spawned 4
	end_if

	if I_SettlementUnderSiege Edinburgh;if settlement under siege already, avoid ctd.
	and I_CompareCounter wallace_spawned != 3
		set_counter wallace_spawned 4
	end_if

	if not I_CharacterTypeNearTile scotland, named_character, 5, 57, 248 ;if character not standing where it should, avoid ctd
		set_counter wallace_spawned 4
	end_if

	if I_SettlementUnderSiege Edinburgh
	and I_CompareCounter wallace_spawned = 3
		siege_settlement scotland4wallace, Edinburgh, attack
		set_counter wallace_spawned 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Edinburgh
	and I_CompareCounter wallace_spawned != 4
		siege_settlement scotland4wallace, Edinburgh, maintain
		set_counter wallace_spawned 3
	end_if
	
	if I_CompareCounter wallace_spawned = 4
		set_counter wallace_spawned 2
	end_if
end_monitor

;============== Saladin Emergent ================
add_events
	event	counter	SaladinSet
	date	63
	event	counter	SaladinSet
	date	71
end_add_events

declare_counter saladin_spawned
set_counter saladin_spawned 0

monitor_event FactionTurnStart FactionType egypt
	and I_EventCounter SaladinSet = 2

	if I_CompareCounter saladin_spawned = 0
		set_counter saladin_spawned 2
	end_if
	
terminate_monitor
end_monitor

monitor_event FactionTurnStart FactionType egypt
	and I_EventCounter SaladinSet >= 1
	and I_NumberOfSettlements egypt < 4

	if I_CompareCounter saladin_spawned = 0
		set_counter saladin_spawned 1
	end_if

terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionType egypt
	and I_CompareCounter saladin_spawned >= 1

	if I_CompareCounter saladin_spawned = 2
		spawn_army 
		faction egypt
		character	Salahaddin Al_Ayyubi, named character, age 34, x 304, y 61, family, direction SE, portrait saladin, label egypt4saladin
		traits LoyaltyStarter 1, ReligionStarter 1 , MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , EgyptHero 1 , BattleChivalry 2 , Loyal 2 , Just 2 , Upright 2 , Austere 2 
		unit   ME Bodyguard			exp 6 armour 0 weapon_lvl 0
		unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
		unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
		unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
		unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
		unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_CompareCounter saladin_spawned = 1
		spawn_army 
		faction egypt
		character	Asadaddin Shirkuh, named character, age 41, x 303, y 61, family, direction SE, label egypt4shirkuh
		traits LoyaltyStarter 1, ReligionStarter 1 , MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3
		unit   ME Bodyguard			exp 6 armour 0 weapon_lvl 0
		unit   Arab Cavalry			exp 3 armour 1 weapon_lvl 0
		unit   Desert Cavalry			exp 3 armour 0 weapon_lvl 0
		unit   Dismounted Arab Cavalry	exp 3 armour 0 weapon_lvl 0
		unit   Dismounted Arab Cavalry	exp 1 armour 0 weapon_lvl 0
		unit   Saracen Militia			exp 3 armour 0 weapon_lvl 0
		unit   Saracen Militia			exp 1 armour 0 weapon_lvl 0
		unit   Desert Archers			exp 2 armour 0 weapon_lvl 0
		unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
		unit   Mamluk Archers			exp 3 armour 0 weapon_lvl 0
		unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
		end
		spawn_army 
		faction egypt
		character	Salahaddin Al_Ayyubi, named character, age 26, x 304, y 61, family, direction SE, portrait saladin, label egypt4saladin
		traits LoyaltyStarter 1, ReligionStarter 1 , MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , EgyptHero 1 , BattleChivalry 2 , Loyal 2 , Just 2 , Upright 2 , Austere 2 
		unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
		unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
		unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
		unit   Dismounted Arab Cavalry	exp 2 armour 0 weapon_lvl 0
		unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
		unit   Saracen Militia			exp 2 armour 0 weapon_lvl 0
		unit   Saracen Militia			exp 1 armour 0 weapon_lvl 0
		unit   Desert Archers			exp 2 armour 0 weapon_lvl 0
		unit   Mamluk Archers			exp 3 armour 0 weapon_lvl 0
		unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
		end
	end_if

	historic_event egypt_saladin false factions { egypt, }
	set_counter saladin_spawned -1
terminate_monitor
end_monitor

;============== Teutonic Order Emergent =================
;monitor_event FactionTurnEnd FactionType slave;	testing
;	and I_TurnNumber = 1;			testing
monitor_event EventCounter EventCounterType inquisition
	and EventCounter > 0

	add_events
		event emergent_faction teutonic_order
		date	0
	end_add_events

	spawn_army
		faction teutonic_order
;		OLD;character Herrmann von_Salza, named character, age 40, x 231, y 244, label teuton4leader, family
;		Now Spawns right under Palanga
		character Herrmann von_Salza, named character, family, age 40, x 224, y 238, label teuton4leader, direction N
		traits FactionleaderTO 1, MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 3 , ContentGeneral 3 , Prim 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order, 5000

	spawn_army
		faction teutonic_order
;		OLD;character Conrad von_Thuringen, named character, age 30, x 232, y 243, label teuton4heir, family
;		Now Spawns right under Riga
		character Conrad von_Thuringen, named character, family, age 30, x 250, y 254, label teuton4heir, direction N
		traits FactionheirTO 1, MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 1 , GoodCommander 2 , LoyaltyStarter 1 , Drink 1 , PublicFaith 1 , ContentGeneral 3 , ReligionStarter 1
		unit	TO Bodyguard 		exp 3 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 1 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 2 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order, 5000
	spawn_character teutonic_order random_name, priest, age 27, x 222, y 238 
	spawn_character teutonic_order random_name, priest, age 35, x 224, y 236
		
	historic_event teutonic_order_invasion event/teutonic_faction_intro.bik

	if I_EventCounter obotrites_exist != 1
	console_command diplomatic_stance teutonic_order lithuania war
	end_if

terminate_monitor
end_monitor

declare_counter attack_palanga
set_counter attack_palanga 0

;monitor_event FactionTurnStart FactionType teutonic_order
monitor_event CharacterTurnStart CharFactionType teutonic_order
	and Trait FactionleaderTO = 1
	and not I_SettlementOwner Palanga = teutonic_order
	and I_IsFactionAIControlled teutonic_order
	;and I_CharacterExists teuton4leader
	;and I_CharacterExists teuton4heir
	
	if I_AtSea teuton4leader; to avoid the case he lost a battle and retreated at a ship nearby
		terminate_monitor
	end_if
	;if I_AtSea teuton4heir; to avoid the case he lost a battle and retreated at a ship nearby
	;	terminate_monitor
	;end_if

	if I_SettlementUnderSiege Palanga;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_palanga = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile teutonic_order, named_character, 5, 224, 239 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Palanga
	and I_CompareCounter attack_palanga = 1
		siege_settlement teuton4leader, Palanga, attack
		set_counter attack_palanga 2
		;move teuton4heir, 250, 255;for riga
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Palanga
		siege_settlement teuton4leader, Palanga, maintain
		;siege_settlement teuton4heir, Palanga, maintain
		set_counter attack_palanga 1
	end_if
end_monitor

declare_counter attack_riga
set_counter attack_riga 0

;monitor_event FactionTurnStart FactionType teutonic_order
monitor_event CharacterTurnStart CharFactionType teutonic_order
	and Trait FactionheirTO = 1
	and not I_SettlementOwner Riga = teutonic_order
	and I_IsFactionAIControlled teutonic_order
	;and I_CompareCounter attack_palanga = 2
	;and I_CharacterTypeNearTile teutonic_order, named_character, 5, 250, 255
	;and I_CharacterExists teuton4heir
	
	if I_AtSea teuton4heir ; to avoid the case he lost a battle and retreated at a ship nearby
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Riga;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_riga = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile teutonic_order, named_character, 5, 250, 255 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Riga
	and I_CompareCounter attack_riga = 1
		siege_settlement teuton4heir, Riga, attack
		set_counter attack_riga 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Riga
		siege_settlement teuton4heir, Riga, maintain
		set_counter attack_riga 1
	end_if
end_monitor

add_events
	event	counter	Teutonic2Order
	date	165
	event	counter	Teutonic2Order
	date	166
	event	counter	Teutonic2Order
	date	170
	event	counter	Teutonic2Order
	date	171
end_add_events

monitor_event FactionTurnStart FactionType teutonic_order
	and I_IsFactionAIControlled lithuania
	and I_EventCounter Teutonic2Order < 3

	if I_EventCounter obotrites_exist = 1
		terminate_monitor
	end_if
	console_command diplomatic_stance teutonic_order lithuania war

end_monitor

monitor_event FactionTurnStart FactionType teutonic_order
	and I_EventCounter Teutonic2Order = 1

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 40, x 231, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order 5000
terminate_monitor
end_monitor

monitor_event FactionTurnStart FactionType teutonic_order
	and I_EventCounter Teutonic2Order = 3
	and not I_SettlementOwner Palanga = teutonic_order
	and not I_SettlementOwner Riga = teutonic_order

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 40, x 232, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 22, x 233, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 20, x 234, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 3 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order 40000
terminate_monitor
end_monitor

;=============== Golden Horde Emergent ==================
monitor_event EventCounter EventCounterType mongols_invasion_warn
	and EventCounter = 1

	add_events
		event	emergent_faction	mongols
		date	7
		event	counter	mongols_invasion
		date	7
		event	counter	mongols_invasion
		date	11
		event	counter	mongols_invasion
		date	20
		event	counter	mongols_invasion
		date	36
		event	counter	mongols_invasion
		date	56
		event	counter	mongols_invasion
		date	107
	end_add_events
terminate_monitor
end_monitor

;--human part
;--ai part

monitor_event EventCounter EventCounterType mongols_invasion
	and EventCounter = 1
	and I_IsFactionAIControlled mongols

	set_event_counter mongols_emerged 1
	historic_event the_mongols_emerge event/mongols_invade.bik

	;Faction Leader
	spawn_army ;Urgench
		faction mongols
		character	Genghis, named character, age 48, x 500, y 153, label mongols4genghis, family
		traits Factionleader 1 , MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	;Faction Heir
	spawn_army ;Khiva
		faction mongols
		character	Jebe, named character, age 25, x 505, y 146, label mongols4jebe, family
		traits Factionheir 1 , MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	add_money mongols 15000

	spawn_army ;Urgench
		faction mongols
		character	Aradai, named character, age 22, x 501, y 154, label mongols4aradai, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 1 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, general, age 48, x 503, y 152
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, general, age 48, x 498, y 153
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;Khiva
		faction mongols
		character	Bayan, named character, age 21, x 504, y 147, label mongols4bayan, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , InvasionCharacterCounter 2 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	add_money mongols 15000

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 500, y 143
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 500, y 147
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	spawn_army ;Konjikala
		faction mongols
		character	Chindu, named character, age 25, x 490, y 125, label mongols4chindu, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 3 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 3 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	add_money mongols 5000

	spawn_army ;Konjikala
		faction mongols
		character	Nayuk, named character, age 21, x 491, y 126, label mongols4nayuk, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 4 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	add_money mongols 5000

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 493, y 126
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 23, x 480, y 140 
	spawn_character mongols random_name, priest, age 24, x 500, y 98 
	spawn_character mongols random_name, priest, age 27, x 470, y 120
	spawn_character mongols random_name, spy, age 22, x 500, y 135 
	spawn_character mongols random_name, spy, age 21, x 493, y 178 
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 485, y 189 

	console_command diplomatic_stance mongols kwarezm war
	add_money mongols 20000
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion ;make sure the horde will acquire their first settlement early era
	and I_IsFactionAIControlled mongols
	and EventCounter = 2
	and not I_SettlementOwner Urgench = mongols

	spawn_army
		faction mongols
		character	random_name, named character, age 26, x 500, y 153, label mongols4supportgen1, family
		traits MilitaryInclination 1 , Military_Edu 4 , NaturalMilitarySkill 4 , GoodCommander 5 , Bloodthirsty 3 , BattleDread 5 , StrategyDread 5 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1 , Drink 4 , Genocide 3
		unit	Keshikten Bodyguard		exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 499, y 154, label mongols4supportgen2, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Anger 3 , BattleDread 3 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 24, x 499, y 153, label mongols4supportgen3
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 3 , GoodCommander 5 , Bloodthirsty 3 , BattleDread 5 , StrategyDread 5 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1 , Drink 2
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut	exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut	exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 501, y 153, label mongols4supportgen4
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	if not I_SettlementUnderSiege Urgench
		if I_CharacterTypeNearTile mongols, named_character, 0, 501, 153
			siege_settlement mongols4supportgen4, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 499, 154
			siege_settlement mongols4supportgen2, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 499, 153
			siege_settlement mongols4supportgen3, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 500, 153
			siege_settlement mongols4supportgen1, Urgench, attack
		end_if
	end_if

	terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 440, 194

	historic_event mongols_blue_horde_caucasus

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 430, y 195
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 326, 202

	historic_event mongols_blue_horde_kiev

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 316, y 202
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 280, 184

	historic_event mongols_blue_horde_hungary

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 290, y 190
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 5, 396, 89

	historic_event mongols_horde_baghdad

terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 2

	spawn_army
		faction mongols
		character	Chaghatai, named character, age 26, x 505, y 145, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 1 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Subutai, named character, age 25, x 507, y 140, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 3 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Berkei, named character, age 24, x 500, y 150,
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 4, TouchedByTheGods 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 504, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, priest, age 32, x 470, y 120
	spawn_character mongols random_name, priest, age 33, x 490, y 150
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 491, y 144 
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 3

	spawn_army
		faction mongols
		character	Batu, named character, age 26, x 505, y 145, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 3 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Tsagadai, named character, age 25, x 500, y 191
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 26, x 508, y 92
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 3 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 491, y 144 
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 20000
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 4

	spawn_army
		faction mongols
		character	Menglai, named character, age 25, x 490, y 137
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end

	spawn_army
		faction mongols
		character	Jagadai, named character, age 25, x 502, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 504, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 33, x 490, y 150
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, assassin, age 20, x 490, y 135
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 20000
	terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 5

	spawn_army 
		faction mongols
		character	Hulegu, named character, age 25, x 498, y 120
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 3 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction mongols
		character	Kitbuqa, named character, age 24, x 507, y 92
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 2 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 30000
	terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionType mongols
	and not FactionIsLocal

	if I_EventCounter mongols_invasion = 5
		terminate_monitor
	end_if

	if I_SettlementOwner Urgench = mongols
		create_unit Urgench, Khabutu Archers, num 3, exp 3, arm 0, wep 0
		create_unit Urgench, Hoschuchi Lancers, num 1, exp 4, arm 0, wep 0
		create_unit Urgench, Nukeri Horse Archers, num 2, exp 4, arm 0, wep 0
		create_unit Urgench, ME Trebuchet, num 2, exp 5, arm 0, wep 0
		add_money mongols 5000
	end_if

	;if I_SettlementOwner Khiva = mongols
	;	create_unit Khiva, Disamounted Turhagut, num 3, exp 2, arm 0, wep 0
	;	create_unit Khiva, Hoshiga Horse Archers, num 1, exp 2, arm 0, wep 0
	;	create_unit Khiva, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
	;	add_money mongols 5000
	;end_if

	if I_SettlementOwner Konjikala = mongols
		create_unit Konjikala, Khabutu Archers, num 3, exp 3, arm 0, wep 0
		create_unit Konjikala, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
		create_unit Konjikala, Turhagut Lancers, num 2, exp 4, arm 0, wep 0
		create_unit Konjikala, ME Catapult, num 1, exp 4, arm 0, wep 0
		add_money mongols 5000
	end_if

	;if I_SettlementOwner Embi = mongols
	;	create_unit Embi, Khabutu Archers, num 1, exp 2, arm 0, wep 0
	;	create_unit Embi, Disamounted Turhagut, num 1, exp 2, arm 0, wep 0
	;	create_unit Embi, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
	;	add_money mongols 3000
	;end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Jaiksk = mongols
			create_unit Jaiksk, Disamounted Turhagut, num 1, exp 1, arm 0, wep 0
			create_unit Jaiksk, Hoshiga Horse Archers, num 2, exp 3, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Astrakhan = mongols
			create_unit Astrakhan, Disamounted Turhagut, num 2, exp 4, arm 0, wep 0
			create_unit Astrakhan, Hoshiga Horse Archers, num 2, exp 3, arm 0, wep 0
			create_unit Astrakhan, ME Catapult, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 3
		if I_SettlementOwner Sarkel = mongols
			create_unit Sarkel, Disamounted Turhagut, num 1, exp 3, arm 0, wep 0
			create_unit Sarkel, Nukeri Horse Archers, num 1, exp 4, arm 0, wep 0
			create_unit Sarkel, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
			create_unit Sarkel, ME Trebuchet, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 3
		if I_SettlementOwner Tmutarakan = mongols
			create_unit Tmutarakan, Disamounted Turhagut, num 2, exp 4, arm 0, wep 0
			create_unit Tmutarakan, Hoshiga Horse Archers, num 1, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Kutaisi = mongols
			create_unit Kutaisi, Khabutu Archers, num 2, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Tbilisi = mongols
			create_unit Tbilisi, Nukeri Horse Archers, num 1, exp 4, arm 0, wep 0
			create_unit Tbilisi, ME Trebuchet, num 2, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Yerevan = mongols
			create_unit Yerevan, Hoshiga Horse Archers, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_SettlementOwner Gorgan = mongols
		create_unit Gorgan, Khabutu Archers, num 1, exp 3, arm 0, wep 0
		create_unit Gorgan, Disamounted Turhagut, num 1, exp 4, arm 0, wep 0
		create_unit Gorgan, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
		add_money mongols 3000
	end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Mashhad = mongols
			create_unit Mashhad, Khabutu Archers, num 1, exp 2, arm 0, wep 0
			create_unit Mashhad, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	;if I_EventCounter DifficultyLevel >= 3
	;	if I_SettlementOwner Damghan = mongols
	;		create_unit Damghan, Turhagut Lancers, num 1, exp 2, arm 0, wep 0
	;		create_unit Damghan, ME Trebuchet, num 1, exp 5, arm 0, wep 0
	;		add_money mongols 3000
	;	end_if
	;end_if

	if I_EventCounter DifficultyLevel >= 4
		if I_SettlementOwner Yazd = mongols
			create_unit Yazd, Disamounted Turhagut, num 2, exp 1, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

end_monitor

;mongols weaken and no longer are a superpower
monitor_event PreFactionTurnStart FactionType mongols
	and not FactionIsLocal
	and I_EventCounter mongols_invasion = 6

	set_event_counter is_the_ai 0

end_monitor

declare_counter attack_urgench
set_counter attack_urgench 0

;monitor_event FactionTurnStart FactionType mongols
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 1; Aradai
	and not I_SettlementOwner Urgench = mongols
	and I_IsFactionAIControlled mongols
	and I_CharacterExists mongols4genghis
	;and I_CharacterExists mongols4aradai
	
	if I_SettlementUnderSiege Urgench;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_urgench = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile mongols, named_character, 5, 500, 154 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Urgench
	and I_CompareCounter attack_urgench = 1
		siege_settlement mongols4genghis, Urgench, attack
		siege_settlement mongols4aradai, Urgench, maintain
		set_counter attack_urgench 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Urgench
		if I_CompareCounter attack_urgench = 0
			siege_settlement mongols4genghis, Urgench, maintain
			siege_settlement mongols4aradai, Urgench, maintain
			set_counter attack_urgench 1
		end_if
	end_if
end_monitor

;declare_counter attack_khiva
;set_counter attack_khiva 0
;
;;monitor_event FactionTurnStart FactionType mongols
;monitor_event CharacterTurnStart CharFactionType mongols
;	and Trait InvasionCharacterCounter = 2; Bayan
;	and not I_SettlementOwner Khiva = mongols
;	and I_IsFactionAIControlled mongols
;	and I_CharacterExists mongols4jebe
;	;and I_CharacterExists mongols4bayan
;	
;	if I_SettlementUnderSiege Khiva;if settlement under siege already, avoid ctd.
;	and I_CompareCounter attack_khiva = 0
;		terminate_monitor
;	end_if
;
;	if not I_CharacterTypeNearTile mongols, named_character, 5, 505, 147 ;if character not standing where it should, avoid ctd
;		terminate_monitor
;	end_if
;
;	if I_SettlementUnderSiege Khiva
;	and I_CompareCounter attack_khiva = 1
;		siege_settlement mongols4jebe, Khiva, attack
;		siege_settlement mongols4bayan, Khiva, maintain
;		set_counter attack_khiva 2
;		terminate_monitor
;	end_if
;
;	if not I_SettlementUnderSiege Khiva
;		if I_CompareCounter attack_khiva = 0
;			siege_settlement mongols4jebe, Khiva, maintain
;			siege_settlement mongols4bayan, Khiva, maintain
;			set_counter attack_khiva 1
;		end_if
;	end_if
;end_monitor

declare_counter attack_konjikala
set_counter attack_konjikala 0

;monitor_event FactionTurnStart FactionType mongols
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 3; Chindu
	and I_CharacterExists mongols4chindu

	if I_CompareCounter attack_konjikala = 2
		terminate_monitor
	end_if
	set_event_counter is_mongol_character 1
end_monitor
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 4; Nayuk
	and I_CharacterExists mongols4nayuk

	if I_CompareCounter attack_konjikala = 2
		terminate_monitor
	end_if
	set_event_counter is_mongol_character 2
end_monitor
monitor_event EventCounter EventCounterType is_mongol_character
	and EventCounter = 2
	and not I_SettlementOwner Konjikala = mongols
	and I_IsFactionAIControlled mongols
	
	if I_SettlementUnderSiege Konjikala;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_konjikala = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile mongols, named_character, 5, 490, 126 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Konjikala
	and I_CompareCounter attack_konjikala = 1
		siege_settlement mongols4chindu, Konjikala, attack
		siege_settlement mongols4nayuk, Konjikala, maintain
		set_counter attack_konjikala 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Konjikala
		if I_CompareCounter attack_konjikala = 0
			siege_settlement mongols4chindu, Konjikala, maintain
			siege_settlement mongols4nayuk, Konjikala, maintain
			set_counter attack_konjikala 1
			set_event_counter is_mongol_character 0
		end_if
	end_if
end_monitor

;================= BULGARIAN UPRISING ===================
declare_counter bulgarians_rebel
declare_counter bu_test
add_events
		event	counter	BulgarianUprisingSet
		date	50
end_add_events

monitor_event MultiTurnMove I_CompareCounter bu_test = 1
	and HighestAttAdjacentChar Unorthodoxy named_character = 1

	if I_CompareCounter bulgarians_rebel = -1
		terminate_monitor
	end_if
	set_counter bulgarians_rebel 0
end_monitor

monitor_event FactionTurnStart FactionType slave
;	and I_TurnNumber > 49
	and I_EventCounter BulgarianUprisingSet = 1

	;###### "Turn" 51
	if I_CompareCounter bulgarians_rebel = 1
		spawn_army
			faction dummies
			character	Temporary, named character, x 20, y 20
			unit		Aldari	exp 0 armour 0 weapon_lvl 0
		end
		give_everything_to_faction dummies papal_states false
		console_command move_character Temporary 9,223
		console_command mp Temporary -1

		if I_CharacterExists peter4bulgaria
		and I_SettlementOwner Sofia != slave
		and I_SettlementUnderSiege Sofia
		and I_CharacterTypeNearTile slave, named_character, 2, 248, 155 ;Sofia
			;set_counter bulgarians_rebel 1
			console_command move_character Temporary 248,155
			set_counter bu_test 1
			move Temporary, 248, 156

			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 248,156
				move Temporary, 248, 155
			end_if
			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 248,154
				move Temporary, 248, 155
			end_if
			set_counter bu_test 0
			console_command move_character Temporary 9,223

			if I_CompareCounter bulgarians_rebel = 0
				siege_settlement peter4bulgaria, Sofia, attack
			end_if
		end_if

		if I_CharacterExists ivan4slave
		and I_SettlementOwner Scopia != slave
		and I_SettlementUnderSiege Scopia
		and I_CharacterTypeNearTile slave, named_character, 2, 233, 149 ;Scopia
			console_command move_character Temporary 233,149
			set_counter bulgarians_rebel 1
			set_counter bu_test 1
			move Temporary, 234, 149

			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 233,150
				move Temporary, 233, 149
			end_if
			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 233,148
				move Temporary, 233, 149
			end_if
			set_counter bu_test 0
			console_command move_character Temporary 9,223

			if I_CompareCounter bulgarians_rebel = 0
				siege_settlement ivan4slave, Scopia, attack
			end_if
		end_if

		if I_CharacterExists kalman4slave
		and I_SettlementOwner Adrianople != slave
		and I_SettlementUnderSiege Adrianople
		and I_CharacterTypeNearTile slave, named_character, 2, 269, 146 ;Adrianople
			set_counter bulgarians_rebel 1
			console_command move_character Temporary 269, 146
			set_counter bu_test 1
			move Temporary, 269, 147

			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 269,147
				move Temporary, 269, 146
			end_if
			if I_CompareCounter bulgarians_rebel = 1
				console_command move_character Temporary 269,145
				move Temporary, 269, 146
			end_if
			set_counter bu_test 0
			console_command move_character Temporary 9,223

			if I_CompareCounter bulgarians_rebel = 0
				siege_settlement kalman4slave, Adrianople, attack
			end_if
		end_if

		spawn_army
			faction dummies
			character	Peter, named character, x 19, y 20, label end4bus
			traits	ofBulgariaName 2
			unit		Aldari	exp 0 armour 0 weapon_lvl 0
		end
		give_everything_to_faction dummies papal_states false
		console_command move_character end4bus 10,223
		set_counter bulgarians_rebel -1
		set_counter bu_test 1
		move Temporary, 8, 223
		kill_character Temporary
		kill_character end4bus
	 terminate_monitor
	end_if

	;###### "Turn" 50
	if I_SettlementOwner Sofia != slave
		set_counter bulgarians_rebel 1
		spawn_army
			faction dummies
			character 	Peter, named character, age 30, x 250, y 157, label peter4bulgaria
			traits 	GoodCommander 4, BattleDread 3, StrategyDread 2, PublicFaith 1, NaturalMilitarySkill 2, ofBulgariaName 1
			unit		EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0      
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		give_everything_to_faction dummies slave false
		add_money slave 10000
	end_if
	if I_SettlementOwner Scopia != slave
		set_counter bulgarians_rebel 1
		spawn_army
			faction dummies
			character	Ivan, named character, age 30, x 236, y 151, label ivan4slave
			traits	GoodCommander 2, BattleChivalry 3, StrategyChivalry 2, PublicFaith 1, NaturalMilitarySkill 1, ofBulgariaName 1
			unit    	EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0      
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		give_everything_to_faction dummies slave false
		add_money slave 10000
	end_if
	if I_SettlementOwner Adrianople != slave
		set_counter bulgarians_rebel 1
		spawn_army 
			faction dummies
			character Kalman, named character, age 30, x 267, y 147, label kalman4slave
			traits GoodCommander 2, Bloodthirsty 2, BattleDread 3, ofBulgariaName 1
			unit		EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands	exp 2 armour 0 weapon_lvl 0      
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies			exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		give_everything_to_faction dummies slave false
		add_money slave 10000
	end_if

	if I_CompareCounter bulgarians_rebel = 1
		historic_event bulgarian_uprising
	end_if
	set_counter bulgarians_rebel 1

	if I_SettlementOwner Sofia != slave
	and ! I_SettlementUnderSiege Sofia
		siege_settlement peter4bulgaria, Sofia, maintain
		if ! I_SettlementUnderSiege Sofia
			move peter4bulgaria, 250,157
		end_if
		if I_SettlementUnderSiege Sofia
			console_command give_trait peter4bulgaria ofBulgariaName 2
		end_if
	end_if
	if I_SettlementOwner Scopia != slave
	and ! I_SettlementUnderSiege Scopia
		siege_settlement ivan4slave, Scopia, maintain
		if ! I_SettlementUnderSiege Scopia
			move ivan4slave, 236,151
		end_if
		if I_SettlementUnderSiege Scopia
			console_command give_trait ivan4slave ofBulgariaName 2
		end_if
	end_if
	if I_SettlementOwner Adrianople != slave
	and ! I_SettlementUnderSiege Adrianople
		siege_settlement kalman4slave, Adrianople, maintain
		if ! I_SettlementUnderSiege Adrianople
			move kalman4slave, 267,147
		end_if
		if I_SettlementUnderSiege Adrianople
			console_command give_trait kalman4slave ofBulgariaName 2
		end_if
	end_if
end_monitor


;================== TIMURIDS INVASION ===================
;;;;;;;;;;;;;;;;;;;;;;;;DISABLED;;;;;;;;;;;;;;;;;;;;;;;;;
;========================================================
;===================== G5 BAI STUFF =====================
;========================================================

;### Germanicu5 ReallyBadAI Battle System Scrips v5.x
;### This file contains manually programmed AI behaviour eliminating previously unfixable, hardcoded bugs and greatly influences battle performance
;### Support available at http://www.twcenter.net/forums/forumdisplay.php?f=1745 , http://www.twcenter.net/forums/showthread.php?t=257970 and http://www.twcenter.net/forums/showthread.php?t=253132
;### Non-private use of code only by permission,
;### coded by Germanicu5

;;;;;;;Print Info
log always Germanicu5 ReallyBadAI v5.7 Running. Please upload log and savegames when reporting battle CTDs for SS.
monitor_event GameReloaded
log always Germanicu5 ReallyBadAI v5.7 Running. Please upload log and savegames when reporting battle CTDs for SS.
end_monitor

;;;;;;;
declare_counter g5_battle_difficulty_high
;;;;;;;
declare_counter fire_labels
declare_counter panel_check
declare_counter player_unit_count
declare_counter enemy_unit_count
declare_counter open_battle
declare_counter labels_only
declare_counter stakes_lock
;;;;;;;
declare_counter pu1_missile
declare_counter pu2_missile
declare_counter pu3_missile
declare_counter pu4_missile
declare_counter pu5_missile
declare_counter pu6_missile
declare_counter pu7_missile
declare_counter pu8_missile
declare_counter pu9_missile
declare_counter pu10_missile
declare_counter pu11_missile
declare_counter pu12_missile
declare_counter pu13_missile
declare_counter pu14_missile
declare_counter pu15_missile
declare_counter pu16_missile
declare_counter pu17_missile
declare_counter pu18_missile
declare_counter pu19_missile
declare_counter pu20_missile
;;;;;;;Checks
declare_counter check_timer
declare_counter elephant_fix_check
declare_counter elephant_fix_check_sally
declare_counter script_delay
declare_counter reinf_check
declare_counter sally_defense_check
declare_counter sally_check
;;;;;;;Stakes
declare_counter label_ready
declare_counter stakes_on
;;;;;;;Reinforcements
declare_counter army4_ready
declare_counter reinf_late

declare_counter distance_trigger1
declare_counter distance_trigger2
declare_counter distance_trigger3
declare_counter distance_trigger4
declare_counter distance_trigger5

declare_counter kill_labelling_reinf_allied
declare_counter army3_reinf_allied
declare_counter army4_reinf_allied
declare_counter army5_reinf_allied
declare_counter army6_reinf_allied
declare_counter army7_reinf_allied
declare_counter army8_reinf_allied
declare_counter army9_reinf_allied
declare_counter army10_reinf_allied
declare_counter army11_reinf_allied
declare_counter army12_reinf_allied
declare_counter army13_reinf_allied
declare_counter army14_reinf_allied
declare_counter army15_reinf_allied
declare_counter army16_reinf_allied
declare_counter launch_alliance_0
declare_counter launch_alliance_1

declare_counter apply_strategy
declare_counter relaunch_movement

declare_counter att_alliance_ready
declare_counter def_alliance_ready
declare_counter def_alliance_ready_siege

declare_counter army3_moving
declare_counter army3_run
declare_counter army3_reinf_late
declare_counter army4_moving
declare_counter army4_run
declare_counter army4_reinf_late
declare_counter army5_moving
declare_counter army5_run
declare_counter army5_reinf_late
declare_counter army6_moving
declare_counter army6_run
declare_counter army6_reinf_late
declare_counter army7_moving
declare_counter army7_run
declare_counter army7_reinf_late
declare_counter army8_moving
declare_counter army8_run
declare_counter army8_reinf_late
declare_counter army9_moving
declare_counter army9_run
declare_counter army9_reinf_late
declare_counter army10_moving
declare_counter army10_run
declare_counter army10_reinf_late
declare_counter army11_moving
declare_counter army11_run
declare_counter army11_reinf_late
declare_counter army12_moving
declare_counter army12_run
declare_counter army12_reinf_late
declare_counter army13_moving
declare_counter army13_run
declare_counter army13_reinf_late
declare_counter army14_moving
declare_counter army14_run
declare_counter army14_reinf_late
declare_counter army15_moving
declare_counter army15_run
declare_counter army15_reinf_late
declare_counter army16_moving
declare_counter army16_run
declare_counter army16_reinf_late

declare_counter army4_ready_siege ; acts as launching counter
declare_counter army4_moving_siege
declare_counter army4_run_siege
declare_counter reinf_check_interval

;;;;;;;HA Fix
declare_counter ha_fix
;;;;;;;Elephant Fix
declare_counter elephant_fix
declare_counter elephant_gate
declare_counter elephant_gate_s
declare_counter elephant_gate_tier2
declare_counter elephant_gate_tier3
declare_counter elephant_gate_tier2s
declare_counter elephant_gate_tier3s
declare_counter rally_walls
declare_counter rally_walls_s
declare_counter second_ring
declare_counter third_ring
declare_counter second_ring_s
declare_counter third_ring_s
declare_counter del_objective
declare_counter del_objective_s
;;;;;;;Sally-out
declare_counter sally-out_fix
declare_counter sally_defense
declare_counter reform_back
declare_counter reform_multi
declare_counter unit_under_fire
declare_counter kill_sally
declare_counter sally_reinf
declare_counter reset_position
declare_counter defend_location
declare_counter reset_army2
declare_counter assign_labels
;;;;;;;Siege
declare_counter siege_fix
declare_counter army_sieging
declare_counter army_south
declare_counter army_north
declare_counter army_east
declare_counter army_west
declare_counter emergency_stop
declare_counter omfg_cannon_tower
declare_counter army2_sally
declare_counter wall_advance_s
;;;;;;;Protect General
declare_counter protect_general
declare_counter general_wait
declare_counter protect_siege
declare_counter g_stop
;;;;;;;Sally-out, AI defending
declare_counter army4_ready_sally
declare_counter army4_location
declare_counter path_n
declare_counter path_ne
declare_counter path_e
declare_counter path_se
declare_counter path_s
declare_counter path_sw
declare_counter path_w
declare_counter path_nw
declare_counter obstacle_check
declare_counter label_army4
declare_counter army4_moving_s
declare_counter army4_idle_s
declare_counter line_passed
declare_counter army2_idle_s
declare_counter army4_idle_r
declare_counter wall_line_passed
declare_counter reset_position_s
declare_counter repeat_test1
declare_counter repeat_test2
declare_counter repeat_test3
declare_counter repeat_test4
declare_counter repeat_test5
declare_counter repeat_test6
;;;;;;;Open Battles
declare_counter ob_defense_launch
declare_counter ob_defend
declare_counter ob_siege_attack
declare_counter ob_under_fire
declare_counter ob_repeat_test
declare_counter ob_engaged
declare_counter player_units_closing
declare_counter player_enveloping
declare_counter player_engaged_reinf
;;;;;;;AI Stuck Fix
declare_counter ai_stuck_launch
declare_counter a2u1_stuck
declare_counter a2u2_stuck
declare_counter a2u3_stuck
declare_counter a2u4_stuck
declare_counter a2u5_stuck
declare_counter a2u6_stuck
declare_counter a2u7_stuck
declare_counter a2u8_stuck
declare_counter a2u9_stuck
declare_counter a2u10_stuck
declare_counter a2u11_stuck
declare_counter a2u12_stuck
declare_counter a2u13_stuck
declare_counter a2u14_stuck
declare_counter a2u15_stuck
declare_counter a2u16_stuck
declare_counter a2u17_stuck
declare_counter a2u18_stuck
declare_counter a2u19_stuck
declare_counter a2u20_stuck
declare_counter a2u1_status
declare_counter a2u2_status
declare_counter a2u3_status
declare_counter a2u4_status
declare_counter a2u5_status
declare_counter a2u6_status
declare_counter a2u7_status
declare_counter a2u8_status
declare_counter a2u9_status
declare_counter a2u10_status
declare_counter a2u11_status
declare_counter a2u12_status
declare_counter a2u13_status
declare_counter a2u14_status
declare_counter a2u15_status
declare_counter a2u16_status
declare_counter a2u17_status
declare_counter a2u18_status
declare_counter a2u19_status
declare_counter a2u20_status
declare_counter a2u1_distance
declare_counter a2u2_distance
declare_counter a2u3_distance
declare_counter a2u4_distance
declare_counter a2u5_distance
declare_counter a2u6_distance
declare_counter a2u7_distance
declare_counter a2u8_distance
declare_counter a2u9_distance
declare_counter a2u10_distance
declare_counter a2u11_distance
declare_counter a2u12_distance
declare_counter a2u13_distance
declare_counter a2u14_distance
declare_counter a2u15_distance
declare_counter a2u16_distance
declare_counter a2u17_distance
declare_counter a2u18_distance
declare_counter a2u19_distance
declare_counter a2u20_distance
;;;;;;;
set_event_counter no_advice 1

monitor_event PreFactionTurnStart FactionIsLocal
    and BattleDifficulty > medium

    set_counter g5_battle_difficulty_high 1
    terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsGeneral TargetFactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsGeneral ! FactionIsLocal
    and ! TargetFactionIsLocal
    and I_CompareCounter panel_check != 2

    set_counter panel_check 2
end_monitor

monitor_event GeneralAssaultsResidence TargetFactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsResidence ! FactionIsLocal
    and ! TargetFactionIsLocal
    and I_CompareCounter panel_check != 2

    set_counter panel_check 2
end_monitor

monitor_event ButtonPressed ButtonPressed prebattle_fight_button
    and I_CompareCounter panel_check = 1

;    suspend_unscripted_advice true
    set_counter fire_labels 10
    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter labels_only 0
    set_counter stakes_lock 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    ;;;;;;;Checks
    set_counter check_timer 0
    set_counter elephant_fix_check 0
    set_counter elephant_fix_check_sally 0
    set_counter reinf_check 0
    set_counter script_delay 0
    set_counter sally_defense_check 0
    set_counter sally_check 0
    ;;;;;;;Stakes
    set_counter label_ready 0
    set_counter stakes_on 0
    ;;;;;;;Reinforcements
    set_counter army4_ready 0
    set_counter reinf_late 0

    set_counter distance_trigger1 0
    set_counter distance_trigger2 0
    set_counter distance_trigger3 0
    set_counter distance_trigger4 0
    set_counter distance_trigger5 0

    set_counter kill_labelling_reinf_allied 0
    set_counter army3_reinf_allied 0
    set_counter army4_reinf_allied 0
    set_counter army5_reinf_allied 0
    set_counter army6_reinf_allied 0
    set_counter army7_reinf_allied 0
    set_counter army8_reinf_allied 0
    set_counter army9_reinf_allied 0
    set_counter army10_reinf_allied 0
    set_counter army11_reinf_allied 0
    set_counter army12_reinf_allied 0
    set_counter army13_reinf_allied 0
    set_counter army14_reinf_allied 0
    set_counter army15_reinf_allied 0
    set_counter army16_reinf_allied 0
    set_counter launch_alliance_0 0
    set_counter launch_alliance_1 0

    set_counter apply_strategy 0
    set_counter relaunch_movement 0

    set_counter att_alliance_ready 0
    set_counter def_alliance_ready 0
    set_counter def_alliance_ready_siege 0

    set_counter army3_moving 0
    set_counter army3_run 0
    set_counter army3_reinf_late 0
    set_counter army4_moving 0
    set_counter army4_run 0
    set_counter army4_reinf_late 0
    set_counter army5_moving 0
    set_counter army5_run 0
    set_counter army5_reinf_late 0
    set_counter army6_moving 0
    set_counter army6_run 0
    set_counter army6_reinf_late 0
    set_counter army7_moving 0
    set_counter army7_run 0
    set_counter army7_reinf_late 0
    set_counter army8_moving 0
    set_counter army8_run 0
    set_counter army8_reinf_late 0
    set_counter army9_moving 0
    set_counter army9_run 0
    set_counter army9_reinf_late 0
    set_counter army10_moving 0
    set_counter army10_run 0
    set_counter army10_reinf_late 0
    set_counter army11_moving 0
    set_counter army11_run 0
    set_counter army11_reinf_late 0
    set_counter army12_moving 0
    set_counter army12_run 0
    set_counter army12_reinf_late 0
    set_counter army13_moving 0
    set_counter army13_run 0
    set_counter army13_reinf_late 0
    set_counter army14_moving 0
    set_counter army14_run 0
    set_counter army14_reinf_late 0
    set_counter army15_moving 0
    set_counter army15_run 0
    set_counter army15_reinf_late 0
    set_counter army16_moving 0
    set_counter army16_run 0
    set_counter army16_reinf_late 0

    set_counter army4_ready_siege 0 ; acts as launching counter
    set_counter army4_moving_siege 0
    set_counter army4_run_siege 0
    set_counter reinf_check_interval 0

    ;;;;;;;HA Fix
    set_counter ha_fix 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    set_counter elephant_gate_s 0
    set_counter elephant_gate_tier2 0
    set_counter elephant_gate_tier3 0
    set_counter elephant_gate_tier2s 0
    set_counter elephant_gate_tier3s 0
    set_counter rally_walls 0
    set_counter rally_walls_s 0
    set_counter second_ring 0
    set_counter third_ring 0
    set_counter second_ring_s 0
    set_counter third_ring_s 0
    set_counter del_objective 0
    set_counter del_objective_s 0
    ;;;;;;;Sally-out
    set_counter sally-out_fix 0
    set_counter sally_defense 0
    set_counter reform_back 0
    set_counter reform_multi 0
    set_counter unit_under_fire 0
    set_counter kill_sally 0
    set_counter sally_reinf 0
    set_counter reset_position 0
    set_counter defend_location 0
    set_counter reset_army2 0
    set_counter assign_labels 0
    ;;;;;;;Siege
    set_counter siege_fix 0
    set_counter army_sieging 0
    set_counter army_south 0
    set_counter army_north 0
    set_counter army_east 0
    set_counter army_west 0
    set_counter emergency_stop 0
    set_counter omfg_cannon_tower 0
    set_counter army2_sally 0
    set_counter wall_advance_s 0
    ;;;;;;;Protect General
    set_counter protect_general 0
    set_counter general_wait 0
    set_counter protect_siege 0
    set_counter g_stop 0
    ;;;;;;;Sally-out, AI defending
    set_counter army4_ready_sally 0
    set_counter army4_location 0
    set_counter path_n 0
    set_counter path_ne 0
    set_counter path_e 0
    set_counter path_se 0
    set_counter path_s 0
    set_counter path_sw 0
    set_counter path_w 0
    set_counter path_nw 0
    set_counter obstacle_check 0
    set_counter label_army4 0
    set_counter army4_moving_s 0
    set_counter army4_idle_s 0
    set_counter line_passed 0
    set_counter army2_idle_s 0
    set_counter army4_idle_r 0
    set_counter wall_line_passed 0
    set_counter reset_position_s 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    ;;;;;;;Open Battles
    set_counter ob_defense_launch 0
    set_counter ob_defend 0
    set_counter ob_siege_attack 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 0
    set_counter ob_engaged 0
    set_counter player_units_closing 0
    set_counter player_enveloping 0
    set_counter player_engaged_reinf 0
    ;;;;;;;AI Stuck Fix
    set_counter ai_stuck_launch 0
    set_counter a2u1_stuck 0
    set_counter a2u2_stuck 0
    set_counter a2u3_stuck 0
    set_counter a2u4_stuck 0
    set_counter a2u5_stuck 0
    set_counter a2u6_stuck 0
    set_counter a2u7_stuck 0
    set_counter a2u8_stuck 0
    set_counter a2u9_stuck 0
    set_counter a2u10_stuck 0
    set_counter a2u11_stuck 0
    set_counter a2u12_stuck 0
    set_counter a2u13_stuck 0
    set_counter a2u14_stuck 0
    set_counter a2u15_stuck 0
    set_counter a2u16_stuck 0
    set_counter a2u17_stuck 0
    set_counter a2u18_stuck 0
    set_counter a2u19_stuck 0
    set_counter a2u20_stuck 0
    set_counter a2u1_status 0
    set_counter a2u2_status 0
    set_counter a2u3_status 0
    set_counter a2u4_status 0
    set_counter a2u5_status 0
    set_counter a2u6_status 0
    set_counter a2u7_status 0
    set_counter a2u8_status 0
    set_counter a2u9_status 0
    set_counter a2u10_status 0
    set_counter a2u11_status 0
    set_counter a2u12_status 0
    set_counter a2u13_status 0
    set_counter a2u14_status 0
    set_counter a2u15_status 0
    set_counter a2u16_status 0
    set_counter a2u17_status 0
    set_counter a2u18_status 0
    set_counter a2u19_status 0
    set_counter a2u20_status 0
    set_counter a2u1_distance 0
    set_counter a2u2_distance 0
    set_counter a2u3_distance 0
    set_counter a2u4_distance 0
    set_counter a2u5_distance 0
    set_counter a2u6_distance 0
    set_counter a2u7_distance 0
    set_counter a2u8_distance 0
    set_counter a2u9_distance 0
    set_counter a2u10_distance 0
    set_counter a2u11_distance 0
    set_counter a2u12_distance 0
    set_counter a2u13_distance 0
    set_counter a2u14_distance 0
    set_counter a2u15_distance 0
    set_counter a2u16_distance 0
    set_counter a2u17_distance 0
    set_counter a2u18_distance 0
    set_counter a2u19_distance 0
    set_counter a2u20_distance 0
    prepare_for_battle
end_monitor

monitor_conditions I_InBattle
    and I_CompareCounter fire_labels = 10

    set_counter fire_labels 0
    battle_wait 0.1

    if ! I_BattleIsSiegeBattle
    set_counter fire_labels 1
    end_if

    if I_BattleIsSiegeBattle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter fire_labels 1
    end_if

if I_BattlePlayerArmyIsAttacker

    ;;;Army 1
    set_counter player_unit_count 0
    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if
if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    ;;;Army 2
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_BattlePlayerArmyIsAttacker

    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if
if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 1
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ;;;Army 2
    set_counter player_unit_count 0
    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a1u1 > 0
    set_counter pu1_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u1 = horde
    set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a1u2 > 0
    set_counter pu2_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u2 = horde
    set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a1u3 > 0
    set_counter pu3_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u3 = horde
    set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a1u4 > 0
    set_counter pu4_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u4 = horde
    set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a1u5 > 0
    set_counter pu5_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u5 = horde
    set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a1u6 > 0
    set_counter pu6_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u6 = horde
    set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a1u7 > 0
    set_counter pu7_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u7 = horde
    set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a1u8 > 0
    set_counter pu8_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u8 = horde
    set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a1u9 > 0
    set_counter pu9_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u9 = horde
    set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a1u10 > 0
    set_counter pu10_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u10 = horde
    set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a1u11 > 0
    set_counter pu11_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u11 = horde
    set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a1u12 > 0
    set_counter pu12_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u12 = horde
    set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a1u13 > 0
    set_counter pu13_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u13 = horde
    set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a1u14 > 0
    set_counter pu14_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u14 = horde
    set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a1u15 > 0
    set_counter pu15_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u15 = horde
    set_counter pu15_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a1u16 > 0
    set_counter pu16_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u16 = horde
    set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a1u17 > 0
    set_counter pu17_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u17 = horde
    set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a1u18 > 0
    set_counter pu18_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u18 = horde
    set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a1u19 > 0
    set_counter pu19_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u19 = horde
    set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a1u20 > 0
    set_counter pu20_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u20 = horde
    set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if ! I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a2u1 > 0
    set_counter pu1_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u1 = horde
    set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a2u2 > 0
    set_counter pu2_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u2 = horde
    set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a2u3 > 0
    set_counter pu3_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u3 = horde
    set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a2u4 > 0
    set_counter pu4_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u4 = horde
    set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a2u5 > 0
    set_counter pu5_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u5 = horde
    set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a2u6 > 0
    set_counter pu6_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u6 = horde
    set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a2u7 > 0
    set_counter pu7_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u7 = horde
    set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a2u8 > 0
    set_counter pu8_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u8 = horde
    set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a2u9 > 0
    set_counter pu9_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u9 = horde
    set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a2u10 > 0
    set_counter pu10_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u10 = horde
    set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a2u11 > 0
    set_counter pu11_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u11 = horde
    set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a2u12 > 0
    set_counter pu12_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u12 = horde
    set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a2u13 > 0
    set_counter pu13_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u13 = horde
    set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a2u14 > 0
    set_counter pu14_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u14 = horde
    set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a2u15 > 0
    set_counter pu15_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u15 = horde
    set_counter pu15_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a2u16 > 0
    set_counter pu16_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u16 = horde
    set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a2u17 > 0
    set_counter pu17_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u17 = horde
    set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a2u18 > 0
    set_counter pu18_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u18 = horde
    set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a2u19 > 0
    set_counter pu19_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u19 = horde
    set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a2u20 > 0
    set_counter pu20_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u20 = horde
    set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if
;    battle_wait 0.1
;    ai_active_set off
    battle_wait 0.1
    ai_active_set on
    set_counter labels_only 1

    if I_BattleIsSiegeBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter ai_stuck_launch 1
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattlePlayerArmyNumberOfAttribute stakes > 0
    set_counter stakes_lock 1
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
    set_counter protect_siege 1
    end_if

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and ! I_BattleIsRiverBattle
    and ! I_ConflictType SuccessfulAmbush
    set_counter open_battle 1
    end_if

if I_CompareCounter fire_labels = 1
    if I_BattleIsSiegeBattle
    label_location 0, -850, south_side
    label_location 0, 850, north_side
    label_location -850, 0, west_side
    label_location 850, 0, east_side
    end_if

    if I_BattleIsSallyOutBattle
    label_location 0, -850, south_side
    label_location 0, 850, north_side
    label_location -850, 0, west_side
    label_location 850, 0, east_side
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    label_location -470, -470, sw
    label_location 470, -470, se
    label_location -470, 470, nw
    label_location 470, 470, ne
    label_location -400, -400, sw_wall
    label_location 400, -400, se_wall
    label_location -400, 400, nw_wall
    label_location 400, 400, ne_wall
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 west_side east_side > 200
    set_counter army_south 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 west_side east_side < -200
    set_counter army_north 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 south_side north_side > 200
    set_counter army_east 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 south_side north_side < -200
    set_counter army_west 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 west_side east_side > 200
    set_counter army_south 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 west_side east_side < -200
    set_counter army_north 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 south_side north_side > 200
    set_counter army_east 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 south_side north_side < -200
    set_counter army_west 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter sally-out_fix 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter siege_fix 1
    end_if

    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_BattleIsSiegeBattle
    set_counter elephant_fix 1
    end_if

end_if
end_monitor

monitor_event BattleConflictPhaseCommenced FactionIsLocal
    and I_CompareCounter panel_check = 1

    set_counter script_delay 1
    battle_wait 15
    if I_CompareCounter script_delay = 1

    if I_CompareCounter fire_labels = 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_CompareCounter g5_battle_difficulty_high = 1
    and I_BattleIsSiegeBattle
    set_counter label_ready 1
    end_if

    if I_CompareCounter fire_labels = 1
    if I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_CompareCounter g5_battle_difficulty_high = 1
    and ! I_BattleIsSiegeBattle
    set_counter label_ready 1
    end_if

    if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1
    ai_gta_plan_set 1 DEFEND_FEATURE
    battle_wait 1
    ai_active_set on
    set_counter ob_defense_launch 1
    end_if
    end_if

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and ! I_BattleIsRiverBattle
    and ! I_ConflictType SuccessfulAmbush
    and I_BattleEnemyArmyNumberOfUnits > 2
    set_counter g_stop 1
    end_if

    if I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter fire_labels = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter sally_defense 1
    set_counter assign_labels 1
    end_if

    if I_BattleStarted
    and I_CompareCounter fire_labels = 1
    and I_CompareCounter open_battle = 1
    set_counter ha_fix 1
    end_if

    if I_BattleStarted
    and I_CompareCounter fire_labels = 1
    and I_BattleIsRiverBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter ha_fix 1
    end_if
    set_counter script_delay 0
    end_if
end_monitor

monitor_event BattleReinforcementsArrive ! ArmyIsLocal
    and I_CompareCounter panel_check = 1
    and I_CompareCounter fire_labels = 1

    set_counter reinf_check 1
    battle_wait 15
if I_CompareCounter reinf_check = 1
    set_counter reinf_check 2
    battle_wait 15
if I_CompareCounter reinf_check = 2
    set_counter reinf_check 3
    battle_wait 15
if I_CompareCounter reinf_check = 3
 if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 3
    label_unit 0 1 0 a3u1
    define_unit_group army3a a3u1
    if ! I_PercentageUnitGroupKilled army3a = 100
    undefine_unit_group army3a
    ;;;Army 3
    label_unit 0 1 0 a3u1
    label_unit 0 1 1 a3u2
    label_unit 0 1 2 a3u3
    label_unit 0 1 3 a3u4
    label_unit 0 1 4 a3u5
    label_unit 0 1 5 a3u6
    label_unit 0 1 6 a3u7
    label_unit 0 1 7 a3u8
    label_unit 0 1 8 a3u9
    label_unit 0 1 9 a3u10
    label_unit 0 1 10 a3u11
    label_unit 0 1 11 a3u12
    label_unit 0 1 12 a3u13
    label_unit 0 1 13 a3u14
    label_unit 0 1 14 a3u15
    label_unit 0 1 15 a3u16
    label_unit 0 1 16 a3u17
    label_unit 0 1 17 a3u18
    label_unit 0 1 18 a3u19
    label_unit 0 1 19 a3u20

    define_unit_group army3 a3u1 a3u2 a3u3 a3u4 a3u5 a3u6 a3u7 a3u8 a3u9 a3u10 a3u11 a3u12 a3u13 a3u14 a3u15 a3u16 a3u17 a3u18 a3u19 a3u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker

    ;;;Army 4
    label_unit 1 1 0 a4u1
    define_unit_group army4a a4u1
    if ! I_PercentageUnitGroupKilled army4a = 100
    undefine_unit_group army4a
    ;;;Army 4
    label_unit 1 1 0 a4u1
    label_unit 1 1 1 a4u2
    label_unit 1 1 2 a4u3
    label_unit 1 1 3 a4u4
    label_unit 1 1 4 a4u5
    label_unit 1 1 5 a4u6
    label_unit 1 1 6 a4u7
    label_unit 1 1 7 a4u8
    label_unit 1 1 8 a4u9
    label_unit 1 1 9 a4u10
    label_unit 1 1 10 a4u11
    label_unit 1 1 11 a4u12
    label_unit 1 1 12 a4u13
    label_unit 1 1 13 a4u14
    label_unit 1 1 14 a4u15
    label_unit 1 1 15 a4u16
    label_unit 1 1 16 a4u17
    label_unit 1 1 17 a4u18
    label_unit 1 1 18 a4u19
    label_unit 1 1 19 a4u20

    define_unit_group army4 a4u1 a4u2 a4u3 a4u4 a4u5 a4u6 a4u7 a4u8 a4u9 a4u10 a4u11 a4u12 a4u13 a4u14 a4u15 a4u16 a4u17 a4u18 a4u19 a4u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army3 = 100
    set_counter army3_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army4 = 100
    set_counter army4_reinf_allied 1
    end_if

    if I_PercentageUnitGroupKilled army3 = 100
    and I_PercentageUnitGroupKilled army4 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

if ! I_BattleIsSallyOutBattle

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 5
    label_unit 0 2 0 a5u1
    define_unit_group army5a a5u1
    if ! I_PercentageUnitGroupKilled army5a = 100
    undefine_unit_group army5a
    ;;;Army 5
    label_unit 0 2 0 a5u1
    label_unit 0 2 1 a5u2
    label_unit 0 2 2 a5u3
    label_unit 0 2 3 a5u4
    label_unit 0 2 4 a5u5
    label_unit 0 2 5 a5u6
    label_unit 0 2 6 a5u7
    label_unit 0 2 7 a5u8
    label_unit 0 2 8 a5u9
    label_unit 0 2 9 a5u10
    label_unit 0 2 10 a5u11
    label_unit 0 2 11 a5u12
    label_unit 0 2 12 a5u13
    label_unit 0 2 13 a5u14
    label_unit 0 2 14 a5u15
    label_unit 0 2 15 a5u16
    label_unit 0 2 16 a5u17
    label_unit 0 2 17 a5u18
    label_unit 0 2 18 a5u19
    label_unit 0 2 19 a5u20

    define_unit_group army5 a5u1 a5u2 a5u3 a5u4 a5u5 a5u6 a5u7 a5u8 a5u9 a5u10 a5u11 a5u12 a5u13 a5u14 a5u15 a5u16 a5u17 a5u18 a5u19 a5u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker
    ;;;Army 6
    label_unit 1 2 0 a6u1
    define_unit_group army6a a6u1
    if ! I_PercentageUnitGroupKilled army6a = 100
    undefine_unit_group army6a 	
    ;;;Army 6
    label_unit 1 2 0 a6u1
    label_unit 1 2 1 a6u2
    label_unit 1 2 2 a6u3
    label_unit 1 2 3 a6u4
    label_unit 1 2 4 a6u5
    label_unit 1 2 5 a6u6
    label_unit 1 2 6 a6u7
    label_unit 1 2 7 a6u8
    label_unit 1 2 8 a6u9
    label_unit 1 2 9 a6u10
    label_unit 1 2 10 a6u11
    label_unit 1 2 11 a6u12
    label_unit 1 2 12 a6u13
    label_unit 1 2 13 a6u14
    label_unit 1 2 14 a6u15
    label_unit 1 2 15 a6u16
    label_unit 1 2 16 a6u17
    label_unit 1 2 17 a6u18
    label_unit 1 2 18 a6u19
    label_unit 1 2 19 a6u20

    define_unit_group army6 a6u1 a6u2 a6u3 a6u4 a6u5 a6u6 a6u7 a6u8 a6u9 a6u10 a6u11 a6u12 a6u13 a6u14 a6u15 a6u16 a6u17 a6u18 a6u19 a6u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army5 = 100
    set_counter army5_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army6 = 100
    set_counter army6_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army5 = 100
    and I_PercentageUnitGroupKilled army6 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 7
    label_unit 0 3 0 a7u1
    define_unit_group army7a a7u1
    if ! I_PercentageUnitGroupKilled army7a = 100
    undefine_unit_group army7a 	
    ;;;Army 7
    label_unit 0 3 0 a7u1
    label_unit 0 3 1 a7u2
    label_unit 0 3 2 a7u3
    label_unit 0 3 3 a7u4
    label_unit 0 3 4 a7u5
    label_unit 0 3 5 a7u6
    label_unit 0 3 6 a7u7
    label_unit 0 3 7 a7u8
    label_unit 0 3 8 a7u9
    label_unit 0 3 9 a7u10
    label_unit 0 3 10 a7u11
    label_unit 0 3 11 a7u12
    label_unit 0 3 12 a7u13
    label_unit 0 3 13 a7u14
    label_unit 0 3 14 a7u15
    label_unit 0 3 15 a7u16
    label_unit 0 3 16 a7u17
    label_unit 0 3 17 a7u18
    label_unit 0 3 18 a7u19
    label_unit 0 3 19 a7u20

    define_unit_group army7 a7u1 a7u2 a7u3 a7u4 a7u5 a7u6 a7u7 a7u8 a7u9 a7u10 a7u11 a7u12 a7u13 a7u14 a7u15 a7u16 a7u17 a7u18 a7u19 a7u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 8
    label_unit 1 3 0 a8u1
    define_unit_group army8a a8u1
    if ! I_PercentageUnitGroupKilled army8a = 100
    undefine_unit_group army8a 	
    ;;;Army 8
    label_unit 1 3 0 a8u1
    label_unit 1 3 1 a8u2
    label_unit 1 3 2 a8u3
    label_unit 1 3 3 a8u4
    label_unit 1 3 4 a8u5
    label_unit 1 3 5 a8u6
    label_unit 1 3 6 a8u7
    label_unit 1 3 7 a8u8
    label_unit 1 3 8 a8u9
    label_unit 1 3 9 a8u10
    label_unit 1 3 10 a8u11
    label_unit 1 3 11 a8u12
    label_unit 1 3 12 a8u13
    label_unit 1 3 13 a8u14
    label_unit 1 3 14 a8u15
    label_unit 1 3 15 a8u16
    label_unit 1 3 16 a8u17
    label_unit 1 3 17 a8u18
    label_unit 1 3 18 a8u19
    label_unit 1 3 19 a8u20

    define_unit_group army8 a8u1 a8u2 a8u3 a8u4 a8u5 a8u6 a8u7 a8u8 a8u9 a8u10 a8u11 a8u12 a8u13 a8u14 a8u15 a8u16 a8u17 a8u18 a8u19 a8u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army7 = 100
    set_counter army7_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army8 = 100
    set_counter army8_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army7 = 100
    and I_PercentageUnitGroupKilled army8 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 9
    label_unit 0 4 0 a9u1
    define_unit_group army9a a9u1
    if ! I_PercentageUnitGroupKilled army9a = 100
    undefine_unit_group army9a 	
    ;;;Army 9
    label_unit 0 4 0 a9u1
    label_unit 0 4 1 a9u2
    label_unit 0 4 2 a9u3
    label_unit 0 4 3 a9u4
    label_unit 0 4 4 a9u5
    label_unit 0 4 5 a9u6
    label_unit 0 4 6 a9u7
    label_unit 0 4 7 a9u8
    label_unit 0 4 8 a9u9
    label_unit 0 4 9 a9u10
    label_unit 0 4 10 a9u11
    label_unit 0 4 11 a9u12
    label_unit 0 4 12 a9u13
    label_unit 0 4 13 a9u14
    label_unit 0 4 14 a9u15
    label_unit 0 4 15 a9u16
    label_unit 0 4 16 a9u17
    label_unit 0 4 17 a9u18
    label_unit 0 4 18 a9u19
    label_unit 0 4 19 a9u20

    define_unit_group army9 a9u1 a9u2 a9u3 a9u4 a9u5 a9u6 a9u7 a9u8 a9u9 a9u10 a9u11 a9u12 a9u13 a9u14 a9u15 a9u16 a9u17 a9u18 a9u19 a9u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 10
    label_unit 1 4 0 a10u1
    define_unit_group army10a a10u1
    if ! I_PercentageUnitGroupKilled army10a = 100
    undefine_unit_group army10a 	
    ;;;Army 10
    label_unit 1 4 0 a10u1
    label_unit 1 4 1 a10u2
    label_unit 1 4 2 a10u3
    label_unit 1 4 3 a10u4
    label_unit 1 4 4 a10u5
    label_unit 1 4 5 a10u6
    label_unit 1 4 6 a10u7
    label_unit 1 4 7 a10u8
    label_unit 1 4 8 a10u9
    label_unit 1 4 9 a10u10
    label_unit 1 4 10 a10u11
    label_unit 1 4 11 a10u12
    label_unit 1 4 12 a10u13
    label_unit 1 4 13 a10u14
    label_unit 1 4 14 a10u15
    label_unit 1 4 15 a10u16
    label_unit 1 4 16 a10u17
    label_unit 1 4 17 a10u18
    label_unit 1 4 18 a10u19
    label_unit 1 4 19 a10u20

    define_unit_group army10 a10u1 a10u2 a10u3 a10u4 a10u5 a10u6 a10u7 a10u8 a10u9 a10u10 a10u11 a10u12 a10u13 a10u14 a10u15 a10u16 a10u17 a10u18 a10u19 a10u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army9 = 100
    set_counter army9_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army10 = 100
    set_counter army10_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army9 = 100
    and I_PercentageUnitGroupKilled army10 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 11
    label_unit 0 5 0 a11u1
    define_unit_group army11a a11u1
    if ! I_PercentageUnitGroupKilled army11a = 100
    undefine_unit_group army11a 	
    ;;;Army 11
    label_unit 0 5 0 a11u1
    label_unit 0 5 1 a11u2
    label_unit 0 5 2 a11u3
    label_unit 0 5 3 a11u4
    label_unit 0 5 4 a11u5
    label_unit 0 5 5 a11u6
    label_unit 0 5 6 a11u7
    label_unit 0 5 7 a11u8
    label_unit 0 5 8 a11u9
    label_unit 0 5 9 a11u10
    label_unit 0 5 10 a11u11
    label_unit 0 5 11 a11u12
    label_unit 0 5 12 a11u13
    label_unit 0 5 13 a11u14
    label_unit 0 5 14 a11u15
    label_unit 0 5 15 a11u16
    label_unit 0 5 16 a11u17
    label_unit 0 5 17 a11u18
    label_unit 0 5 18 a11u19
    label_unit 0 5 19 a11u20

    define_unit_group army11 a11u1 a11u2 a11u3 a11u4 a11u5 a11u6 a11u7 a11u8 a11u9 a11u10 a11u11 a11u12 a11u13 a11u14 a11u15 a11u16 a11u17 a11u18 a11u19 a11u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 12
    label_unit 1 5 0 a12u1
    define_unit_group army12a a12u1
    if ! I_PercentageUnitGroupKilled army12a = 100
    undefine_unit_group army12a 	
    ;;;Army 12
    label_unit 1 5 0 a12u1
    label_unit 1 5 1 a12u2
    label_unit 1 5 2 a12u3
    label_unit 1 5 3 a12u4
    label_unit 1 5 4 a12u5
    label_unit 1 5 5 a12u6
    label_unit 1 5 6 a12u7
    label_unit 1 5 7 a12u8
    label_unit 1 5 8 a12u9
    label_unit 1 5 9 a12u10
    label_unit 1 5 10 a12u11
    label_unit 1 5 11 a12u12
    label_unit 1 5 12 a12u13
    label_unit 1 5 13 a12u14
    label_unit 1 5 14 a12u15
    label_unit 1 5 15 a12u16
    label_unit 1 5 16 a12u17
    label_unit 1 5 17 a12u18
    label_unit 1 5 18 a12u19
    label_unit 1 5 19 a12u20

    define_unit_group army12 a12u1 a12u2 a12u3 a12u4 a12u5 a12u6 a12u7 a12u8 a12u9 a12u10 a12u11 a12u12 a12u13 a12u14 a12u15 a12u16 a12u17 a12u18 a12u19 a12u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army11 = 100
    set_counter army11_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army12 = 100
    set_counter army12_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army11 = 100
    and I_PercentageUnitGroupKilled army12 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 13
    label_unit 0 6 0 a13u1
    define_unit_group army13a a13u1
    if ! I_PercentageUnitGroupKilled army13a = 100
    undefine_unit_group army13a 	
    ;;;Army 13
    label_unit 0 6 0 a13u1
    label_unit 0 6 1 a13u2
    label_unit 0 6 2 a13u3
    label_unit 0 6 3 a13u4
    label_unit 0 6 4 a13u5
    label_unit 0 6 5 a13u6
    label_unit 0 6 6 a13u7
    label_unit 0 6 7 a13u8
    label_unit 0 6 8 a13u9
    label_unit 0 6 9 a13u10
    label_unit 0 6 10 a13u11
    label_unit 0 6 11 a13u12
    label_unit 0 6 12 a13u13
    label_unit 0 6 13 a13u14
    label_unit 0 6 14 a13u15
    label_unit 0 6 15 a13u16
    label_unit 0 6 16 a13u17
    label_unit 0 6 17 a13u18
    label_unit 0 6 18 a13u19
    label_unit 0 6 19 a13u20

    define_unit_group army13 a13u1 a13u2 a13u3 a13u4 a13u5 a13u6 a13u7 a13u8 a13u9 a13u10 a13u11 a13u12 a13u13 a13u14 a13u15 a13u16 a13u17 a13u18 a13u19 a13u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker	
    ;;;Army 14
    label_unit 1 6 0 a14u1
    define_unit_group army14a a14u1
    if ! I_PercentageUnitGroupKilled army14a = 100
    undefine_unit_group army14a 	
    ;;;Army 14
    label_unit 1 6 0 a14u1
    label_unit 1 6 1 a14u2
    label_unit 1 6 2 a14u3
    label_unit 1 6 3 a14u4
    label_unit 1 6 4 a14u5
    label_unit 1 6 5 a14u6
    label_unit 1 6 6 a14u7
    label_unit 1 6 7 a14u8
    label_unit 1 6 8 a14u9
    label_unit 1 6 9 a14u10
    label_unit 1 6 10 a14u11
    label_unit 1 6 11 a14u12
    label_unit 1 6 12 a14u13
    label_unit 1 6 13 a14u14
    label_unit 1 6 14 a14u15
    label_unit 1 6 15 a14u16
    label_unit 1 6 16 a14u17
    label_unit 1 6 17 a14u18
    label_unit 1 6 18 a14u19
    label_unit 1 6 19 a14u20

    define_unit_group army14 a14u1 a14u2 a14u3 a14u4 a14u5 a14u6 a14u7 a14u8 a14u9 a14u10 a14u11 a14u12 a14u13 a14u14 a14u15 a14u16 a14u17 a14u18 a14u19 a14u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army13 = 100
    set_counter army13_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army14 = 100
    set_counter army14_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army13 = 100
    and I_PercentageUnitGroupKilled army14 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 15
    label_unit 0 7 0 a15u1
    define_unit_group army15a a15u1
    if ! I_PercentageUnitGroupKilled army15a = 100
    undefine_unit_group army15a 	
    ;;;Army 15
    label_unit 0 7 0 a15u1
    label_unit 0 7 1 a15u2
    label_unit 0 7 2 a15u3
    label_unit 0 7 3 a15u4
    label_unit 0 7 4 a15u5
    label_unit 0 7 5 a15u6
    label_unit 0 7 6 a15u7
    label_unit 0 7 7 a15u8
    label_unit 0 7 8 a15u9
    label_unit 0 7 9 a15u10
    label_unit 0 7 10 a15u11
    label_unit 0 7 11 a15u12
    label_unit 0 7 12 a15u13
    label_unit 0 7 13 a15u14
    label_unit 0 7 14 a15u15
    label_unit 0 7 15 a15u16
    label_unit 0 7 16 a15u17
    label_unit 0 7 17 a15u18
    label_unit 0 7 18 a15u19
    label_unit 0 7 19 a15u20

    define_unit_group army15 a15u1 a15u2 a15u3 a15u4 a15u5 a15u6 a15u7 a15u8 a15u9 a15u10 a15u11 a15u12 a15u13 a15u14 a15u15 a15u16 a15u17 a15u18 a15u19 a15u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker	
    ;;;Army 16
    label_unit 1 7 0 a16u1
    define_unit_group army16a a16u1
    if ! I_PercentageUnitGroupKilled army16a = 100
    undefine_unit_group army16a 	
    ;;;Army 16
    label_unit 1 7 0 a16u1
    label_unit 1 7 1 a16u2
    label_unit 1 7 2 a16u3
    label_unit 1 7 3 a16u4
    label_unit 1 7 4 a16u5
    label_unit 1 7 5 a16u6
    label_unit 1 7 6 a16u7
    label_unit 1 7 7 a16u8
    label_unit 1 7 8 a16u9
    label_unit 1 7 9 a16u10
    label_unit 1 7 10 a16u11
    label_unit 1 7 11 a16u12
    label_unit 1 7 12 a16u13
    label_unit 1 7 13 a16u14
    label_unit 1 7 14 a16u15
    label_unit 1 7 15 a16u16
    label_unit 1 7 16 a16u17
    label_unit 1 7 17 a16u18
    label_unit 1 7 18 a16u19
    label_unit 1 7 19 a16u20

    define_unit_group army16 a16u1 a16u2 a16u3 a16u4 a16u5 a16u6 a16u7 a16u8 a16u9 a16u10 a16u11 a16u12 a16u13 a16u14 a16u15 a16u16 a16u17 a16u18 a16u19 a16u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army15 = 100
    set_counter army15_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army16 = 100
    set_counter army16_reinf_allied 1
    end_if
end_if

end_if
battle_wait 0.5
ai_active_set on

;;;;;;;Reinforcements

    ;;;;;;; Attacking
    if ! I_BattlePlayerArmyIsAttacker
    and ! I_ConflictType SuccessfulAmbush
;    and ! I_ConflictType FailedAmbush
    and ! I_BattleIsSiegeBattle
    and I_CompareCounter army3_reinf_allied = 1

    set_counter apply_strategy 1
;    battle_wait 1
;    set_counter att_alliance_ready 1
    end_if

    ;;;;;;; Defending
    if I_BattlePlayerArmyIsAttacker
    and ! I_ConflictType SuccessfulAmbush
;    and ! I_ConflictType FailedAmbush
    and I_CompareCounter army4_reinf_allied = 1

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    set_counter army4_ready 1
    set_counter def_alliance_ready 1
    end_if
    if ! I_BattleIsSiegeBattle
    and I_BattleIsSallyOutBattle
    set_counter army4_ready_sally 1
    set_counter sally_reinf 1
    end_if

    ;;;;;;; Siege
    if I_BattleIsSiegeBattle
    set_counter def_alliance_ready_siege 1
    end_if
    end_if
end_if
end_if
end_if
end_monitor

;Apply Strategy

monitor_conditions I_BattleStarted
    and I_CompareCounter apply_strategy = 1

if ! I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1

;    ai_gta_plan_set 0 ATTACK_ALL
    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    set_counter launch_alliance_0 1
end_if

if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1

;    ai_gta_plan_set 1 ATTACK_ALL
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
    set_counter launch_alliance_1 1
end_if

if I_CompareCounter launch_alliance_0 = 1
    and I_CompareCounter army3_reinf_allied = 1

    ;;;Army 1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u20
    ;;;Army 3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u20
if I_CompareCounter army5_reinf_allied = 1
    ;;;Army 5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u20
if I_CompareCounter army7_reinf_allied = 1
    ;;;Army 7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u20
if I_CompareCounter army9_reinf_allied = 1
     ;;;Army 9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u20
if I_CompareCounter army11_reinf_allied = 1
    ;;;Army 11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u20
if I_CompareCounter army13_reinf_allied = 1
    ;;;Army 13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u20
if I_CompareCounter army15_reinf_allied = 1
    ;;;Army 15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u20
end_if
end_if
end_if
end_if
end_if
end_if
end_if

if I_CompareCounter launch_alliance_1 = 1
    and I_CompareCounter army4_reinf_allied = 1

    ;;;Army 2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u20
    ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20
if I_CompareCounter army6_reinf_allied = 1
    ;;;Army 6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u20
if I_CompareCounter army8_reinf_allied = 1
    ;;;Army 8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u20
if I_CompareCounter army10_reinf_allied = 1
     ;;;Army 10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u20
if I_CompareCounter army12_reinf_allied = 1
    ;;;Army 12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u20
if I_CompareCounter army14_reinf_allied = 1
    ;;;Army 14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u20
if I_CompareCounter army16_reinf_allied = 1
    ;;;Army 16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u20
end_if
end_if
end_if
end_if
end_if
end_if
end_if
battle_wait 0.5
ai_active_set on
set_counter apply_strategy 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter relaunch_movement = 1

    ai_active_set on
    battle_wait 0.5
    set_counter army3_moving 0
    set_counter army4_moving 0
    set_counter army5_moving 0
    set_counter army6_moving 0
    set_counter army7_moving 0
    set_counter army8_moving 0
    set_counter army9_moving 0
    set_counter army10_moving 0
    set_counter army11_moving 0
    set_counter army12_moving 0
    set_counter army13_moving 0
    set_counter army14_moving 0
    set_counter army15_moving 0
    set_counter army16_moving 0

    battle_wait 5
    set_counter relaunch_movement 0
end_monitor

;;;;;;; Attacking

monitor_conditions I_BattleStarted
    and I_CompareCounter att_alliance_ready = 1
    and ! I_BattlePlayerArmyIsAttacker
 ;    inc_counter reinf_check_interval 1
 if I_CompareCounter army3_reinf_allied = 1

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 1
    and I_UnitEnemyUnitInRadius a3u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army3_moving 0
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 1
    and ! I_UnitEnemyUnitInRadius a3u1 160
    and I_UnitDistanceFromUnit a1u1 a3u1 > 150
    and I_IsUnitIdle a3u1

    set_counter army3_reinf_late 1
    battle_wait 1
    set_counter army3_moving 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 0
    and ! I_UnitEnemyUnitInRadius a3u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    set_counter army3_run 1
    set_counter army3_moving 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 1000

    set_counter army3_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 750

    set_counter army3_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 500

    set_counter army3_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 300

    set_counter army3_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 200

    set_counter army3_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a3u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    set_counter army3_run 1
    battle_wait 0.5
    set_counter army3_moving 1
    set_counter army3_reinf_late 0
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 100

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitKilled a3u1 > 60

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitGroupKilled army3 > 50

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army3 a1u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a3u1 < 250
    and I_IsUnitIdle a3u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a3u1 < 250
    and I_IsUnitUnderFire a3u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_run = 1

;    unit_group_order_halt army3
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army3 a1u1 run
    battle_wait 0.5
    set_counter army3_run 0
    end_if

end_if

if I_CompareCounter army5_reinf_allied = 1

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 1
    and I_UnitEnemyUnitInRadius a5u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army5_moving 0
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 1
    and ! I_UnitEnemyUnitInRadius a5u1 160
    and I_UnitDistanceFromUnit a1u1 a5u1 > 150
    and I_IsUnitIdle a5u1

    set_counter army5_reinf_late 1
    battle_wait 1
    set_counter army5_moving 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 0
    and ! I_UnitEnemyUnitInRadius a5u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    set_counter army5_run 1
    set_counter army5_moving 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 1000

    set_counter army5_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 750

    set_counter army5_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 500

    set_counter army5_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 300

    set_counter army5_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 200

    set_counter army5_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a5u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    set_counter army5_run 1
    battle_wait 0.5
    set_counter army5_moving 1
    set_counter army5_reinf_late 0
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 100

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitKilled a5u1 > 60

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitGroupKilled army5 > 50

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army5 a1u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a5u1 < 250
    and I_IsUnitIdle a5u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a5u1 < 250
    and I_IsUnitUnderFire a5u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_run = 1

;    unit_group_order_halt army5
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army5 a1u1 run
    battle_wait 0.5
    set_counter army5_run 0
    end_if

end_if

if I_CompareCounter army7_reinf_allied = 1

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 1
    and I_UnitEnemyUnitInRadius a7u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army7_moving 0
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 1
    and ! I_UnitEnemyUnitInRadius a7u1 160
    and I_UnitDistanceFromUnit a1u1 a7u1 > 150
    and I_IsUnitIdle a7u1

    set_counter army7_reinf_late 1
    battle_wait 1
    set_counter army7_moving 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 0
    and ! I_UnitEnemyUnitInRadius a7u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    set_counter army7_run 1
    set_counter army7_moving 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 1000

    set_counter army7_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 750

    set_counter army7_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 500

    set_counter army7_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 300

    set_counter army7_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 200

    set_counter army7_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a7u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    set_counter army7_run 1
    battle_wait 0.5
    set_counter army7_moving 1
    set_counter army7_reinf_late 0
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 100

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitKilled a7u1 > 60

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitGroupKilled army7 > 50

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army7 a1u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a7u1 < 250
    and I_IsUnitIdle a7u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a7u1 < 250
    and I_IsUnitUnderFire a7u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_run = 1

;    unit_group_order_halt army7
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army7 a1u1 run
    battle_wait 0.5
    set_counter army7_run 0
    end_if

end_if

if I_CompareCounter army9_reinf_allied = 1

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 1
    and I_UnitEnemyUnitInRadius a9u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army9_moving 0
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 1
    and ! I_UnitEnemyUnitInRadius a9u1 160
    and I_UnitDistanceFromUnit a1u1 a9u1 > 150
    and I_IsUnitIdle a9u1

    set_counter army9_reinf_late 1
    battle_wait 1
    set_counter army9_moving 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 0
    and ! I_UnitEnemyUnitInRadius a9u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    set_counter army9_run 1
    set_counter army9_moving 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 1000

    set_counter army9_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 750

    set_counter army9_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 500

    set_counter army9_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 300

    set_counter army9_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 200

    set_counter army9_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a9u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    set_counter army9_run 1
    battle_wait 0.5
    set_counter army9_moving 1
    set_counter army9_reinf_late 0
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 100

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitKilled a9u1 > 60

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitGroupKilled army9 > 50

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army9 a1u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a9u1 < 250
    and I_IsUnitIdle a9u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a9u1 < 250
    and I_IsUnitUnderFire a9u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_run = 1

;    unit_group_order_halt army9
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army9 a1u1 run
    battle_wait 0.5
    set_counter army9_run 0
    end_if

end_if

if I_CompareCounter army11_reinf_allied = 1

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 1
    and I_UnitEnemyUnitInRadius a11u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army11_moving 0
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 1
    and ! I_UnitEnemyUnitInRadius a11u1 160
    and I_UnitDistanceFromUnit a1u1 a11u1 > 150
    and I_IsUnitIdle a11u1

    set_counter army11_reinf_late 1
    battle_wait 1
    set_counter army11_moving 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 0
    and ! I_UnitEnemyUnitInRadius a11u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    set_counter army11_run 1
    set_counter army11_moving 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 1000

    set_counter army11_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 750

    set_counter army11_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 500

    set_counter army11_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 300

    set_counter army11_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 200

    set_counter army11_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a11u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    set_counter army11_run 1
    battle_wait 0.5
    set_counter army11_moving 1
    set_counter army11_reinf_late 0
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 100

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitKilled a11u1 > 60

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitGroupKilled army11 > 50

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army11 a1u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a11u1 < 250
    and I_IsUnitIdle a11u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a11u1 < 250
    and I_IsUnitUnderFire a11u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_run = 1

;    unit_group_order_halt army11
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army11 a1u1 run
    battle_wait 0.5
    set_counter army11_run 0
    end_if

end_if

if I_CompareCounter army13_reinf_allied = 1

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 1
    and I_UnitEnemyUnitInRadius a13u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army13_moving 0
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 1
    and ! I_UnitEnemyUnitInRadius a13u1 160
    and I_UnitDistanceFromUnit a1u1 a13u1 > 150
    and I_IsUnitIdle a13u1

    set_counter army13_reinf_late 1
    battle_wait 1
    set_counter army13_moving 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 0
    and ! I_UnitEnemyUnitInRadius a13u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    set_counter army13_run 1
    set_counter army13_moving 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 1000

    set_counter army13_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 750

    set_counter army13_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 500

    set_counter army13_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 300

    set_counter army13_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 200

    set_counter army13_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a13u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    set_counter army13_run 1
    battle_wait 0.5
    set_counter army13_moving 1
    set_counter army13_reinf_late 0
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 100

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitKilled a13u1 > 60

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitGroupKilled army13 > 50

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army13 a1u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a13u1 < 250
    and I_IsUnitIdle a13u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a13u1 < 250
    and I_IsUnitUnderFire a13u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_run = 1

;    unit_group_order_halt army13
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army13 a1u1 run
    battle_wait 0.5
    set_counter army13_run 0
    end_if

end_if

if I_CompareCounter army15_reinf_allied = 1

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 1
    and I_UnitEnemyUnitInRadius a15u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army15_moving 0
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 1
    and ! I_UnitEnemyUnitInRadius a15u1 160
    and I_UnitDistanceFromUnit a1u1 a15u1 > 150
    and I_IsUnitIdle a15u1

    set_counter army15_reinf_late 1
    battle_wait 1
    set_counter army15_moving 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 0
    and ! I_UnitEnemyUnitInRadius a15u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    set_counter army15_run 1
    set_counter army15_moving 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 1000

    set_counter army15_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 750

    set_counter army15_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 500

    set_counter army15_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 300

    set_counter army15_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 200

    set_counter army15_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a15u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    set_counter army15_run 1
    battle_wait 0.5
    set_counter army15_moving 1
    set_counter army15_reinf_late 0
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 100

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitKilled a15u1 > 60

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitGroupKilled army15 > 50

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army15 a1u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a15u1 < 250
    and I_IsUnitIdle a15u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a15u1 < 250
    and I_IsUnitUnderFire a15u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_run = 1

;    unit_group_order_halt army15
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army15 a1u1 run
    battle_wait 0.5
    set_counter army15_run 0
    end_if

end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;; Defending

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_BattlePlayerArmyIsAttacker

;    inc_counter reinf_check_interval 1

if I_CompareCounter army4_reinf_allied = 1

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 1
    and I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army4_moving 0
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and I_UnitDistanceFromUnit a2u1 a4u1 > 150
    and I_IsUnitIdle a4u1

    set_counter army4_reinf_late 1
    battle_wait 1
    set_counter army4_moving 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 0
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run 1
    set_counter army4_moving 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 1000

    set_counter army4_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 750

    set_counter army4_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 500

    set_counter army4_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300

    set_counter army4_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200

    set_counter army4_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run 1
    battle_wait 0.5
    set_counter army4_moving 1
    set_counter army4_reinf_late 0
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 100

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitKilled a4u1 > 60

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitGroupKilled army4 > 50

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army4 a2u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitIdle a4u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitUnderFire a4u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_run = 1

;    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army4 a2u1 run
    battle_wait 0.5
    set_counter army4_run 0
    end_if

end_if

if I_CompareCounter army6_reinf_allied = 1

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 1
    and I_UnitEnemyUnitInRadius a6u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army6_moving 0
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 1
    and ! I_UnitEnemyUnitInRadius a6u1 160
    and I_UnitDistanceFromUnit a2u1 a6u1 > 150
    and I_IsUnitIdle a6u1

    set_counter army6_reinf_late 1
    battle_wait 1
    set_counter army6_moving 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 0
    and ! I_UnitEnemyUnitInRadius a6u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    set_counter army6_run 1
    set_counter army6_moving 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 1000

    set_counter army6_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 750

    set_counter army6_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 500

    set_counter army6_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 300

    set_counter army6_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 200

    set_counter army6_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a6u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    set_counter army6_run 1
    battle_wait 0.5
    set_counter army6_moving 1
    set_counter army6_reinf_late 0
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 100

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitKilled a6u1 > 60

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitGroupKilled army6 > 50

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army6 a2u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a6u1 < 250
    and I_IsUnitIdle a6u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a6u1 < 250
    and I_IsUnitUnderFire a6u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_run = 1

;    unit_group_order_halt army6
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army6 a2u1 run
    battle_wait 0.5
    set_counter army6_run 0
    end_if

end_if

if I_CompareCounter army8_reinf_allied = 1

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 1
    and I_UnitEnemyUnitInRadius a8u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army8_moving 0
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 1
    and ! I_UnitEnemyUnitInRadius a8u1 160
    and I_UnitDistanceFromUnit a2u1 a8u1 > 150
    and I_IsUnitIdle a8u1

    set_counter army8_reinf_late 1
    battle_wait 1
    set_counter army8_moving 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 0
    and ! I_UnitEnemyUnitInRadius a8u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    set_counter army8_run 1
    set_counter army8_moving 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 1000

    set_counter army8_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 750

    set_counter army8_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 500

    set_counter army8_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 300

    set_counter army8_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 200

    set_counter army8_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a8u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    set_counter army8_run 1
    battle_wait 0.5
    set_counter army8_moving 1
    set_counter army8_reinf_late 0
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 100

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitKilled a8u1 > 60

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitGroupKilled army8 > 50

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army8 a2u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a8u1 < 250
    and I_IsUnitIdle a8u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a8u1 < 250
    and I_IsUnitUnderFire a8u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_run = 1

;    unit_group_order_halt army8
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army8 a2u1 run
    battle_wait 0.5
    set_counter army8_run 0
    end_if

end_if

if I_CompareCounter army10_reinf_allied = 1

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 1
    and I_UnitEnemyUnitInRadius a10u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army10_moving 0
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 1
    and ! I_UnitEnemyUnitInRadius a10u1 160
    and I_UnitDistanceFromUnit a2u1 a10u1 > 150
    and I_IsUnitIdle a10u1

    set_counter army10_reinf_late 1
    battle_wait 1
    set_counter army10_moving 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 0
    and ! I_UnitEnemyUnitInRadius a10u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    set_counter army10_run 1
    set_counter army10_moving 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 1000

    set_counter army10_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 750

    set_counter army10_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 500

    set_counter army10_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 300

    set_counter army10_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 200

    set_counter army10_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a10u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    set_counter army10_run 1
    battle_wait 0.5
    set_counter army10_moving 1
    set_counter army10_reinf_late 0
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 100

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitKilled a10u1 > 60

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitGroupKilled army10 > 50

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army10 a2u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a10u1 < 250
    and I_IsUnitIdle a10u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a10u1 < 250
    and I_IsUnitUnderFire a10u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_run = 1

;    unit_group_order_halt army10
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army10 a2u1 run
    battle_wait 0.5
    set_counter army10_run 0
    end_if

end_if

if I_CompareCounter army12_reinf_allied = 1

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 1
    and I_UnitEnemyUnitInRadius a12u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army12_moving 0
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 1
    and ! I_UnitEnemyUnitInRadius a12u1 160
    and I_UnitDistanceFromUnit a2u1 a12u1 > 150
    and I_IsUnitIdle a12u1

    set_counter army12_reinf_late 1
    battle_wait 1
    set_counter army12_moving 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 0
    and ! I_UnitEnemyUnitInRadius a12u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    set_counter army12_run 1
    set_counter army12_moving 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 1000

    set_counter army12_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 750

    set_counter army12_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 500

    set_counter army12_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 300

    set_counter army12_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 200

    set_counter army12_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a12u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    set_counter army12_run 1
    battle_wait 0.5
    set_counter army12_moving 1
    set_counter army12_reinf_late 0
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 100

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitKilled a12u1 > 60

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitGroupKilled army12 > 50

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army12 a2u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a12u1 < 250
    and I_IsUnitIdle a12u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a12u1 < 250
    and I_IsUnitUnderFire a12u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_run = 1

;    unit_group_order_halt army12
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army12 a2u1 run
    battle_wait 0.5
    set_counter army12_run 0
    end_if

end_if

if I_CompareCounter army14_reinf_allied = 1

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 1
    and I_UnitEnemyUnitInRadius a14u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army14_moving 0
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 1
    and ! I_UnitEnemyUnitInRadius a14u1 160
    and I_UnitDistanceFromUnit a2u1 a14u1 > 150
    and I_IsUnitIdle a14u1

    set_counter army14_reinf_late 1
    battle_wait 1
    set_counter army14_moving 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 0
    and ! I_UnitEnemyUnitInRadius a14u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    set_counter army14_run 1
    set_counter army14_moving 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 1000

    set_counter army14_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 750

    set_counter army14_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 500

    set_counter army14_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 300

    set_counter army14_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 200

    set_counter army14_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a14u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    set_counter army14_run 1
    battle_wait 0.5
    set_counter army14_moving 1
    set_counter army14_reinf_late 0
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 100

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitKilled a14u1 > 60

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitGroupKilled army14 > 50

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army14 a2u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a14u1 < 250
    and I_IsUnitIdle a14u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a14u1 < 250
    and I_IsUnitUnderFire a14u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_run = 1

;    unit_group_order_halt army14
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army14 a2u1 run
    battle_wait 0.5
    set_counter army14_run 0
    end_if

end_if

if I_CompareCounter army16_reinf_allied = 1

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 1
    and I_UnitEnemyUnitInRadius a16u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army16_moving 0
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 1
    and ! I_UnitEnemyUnitInRadius a16u1 160
    and I_UnitDistanceFromUnit a2u1 a16u1 > 150
    and I_IsUnitIdle a16u1

    set_counter army16_reinf_late 1
    battle_wait 1
    set_counter army16_moving 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 0
    and ! I_UnitEnemyUnitInRadius a16u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    set_counter army16_run 1
    set_counter army16_moving 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 1000

    set_counter army16_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 750

    set_counter army16_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 500

    set_counter army16_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 300

    set_counter army16_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 200

    set_counter army16_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a16u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    set_counter army16_run 1
    battle_wait 0.5
    set_counter army16_moving 1
    set_counter army16_reinf_late 0
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 100

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitKilled a16u1 > 60

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitGroupKilled army16 > 50

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army16 a2u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a16u1 < 250
    and I_IsUnitIdle a16u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a16u1 < 250
    and I_IsUnitUnderFire a16u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_run = 1

;    unit_group_order_halt army16
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army16 a2u1 run
    battle_wait 0.5
    set_counter army16_run 0
    end_if

end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;; Defending Siege

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready_siege = 1
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter army4_ready_siege = 1

;    inc_counter reinf_check_interval 1

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 1
    and I_UnitEnemyUnitInRadius a4u1 160

    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    set_counter army4_moving_siege 0
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and I_UnitDistanceFromUnit a2u1 a4u1 > 150
    and I_IsUnitIdle a4u1

    set_counter army4_run_siege 1
    battle_wait 2
    set_counter army4_moving_siege 1
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 0
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run_siege 1
    set_counter army4_moving_siege 1
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromPosition a4u1 1 1 < 150

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitIdle a4u1

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitUnderFire a4u1

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_PercentageUnitGroupKilled army4 > 50

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_run_siege = 1

    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_order_move_formed army4 1 1 run
    set_counter army4_run_siege 0
    end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;;;;;;Sally-out, AI defending

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 1

    if I_UnitDistanceFromPosition a4u1 0 850 < 200
    set_counter army4_location 1 ;north
    end_if
    if I_UnitDistanceFromPosition a4u1 0 -850 < 200
    set_counter army4_location 2 ;south
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 0 < 200
    set_counter army4_location 3 ;west
    end_if
    if I_UnitDistanceFromPosition a4u1 850 0 < 200
    set_counter army4_location 4 ;east
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 850 < 200
    set_counter army4_location 5 ;nw
    end_if
    if I_UnitDistanceFromPosition a4u1 850 850 < 200
    set_counter army4_location 6 ;ne
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 850 < 200
    set_counter army4_location 7 ;sw
    end_if
    if I_UnitDistanceFromPosition a4u1 850 -850 < 200
    set_counter army4_location 8 ;se
    end_if

    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    set_counter	path_s 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    set_counter	path_sw 4
    set_counter	path_s 5
    end_if
    end_if
    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_ne 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    set_counter	path_n 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    set_counter	path_nw 4
    set_counter	path_n 5
    end_if
    end_if

    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_se 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    set_counter	path_e 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    set_counter	path_ne 4
    set_counter	path_e 5
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_sw 2
    set_counter	path_s 3
    end_if
    end_if

    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    set_counter	path_w 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    set_counter	path_sw 4
    set_counter	path_w 5
    end_if
    end_if
    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_ne 2
    set_counter	path_n 3
    end_if
    end_if

    if I_CompareCounter army4_location = 5 ;nw
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    end_if
    end_if

    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    end_if
    end_if
    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_sw 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_ne 2
    set_counter	path_e 3
    end_if
    end_if

    if I_CompareCounter army4_location = 6 ;ne
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    end_if
    end_if

    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    end_if
    end_if
    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7 ;sw
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_se 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    end_if
    end_if

    if I_CompareCounter army4_location = 8 ;se
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_ne 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    end_if
    end_if

    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_north = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_south = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_west = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if

    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_east = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_ready_sally = 1
    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_order_change_group_formation army4 ai_infantry_protecting
;	battle_wait 45
    battle_wait 20
    if I_CompareCounter army4_ready_sally = 1
    and I_BattleIsSallyOutBattle
    battle_wait 25
    end_if
    if I_CompareCounter army4_ready_sally = 1
    and I_BattleIsSallyOutBattle
    set_counter army4_ready_sally 2
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter label_army4 = 1

    label_unit 1 1 0 a4u1
    label_unit 1 1 1 a4u2
    label_unit 1 1 2 a4u3
    label_unit 1 1 3 a4u4
    label_unit 1 1 4 a4u5
    label_unit 1 1 5 a4u6
    label_unit 1 1 6 a4u7
    label_unit 1 1 7 a4u8
    label_unit 1 1 8 a4u9
    label_unit 1 1 9 a4u10
    label_unit 1 1 10 a4u11
    label_unit 1 1 11 a4u12
    label_unit 1 1 12 a4u13
    label_unit 1 1 13 a4u14
    label_unit 1 1 14 a4u15
    label_unit 1 1 15 a4u16
    label_unit 1 1 16 a4u17
    label_unit 1 1 17 a4u18
    label_unit 1 1 18 a4u19
    label_unit 1 1 19 a4u20

;    unit_group_order_halt army4
    set_counter label_army4 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter army4_moving_s = 1
    and I_UnitEnemyUnitInRadius a4u1 130
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    unit_group_order_halt army4
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on

    set_counter army4_moving_s 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_n = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 0 700 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 500 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 500 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 700 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 700 < 100
    set_counter path_n 0
    if I_CompareCounter path_nw > 1
    set_counter path_nw 1
    end_if
    if I_CompareCounter path_ne > 1
    set_counter path_ne 1
    end_if
    if I_CompareCounter path_nw = 0
    and I_CompareCounter path_ne = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 500 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 500 < 100
    set_counter path_n 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 30
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_s = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 0 -700 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -500 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 -500 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -700 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 -700 < 100
    set_counter path_s 0
    if I_CompareCounter path_sw > 1
    set_counter path_sw 1
    end_if
    if I_CompareCounter path_se > 1
    set_counter path_se 1
    end_if
    if I_CompareCounter path_sw = 0
    and I_CompareCounter path_se = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -500 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 -500 < 100
    set_counter path_s 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_w = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 0 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -500 0 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -500 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 0 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 0 < 100
    set_counter path_w 0
    if I_CompareCounter path_nw > 1
    set_counter path_nw 1
    end_if
    if I_CompareCounter path_sw > 1
    set_counter path_sw 1
    end_if
    if I_CompareCounter path_nw = 0
    and I_CompareCounter path_sw = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 -500 0 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -500 0 < 100
    set_counter path_w 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_e = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 0 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 500 0 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 500 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 0 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 0 < 100
    set_counter path_e 0
    if I_CompareCounter path_ne > 1
    set_counter path_ne 1
    end_if
    if I_CompareCounter path_se > 1
    set_counter path_se 1
    end_if
    if I_CompareCounter path_ne = 0
    and I_CompareCounter path_se = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 500 0 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 500 0 < 100
    set_counter path_e 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_nw = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 700 < 100
    set_counter path_nw 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_w = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_ne = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 700 < 100
    set_counter path_ne 0
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_e = 0
    and I_CompareCounter path_n = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_sw = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 -700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 -700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 -700 < 100
    set_counter path_sw 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_se = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 -700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 -700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 -700 < 100
    set_counter path_se 0
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_s = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 3

    set_counter army4_ready_sally 0
    unit_group_order_halt army4
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_IsUnitRouting a4u1

    set_counter army4_ready_sally 3
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_PercentageUnitKilled a4u1 > 80

    set_counter army4_ready_sally 3
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2

    if I_IsUnitGroupIdle army4
    inc_counter army4_idle_r 1
    end_if

    if ! I_IsUnitGroupIdle army4
    set_counter army4_idle_r 0
    end_if

    if I_CompareCounter army4_idle_r > 12
    set_counter army4_ready_sally 0
    end_if
    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_n = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_n 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_s = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_s 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_w = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_w 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_e = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_e 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_nw = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_nw 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_ne = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_ne 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_sw = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_sw 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_se = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_se 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

;################## Germanicu5 Integrated Stakes script ###########################

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAttacking
    and ! I_ConflictType SuccessfulAmbush
    and ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel < 3
    and I_IsBattleSettlementCastle
    and I_BattlePlayerAllianceOddsAgainst < 2.0
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel > 2
    and I_IsBattleSettlementCastle
    and I_BattlePlayerAllianceOddsAgainst < 2.5
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 4
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel < 3
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerAllianceOddsAgainst < 1.7
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel > 2
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerAllianceOddsAgainst < 2.2
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter stakes_on = 1
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    and I_UnitEnemyUnitInRadius a2u1 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    and I_UnitEnemyUnitInRadius a2u2 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    and I_UnitEnemyUnitInRadius a2u3 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    and I_UnitEnemyUnitInRadius a2u4 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    and I_UnitEnemyUnitInRadius a2u5 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    and I_UnitEnemyUnitInRadius a2u6 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    and I_UnitEnemyUnitInRadius a2u7 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    and I_UnitEnemyUnitInRadius a2u8 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    and I_UnitEnemyUnitInRadius a2u9 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    and I_UnitEnemyUnitInRadius a2u10 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    and I_UnitEnemyUnitInRadius a2u11 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    and I_UnitEnemyUnitInRadius a2u12 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    and I_UnitEnemyUnitInRadius a2u13 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    and I_UnitEnemyUnitInRadius a2u14 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    and I_UnitEnemyUnitInRadius a2u15 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    and I_UnitEnemyUnitInRadius a2u16 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    and I_UnitEnemyUnitInRadius a2u17 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    and I_UnitEnemyUnitInRadius a2u18 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    and I_UnitEnemyUnitInRadius a2u19 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    and I_UnitEnemyUnitInRadius a2u20 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

if I_CompareCounter stakes_on = 2
;    ai_active_set off
    unit_group_order_halt army2

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    unit_deploy_stakes a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    unit_deploy_stakes a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    unit_deploy_stakes a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    unit_deploy_stakes a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    unit_deploy_stakes a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    unit_deploy_stakes a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    unit_deploy_stakes a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    unit_deploy_stakes a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    unit_deploy_stakes a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    unit_deploy_stakes a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    unit_deploy_stakes a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    unit_deploy_stakes a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    unit_deploy_stakes a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    unit_deploy_stakes a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    unit_deploy_stakes a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    unit_deploy_stakes a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    unit_deploy_stakes a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    unit_deploy_stakes a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    unit_deploy_stakes a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    unit_deploy_stakes a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter stakes_on 0
end_if
    battle_wait 1.5
end_monitor

monitor_event BattleDeploymentPhaseCommenced FactionIsLocal
    and I_BattlePlayerArmyIsAttacker
    and I_BattleIsSiegeBattle
    and I_CompareCounter panel_check = 1
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0

    if I_CompareCounter enemy_unit_count > 0
    unit_deploy_stakes a2u1

    if I_CompareCounter enemy_unit_count > 1
    unit_deploy_stakes a2u2

    if I_CompareCounter enemy_unit_count > 2
    unit_deploy_stakes a2u3

    if I_CompareCounter enemy_unit_count > 3
    unit_deploy_stakes a2u4

    if I_CompareCounter enemy_unit_count > 4
    unit_deploy_stakes a2u5

    if I_CompareCounter enemy_unit_count > 5
    unit_deploy_stakes a2u6

    if I_CompareCounter enemy_unit_count > 6
    unit_deploy_stakes a2u7

    if I_CompareCounter enemy_unit_count > 7
    unit_deploy_stakes a2u8

    if I_CompareCounter enemy_unit_count > 8
    unit_deploy_stakes a2u9

    if I_CompareCounter enemy_unit_count > 9
    unit_deploy_stakes a2u10

    if I_CompareCounter enemy_unit_count > 10
    unit_deploy_stakes a2u11

    if I_CompareCounter enemy_unit_count > 11
    unit_deploy_stakes a2u12

    if I_CompareCounter enemy_unit_count > 12
    unit_deploy_stakes a2u13

    if I_CompareCounter enemy_unit_count > 13
    unit_deploy_stakes a2u14

    if I_CompareCounter enemy_unit_count > 14
    unit_deploy_stakes a2u15

    if I_CompareCounter enemy_unit_count > 15
    unit_deploy_stakes a2u16

    if I_CompareCounter enemy_unit_count > 16
    unit_deploy_stakes a2u17

    if I_CompareCounter enemy_unit_count > 17
    unit_deploy_stakes a2u18

    if I_CompareCounter enemy_unit_count > 18
    unit_deploy_stakes a2u19

    if I_CompareCounter enemy_unit_count = 20
    unit_deploy_stakes a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter label_ready 0
end_monitor

;;;;;;;;HA fix;;;;;;;;;;;;

;monitor_conditions I_BattleStarted
;    and I_CompareCounter ha_fix = 1
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
;    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
;    and I_UnitEnemyUnitInRadius a2u1 250
;    ai_gta_plan_set 1 ATTACK_ALL
;    set_counter ha_fix 0
;    set_counter ob_defense_launch 0
;    set_counter ob_defend 4
;end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_CompareCounter open_battle = 1
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAttacking
;	and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60

    ai_gta_plan_set 0 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ha_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_BattleIsRiverBattle
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAssaultingCrossing
;	and I_BattleEnemyArmyPercentageOfUnitCategory cavalry >= 60

    ai_gta_add_objective 0 ASSAULT_CROSSING 999

;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 0 0 a1u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 0 0 a1u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 0 0 a1u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 0 0 a1u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 0 0 a1u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 0 0 a1u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 0 0 a1u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 0 0 a1u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 0 0 a1u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 0 0 a1u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 0 0 a1u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 0 0 a1u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 0 0 a1u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 0 0 a1u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 0 0 a1u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 0 0 a1u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 0 0 a1u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 0 0 a1u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 0 0 a1u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    battle_wait 0.5
    ai_active_set on

    set_counter ha_fix 0
end_monitor

;;;;;;;;Elephant;;;;;;;;;;;;

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and ! I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and ! I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off
    unit_group_order_halt army1

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    unit_group_order_halt army1
    battle_wait 0.5
    unit_group_order_change_group_formation army1 ai_wall_assault
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 1
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 1
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter del_objective = 1
    and I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    set_counter del_objective 2
    battle_wait 15
    if I_CompareCounter del_objective = 2
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter del_objective 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier2 = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSiegeBattle
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 1
    set_counter elephant_gate_tier2 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 2
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 2
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier3 = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter third_ring 1
    set_counter elephant_gate_tier3 0
end_monitor

;;;;;;;;Sally-Out Elephant;;;;;;;;;;;;

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

;	set_counter sally-out_fix 1
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter elephant_gate_s 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSallyOutBattle
    and I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

;	set_counter sally-out_fix 1
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter elephant_gate_s 1
    set_counter elephant_fix 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 1
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate_s != 2
    set_counter elephant_gate_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier2s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 1
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate_s != 2
    set_counter elephant_gate_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier2s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter del_objective_s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    set_counter del_objective_s 2
    battle_wait 15
    if I_CompareCounter del_objective_s = 2
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter del_objective_s 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier2s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter second_ring_s 1
    set_counter elephant_gate_tier2s 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 2
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring_s != 2
    set_counter second_ring_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier3s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 2
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring_s != 2
    set_counter second_ring_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier3s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier3s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter third_ring_s 1
    set_counter elephant_gate_tier3s 0
end_monitor

;;;;;;;Elephants Gate and Walls
monitor_event BattleBattleGatesDestroyedByEngine TrueCondition ;wtf
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    set_counter elephant_gate_s 0
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring_s 0
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

monitor_event BattleWallsCaptured TrueCondition
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    set_counter elephant_gate_s 0
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring_s 0
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

monitor_event BattleWallsBreachedByEngine TrueCondition
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 2
    set_counter rally_walls 0
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 2
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate_s 2
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter second_ring_s 2
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

;;;;;;;Sally Out Assault
monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel < 3
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 2.0

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel > 2
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 3
    and I_BattlePlayerAllianceOddsAgainst > 2.5

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel < 3
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 1.7

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel > 2
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 2.2

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 1.8

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

;;;;;;;Sally Out Defense

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 1
    and I_CompareCounter kill_sally = 0
;	and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 1 0 a2u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 1 0 a2u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 1 0 a2u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 1 0 a2u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 1 0 a2u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 1 0 a2u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 1 0 a2u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 1 0 a2u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 1 0 a2u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 1 0 a2u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 1 0 a2u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 1 0 a2u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 1 0 a2u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 1 0 a2u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 1 0 a2u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 1 0 a2u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 1 0 a2u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 1 0 a2u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 1 0 a2u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    set_counter sally_defense 2
    set_counter defend_location 1
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 2
;	and I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
    and I_UnitDistanceFromPosition a2u1 1 1 > 630
    and ! I_UnitEnemyUnitInRadius a2u1 160
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_IsUnitUnderFire a4u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter unit_under_fire 0
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_if

    if I_CompareCounter sally_defense = 0
    set_counter sally_defense 2
    end_if
    set_counter reform_back 0
    battle_wait 7
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 2
;	and I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
    and I_UnitDistanceFromPosition a2u1 1 1 > 560
    and I_UnitDistanceFromPosition a2u1 1 1 < 630
    and ! I_UnitEnemyUnitInRadius a2u1 160
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_IsUnitUnderFire a4u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

if I_CompareCounter repeat_test1 = 1
set_counter repeat_test1 2
end_if
if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1
and I_CompareCounter repeat_test1 = 0

set_counter unit_under_fire 0
set_counter repeat_test1 1
;battle_wait 10
end_if

if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1
and I_CompareCounter repeat_test1 = 2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter unit_under_fire 0
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_if

    if I_CompareCounter sally_defense = 0
    set_counter sally_defense 2
    end_if
    set_counter reform_back 0
    battle_wait 7
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 2
    and I_BattleIsSallyOutBattle
    and I_UnitDistanceFromPosition a2u1 1 1 > 630
    and I_UnitEnemyUnitInRadius a2u1 160

    set_counter sally_defense 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 2
    and I_UnitDistanceFromPosition a2u1 1 1 > 560
    and I_UnitDistanceFromPosition a2u1 1 1 < 630
    and I_UnitEnemyUnitInRadius a2u1 160

    set_counter sally_defense 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi < 2
;	and I_UnitDistanceFromPosition a2u1 1 1 < 660
    and I_UnitGroupDistanceFromPosition army2 1 1 < 630
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter repeat_test2 = 1
    set_counter repeat_test2 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test2 = 0

    set_counter repeat_test2 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test2 = 2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reform_multi 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if
set_counter reform_back 0
if I_CompareCounter repeat_test2 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi = 2
;	and I_UnitDistanceFromPosition a2u1 1 1 < 620
    and I_UnitGroupDistanceFromPosition army2 1 1 < 600
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter repeat_test3 = 1
    set_counter repeat_test3 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test3 = 0

    set_counter repeat_test3 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test3 = 2

    if ! I_UnitEnemyUnitInRadius a2u1 150
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, -100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, -100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if
    set_counter reform_multi 1

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    end_if

    if I_UnitEnemyUnitInRadius a2u1 150
    set_counter sally_defense 3
    battle_wait 7
    end_if
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test3 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi = 3
;	and I_UnitDistanceFromPosition a2u1 1 1 < 580
    and I_UnitGroupDistanceFromPosition army2 1 1 < 560
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

    if I_CompareCounter repeat_test4 = 1
    set_counter repeat_test4 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test4 = 0

    set_counter repeat_test4 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test4 = 2

    if I_UnitEnemyUnitInRadius a2u1 180
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -700, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 700, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 700, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -700, 0, 100
    end_if
    set_counter reform_multi 2
    end_if
    if ! I_UnitEnemyUnitInRadius a2u1 180
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    end_if
    set_counter reform_multi 1
    end_if
    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test4 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi > 3
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6
    if I_CompareCounter army_south = 1
    and I_UnitDistanceFromLine a2u1 sw se < 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_north = 1
    and I_UnitDistanceFromLine a2u1 nw ne > 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_west = 1
    and I_UnitDistanceFromLine a2u1 sw nw > 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_east = 1
    and I_UnitDistanceFromLine a2u1 se ne < 0
    set_counter line_passed 1
    end_if

if I_CompareCounter line_passed = 1

    set_counter line_passed 0

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

    if I_CompareCounter repeat_test5 = 1
    set_counter repeat_test5 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test5 = 0

    set_counter repeat_test5 1
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test5 = 2

if ! I_UnitEnemyUnitInRadius a2u1 20

    if ! I_UnitEnemyUnitInRadius a2u1 20
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if ! I_UnitEnemyUnitInRadius a2u1 150
    and I_BattleSettlementFortificationLevel < 3
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if
if I_UnitEnemyUnitInRadius a2u1 20
set_counter sally_defense 3
battle_wait 20
end_if
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test5 = 1
battle_wait 10
end_if
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 0  ;check
    and I_CompareCounter reform_multi > 2
    and ! I_IsUnitGroupEngaged army2
    and I_UnitEnemyUnitInRadius a2u1 160
;	and I_UnitDistanceFromPosition a2u1 1 1 < 560
    and I_UnitGroupDistanceFromPosition army2 1 1 < 560
;	and I_BattleSettlementFortificationLevel > 2

    if I_CompareCounter enemy_unit_count > 0
    and I_IsUnitUnderFire a2u1
    and ! I_IsUnitEngaged a2u1
    and ! I_UnitStatus a2u1 pursuing
    and ! I_UnitStatus a2u1 charging
    and ! I_UnitStatus a2u1 moving
    inc_counter reset_position 2
    end_if

    if I_CompareCounter enemy_unit_count > 1
    and I_IsUnitUnderFire a2u2
    and ! I_IsUnitEngaged a2u2
    and ! I_UnitStatus a2u2 pursuing
    and ! I_UnitStatus a2u2 charging
    and ! I_UnitStatus a2u2 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    and I_IsUnitUnderFire a2u3
    and ! I_IsUnitEngaged a2u3
    and ! I_UnitStatus a2u3 pursuing
    and ! I_UnitStatus a2u3 charging
    and ! I_UnitStatus a2u3 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    and I_IsUnitUnderFire a2u4
    and ! I_IsUnitEngaged a2u4
    and ! I_UnitStatus a2u4 pursuing
    and ! I_UnitStatus a2u4 charging
    and ! I_UnitStatus a2u4 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    and I_IsUnitUnderFire a2u5
    and ! I_IsUnitEngaged a2u5
    and ! I_UnitStatus a2u5 pursuing
    and ! I_UnitStatus a2u5 charging
    and ! I_UnitStatus a2u5 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    and I_IsUnitUnderFire a2u6
    and ! I_IsUnitEngaged a2u6
    and ! I_UnitStatus a2u6 pursuing
    and ! I_UnitStatus a2u6 charging
    and ! I_UnitStatus a2u6 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    and I_IsUnitUnderFire a2u7
    and ! I_IsUnitEngaged a2u7
    and ! I_UnitStatus a2u7 pursuing
    and ! I_UnitStatus a2u7 charging
    and ! I_UnitStatus a2u7 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    and I_IsUnitUnderFire a2u8
    and ! I_IsUnitEngaged a2u8
    and ! I_UnitStatus a2u8 pursuing
    and ! I_UnitStatus a2u8 charging
    and ! I_UnitStatus a2u8 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    and I_IsUnitUnderFire a2u9
    and ! I_IsUnitEngaged a2u9
    and ! I_UnitStatus a2u9 pursuing
    and ! I_UnitStatus a2u9 charging
    and ! I_UnitStatus a2u9 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    and I_IsUnitUnderFire a2u10
    and ! I_IsUnitEngaged a2u10
    and ! I_UnitStatus a2u10 pursuing
    and ! I_UnitStatus a2u10 charging
    and ! I_UnitStatus a2u10 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    and I_IsUnitUnderFire a2u11
    and ! I_IsUnitEngaged a2u11
    and ! I_UnitStatus a2u11 pursuing
    and ! I_UnitStatus a2u11 charging
    and ! I_UnitStatus a2u11 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    and I_IsUnitUnderFire a2u12
    and ! I_IsUnitEngaged a2u12
    and ! I_UnitStatus a2u12 pursuing
    and ! I_UnitStatus a2u12 charging
    and ! I_UnitStatus a2u12 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    and I_IsUnitUnderFire a2u13
    and ! I_IsUnitEngaged a2u13
    and ! I_UnitStatus a2u13 pursuing
    and ! I_UnitStatus a2u13 charging
    and ! I_UnitStatus a2u13 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    and I_IsUnitUnderFire a2u14
    and ! I_IsUnitEngaged a2u14
    and ! I_UnitStatus a2u14 pursuing
    and ! I_UnitStatus a2u14 charging
    and ! I_UnitStatus a2u14 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    and I_IsUnitUnderFire a2u15
    and ! I_IsUnitEngaged a2u15
    and ! I_UnitStatus a2u15 pursuing
    and ! I_UnitStatus a2u15 charging
    and ! I_UnitStatus a2u15 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    and I_IsUnitUnderFire a2u16
    and ! I_IsUnitEngaged a2u16
    and ! I_UnitStatus a2u16 pursuing
    and ! I_UnitStatus a2u16 charging
    and ! I_UnitStatus a2u16 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    and I_IsUnitUnderFire a2u17
    and ! I_IsUnitEngaged a2u17
    and ! I_UnitStatus a2u17 pursuing
    and ! I_UnitStatus a2u17 charging
    and ! I_UnitStatus a2u17 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    and I_IsUnitUnderFire a2u18
    and ! I_IsUnitEngaged a2u18
    and ! I_UnitStatus a2u18 pursuing
    and ! I_UnitStatus a2u18 charging
    and ! I_UnitStatus a2u18 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    and I_IsUnitUnderFire a2u19
    and ! I_IsUnitEngaged a2u19
    and ! I_UnitStatus a2u19 pursuing
    and ! I_UnitStatus a2u19 charging
    and ! I_UnitStatus a2u19 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    and I_IsUnitUnderFire a2u20
    and ! I_IsUnitEngaged a2u20
    and ! I_UnitStatus a2u20 pursuing
    and ! I_UnitStatus a2u20 charging
    and ! I_UnitStatus a2u20 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready = 0
    and I_IsUnitUnderFire a4u1
    and ! I_IsUnitEngaged a4u1
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging
    and ! I_UnitStatus a4u1 moving
    inc_counter reset_position 2
    end_if

if I_CompareCounter reset_position > 3

    if ! I_UnitEnemyUnitInRadius a2u1 20
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 1
    end_if

    if ! I_UnitEnemyUnitInRadius a2u1 150
    and I_BattleSettlementFortificationLevel < 3
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position 0
    set_counter sally_defense 2
    set_counter defend_location 1
end_if

if I_CompareCounter sally_defense != 2
set_counter sally_defense 3
battle_wait 15
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_defense > 0
    and I_UnitEnemyUnitInRadius a2u1 200

    if ! I_IsUnitGroupEngaged army2
    and ! I_IsUnitGroupMoving army2
    and ! I_UnitStatus a2u1 pursuing
    and ! I_UnitStatus a2u1 charging

    inc_counter army2_idle_s 1
    end_if

    if I_CompareCounter army2_idle_s > 5
    set_counter army2_idle_s 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    battle_wait 0.5
;	 unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position 0
    set_counter sally_defense 2
    set_counter defend_location 1
    end_if

    if I_IsUnitGroupEngaged army2
    set_counter army2_idle_s 0
    end_if
    if I_IsUnitGroupMoving army2
    set_counter army2_idle_s 0
    end_if
    if I_UnitStatus a2u1 pursuing
    set_counter army2_idle_s 0
    end_if
    if I_UnitStatus a2u1 charging
    set_counter army2_idle_s 0
    end_if
    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 2
    and I_BattleSettlementFortificationLevel > 2
;	and I_CompareCounter reform_multi > 3
    and ! I_IsUnitGroupEngaged army2
    and ! I_UnitEnemyUnitInRadius a2u1 80

    set_counter sally_defense 6
    set_counter wall_line_passed 0
    set_counter reset_position_s 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitEngaged a2u1
    inc_counter reset_position_s 2
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reset_position_s 2
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reset_position_s 2
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitEngaged a2u2
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitEngaged a2u3
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitEngaged a2u4
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitEngaged a2u5
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitEngaged a2u6
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitEngaged a2u7
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitEngaged a2u8
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitEngaged a2u9
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitEngaged a2u10
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitEngaged a2u11
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitEngaged a2u12
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitEngaged a2u13
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitEngaged a2u14
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitEngaged a2u15
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitEngaged a2u16
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitEngaged a2u17
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitEngaged a2u18
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitEngaged a2u19
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitEngaged a2u20
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reset_position_s 1
    end_if
    end_if

if I_CompareCounter reset_position_s = 0
    if I_CompareCounter army_south = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if
    end_if
end_if

    if I_CompareCounter repeat_test6 = 1
    set_counter repeat_test6 2
    end_if
    if I_CompareCounter wall_line_passed = 0
    and I_CompareCounter reset_position_s = 0
    and I_CompareCounter repeat_test6 = 0

    set_counter repeat_test6 1
    end_if
    if I_CompareCounter wall_line_passed = 0
    and I_CompareCounter reset_position_s = 0
    and I_CompareCounter repeat_test6 = 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    battle_wait 0.5
;	 unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position_s 0
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    end_if

    if I_CompareCounter sally_defense != 2
    set_counter sally_defense 3
    end_if
    if I_CompareCounter wall_line_passed > 0
    battle_wait 15
    end_if
    if I_CompareCounter reset_position_s > 0
    battle_wait 15
    end_if
    if I_CompareCounter repeat_test6 = 1
    battle_wait 20
    end_if
end_monitor

;;;;;Termination
monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 0
    and I_CompareCounter kill_sally = 0
    and I_IsUnitRouting a2u1
    and ! I_IsUnitGroupEngaged army2
    and ! I_IsUnitGroupDestroyed army2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    end_if

    set_counter sally_defense 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter assign_labels = 1
    and I_UnitDestroyed a2u1
    and ! I_IsUnitGroupDestroyed army2

    set_counter reset_army2 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter assign_labels 2
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter assign_labels = 2
    and I_UnitDestroyed a2u1
    and ! I_IsUnitGroupDestroyed army2

    set_counter assign_labels 1
end_monitor

;;;Sally Reinforcements

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_reinf = 1
    and I_CompareCounter kill_sally = 0
;	and ! I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsUnitEngaged a4u1

    if I_CompareCounter sally_defense < 3
    set_counter defend_location 1
    set_counter sally_reinf 2
    end_if

    if I_CompareCounter sally_defense > 2

    set_counter defend_location 2
    set_counter sally_reinf 2
    end_if

end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
    and I_CompareCounter sally_defense < 3
    and I_CompareCounter sally_defense != 1
    and I_CompareCounter defend_location = 1
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and ! I_IsUnitGroupEngaged army4
    and ! I_IsUnitGroupEngaged army2
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging
    and ! I_UnitEnemyUnitInRadius a4u1 20

     ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20

    battle_wait 0.5
    ai_active_set on

    set_counter defend_location 0
;	set_counter army4_idle_s 0
battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
    and I_CompareCounter sally_defense > 2
    and I_CompareCounter defend_location = 2
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0

    ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter defend_location 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
;	and I_CompareCounter sally_defense > 2
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_CompareCounter defend_location = 0
;    and I_UnitEnemyUnitInRadius a4u1 200

    if ! I_IsUnitGroupEngaged army4
    and ! I_IsUnitGroupMoving army4
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging

    inc_counter army4_idle_s 1
    end_if
    if I_CompareCounter army4_idle_s > 5
    set_counter defend_location 1
    set_counter sally_defense 2
    end_if

    if I_IsUnitGroupEngaged army4
    set_counter army4_idle_s 0
    end_if
    if I_IsUnitGroupMoving army4
    set_counter army4_idle_s 0
    end_if
    if I_UnitStatus a4u1 pursuing
    set_counter army4_idle_s 0
    end_if
    if I_UnitStatus a4u1 charging
    set_counter army4_idle_s 0
    end_if
    battle_wait 10
end_monitor

;;;;;Termination
monitor_conditions I_BattleStarted
    and I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_IsUnitGroupDestroyed army4
    and I_BattleIsSallyOutBattle

    set_counter sally_reinf 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_UnitDestroyed a4u1
    and I_BattleIsSallyOutBattle

    set_counter label_army4 1
;    battle_wait 0.5
;    unit_group_enable_automation army4 false
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_reinf 0
end_monitor

;################## Germanicu5 Integrated Protect General script ###########################

monitor_event BattleConflictPhaseCommenced FactionIsLocal
    and I_CompareCounter panel_check = 1
    and I_BattleEnemyArmyNumberOfMountClass elephant = 0
    and I_CompareCounter enemy_unit_count > 4

    battle_wait 10

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
    and I_CompareCounter protect_siege = 1
    set_counter protect_general 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
;    and I_CompareCounter labels_only = 1
    and I_CompareCounter kill_sally = 1
    set_counter protect_general 1
    end_if
end_monitor

monitor_event BattleBattleGatesDestroyedByEngine TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter kill_sally = 1
    set_counter general_wait 1
    end_if
end_monitor

monitor_event BattleWallsCaptured TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if
end_monitor

monitor_event BattleWallsBreachedByEngine TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 1
    and I_IsUnitMoveFastSet a1u1
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0

    battle_wait 0.5
    unit_order_halt a1u1
    if I_CompareCounter enemy_unit_count < 7
    set_counter general_wait 2
    battle_wait 20
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 20
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
    set_counter general_wait 2
    battle_wait 25
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 25
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
    set_counter general_wait 2
    battle_wait 30
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 30
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
    set_counter general_wait 2
    battle_wait 35
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 35
    end_if
    end_if
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 3
    release_unit a1u1
    set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 1
    and I_IsUnitMoveFastSet a2u1
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0

    battle_wait 0.5
    unit_order_halt a2u1

    if I_CompareCounter enemy_unit_count < 7
    set_counter general_wait 2
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 20
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
    set_counter general_wait 2
    battle_wait 25
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 25
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
    set_counter general_wait 2
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 30
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
    set_counter general_wait 2
    battle_wait 35
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 35
    end_if
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 3
    release_unit a2u1
    set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter general_wait > 1
    and I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a1u1 60

    set_counter general_wait 0
    release_unit a1u1
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter general_wait > 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 60

    set_counter general_wait 0
    release_unit a2u1
end_monitor

;################## Germanicu5 Integrated Siege script ###########################

monitor_conditions I_BattleStarted
    and ! I_BattleIsFortBattle
    and I_BattleEnemyArmyNumberOfMountClass elephant = 0
    and I_BattleSettlementFortificationLevel > 0
    and I_CompareCounter siege_fix = 1

    set_counter siege_fix 0

    if I_BattleIsSallyOutBattle
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    set_counter army_sieging 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
end_monitor

;;;;;;;Sally Out

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter reset_army2 = 1

    set_counter reset_army2 0
    set_counter enemy_unit_count 0

    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

;;;;;;;Huge City

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 4

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 35

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
    set_counter sally_check 10
    battle_wait 30

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 10
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 14
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 14
    set_counter sally_check 15
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 15
    set_counter sally_check 16
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 16
    set_counter sally_check 17
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 17
    set_counter sally_check 18
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 18
    set_counter sally_check 19
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 19
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 4

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 80

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 60
    set_counter sally_check 20
    battle_wait 30
if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 20
    set_counter sally_check 21
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 21
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 24
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 24
    set_counter sally_check 25
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 25
    set_counter sally_check 26
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 26
    set_counter sally_check 27
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 27
    set_counter sally_check 28
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 28
    set_counter sally_check 29
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 29
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_if
end_monitor

;;;;;;;Large City

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 45

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
    set_counter sally_check 30
    battle_wait 37

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 30
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 34
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 34
    set_counter sally_check 35
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 35
    set_counter sally_check 36
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 36
    set_counter sally_check 37
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 37
    set_counter sally_check 38
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 38
    set_counter sally_check 39
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 39
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 90

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 70
    set_counter sally_check 40
    battle_wait 35
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 40
    set_counter sally_check 41
    battle_wait 35
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 41
    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    if I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 44
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 44
    set_counter sally_check 45
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 45
    set_counter sally_check 46
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 46
    set_counter sally_check 47
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 47
    set_counter sally_check 48
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 48
    set_counter sally_check 49
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 49
    set_counter emergency_stop 0
    if I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

;;;;;;;Castle, Citadel and Fortress

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 100

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 75
    set_counter sally_check 50
    battle_wait 15
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 50
    set_counter sally_check 51
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 51
    set_counter sally_check 52
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 52
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 54
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 54
    set_counter sally_check 55
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 55
    set_counter sally_check 56
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 56
    set_counter sally_check 57
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 57
    set_counter sally_check 58
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 58
    set_counter sally_check 59
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 59
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 170

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 125
    set_counter sally_check 60
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 60
    set_counter sally_check 61
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 61
    set_counter sally_check 62
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 62
    set_counter sally_check 63
    battle_wait 35
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 63
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 64
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 64
    set_counter sally_check 65
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 65
    set_counter sally_check 66
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 66
    set_counter sally_check 67
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 67
    set_counter sally_check 68
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 68
    set_counter sally_check 69
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 69
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

;;;;;;;Wall Advance

monitor_conditions I_BattleStarted
    and I_CompareCounter wall_advance_s = 1
    and I_CompareCounter kill_sally = 1
    and I_BattleIsSallyOutBattle

    battle_wait 2
    if I_BattleSettlementFortificationLevel < 3
     and I_CompareCounter wall_advance_s = 1
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_unformed army2 0 95
    end_if

    if I_BattleSettlementFortificationLevel > 2
     and I_CompareCounter wall_advance_s = 1
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_unformed army2 0 200
    end_if

    set_counter emergency_stop 1
    if I_BattleSettlementFortificationLevel < 3
;	battle_wait 72
    set_counter sally_check 113
    battle_wait 36
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 113
    set_counter sally_check 114
    battle_wait 36
    end_if
    end_if
    if I_BattleSettlementFortificationLevel > 2
;	battle_wait 145
    set_counter sally_check 110
    battle_wait 25
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 110
    set_counter sally_check 111
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 111
    set_counter sally_check 112
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 112
    set_counter sally_check 113
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 113
    set_counter sally_check 114
    battle_wait 30
    end_if
    end_if

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 114
    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1

    set_counter emergency_stop 0
    unit_group_order_halt army2
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    set_counter wall_advance_s 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter omfg_cannon_tower > 0

    set_counter omfg_cannon_tower 2
if I_CompareCounter player_unit_count > 0
    if I_UnitStatus a1u1 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u1 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u2 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u2 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u3 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u3 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u4 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u4 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u5 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u5 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u6 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u6 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u7 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u7 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u8 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u8 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u9 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u9 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u10 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u10 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u11 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u11 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u12 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u12 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u13 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u13 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u14 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u14 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u15 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u15 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u16 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u16 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u17 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u17 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u18 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u18 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u19 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u19 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 19
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u20 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u20 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_CompareCounter omfg_cannon_tower = 2

    if I_CompareCounter enemy_unit_count > 0
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u1
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u2
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 2
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u3
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u4
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 4
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u5
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 5
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u6
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u7
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 7
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u8
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 8
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u9
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 9
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u10
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 10
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u11
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u12
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 12
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u13
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 13
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u14
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 14
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u15
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 15
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u16
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 16
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u17
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 17
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u18
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 18
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u19
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count = 20
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u20
    set_counter omfg_cannon_tower 3
    end_if
end_if

    if I_CompareCounter omfg_cannon_tower = 3
    set_counter omfg_cannon_tower 0
    set_counter emergency_stop 0
;    ai_active_set off
;    battle_wait 0.5
    ai_active_set on
    end_if
    battle_wait 7
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter emergency_stop = 1
;    and I_CompareCounter labels_only = 1
    and I_CompareCounter kill_sally = 1

    if I_BattleIsSiegeBattle
    unit_group_order_halt army1
    battle_wait 0.5
    ai_active_set on
    set_counter emergency_stop 0
    end_if
    if I_BattleIsSallyOutBattle
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    set_counter emergency_stop 0
    end_if
end_monitor

;################## Open Battles #################

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter ob_defend = 0
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    set_counter ob_defend 2

    if I_UnitDistanceFromUnit a1u1 a2u1 < 220
    and I_BattleEnemyArmyNumberOfUnitClass missile = 0
    and I_BattleEnemyArmyNumberOfUnitClass skirmish = 0
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    and I_UnitDistanceFromUnit a1u1 a2u1 < 270
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattlePlayerAllianceOddsInFavour > 1.7
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyNumberOfUnitClass missile = 0
    and I_BattleEnemyArmyNumberOfUnitClass skirmish = 0
    set_counter ob_repeat_test 1
    end_if
;    if I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
;    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 200
    and BattleEnemyUnitClass != missile
    and BattleEnemyUnitClass != skirmish
    and BattleDirectionOfAttack != front
    and BattleRangeOfAttack < 200

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker
    and BattleDirectionOfAttack != rear
    and I_UnitEnemyUnitInRadius a2u1 200
    and BattleRangeOfAttack < 200
    and BattlePlayerUnitCategory infantry

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_UnitEnemyUnitInRadius a2u1 100
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    and I_UnitEnemyUnitInRadius a2u1 250
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4

    set_counter player_units_closing 0

    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromUnit a1u1 a2u1 < 180
    and ! I_UnitStatus a1u1 missiles_firing
    and ! I_UnitStatus a1u1 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromUnit a1u2 a2u1 < 180
    and ! I_UnitStatus a1u2 missiles_firing
    and ! I_UnitStatus a1u2 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromUnit a1u3 a2u1 < 180
    and ! I_UnitStatus a1u3 missiles_firing
    and ! I_UnitStatus a1u3 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromUnit a1u4 a2u1 < 180
    and ! I_UnitStatus a1u4 missiles_firing
    and ! I_UnitStatus a1u4 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromUnit a1u5 a2u1 < 180
    and ! I_UnitStatus a1u5 missiles_firing
    and ! I_UnitStatus a1u5 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromUnit a1u6 a2u1 < 180
    and ! I_UnitStatus a1u6 missiles_firing
    and ! I_UnitStatus a1u6 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromUnit a1u7 a2u1 < 180
    and ! I_UnitStatus a1u7 missiles_firing
    and ! I_UnitStatus a1u7 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromUnit a1u8 a2u1 < 180
    and ! I_UnitStatus a1u8 missiles_firing
    and ! I_UnitStatus a1u8 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromUnit a1u9 a2u1 < 180
    and ! I_UnitStatus a1u9 missiles_firing
    and ! I_UnitStatus a1u9 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromUnit a1u10 a2u1 < 180
    and ! I_UnitStatus a1u10 missiles_firing
    and ! I_UnitStatus a1u10 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromUnit a1u11 a2u1 < 180
    and ! I_UnitStatus a1u11 missiles_firing
    and ! I_UnitStatus a1u11 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromUnit a1u12 a2u1 < 180
    and ! I_UnitStatus a1u12 missiles_firing
    and ! I_UnitStatus a1u12 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromUnit a1u13 a2u1 < 180
    and ! I_UnitStatus a1u13 missiles_firing
    and ! I_UnitStatus a1u13 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromUnit a1u14 a2u1 < 180
    and ! I_UnitStatus a1u14 missiles_firing
    and ! I_UnitStatus a1u14 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromUnit a1u15 a2u1 < 180
    and ! I_UnitStatus a1u15 missiles_firing
    and ! I_UnitStatus a1u15 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromUnit a1u16 a2u1 < 180
    and ! I_UnitStatus a1u16 missiles_firing
    and ! I_UnitStatus a1u16 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromUnit a1u17 a2u1 < 180
    and ! I_UnitStatus a1u17 missiles_firing
    and ! I_UnitStatus a1u17 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromUnit a1u18 a2u1 < 180
    and ! I_UnitStatus a1u18 missiles_firing
    and ! I_UnitStatus a1u18 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromUnit a1u19 a2u1 < 180
    and ! I_UnitStatus a1u19 missiles_firing
    and ! I_UnitStatus a1u19 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromUnit a1u20 a2u1 < 180
    and ! I_UnitStatus a1u20 missiles_firing
    and ! I_UnitStatus a1u20 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_units_closing > 1
    inc_counter player_enveloping 1
    end_if
    if I_CompareCounter player_units_closing < 1
    set_counter player_enveloping 0
    end_if
    if I_CompareCounter player_enveloping > 5
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    battle_wait 10
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter ob_defend > 1
    and I_CompareCounter ob_defend != 4
    and BattleIsMeleeAttack
    and BattleEnemyUnitClass heavy
    and BattleEnemyUnitCategory cavalry
    and ! BattlePlayerUnitClass heavy
    and ! BattlePlayerUnitClass heavy
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    inc_counter ob_engaged -1
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defend > 1
    and I_CompareCounter ob_defend != 4
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    if I_PercentageOfArmyKilled 0 0 < 5
    and I_PercentageOfArmyKilled 1 0 > 10
    set_counter ob_repeat_test 4
    end_if

    if I_PercentageOfArmyKilled 0 0 < 10
    and I_PercentageOfArmyKilled 1 0 > 20
    set_counter ob_repeat_test 4
    end_if

    if I_PercentageOfArmyKilled 0 0 < 15
    and I_PercentageOfArmyKilled 1 0 > 25
    set_counter ob_repeat_test 4
    end_if
    battle_wait 30
end_monitor

;monitor_event BattlePlayerUnitAttacksEnemyUnit TrueCondition
;    and I_CompareCounter panel_check = 1
;    and I_CompareCounter ob_defense_launch = 1
;    and ! I_CompareCounter ob_defend > 1
;    and BattlePlayerUnitCategory siege
;    and BattlePlayerUnitClass missile
;    and BattleRangeOfAttack < 400
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    set_counter ob_siege_attack 1
;end_monitor

;monitor_conditions I_BattleStarted
;    and I_CompareCounter ob_defense_launch = 1
;    and I_CompareCounter ob_siege_attack = 1
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    if I_PercentageOfArmyKilled 0 0 < 3
;    and I_PercentageOfArmyKilled 1 0 > 5
;    set_counter ob_defend 2
;    set_counter ob_siege_attack 0
;    end_if
;    if I_PercentageOfArmyKilled 0 0 < 5
;    and I_PercentageOfArmyKilled 1 0 > 10
;    if I_CompareCounter ob_repeat_test < 2
;    set_counter ob_repeat_test 2
;    end_if
;    set_counter ob_defend 2
;    set_counter ob_siege_attack 0
;    end_if
;    battle_wait 30
;end_monitor

;;;;;; Reinf triggers

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker

    if I_CompareCounter player_engaged_reinf = 4
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
    end_if

    if I_IsUnitGroupEngaged army1
    inc_counter player_engaged_reinf 1
    end_if

    if I_CompareCounter player_engaged_reinf > 0
    and ! I_IsUnitGroupEngaged army1
    set_counter player_engaged_reinf 0
    end_if

    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_PercentageUnitGroupKilled army4 > 10
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_UnitEnemyUnitInRadius a4u1 100
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
end_monitor

;;;;;; Main monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter ob_defend = 2
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    set_counter ob_defend 3

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter ob_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u1 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u2 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u3 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u4 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u5 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u6 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u7 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u8 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u9 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u10 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u11 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u12 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u13 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u14 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u15 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u16 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u17 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u18 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u19 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u20 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter ob_under_fire < 1
    if I_CompareCounter ob_engaged > 0

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if

    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_engaged 0
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_repeat_test = 1
    set_counter ob_engaged 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 2
    end_if

    if I_CompareCounter ob_repeat_test = 0
    set_counter ob_engaged 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 1
    end_if
    end_if

    if I_CompareCounter ob_engaged < 1

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 2
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    end_if

    if I_CompareCounter ob_repeat_test < 3
    set_counter ob_repeat_test 1
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    end_if
    end_if

    end_if

    if I_CompareCounter ob_under_fire > 0
    if I_CompareCounter ob_engaged > 0

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if
    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_engaged 0
    set_counter ob_repeat_test 3
    end_if
    if I_CompareCounter ob_repeat_test < 2
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    set_counter ob_repeat_test 2
    end_if
    end_if

    if I_CompareCounter ob_engaged < 1

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if

    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_repeat_test 3
    end_if
    if I_CompareCounter ob_repeat_test = 1
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 2
    end_if

    if I_CompareCounter ob_repeat_test = 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 1
    end_if
    end_if

    end_if
    if I_CompareCounter ob_repeat_test = 4
    if I_CompareCounter ob_under_fire < 1
    and I_CompareCounter ob_engaged < 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 3
        set_counter ob_repeat_test 2
    end_if
    if I_CompareCounter ob_under_fire > 0

        ai_gta_plan_set 1 ATTACK_ALL
        set_counter apply_strategy 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 4
        set_counter ob_repeat_test 0
        set_counter ob_defense_launch 0
    end_if
    if I_CompareCounter ob_engaged > 0

        ai_gta_plan_set 1 ATTACK_ALL
        set_counter apply_strategy 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 4
        set_counter ob_repeat_test 0
        set_counter ob_defense_launch 0
    end_if

    end_if

        if I_CompareCounter ob_defend = 3
        set_counter ob_defend 2
        end_if
        battle_wait 15
end_monitor

;;;;;;;General Stop

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 1
    and I_CompareCounter open_battle = 1
    and I_BattleEnemyArmyNumberOfUnits > 2
    and I_BattlePlayerArmyIsAttacker
    and I_BattleAiAttacking
    and I_UnitEnemyUnitInRadius a2u1 120

    set_counter g_stop 2
    label_unit 1 0 0 a2u1
    battle_wait 0.1
    unit_order_halt a2u1
    if I_BattleEnemyArmyNumberOfUnits > 5
    battle_wait 30
    end_if
    if I_BattleEnemyArmyNumberOfUnits < 6
    battle_wait 15
    end_if
    if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter g_stop = 2
    and I_BattleAiAttacking
    release_unit a2u1
    set_counter g_stop 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 1
    and I_CompareCounter open_battle = 1
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleAiAttacking
    and I_UnitEnemyUnitInRadius a1u1 120

    set_counter g_stop 3
    label_unit 0 0 0 a1u1
    battle_wait 0.1
    unit_order_halt a1u1
    battle_wait 30
    if ! I_BattlePlayerArmyIsAttacker
    and I_CompareCounter g_stop = 3
    and I_BattleAiAttacking
    release_unit a1u1
    set_counter g_stop 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 2
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 60

    release_unit a2u1
    set_counter g_stop 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 3
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a1u1 60

    release_unit a1u1
    set_counter g_stop 0
end_monitor

;;;;;;;AI Stuck Fix

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter ai_stuck_launch = 1
    and BattleIsMeleeAttack
    and I_BattleIsSiegeBattle
    set_counter ai_stuck_launch 2
end_monitor

monitor_conditions I_CompareCounter ai_stuck_launch = 2
    and I_BattleIsSiegeBattle

if I_CompareCounter enemy_unit_count > 0
and ! I_UnitDestroyed a2u1

    if I_UnitStatus a2u1 moving
    if I_CompareCounter a2u1_status = 0
    set_counter a2u1_status 1
    end_if
    if I_CompareCounter a2u1_status != 1
    set_counter a2u1_status 0
    end_if
    end_if

    if I_UnitStatus a2u1 routing
    if I_CompareCounter a2u1_status = 0
    set_counter a2u1_status 2
    end_if
    if I_CompareCounter a2u1_status != 2
    set_counter a2u1_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u1 moving
    and ! I_UnitStatus a2u1 routing
    set_counter a2u1_status 0
    end_if

    if I_CompareCounter a2u1_status > 0

    if I_UnitDistanceFromPosition a2u1 0,0 >= 150
    and I_UnitDistanceFromPosition a2u1 0,0 < 175
    if I_CompareCounter a2u1_distance != 1
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 1
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 175
    and I_UnitDistanceFromPosition a2u1 0,0 < 200
    if I_CompareCounter a2u1_distance != 2
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 2
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 200
    and I_UnitDistanceFromPosition a2u1 0,0 < 225
    if I_CompareCounter a2u1_distance != 3
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 3
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 225
    and I_UnitDistanceFromPosition a2u1 0,0 < 250
    if I_CompareCounter a2u1_distance != 4
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 4
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 250
    and I_UnitDistanceFromPosition a2u1 0,0 < 275
    if I_CompareCounter a2u1_distance != 5
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 5
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 275
    and I_UnitDistanceFromPosition a2u1 0,0 < 300
    if I_CompareCounter a2u1_distance != 6
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 6
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 300
    and I_UnitDistanceFromPosition a2u1 0,0 < 325
    if I_CompareCounter a2u1_distance != 7
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 7
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 325
    and I_UnitDistanceFromPosition a2u1 0,0 < 350
    if I_CompareCounter a2u1_distance != 8
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 8
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 350
    and I_UnitDistanceFromPosition a2u1 0,0 < 375
    if I_CompareCounter a2u1_distance != 9
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 9
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 375
    and I_UnitDistanceFromPosition a2u1 0,0 < 400
    if I_CompareCounter a2u1_distance != 10
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 10
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 400
    and I_UnitDistanceFromPosition a2u1 0,0 < 425
    if I_CompareCounter a2u1_distance != 11
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 11
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 425
    and I_UnitDistanceFromPosition a2u1 0,0 < 450
    if I_CompareCounter a2u1_distance != 12
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 12
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 450
    and I_UnitDistanceFromPosition a2u1 0,0 < 500
    if I_CompareCounter a2u1_distance != 13
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 13
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 500
    and I_UnitDistanceFromPosition a2u1 0,0 < 550
    if I_CompareCounter a2u1_distance != 14
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 14
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 550
    and I_UnitDistanceFromPosition a2u1 0,0 < 600
    if I_CompareCounter a2u1_distance != 15
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 15
    inc_counter a2u1_stuck 1
    end_if

    if I_CompareCounter a2u1_stuck = 4
    unit_order_halt a2u1
    unit_set_morale a2u1 wavering
    battle_wait 0.1
    unit_unset_morale a2u1
    release_unit a2u1
    set_counter a2u1_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 1
and ! I_UnitDestroyed a2u2

    if I_UnitStatus a2u2 moving
    if I_CompareCounter a2u2_status = 0
    set_counter a2u2_status 1
    end_if
    if I_CompareCounter a2u2_status != 1
    set_counter a2u2_status 0
    end_if
    end_if

    if I_UnitStatus a2u2 routing
    if I_CompareCounter a2u2_status = 0
    set_counter a2u2_status 2
    end_if
    if I_CompareCounter a2u2_status != 2
    set_counter a2u2_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u2 moving
    and ! I_UnitStatus a2u2 routing
    set_counter a2u2_status 0
    end_if

    if I_CompareCounter a2u2_status > 0

    if I_UnitDistanceFromPosition a2u2 0,0 >= 150
    and I_UnitDistanceFromPosition a2u2 0,0 < 175
    if I_CompareCounter a2u2_distance != 1
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 1
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 175
    and I_UnitDistanceFromPosition a2u2 0,0 < 200
    if I_CompareCounter a2u2_distance != 2
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 2
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 200
    and I_UnitDistanceFromPosition a2u2 0,0 < 225
    if I_CompareCounter a2u2_distance != 3
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 3
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 225
    and I_UnitDistanceFromPosition a2u2 0,0 < 250
    if I_CompareCounter a2u2_distance != 4
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 4
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 250
    and I_UnitDistanceFromPosition a2u2 0,0 < 275
    if I_CompareCounter a2u2_distance != 5
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 5
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 275
    and I_UnitDistanceFromPosition a2u2 0,0 < 300
    if I_CompareCounter a2u2_distance != 6
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 6
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 300
    and I_UnitDistanceFromPosition a2u2 0,0 < 325
    if I_CompareCounter a2u2_distance != 7
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 7
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 325
    and I_UnitDistanceFromPosition a2u2 0,0 < 350
    if I_CompareCounter a2u2_distance != 8
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 8
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 350
    and I_UnitDistanceFromPosition a2u2 0,0 < 375
    if I_CompareCounter a2u2_distance != 9
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 9
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 375
    and I_UnitDistanceFromPosition a2u2 0,0 < 400
    if I_CompareCounter a2u2_distance != 10
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 10
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 400
    and I_UnitDistanceFromPosition a2u2 0,0 < 425
    if I_CompareCounter a2u2_distance != 11
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 11
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 425
    and I_UnitDistanceFromPosition a2u2 0,0 < 450
    if I_CompareCounter a2u2_distance != 12
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 12
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 450
    and I_UnitDistanceFromPosition a2u2 0,0 < 500
    if I_CompareCounter a2u2_distance != 13
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 13
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 500
    and I_UnitDistanceFromPosition a2u2 0,0 < 550
    if I_CompareCounter a2u2_distance != 14
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 14
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 550
    and I_UnitDistanceFromPosition a2u2 0,0 < 600
    if I_CompareCounter a2u2_distance != 15
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 15
    inc_counter a2u2_stuck 1
    end_if

    if I_CompareCounter a2u2_stuck = 4
    unit_order_halt a2u2
    unit_set_morale a2u2 wavering
    battle_wait 0.1
    unit_unset_morale a2u2
    release_unit a2u2
    set_counter a2u2_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 2
and ! I_UnitDestroyed a2u3

    if I_UnitStatus a2u3 moving
    if I_CompareCounter a2u3_status = 0
    set_counter a2u3_status 1
    end_if
    if I_CompareCounter a2u3_status != 1
    set_counter a2u3_status 0
    end_if
    end_if

    if I_UnitStatus a2u3 routing
    if I_CompareCounter a2u3_status = 0
    set_counter a2u3_status 2
    end_if
    if I_CompareCounter a2u3_status != 2
    set_counter a2u3_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u3 moving
    and ! I_UnitStatus a2u3 routing
    set_counter a2u3_status 0
    end_if

    if I_CompareCounter a2u3_status > 0

    if I_UnitDistanceFromPosition a2u3 0,0 >= 150
    and I_UnitDistanceFromPosition a2u3 0,0 < 175
    if I_CompareCounter a2u3_distance != 1
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 1
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 175
    and I_UnitDistanceFromPosition a2u3 0,0 < 200
    if I_CompareCounter a2u3_distance != 2
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 2
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 200
    and I_UnitDistanceFromPosition a2u3 0,0 < 225
    if I_CompareCounter a2u3_distance != 3
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 3
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 225
    and I_UnitDistanceFromPosition a2u3 0,0 < 250
    if I_CompareCounter a2u3_distance != 4
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 4
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 250
    and I_UnitDistanceFromPosition a2u3 0,0 < 275
    if I_CompareCounter a2u3_distance != 5
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 5
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 275
    and I_UnitDistanceFromPosition a2u3 0,0 < 300
    if I_CompareCounter a2u3_distance != 6
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 6
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 300
    and I_UnitDistanceFromPosition a2u3 0,0 < 325
    if I_CompareCounter a2u3_distance != 7
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 7
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 325
    and I_UnitDistanceFromPosition a2u3 0,0 < 350
    if I_CompareCounter a2u3_distance != 8
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 8
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 350
    and I_UnitDistanceFromPosition a2u3 0,0 < 375
    if I_CompareCounter a2u3_distance != 9
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 9
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 375
    and I_UnitDistanceFromPosition a2u3 0,0 < 400
    if I_CompareCounter a2u3_distance != 10
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 10
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 400
    and I_UnitDistanceFromPosition a2u3 0,0 < 425
    if I_CompareCounter a2u3_distance != 11
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 11
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 425
    and I_UnitDistanceFromPosition a2u3 0,0 < 450
    if I_CompareCounter a2u3_distance != 12
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 12
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 450
    and I_UnitDistanceFromPosition a2u3 0,0 < 500
    if I_CompareCounter a2u3_distance != 13
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 13
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 500
    and I_UnitDistanceFromPosition a2u3 0,0 < 550
    if I_CompareCounter a2u3_distance != 14
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 14
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 550
    and I_UnitDistanceFromPosition a2u3 0,0 < 600
    if I_CompareCounter a2u3_distance != 15
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 15
    inc_counter a2u3_stuck 1
    end_if

    if I_CompareCounter a2u3_stuck = 4
    unit_order_halt a2u3
    unit_set_morale a2u3 wavering
    battle_wait 0.1
    unit_unset_morale a2u3
    release_unit a2u3
    set_counter a2u3_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 3
and ! I_UnitDestroyed a2u4

    if I_UnitStatus a2u4 moving
    if I_CompareCounter a2u4_status = 0
    set_counter a2u4_status 1
    end_if
    if I_CompareCounter a2u4_status != 1
    set_counter a2u4_status 0
    end_if
    end_if

    if I_UnitStatus a2u4 routing
    if I_CompareCounter a2u4_status = 0
    set_counter a2u4_status 2
    end_if
    if I_CompareCounter a2u4_status != 2
    set_counter a2u4_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u4 moving
    and ! I_UnitStatus a2u4 routing
    set_counter a2u4_status 0
    end_if

    if I_CompareCounter a2u4_status > 0

    if I_UnitDistanceFromPosition a2u4 0,0 >= 150
    and I_UnitDistanceFromPosition a2u4 0,0 < 175
    if I_CompareCounter a2u4_distance != 1
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 1
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 175
    and I_UnitDistanceFromPosition a2u4 0,0 < 200
    if I_CompareCounter a2u4_distance != 2
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 2
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 200
    and I_UnitDistanceFromPosition a2u4 0,0 < 225
    if I_CompareCounter a2u4_distance != 3
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 3
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 225
    and I_UnitDistanceFromPosition a2u4 0,0 < 250
    if I_CompareCounter a2u4_distance != 4
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 4
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 250
    and I_UnitDistanceFromPosition a2u4 0,0 < 275
    if I_CompareCounter a2u4_distance != 5
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 5
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 275
    and I_UnitDistanceFromPosition a2u4 0,0 < 300
    if I_CompareCounter a2u4_distance != 6
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 6
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 300
    and I_UnitDistanceFromPosition a2u4 0,0 < 325
    if I_CompareCounter a2u4_distance != 7
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 7
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 325
    and I_UnitDistanceFromPosition a2u4 0,0 < 350
    if I_CompareCounter a2u4_distance != 8
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 8
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 350
    and I_UnitDistanceFromPosition a2u4 0,0 < 375
    if I_CompareCounter a2u4_distance != 9
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 9
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 375
    and I_UnitDistanceFromPosition a2u4 0,0 < 400
    if I_CompareCounter a2u4_distance != 10
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 10
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 400
    and I_UnitDistanceFromPosition a2u4 0,0 < 425
    if I_CompareCounter a2u4_distance != 11
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 11
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 425
    and I_UnitDistanceFromPosition a2u4 0,0 < 450
    if I_CompareCounter a2u4_distance != 12
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 12
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 450
    and I_UnitDistanceFromPosition a2u4 0,0 < 500
    if I_CompareCounter a2u4_distance != 13
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 13
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 500
    and I_UnitDistanceFromPosition a2u4 0,0 < 550
    if I_CompareCounter a2u4_distance != 14
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 14
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 550
    and I_UnitDistanceFromPosition a2u4 0,0 < 600
    if I_CompareCounter a2u4_distance != 15
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 15
    inc_counter a2u4_stuck 1
    end_if

    if I_CompareCounter a2u4_stuck = 4
    unit_order_halt a2u4
    unit_set_morale a2u4 wavering
    battle_wait 0.1
    unit_unset_morale a2u4
    release_unit a2u4
    set_counter a2u4_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 4
and ! I_UnitDestroyed a2u5

    if I_UnitStatus a2u5 moving
    if I_CompareCounter a2u5_status = 0
    set_counter a2u5_status 1
    end_if
    if I_CompareCounter a2u5_status != 1
    set_counter a2u5_status 0
    end_if
    end_if

    if I_UnitStatus a2u5 routing
    if I_CompareCounter a2u5_status = 0
    set_counter a2u5_status 2
    end_if
    if I_CompareCounter a2u5_status != 2
    set_counter a2u5_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u5 moving
    and ! I_UnitStatus a2u5 routing
    set_counter a2u5_status 0
    end_if

    if I_CompareCounter a2u5_status > 0

    if I_UnitDistanceFromPosition a2u5 0,0 >= 150
    and I_UnitDistanceFromPosition a2u5 0,0 < 175
    if I_CompareCounter a2u5_distance != 1
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 1
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 175
    and I_UnitDistanceFromPosition a2u5 0,0 < 200
    if I_CompareCounter a2u5_distance != 2
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 2
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 200
    and I_UnitDistanceFromPosition a2u5 0,0 < 225
    if I_CompareCounter a2u5_distance != 3
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 3
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 225
    and I_UnitDistanceFromPosition a2u5 0,0 < 250
    if I_CompareCounter a2u5_distance != 4
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 4
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 250
    and I_UnitDistanceFromPosition a2u5 0,0 < 275
    if I_CompareCounter a2u5_distance != 5
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 5
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 275
    and I_UnitDistanceFromPosition a2u5 0,0 < 300
    if I_CompareCounter a2u5_distance != 6
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 6
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 300
    and I_UnitDistanceFromPosition a2u5 0,0 < 325
    if I_CompareCounter a2u5_distance != 7
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 7
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 325
    and I_UnitDistanceFromPosition a2u5 0,0 < 350
    if I_CompareCounter a2u5_distance != 8
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 8
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 350
    and I_UnitDistanceFromPosition a2u5 0,0 < 375
    if I_CompareCounter a2u5_distance != 9
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 9
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 375
    and I_UnitDistanceFromPosition a2u5 0,0 < 400
    if I_CompareCounter a2u5_distance != 10
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 10
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 400
    and I_UnitDistanceFromPosition a2u5 0,0 < 425
    if I_CompareCounter a2u5_distance != 11
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 11
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 425
    and I_UnitDistanceFromPosition a2u5 0,0 < 450
    if I_CompareCounter a2u5_distance != 12
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 12
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 450
    and I_UnitDistanceFromPosition a2u5 0,0 < 500
    if I_CompareCounter a2u5_distance != 13
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 13
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 500
    and I_UnitDistanceFromPosition a2u5 0,0 < 550
    if I_CompareCounter a2u5_distance != 14
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 14
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 550
    and I_UnitDistanceFromPosition a2u5 0,0 < 600
    if I_CompareCounter a2u5_distance != 15
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 15
    inc_counter a2u5_stuck 1
    end_if

    if I_CompareCounter a2u5_stuck = 4
    unit_order_halt a2u5
    unit_set_morale a2u5 wavering
    battle_wait 0.1
    unit_unset_morale a2u5
    release_unit a2u5
    set_counter a2u5_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 5
and ! I_UnitDestroyed a2u6

    if I_UnitStatus a2u6 moving
    if I_CompareCounter a2u6_status = 0
    set_counter a2u6_status 1
    end_if
    if I_CompareCounter a2u6_status != 1
    set_counter a2u6_status 0
    end_if
    end_if

    if I_UnitStatus a2u6 routing
    if I_CompareCounter a2u6_status = 0
    set_counter a2u6_status 2
    end_if
    if I_CompareCounter a2u6_status != 2
    set_counter a2u6_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u6 moving
    and ! I_UnitStatus a2u6 routing
    set_counter a2u6_status 0
    end_if

    if I_CompareCounter a2u6_status > 0

    if I_UnitDistanceFromPosition a2u6 0,0 >= 150
    and I_UnitDistanceFromPosition a2u6 0,0 < 175
    if I_CompareCounter a2u6_distance != 1
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 1
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 175
    and I_UnitDistanceFromPosition a2u6 0,0 < 200
    if I_CompareCounter a2u6_distance != 2
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 2
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 200
    and I_UnitDistanceFromPosition a2u6 0,0 < 225
    if I_CompareCounter a2u6_distance != 3
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 3
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 225
    and I_UnitDistanceFromPosition a2u6 0,0 < 250
    if I_CompareCounter a2u6_distance != 4
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 4
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 250
    and I_UnitDistanceFromPosition a2u6 0,0 < 275
    if I_CompareCounter a2u6_distance != 5
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 5
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 275
    and I_UnitDistanceFromPosition a2u6 0,0 < 300
    if I_CompareCounter a2u6_distance != 6
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 6
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 300
    and I_UnitDistanceFromPosition a2u6 0,0 < 325
    if I_CompareCounter a2u6_distance != 7
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 7
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 325
    and I_UnitDistanceFromPosition a2u6 0,0 < 350
    if I_CompareCounter a2u6_distance != 8
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 8
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 350
    and I_UnitDistanceFromPosition a2u6 0,0 < 375
    if I_CompareCounter a2u6_distance != 9
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 9
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 375
    and I_UnitDistanceFromPosition a2u6 0,0 < 400
    if I_CompareCounter a2u6_distance != 10
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 10
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 400
    and I_UnitDistanceFromPosition a2u6 0,0 < 425
    if I_CompareCounter a2u6_distance != 11
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 11
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 425
    and I_UnitDistanceFromPosition a2u6 0,0 < 450
    if I_CompareCounter a2u6_distance != 12
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 12
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 450
    and I_UnitDistanceFromPosition a2u6 0,0 < 500
    if I_CompareCounter a2u6_distance != 13
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 13
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 500
    and I_UnitDistanceFromPosition a2u6 0,0 < 550
    if I_CompareCounter a2u6_distance != 14
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 14
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 550
    and I_UnitDistanceFromPosition a2u6 0,0 < 600
    if I_CompareCounter a2u6_distance != 15
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 15
    inc_counter a2u6_stuck 1
    end_if

    if I_CompareCounter a2u6_stuck = 4
    unit_order_halt a2u6
    unit_set_morale a2u6 wavering
    battle_wait 0.1
    unit_unset_morale a2u6
    release_unit a2u6
    set_counter a2u6_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 6
and ! I_UnitDestroyed a2u7

    if I_UnitStatus a2u7 moving
    if I_CompareCounter a2u7_status = 0
    set_counter a2u7_status 1
    end_if
    if I_CompareCounter a2u7_status != 1
    set_counter a2u7_status 0
    end_if
    end_if

    if I_UnitStatus a2u7 routing
    if I_CompareCounter a2u7_status = 0
    set_counter a2u7_status 2
    end_if
    if I_CompareCounter a2u7_status != 2
    set_counter a2u7_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u7 moving
    and ! I_UnitStatus a2u7 routing
    set_counter a2u7_status 0
    end_if

    if I_CompareCounter a2u7_status > 0

    if I_UnitDistanceFromPosition a2u7 0,0 >= 150
    and I_UnitDistanceFromPosition a2u7 0,0 < 175
    if I_CompareCounter a2u7_distance != 1
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 1
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 175
    and I_UnitDistanceFromPosition a2u7 0,0 < 200
    if I_CompareCounter a2u7_distance != 2
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 2
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 200
    and I_UnitDistanceFromPosition a2u7 0,0 < 225
    if I_CompareCounter a2u7_distance != 3
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 3
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 225
    and I_UnitDistanceFromPosition a2u7 0,0 < 250
    if I_CompareCounter a2u7_distance != 4
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 4
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 250
    and I_UnitDistanceFromPosition a2u7 0,0 < 275
    if I_CompareCounter a2u7_distance != 5
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 5
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 275
    and I_UnitDistanceFromPosition a2u7 0,0 < 300
    if I_CompareCounter a2u7_distance != 6
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 6
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 300
    and I_UnitDistanceFromPosition a2u7 0,0 < 325
    if I_CompareCounter a2u7_distance != 7
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 7
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 325
    and I_UnitDistanceFromPosition a2u7 0,0 < 350
    if I_CompareCounter a2u7_distance != 8
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 8
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 350
    and I_UnitDistanceFromPosition a2u7 0,0 < 375
    if I_CompareCounter a2u7_distance != 9
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 9
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 375
    and I_UnitDistanceFromPosition a2u7 0,0 < 400
    if I_CompareCounter a2u7_distance != 10
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 10
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 400
    and I_UnitDistanceFromPosition a2u7 0,0 < 425
    if I_CompareCounter a2u7_distance != 11
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 11
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 425
    and I_UnitDistanceFromPosition a2u7 0,0 < 450
    if I_CompareCounter a2u7_distance != 12
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 12
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 450
    and I_UnitDistanceFromPosition a2u7 0,0 < 500
    if I_CompareCounter a2u7_distance != 13
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 13
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 500
    and I_UnitDistanceFromPosition a2u7 0,0 < 550
    if I_CompareCounter a2u7_distance != 14
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 14
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 550
    and I_UnitDistanceFromPosition a2u7 0,0 < 600
    if I_CompareCounter a2u7_distance != 15
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 15
    inc_counter a2u7_stuck 1
    end_if

    if I_CompareCounter a2u7_stuck = 4
    unit_order_halt a2u7
    unit_set_morale a2u7 wavering
    battle_wait 0.1
    unit_unset_morale a2u7
    release_unit a2u7
    set_counter a2u7_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 7
and ! I_UnitDestroyed a2u8

    if I_UnitStatus a2u8 moving
    if I_CompareCounter a2u8_status = 0
    set_counter a2u8_status 1
    end_if
    if I_CompareCounter a2u8_status != 1
    set_counter a2u8_status 0
    end_if
    end_if

    if I_UnitStatus a2u8 routing
    if I_CompareCounter a2u8_status = 0
    set_counter a2u8_status 2
    end_if
    if I_CompareCounter a2u8_status != 2
    set_counter a2u8_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u8 moving
    and ! I_UnitStatus a2u8 routing
    set_counter a2u8_status 0
    end_if

    if I_CompareCounter a2u8_status > 0

    if I_UnitDistanceFromPosition a2u8 0,0 >= 150
    and I_UnitDistanceFromPosition a2u8 0,0 < 175
    if I_CompareCounter a2u8_distance != 1
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 1
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 175
    and I_UnitDistanceFromPosition a2u8 0,0 < 200
    if I_CompareCounter a2u8_distance != 2
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 2
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 200
    and I_UnitDistanceFromPosition a2u8 0,0 < 225
    if I_CompareCounter a2u8_distance != 3
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 3
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 225
    and I_UnitDistanceFromPosition a2u8 0,0 < 250
    if I_CompareCounter a2u8_distance != 4
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 4
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 250
    and I_UnitDistanceFromPosition a2u8 0,0 < 275
    if I_CompareCounter a2u8_distance != 5
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 5
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 275
    and I_UnitDistanceFromPosition a2u8 0,0 < 300
    if I_CompareCounter a2u8_distance != 6
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 6
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 300
    and I_UnitDistanceFromPosition a2u8 0,0 < 325
    if I_CompareCounter a2u8_distance != 7
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 7
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 325
    and I_UnitDistanceFromPosition a2u8 0,0 < 350
    if I_CompareCounter a2u8_distance != 8
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 8
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 350
    and I_UnitDistanceFromPosition a2u8 0,0 < 375
    if I_CompareCounter a2u8_distance != 9
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 9
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 375
    and I_UnitDistanceFromPosition a2u8 0,0 < 400
    if I_CompareCounter a2u8_distance != 10
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 10
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 400
    and I_UnitDistanceFromPosition a2u8 0,0 < 425
    if I_CompareCounter a2u8_distance != 11
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 11
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 425
    and I_UnitDistanceFromPosition a2u8 0,0 < 450
    if I_CompareCounter a2u8_distance != 12
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 12
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 450
    and I_UnitDistanceFromPosition a2u8 0,0 < 500
    if I_CompareCounter a2u8_distance != 13
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 13
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 500
    and I_UnitDistanceFromPosition a2u8 0,0 < 550
    if I_CompareCounter a2u8_distance != 14
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 14
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 550
    and I_UnitDistanceFromPosition a2u8 0,0 < 600
    if I_CompareCounter a2u8_distance != 15
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 15
    inc_counter a2u8_stuck 1
    end_if

    if I_CompareCounter a2u8_stuck = 4
    unit_order_halt a2u8
    unit_set_morale a2u8 wavering
    battle_wait 0.1
    unit_unset_morale a2u8
    release_unit a2u8
    set_counter a2u8_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 8
and ! I_UnitDestroyed a2u9

    if I_UnitStatus a2u9 moving
    if I_CompareCounter a2u9_status = 0
    set_counter a2u9_status 1
    end_if
    if I_CompareCounter a2u9_status != 1
    set_counter a2u9_status 0
    end_if
    end_if

    if I_UnitStatus a2u9 routing
    if I_CompareCounter a2u9_status = 0
    set_counter a2u9_status 2
    end_if
    if I_CompareCounter a2u9_status != 2
    set_counter a2u9_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u9 moving
    and ! I_UnitStatus a2u9 routing
    set_counter a2u9_status 0
    end_if

    if I_CompareCounter a2u9_status > 0

    if I_UnitDistanceFromPosition a2u9 0,0 >= 150
    and I_UnitDistanceFromPosition a2u9 0,0 < 175
    if I_CompareCounter a2u9_distance != 1
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 1
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 175
    and I_UnitDistanceFromPosition a2u9 0,0 < 200
    if I_CompareCounter a2u9_distance != 2
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 2
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 200
    and I_UnitDistanceFromPosition a2u9 0,0 < 225
    if I_CompareCounter a2u9_distance != 3
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 3
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 225
    and I_UnitDistanceFromPosition a2u9 0,0 < 250
    if I_CompareCounter a2u9_distance != 4
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 4
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 250
    and I_UnitDistanceFromPosition a2u9 0,0 < 275
    if I_CompareCounter a2u9_distance != 5
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 5
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 275
    and I_UnitDistanceFromPosition a2u9 0,0 < 300
    if I_CompareCounter a2u9_distance != 6
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 6
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 300
    and I_UnitDistanceFromPosition a2u9 0,0 < 325
    if I_CompareCounter a2u9_distance != 7
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 7
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 325
    and I_UnitDistanceFromPosition a2u9 0,0 < 350
    if I_CompareCounter a2u9_distance != 8
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 8
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 350
    and I_UnitDistanceFromPosition a2u9 0,0 < 375
    if I_CompareCounter a2u9_distance != 9
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 9
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 375
    and I_UnitDistanceFromPosition a2u9 0,0 < 400
    if I_CompareCounter a2u9_distance != 10
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 10
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 400
    and I_UnitDistanceFromPosition a2u9 0,0 < 425
    if I_CompareCounter a2u9_distance != 11
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 11
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 425
    and I_UnitDistanceFromPosition a2u9 0,0 < 450
    if I_CompareCounter a2u9_distance != 12
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 12
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 450
    and I_UnitDistanceFromPosition a2u9 0,0 < 500
    if I_CompareCounter a2u9_distance != 13
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 13
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 500
    and I_UnitDistanceFromPosition a2u9 0,0 < 550
    if I_CompareCounter a2u9_distance != 14
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 14
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 550
    and I_UnitDistanceFromPosition a2u9 0,0 < 600
    if I_CompareCounter a2u9_distance != 15
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 15
    inc_counter a2u9_stuck 1
    end_if

    if I_CompareCounter a2u9_stuck = 4
    unit_order_halt a2u9
    unit_set_morale a2u9 wavering
    battle_wait 0.1
    unit_unset_morale a2u9
    release_unit a2u9
    set_counter a2u9_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 9
and ! I_UnitDestroyed a2u10

    if I_UnitStatus a2u10 moving
    if I_CompareCounter a2u10_status = 0
    set_counter a2u10_status 1
    end_if
    if I_CompareCounter a2u10_status != 1
    set_counter a2u10_status 0
    end_if
    end_if

    if I_UnitStatus a2u10 routing
    if I_CompareCounter a2u10_status = 0
    set_counter a2u10_status 2
    end_if
    if I_CompareCounter a2u10_status != 2
    set_counter a2u10_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u10 moving
    and ! I_UnitStatus a2u10 routing
    set_counter a2u10_status 0
    end_if

    if I_CompareCounter a2u10_status > 0

    if I_UnitDistanceFromPosition a2u10 0,0 >= 150
    and I_UnitDistanceFromPosition a2u10 0,0 < 175
    if I_CompareCounter a2u10_distance != 1
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 1
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 175
    and I_UnitDistanceFromPosition a2u10 0,0 < 200
    if I_CompareCounter a2u10_distance != 2
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 2
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 200
    and I_UnitDistanceFromPosition a2u10 0,0 < 225
    if I_CompareCounter a2u10_distance != 3
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 3
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 225
    and I_UnitDistanceFromPosition a2u10 0,0 < 250
    if I_CompareCounter a2u10_distance != 4
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 4
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 250
    and I_UnitDistanceFromPosition a2u10 0,0 < 275
    if I_CompareCounter a2u10_distance != 5
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 5
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 275
    and I_UnitDistanceFromPosition a2u10 0,0 < 300
    if I_CompareCounter a2u10_distance != 6
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 6
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 300
    and I_UnitDistanceFromPosition a2u10 0,0 < 325
    if I_CompareCounter a2u10_distance != 7
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 7
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 325
    and I_UnitDistanceFromPosition a2u10 0,0 < 350
    if I_CompareCounter a2u10_distance != 8
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 8
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 350
    and I_UnitDistanceFromPosition a2u10 0,0 < 375
    if I_CompareCounter a2u10_distance != 9
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 9
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 375
    and I_UnitDistanceFromPosition a2u10 0,0 < 400
    if I_CompareCounter a2u10_distance != 10
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 10
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 400
    and I_UnitDistanceFromPosition a2u10 0,0 < 425
    if I_CompareCounter a2u10_distance != 11
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 11
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 425
    and I_UnitDistanceFromPosition a2u10 0,0 < 450
    if I_CompareCounter a2u10_distance != 12
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 12
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 450
    and I_UnitDistanceFromPosition a2u10 0,0 < 500
    if I_CompareCounter a2u10_distance != 13
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 13
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 500
    and I_UnitDistanceFromPosition a2u10 0,0 < 550
    if I_CompareCounter a2u10_distance != 14
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 14
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 550
    and I_UnitDistanceFromPosition a2u10 0,0 < 600
    if I_CompareCounter a2u10_distance != 15
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 15
    inc_counter a2u10_stuck 1
    end_if

    if I_CompareCounter a2u10_stuck = 4
    unit_order_halt a2u10
    unit_set_morale a2u10 wavering
    battle_wait 0.1
    unit_unset_morale a2u10
    release_unit a2u10
    set_counter a2u10_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 10
and ! I_UnitDestroyed a2u11

    if I_UnitStatus a2u11 moving
    if I_CompareCounter a2u11_status = 0
    set_counter a2u11_status 1
    end_if
    if I_CompareCounter a2u11_status != 1
    set_counter a2u11_status 0
    end_if
    end_if

    if I_UnitStatus a2u11 routing
    if I_CompareCounter a2u11_status = 0
    set_counter a2u11_status 2
    end_if
    if I_CompareCounter a2u11_status != 2
    set_counter a2u11_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u11 moving
    and ! I_UnitStatus a2u11 routing
    set_counter a2u11_status 0
    end_if

    if I_CompareCounter a2u11_status > 0

    if I_UnitDistanceFromPosition a2u11 0,0 >= 150
    and I_UnitDistanceFromPosition a2u11 0,0 < 175
    if I_CompareCounter a2u11_distance != 1
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 1
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 175
    and I_UnitDistanceFromPosition a2u11 0,0 < 200
    if I_CompareCounter a2u11_distance != 2
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 2
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 200
    and I_UnitDistanceFromPosition a2u11 0,0 < 225
    if I_CompareCounter a2u11_distance != 3
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 3
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 225
    and I_UnitDistanceFromPosition a2u11 0,0 < 250
    if I_CompareCounter a2u11_distance != 4
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 4
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 250
    and I_UnitDistanceFromPosition a2u11 0,0 < 275
    if I_CompareCounter a2u11_distance != 5
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 5
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 275
    and I_UnitDistanceFromPosition a2u11 0,0 < 300
    if I_CompareCounter a2u11_distance != 6
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 6
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 300
    and I_UnitDistanceFromPosition a2u11 0,0 < 325
    if I_CompareCounter a2u11_distance != 7
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 7
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 325
    and I_UnitDistanceFromPosition a2u11 0,0 < 350
    if I_CompareCounter a2u11_distance != 8
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 8
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 350
    and I_UnitDistanceFromPosition a2u11 0,0 < 375
    if I_CompareCounter a2u11_distance != 9
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 9
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 375
    and I_UnitDistanceFromPosition a2u11 0,0 < 400
    if I_CompareCounter a2u11_distance != 10
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 10
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 400
    and I_UnitDistanceFromPosition a2u11 0,0 < 425
    if I_CompareCounter a2u11_distance != 11
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 11
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 425
    and I_UnitDistanceFromPosition a2u11 0,0 < 450
    if I_CompareCounter a2u11_distance != 12
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 12
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 450
    and I_UnitDistanceFromPosition a2u11 0,0 < 500
    if I_CompareCounter a2u11_distance != 13
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 13
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 500
    and I_UnitDistanceFromPosition a2u11 0,0 < 550
    if I_CompareCounter a2u11_distance != 14
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 14
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 550
    and I_UnitDistanceFromPosition a2u11 0,0 < 600
    if I_CompareCounter a2u11_distance != 15
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 15
    inc_counter a2u11_stuck 1
    end_if

    if I_CompareCounter a2u11_stuck = 4
    unit_order_halt a2u11
    unit_set_morale a2u11 wavering
    battle_wait 0.1
    unit_unset_morale a2u11
    release_unit a2u11
    set_counter a2u11_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 11
and ! I_UnitDestroyed a2u12

    if I_UnitStatus a2u12 moving
    if I_CompareCounter a2u12_status = 0
    set_counter a2u12_status 1
    end_if
    if I_CompareCounter a2u12_status != 1
    set_counter a2u12_status 0
    end_if
    end_if

    if I_UnitStatus a2u12 routing
    if I_CompareCounter a2u12_status = 0
    set_counter a2u12_status 2
    end_if
    if I_CompareCounter a2u12_status != 2
    set_counter a2u12_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u12 moving
    and ! I_UnitStatus a2u12 routing
    set_counter a2u12_status 0
    end_if

    if I_CompareCounter a2u12_status > 0

    if I_UnitDistanceFromPosition a2u12 0,0 >= 150
    and I_UnitDistanceFromPosition a2u12 0,0 < 175
    if I_CompareCounter a2u12_distance != 1
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 1
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 175
    and I_UnitDistanceFromPosition a2u12 0,0 < 200
    if I_CompareCounter a2u12_distance != 2
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 2
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 200
    and I_UnitDistanceFromPosition a2u12 0,0 < 225
    if I_CompareCounter a2u12_distance != 3
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 3
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 225
    and I_UnitDistanceFromPosition a2u12 0,0 < 250
    if I_CompareCounter a2u12_distance != 4
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 4
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 250
    and I_UnitDistanceFromPosition a2u12 0,0 < 275
    if I_CompareCounter a2u12_distance != 5
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 5
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 275
    and I_UnitDistanceFromPosition a2u12 0,0 < 300
    if I_CompareCounter a2u12_distance != 6
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 6
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 300
    and I_UnitDistanceFromPosition a2u12 0,0 < 325
    if I_CompareCounter a2u12_distance != 7
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 7
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 325
    and I_UnitDistanceFromPosition a2u12 0,0 < 350
    if I_CompareCounter a2u12_distance != 8
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 8
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 350
    and I_UnitDistanceFromPosition a2u12 0,0 < 375
    if I_CompareCounter a2u12_distance != 9
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 9
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 375
    and I_UnitDistanceFromPosition a2u12 0,0 < 400
    if I_CompareCounter a2u12_distance != 10
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 10
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 400
    and I_UnitDistanceFromPosition a2u12 0,0 < 425
    if I_CompareCounter a2u12_distance != 11
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 11
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 425
    and I_UnitDistanceFromPosition a2u12 0,0 < 450
    if I_CompareCounter a2u12_distance != 12
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 12
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 450
    and I_UnitDistanceFromPosition a2u12 0,0 < 500
    if I_CompareCounter a2u12_distance != 13
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 13
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 500
    and I_UnitDistanceFromPosition a2u12 0,0 < 550
    if I_CompareCounter a2u12_distance != 14
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 14
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 550
    and I_UnitDistanceFromPosition a2u12 0,0 < 600
    if I_CompareCounter a2u12_distance != 15
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 15
    inc_counter a2u12_stuck 1
    end_if

    if I_CompareCounter a2u12_stuck = 4
    unit_order_halt a2u12
    unit_set_morale a2u12 wavering
    battle_wait 0.1
    unit_unset_morale a2u12
    release_unit a2u12
    set_counter a2u12_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 12
and ! I_UnitDestroyed a2u13

    if I_UnitStatus a2u13 moving
    if I_CompareCounter a2u13_status = 0
    set_counter a2u13_status 1
    end_if
    if I_CompareCounter a2u13_status != 1
    set_counter a2u13_status 0
    end_if
    end_if

    if I_UnitStatus a2u13 routing
    if I_CompareCounter a2u13_status = 0
    set_counter a2u13_status 2
    end_if
    if I_CompareCounter a2u13_status != 2
    set_counter a2u13_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u13 moving
    and ! I_UnitStatus a2u13 routing
    set_counter a2u13_status 0
    end_if

    if I_CompareCounter a2u13_status > 0

    if I_UnitDistanceFromPosition a2u13 0,0 >= 150
    and I_UnitDistanceFromPosition a2u13 0,0 < 175
    if I_CompareCounter a2u13_distance != 1
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 1
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 175
    and I_UnitDistanceFromPosition a2u13 0,0 < 200
    if I_CompareCounter a2u13_distance != 2
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 2
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 200
    and I_UnitDistanceFromPosition a2u13 0,0 < 225
    if I_CompareCounter a2u13_distance != 3
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 3
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 225
    and I_UnitDistanceFromPosition a2u13 0,0 < 250
    if I_CompareCounter a2u13_distance != 4
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 4
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 250
    and I_UnitDistanceFromPosition a2u13 0,0 < 275
    if I_CompareCounter a2u13_distance != 5
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 5
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 275
    and I_UnitDistanceFromPosition a2u13 0,0 < 300
    if I_CompareCounter a2u13_distance != 6
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 6
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 300
    and I_UnitDistanceFromPosition a2u13 0,0 < 325
    if I_CompareCounter a2u13_distance != 7
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 7
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 325
    and I_UnitDistanceFromPosition a2u13 0,0 < 350
    if I_CompareCounter a2u13_distance != 8
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 8
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 350
    and I_UnitDistanceFromPosition a2u13 0,0 < 375
    if I_CompareCounter a2u13_distance != 9
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 9
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 375
    and I_UnitDistanceFromPosition a2u13 0,0 < 400
    if I_CompareCounter a2u13_distance != 10
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 10
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 400
    and I_UnitDistanceFromPosition a2u13 0,0 < 425
    if I_CompareCounter a2u13_distance != 11
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 11
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 425
    and I_UnitDistanceFromPosition a2u13 0,0 < 450
    if I_CompareCounter a2u13_distance != 12
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 12
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 450
    and I_UnitDistanceFromPosition a2u13 0,0 < 500
    if I_CompareCounter a2u13_distance != 13
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 13
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 500
    and I_UnitDistanceFromPosition a2u13 0,0 < 550
    if I_CompareCounter a2u13_distance != 14
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 14
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 550
    and I_UnitDistanceFromPosition a2u13 0,0 < 600
    if I_CompareCounter a2u13_distance != 15
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 15
    inc_counter a2u13_stuck 1
    end_if

    if I_CompareCounter a2u13_stuck = 4
    unit_order_halt a2u13
    unit_set_morale a2u13 wavering
    battle_wait 0.1
    unit_unset_morale a2u13
    release_unit a2u13
    set_counter a2u13_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 13
and ! I_UnitDestroyed a2u14

    if I_UnitStatus a2u14 moving
    if I_CompareCounter a2u14_status = 0
    set_counter a2u14_status 1
    end_if
    if I_CompareCounter a2u14_status != 1
    set_counter a2u14_status 0
    end_if
    end_if

    if I_UnitStatus a2u14 routing
    if I_CompareCounter a2u14_status = 0
    set_counter a2u14_status 2
    end_if
    if I_CompareCounter a2u14_status != 2
    set_counter a2u14_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u14 moving
    and ! I_UnitStatus a2u14 routing
    set_counter a2u14_status 0
    end_if

    if I_CompareCounter a2u14_status > 0

    if I_UnitDistanceFromPosition a2u14 0,0 >= 150
    and I_UnitDistanceFromPosition a2u14 0,0 < 175
    if I_CompareCounter a2u14_distance != 1
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 1
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 175
    and I_UnitDistanceFromPosition a2u14 0,0 < 200
    if I_CompareCounter a2u14_distance != 2
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 2
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 200
    and I_UnitDistanceFromPosition a2u14 0,0 < 225
    if I_CompareCounter a2u14_distance != 3
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 3
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 225
    and I_UnitDistanceFromPosition a2u14 0,0 < 250
    if I_CompareCounter a2u14_distance != 4
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 4
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 250
    and I_UnitDistanceFromPosition a2u14 0,0 < 275
    if I_CompareCounter a2u14_distance != 5
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 5
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 275
    and I_UnitDistanceFromPosition a2u14 0,0 < 300
    if I_CompareCounter a2u14_distance != 6
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 6
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 300
    and I_UnitDistanceFromPosition a2u14 0,0 < 325
    if I_CompareCounter a2u14_distance != 7
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 7
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 325
    and I_UnitDistanceFromPosition a2u14 0,0 < 350
    if I_CompareCounter a2u14_distance != 8
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 8
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 350
    and I_UnitDistanceFromPosition a2u14 0,0 < 375
    if I_CompareCounter a2u14_distance != 9
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 9
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 375
    and I_UnitDistanceFromPosition a2u14 0,0 < 400
    if I_CompareCounter a2u14_distance != 10
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 10
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 400
    and I_UnitDistanceFromPosition a2u14 0,0 < 425
    if I_CompareCounter a2u14_distance != 11
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 11
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 425
    and I_UnitDistanceFromPosition a2u14 0,0 < 450
    if I_CompareCounter a2u14_distance != 12
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 12
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 450
    and I_UnitDistanceFromPosition a2u14 0,0 < 500
    if I_CompareCounter a2u14_distance != 13
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 13
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 500
    and I_UnitDistanceFromPosition a2u14 0,0 < 550
    if I_CompareCounter a2u14_distance != 14
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 14
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 550
    and I_UnitDistanceFromPosition a2u14 0,0 < 600
    if I_CompareCounter a2u14_distance != 15
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 15
    inc_counter a2u14_stuck 1
    end_if

    if I_CompareCounter a2u14_stuck = 4
    unit_order_halt a2u14
    unit_set_morale a2u14 wavering
    battle_wait 0.1
    unit_unset_morale a2u14
    release_unit a2u14
    set_counter a2u14_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 14
and ! I_UnitDestroyed a2u15

    if I_UnitStatus a2u15 moving
    if I_CompareCounter a2u15_status = 0
    set_counter a2u15_status 1
    end_if
    if I_CompareCounter a2u15_status != 1
    set_counter a2u15_status 0
    end_if
    end_if

    if I_UnitStatus a2u15 routing
    if I_CompareCounter a2u15_status = 0
    set_counter a2u15_status 2
    end_if
    if I_CompareCounter a2u15_status != 2
    set_counter a2u15_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u15 moving
    and ! I_UnitStatus a2u15 routing
    set_counter a2u15_status 0
    end_if

    if I_CompareCounter a2u15_status > 0

    if I_UnitDistanceFromPosition a2u15 0,0 >= 150
    and I_UnitDistanceFromPosition a2u15 0,0 < 175
    if I_CompareCounter a2u15_distance != 1
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 1
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 175
    and I_UnitDistanceFromPosition a2u15 0,0 < 200
    if I_CompareCounter a2u15_distance != 2
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 2
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 200
    and I_UnitDistanceFromPosition a2u15 0,0 < 225
    if I_CompareCounter a2u15_distance != 3
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 3
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 225
    and I_UnitDistanceFromPosition a2u15 0,0 < 250
    if I_CompareCounter a2u15_distance != 4
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 4
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 250
    and I_UnitDistanceFromPosition a2u15 0,0 < 275
    if I_CompareCounter a2u15_distance != 5
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 5
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 275
    and I_UnitDistanceFromPosition a2u15 0,0 < 300
    if I_CompareCounter a2u15_distance != 6
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 6
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 300
    and I_UnitDistanceFromPosition a2u15 0,0 < 325
    if I_CompareCounter a2u15_distance != 7
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 7
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 325
    and I_UnitDistanceFromPosition a2u15 0,0 < 350
    if I_CompareCounter a2u15_distance != 8
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 8
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 350
    and I_UnitDistanceFromPosition a2u15 0,0 < 375
    if I_CompareCounter a2u15_distance != 9
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 9
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 375
    and I_UnitDistanceFromPosition a2u15 0,0 < 400
    if I_CompareCounter a2u15_distance != 10
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 10
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 400
    and I_UnitDistanceFromPosition a2u15 0,0 < 425
    if I_CompareCounter a2u15_distance != 11
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 11
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 425
    and I_UnitDistanceFromPosition a2u15 0,0 < 450
    if I_CompareCounter a2u15_distance != 12
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 12
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 450
    and I_UnitDistanceFromPosition a2u15 0,0 < 500
    if I_CompareCounter a2u15_distance != 13
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 13
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 500
    and I_UnitDistanceFromPosition a2u15 0,0 < 550
    if I_CompareCounter a2u15_distance != 14
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 14
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 550
    and I_UnitDistanceFromPosition a2u15 0,0 < 600
    if I_CompareCounter a2u15_distance != 15
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 15
    inc_counter a2u15_stuck 1
    end_if

    if I_CompareCounter a2u15_stuck = 4
    unit_order_halt a2u15
    unit_set_morale a2u15 wavering
    battle_wait 0.1
    unit_unset_morale a2u15
    release_unit a2u15
    set_counter a2u15_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 15
and ! I_UnitDestroyed a2u16

    if I_UnitStatus a2u16 moving
    if I_CompareCounter a2u16_status = 0
    set_counter a2u16_status 1
    end_if
    if I_CompareCounter a2u16_status != 1
    set_counter a2u16_status 0
    end_if
    end_if

    if I_UnitStatus a2u16 routing
    if I_CompareCounter a2u16_status = 0
    set_counter a2u16_status 2
    end_if
    if I_CompareCounter a2u16_status != 2
    set_counter a2u16_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u16 moving
    and ! I_UnitStatus a2u16 routing
    set_counter a2u16_status 0
    end_if

    if I_CompareCounter a2u16_status > 0

    if I_UnitDistanceFromPosition a2u16 0,0 >= 150
    and I_UnitDistanceFromPosition a2u16 0,0 < 175
    if I_CompareCounter a2u16_distance != 1
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 1
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 175
    and I_UnitDistanceFromPosition a2u16 0,0 < 200
    if I_CompareCounter a2u16_distance != 2
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 2
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 200
    and I_UnitDistanceFromPosition a2u16 0,0 < 225
    if I_CompareCounter a2u16_distance != 3
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 3
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 225
    and I_UnitDistanceFromPosition a2u16 0,0 < 250
    if I_CompareCounter a2u16_distance != 4
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 4
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 250
    and I_UnitDistanceFromPosition a2u16 0,0 < 275
    if I_CompareCounter a2u16_distance != 5
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 5
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 275
    and I_UnitDistanceFromPosition a2u16 0,0 < 300
    if I_CompareCounter a2u16_distance != 6
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 6
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 300
    and I_UnitDistanceFromPosition a2u16 0,0 < 325
    if I_CompareCounter a2u16_distance != 7
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 7
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 325
    and I_UnitDistanceFromPosition a2u16 0,0 < 350
    if I_CompareCounter a2u16_distance != 8
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 8
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 350
    and I_UnitDistanceFromPosition a2u16 0,0 < 375
    if I_CompareCounter a2u16_distance != 9
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 9
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 375
    and I_UnitDistanceFromPosition a2u16 0,0 < 400
    if I_CompareCounter a2u16_distance != 10
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 10
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 400
    and I_UnitDistanceFromPosition a2u16 0,0 < 425
    if I_CompareCounter a2u16_distance != 11
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 11
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 425
    and I_UnitDistanceFromPosition a2u16 0,0 < 450
    if I_CompareCounter a2u16_distance != 12
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 12
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 450
    and I_UnitDistanceFromPosition a2u16 0,0 < 500
    if I_CompareCounter a2u16_distance != 13
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 13
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 500
    and I_UnitDistanceFromPosition a2u16 0,0 < 550
    if I_CompareCounter a2u16_distance != 14
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 14
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 550
    and I_UnitDistanceFromPosition a2u16 0,0 < 600
    if I_CompareCounter a2u16_distance != 15
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 15
    inc_counter a2u16_stuck 1
    end_if

    if I_CompareCounter a2u16_stuck = 4
    unit_order_halt a2u16
    unit_set_morale a2u16 wavering
    battle_wait 0.1
    unit_unset_morale a2u16
    release_unit a2u16
    set_counter a2u16_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 16
and ! I_UnitDestroyed a2u17

    if I_UnitStatus a2u17 moving
    if I_CompareCounter a2u17_status = 0
    set_counter a2u17_status 1
    end_if
    if I_CompareCounter a2u17_status != 1
    set_counter a2u17_status 0
    end_if
    end_if

    if I_UnitStatus a2u17 routing
    if I_CompareCounter a2u17_status = 0
    set_counter a2u17_status 2
    end_if
    if I_CompareCounter a2u17_status != 2
    set_counter a2u17_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u17 moving
    and ! I_UnitStatus a2u17 routing
    set_counter a2u17_status 0
    end_if

    if I_CompareCounter a2u17_status > 0

    if I_UnitDistanceFromPosition a2u17 0,0 >= 150
    and I_UnitDistanceFromPosition a2u17 0,0 < 175
    if I_CompareCounter a2u17_distance != 1
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 1
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 175
    and I_UnitDistanceFromPosition a2u17 0,0 < 200
    if I_CompareCounter a2u17_distance != 2
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 2
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 200
    and I_UnitDistanceFromPosition a2u17 0,0 < 225
    if I_CompareCounter a2u17_distance != 3
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 3
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 225
    and I_UnitDistanceFromPosition a2u17 0,0 < 250
    if I_CompareCounter a2u17_distance != 4
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 4
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 250
    and I_UnitDistanceFromPosition a2u17 0,0 < 275
    if I_CompareCounter a2u17_distance != 5
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 5
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 275
    and I_UnitDistanceFromPosition a2u17 0,0 < 300
    if I_CompareCounter a2u17_distance != 6
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 6
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 300
    and I_UnitDistanceFromPosition a2u17 0,0 < 325
    if I_CompareCounter a2u17_distance != 7
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 7
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 325
    and I_UnitDistanceFromPosition a2u17 0,0 < 350
    if I_CompareCounter a2u17_distance != 8
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 8
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 350
    and I_UnitDistanceFromPosition a2u17 0,0 < 375
    if I_CompareCounter a2u17_distance != 9
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 9
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 375
    and I_UnitDistanceFromPosition a2u17 0,0 < 400
    if I_CompareCounter a2u17_distance != 10
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 10
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 400
    and I_UnitDistanceFromPosition a2u17 0,0 < 425
    if I_CompareCounter a2u17_distance != 11
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 11
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 425
    and I_UnitDistanceFromPosition a2u17 0,0 < 450
    if I_CompareCounter a2u17_distance != 12
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 12
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 450
    and I_UnitDistanceFromPosition a2u17 0,0 < 500
    if I_CompareCounter a2u17_distance != 13
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 13
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 500
    and I_UnitDistanceFromPosition a2u17 0,0 < 550
    if I_CompareCounter a2u17_distance != 14
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 14
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 550
    and I_UnitDistanceFromPosition a2u17 0,0 < 600
    if I_CompareCounter a2u17_distance != 15
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 15
    inc_counter a2u17_stuck 1
    end_if

    if I_CompareCounter a2u17_stuck = 4
    unit_order_halt a2u17
    unit_set_morale a2u17 wavering
    battle_wait 0.1
    unit_unset_morale a2u17
    release_unit a2u17
    set_counter a2u17_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 17
and ! I_UnitDestroyed a2u18

    if I_UnitStatus a2u18 moving
    if I_CompareCounter a2u18_status = 0
    set_counter a2u18_status 1
    end_if
    if I_CompareCounter a2u18_status != 1
    set_counter a2u18_status 0
    end_if
    end_if

    if I_UnitStatus a2u18 routing
    if I_CompareCounter a2u18_status = 0
    set_counter a2u18_status 2
    end_if
    if I_CompareCounter a2u18_status != 2
    set_counter a2u18_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u18 moving
    and ! I_UnitStatus a2u18 routing
    set_counter a2u18_status 0
    end_if

    if I_CompareCounter a2u18_status > 0

    if I_UnitDistanceFromPosition a2u18 0,0 >= 150
    and I_UnitDistanceFromPosition a2u18 0,0 < 175
    if I_CompareCounter a2u18_distance != 1
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 1
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 175
    and I_UnitDistanceFromPosition a2u18 0,0 < 200
    if I_CompareCounter a2u18_distance != 2
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 2
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 200
    and I_UnitDistanceFromPosition a2u18 0,0 < 225
    if I_CompareCounter a2u18_distance != 3
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 3
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 225
    and I_UnitDistanceFromPosition a2u18 0,0 < 250
    if I_CompareCounter a2u18_distance != 4
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 4
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 250
    and I_UnitDistanceFromPosition a2u18 0,0 < 275
    if I_CompareCounter a2u18_distance != 5
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 5
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 275
    and I_UnitDistanceFromPosition a2u18 0,0 < 300
    if I_CompareCounter a2u18_distance != 6
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 6
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 300
    and I_UnitDistanceFromPosition a2u18 0,0 < 325
    if I_CompareCounter a2u18_distance != 7
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 7
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 325
    and I_UnitDistanceFromPosition a2u18 0,0 < 350
    if I_CompareCounter a2u18_distance != 8
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 8
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 350
    and I_UnitDistanceFromPosition a2u18 0,0 < 375
    if I_CompareCounter a2u18_distance != 9
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 9
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 375
    and I_UnitDistanceFromPosition a2u18 0,0 < 400
    if I_CompareCounter a2u18_distance != 10
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 10
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 400
    and I_UnitDistanceFromPosition a2u18 0,0 < 425
    if I_CompareCounter a2u18_distance != 11
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 11
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 425
    and I_UnitDistanceFromPosition a2u18 0,0 < 450
    if I_CompareCounter a2u18_distance != 12
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 12
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 450
    and I_UnitDistanceFromPosition a2u18 0,0 < 500
    if I_CompareCounter a2u18_distance != 13
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 13
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 500
    and I_UnitDistanceFromPosition a2u18 0,0 < 550
    if I_CompareCounter a2u18_distance != 14
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 14
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 550
    and I_UnitDistanceFromPosition a2u18 0,0 < 600
    if I_CompareCounter a2u18_distance != 15
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 15
    inc_counter a2u18_stuck 1
    end_if

    if I_CompareCounter a2u18_stuck = 4
    unit_order_halt a2u18
    unit_set_morale a2u18 wavering
    battle_wait 0.1
    unit_unset_morale a2u18
    release_unit a2u18
    set_counter a2u18_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 18
and ! I_UnitDestroyed a2u19

    if I_UnitStatus a2u19 moving
    if I_CompareCounter a2u19_status = 0
    set_counter a2u19_status 1
    end_if
    if I_CompareCounter a2u19_status != 1
    set_counter a2u19_status 0
    end_if
    end_if

    if I_UnitStatus a2u19 routing
    if I_CompareCounter a2u19_status = 0
    set_counter a2u19_status 2
    end_if
    if I_CompareCounter a2u19_status != 2
    set_counter a2u19_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u19 moving
    and ! I_UnitStatus a2u19 routing
    set_counter a2u19_status 0
    end_if

    if I_CompareCounter a2u19_status > 0

    if I_UnitDistanceFromPosition a2u19 0,0 >= 150
    and I_UnitDistanceFromPosition a2u19 0,0 < 175
    if I_CompareCounter a2u19_distance != 1
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 1
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 175
    and I_UnitDistanceFromPosition a2u19 0,0 < 200
    if I_CompareCounter a2u19_distance != 2
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 2
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 200
    and I_UnitDistanceFromPosition a2u19 0,0 < 225
    if I_CompareCounter a2u19_distance != 3
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 3
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 225
    and I_UnitDistanceFromPosition a2u19 0,0 < 250
    if I_CompareCounter a2u19_distance != 4
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 4
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 250
    and I_UnitDistanceFromPosition a2u19 0,0 < 275
    if I_CompareCounter a2u19_distance != 5
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 5
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 275
    and I_UnitDistanceFromPosition a2u19 0,0 < 300
    if I_CompareCounter a2u19_distance != 6
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 6
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 300
    and I_UnitDistanceFromPosition a2u19 0,0 < 325
    if I_CompareCounter a2u19_distance != 7
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 7
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 325
    and I_UnitDistanceFromPosition a2u19 0,0 < 350
    if I_CompareCounter a2u19_distance != 8
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 8
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 350
    and I_UnitDistanceFromPosition a2u19 0,0 < 375
    if I_CompareCounter a2u19_distance != 9
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 9
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 375
    and I_UnitDistanceFromPosition a2u19 0,0 < 400
    if I_CompareCounter a2u19_distance != 10
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 10
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 400
    and I_UnitDistanceFromPosition a2u19 0,0 < 425
    if I_CompareCounter a2u19_distance != 11
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 11
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 425
    and I_UnitDistanceFromPosition a2u19 0,0 < 450
    if I_CompareCounter a2u19_distance != 12
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 12
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 450
    and I_UnitDistanceFromPosition a2u19 0,0 < 500
    if I_CompareCounter a2u19_distance != 13
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 13
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 500
    and I_UnitDistanceFromPosition a2u19 0,0 < 550
    if I_CompareCounter a2u19_distance != 14
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 14
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 550
    and I_UnitDistanceFromPosition a2u19 0,0 < 600
    if I_CompareCounter a2u19_distance != 15
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 15
    inc_counter a2u19_stuck 1
    end_if

    if I_CompareCounter a2u19_stuck = 4
    unit_order_halt a2u19
    unit_set_morale a2u19 wavering
    battle_wait 0.1
    unit_unset_morale a2u19
    release_unit a2u19
    set_counter a2u19_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count = 20
and ! I_UnitDestroyed a2u20

    if I_UnitStatus a2u20 moving
    if I_CompareCounter a2u20_status = 0
    set_counter a2u20_status 1
    end_if
    if I_CompareCounter a2u20_status != 1
    set_counter a2u20_status 0
    end_if
    end_if

    if I_UnitStatus a2u20 routing
    if I_CompareCounter a2u20_status = 0
    set_counter a2u20_status 2
    end_if
    if I_CompareCounter a2u20_status != 2
    set_counter a2u20_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u20 moving
    and ! I_UnitStatus a2u20 routing
    set_counter a2u20_status 0
    end_if

    if I_CompareCounter a2u20_status > 0

    if I_UnitDistanceFromPosition a2u20 0,0 >= 150
    and I_UnitDistanceFromPosition a2u20 0,0 < 175
    if I_CompareCounter a2u20_distance != 1
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 1
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 175
    and I_UnitDistanceFromPosition a2u20 0,0 < 200
    if I_CompareCounter a2u20_distance != 2
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 2
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 200
    and I_UnitDistanceFromPosition a2u20 0,0 < 225
    if I_CompareCounter a2u20_distance != 3
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 3
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 225
    and I_UnitDistanceFromPosition a2u20 0,0 < 250
    if I_CompareCounter a2u20_distance != 4
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 4
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 250
    and I_UnitDistanceFromPosition a2u20 0,0 < 275
    if I_CompareCounter a2u20_distance != 5
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 5
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 275
    and I_UnitDistanceFromPosition a2u20 0,0 < 300
    if I_CompareCounter a2u20_distance != 6
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 6
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 300
    and I_UnitDistanceFromPosition a2u20 0,0 < 325
    if I_CompareCounter a2u20_distance != 7
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 7
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 325
    and I_UnitDistanceFromPosition a2u20 0,0 < 350
    if I_CompareCounter a2u20_distance != 8
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 8
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 350
    and I_UnitDistanceFromPosition a2u20 0,0 < 375
    if I_CompareCounter a2u20_distance != 9
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 9
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 375
    and I_UnitDistanceFromPosition a2u20 0,0 < 400
    if I_CompareCounter a2u20_distance != 10
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 10
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 400
    and I_UnitDistanceFromPosition a2u20 0,0 < 425
    if I_CompareCounter a2u20_distance != 11
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 11
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 425
    and I_UnitDistanceFromPosition a2u20 0,0 < 450
    if I_CompareCounter a2u20_distance != 12
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 12
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 450
    and I_UnitDistanceFromPosition a2u20 0,0 < 500
    if I_CompareCounter a2u20_distance != 13
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 13
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 500
    and I_UnitDistanceFromPosition a2u20 0,0 < 550
    if I_CompareCounter a2u20_distance != 14
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 14
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 550
    and I_UnitDistanceFromPosition a2u20 0,0 < 600
    if I_CompareCounter a2u20_distance != 15
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 15
    inc_counter a2u20_stuck 1
    end_if

    if I_CompareCounter a2u20_stuck = 4
    unit_order_halt a2u20
    unit_set_morale a2u20 wavering
    battle_wait 0.1
    unit_unset_morale a2u20
    release_unit a2u20
    set_counter a2u20_stuck 0
    end_if

    end_if
end_if

    battle_wait 10
end_monitor

;;;;;;;Anti-CTD
monitor_event BattleDeploymentPhaseCommenced FactionIsLocal
    wait 0.5
    simulate_mouse_click lclick_down
    simulate_mouse_click lclick_up
end_monitor

;################## Cleaning up ##################

monitor_event ScrollOpened ScrollOpened post_battle_scroll

    ;;;;;;;
    set_counter fire_labels 0
;    set_counter panel_check 0
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter labels_only 0
    set_counter stakes_lock 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    ;;;;;;;Checks
    set_counter check_timer 0
    set_counter elephant_fix_check 0
    set_counter elephant_fix_check_sally 0
    set_counter reinf_check 0
    set_counter script_delay 0
    set_counter sally_defense_check 0
    set_counter sally_check 0
    ;;;;;;;Stakes
    set_counter label_ready 0
    set_counter stakes_on 0
    ;;;;;;;Reinforcements
    set_counter army4_ready 0
    set_counter reinf_late 0

    set_counter distance_trigger1 0
    set_counter distance_trigger2 0
    set_counter distance_trigger3 0
    set_counter distance_trigger4 0
    set_counter distance_trigger5 0

    set_counter kill_labelling_reinf_allied 0
    set_counter army3_reinf_allied 0
    set_counter army4_reinf_allied 0
    set_counter army5_reinf_allied 0
    set_counter army6_reinf_allied 0
    set_counter army7_reinf_allied 0
    set_counter army8_reinf_allied 0
    set_counter army9_reinf_allied 0
    set_counter army10_reinf_allied 0
    set_counter army11_reinf_allied 0
    set_counter army12_reinf_allied 0
    set_counter army13_reinf_allied 0
    set_counter army14_reinf_allied 0
    set_counter army15_reinf_allied 0
    set_counter army16_reinf_allied 0
    set_counter launch_alliance_0 0
    set_counter launch_alliance_1 0

    set_counter apply_strategy 0
    set_counter relaunch_movement 0

    set_counter att_alliance_ready 0
    set_counter def_alliance_ready 0
    set_counter def_alliance_ready_siege 0

    set_counter army3_moving 0
    set_counter army3_run 0
    set_counter army3_reinf_late 0
    set_counter army4_moving 0
    set_counter army4_run 0
    set_counter army4_reinf_late 0
    set_counter army5_moving 0
    set_counter army5_run 0
    set_counter army5_reinf_late 0
    set_counter army6_moving 0
    set_counter army6_run 0
    set_counter army6_reinf_late 0
    set_counter army7_moving 0
    set_counter army7_run 0
    set_counter army7_reinf_late 0
    set_counter army8_moving 0
    set_counter army8_run 0
    set_counter army8_reinf_late 0
    set_counter army9_moving 0
    set_counter army9_run 0
    set_counter army9_reinf_late 0
    set_counter army10_moving 0
    set_counter army10_run 0
    set_counter army10_reinf_late 0
    set_counter army11_moving 0
    set_counter army11_run 0
    set_counter army11_reinf_late 0
    set_counter army12_moving 0
    set_counter army12_run 0
    set_counter army12_reinf_late 0
    set_counter army13_moving 0
    set_counter army13_run 0
    set_counter army13_reinf_late 0
    set_counter army14_moving 0
    set_counter army14_run 0
    set_counter army14_reinf_late 0
    set_counter army15_moving 0
    set_counter army15_run 0
    set_counter army15_reinf_late 0
    set_counter army16_moving 0
    set_counter army16_run 0
    set_counter army16_reinf_late 0

    set_counter army4_ready_siege 0 ; acts as launching counter
    set_counter army4_moving_siege 0
    set_counter army4_run_siege 0
    set_counter reinf_check_interval 0

    ;;;;;;;HA Fix
    set_counter ha_fix 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    set_counter elephant_gate_s 0
    set_counter elephant_gate_tier2 0
    set_counter elephant_gate_tier3 0
    set_counter elephant_gate_tier2s 0
    set_counter elephant_gate_tier3s 0
    set_counter rally_walls 0
    set_counter rally_walls_s 0
    set_counter second_ring 0
    set_counter third_ring 0
    set_counter second_ring_s 0
    set_counter third_ring_s 0
    set_counter del_objective 0
    set_counter del_objective_s 0
    ;;;;;;;Sally-out
    set_counter sally-out_fix 0
    set_counter sally_defense 0
    set_counter reform_back 0
    set_counter reform_multi 0
    set_counter unit_under_fire 0
    set_counter kill_sally 0
    set_counter sally_reinf 0
    set_counter reset_position 0
    set_counter defend_location 0
    set_counter reset_army2 0
    set_counter assign_labels 0
    ;;;;;;;Siege
    set_counter siege_fix 0
    set_counter army_sieging 0
    set_counter army_south 0
    set_counter army_north 0
    set_counter army_east 0
    set_counter army_west 0
    set_counter emergency_stop 0
    set_counter omfg_cannon_tower 0
    set_counter army2_sally 0
    set_counter wall_advance_s 0
    ;;;;;;;Protect General
    set_counter protect_general 0
    set_counter general_wait 0
    set_counter protect_siege 0
    set_counter g_stop 0
    ;;;;;;;Sally-out, AI defending
    set_counter army4_ready_sally 0
    set_counter army4_location 0
    set_counter path_n 0
    set_counter path_ne 0
    set_counter path_e 0
    set_counter path_se 0
    set_counter path_s 0
    set_counter path_sw 0
    set_counter path_w 0
    set_counter path_nw 0
    set_counter obstacle_check 0
    set_counter label_army4 0
    set_counter army4_moving_s 0
    set_counter army4_idle_s 0
    set_counter line_passed 0
    set_counter army2_idle_s 0
    set_counter army4_idle_r 0
    set_counter wall_line_passed 0
    set_counter reset_position_s 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    ;;;;;;;Open Battles
    set_counter ob_defense_launch 0
    set_counter ob_defend 0
    set_counter ob_siege_attack 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 0
    set_counter ob_engaged 0
    set_counter player_units_closing 0
    set_counter player_enveloping 0
    set_counter player_engaged_reinf 0
    ;;;;;;;AI Stuck Fix
    set_counter ai_stuck_launch 0
    set_counter a2u1_stuck 0
    set_counter a2u2_stuck 0
    set_counter a2u3_stuck 0
    set_counter a2u4_stuck 0
    set_counter a2u5_stuck 0
    set_counter a2u6_stuck 0
    set_counter a2u7_stuck 0
    set_counter a2u8_stuck 0
    set_counter a2u9_stuck 0
    set_counter a2u10_stuck 0
    set_counter a2u11_stuck 0
    set_counter a2u12_stuck 0
    set_counter a2u13_stuck 0
    set_counter a2u14_stuck 0
    set_counter a2u15_stuck 0
    set_counter a2u16_stuck 0
    set_counter a2u17_stuck 0
    set_counter a2u18_stuck 0
    set_counter a2u19_stuck 0
    set_counter a2u20_stuck 0
    set_counter a2u1_status 0
    set_counter a2u2_status 0
    set_counter a2u3_status 0
    set_counter a2u4_status 0
    set_counter a2u5_status 0
    set_counter a2u6_status 0
    set_counter a2u7_status 0
    set_counter a2u8_status 0
    set_counter a2u9_status 0
    set_counter a2u10_status 0
    set_counter a2u11_status 0
    set_counter a2u12_status 0
    set_counter a2u13_status 0
    set_counter a2u14_status 0
    set_counter a2u15_status 0
    set_counter a2u16_status 0
    set_counter a2u17_status 0
    set_counter a2u18_status 0
    set_counter a2u19_status 0
    set_counter a2u20_status 0
    set_counter a2u1_distance 0
    set_counter a2u2_distance 0
    set_counter a2u3_distance 0
    set_counter a2u4_distance 0
    set_counter a2u5_distance 0
    set_counter a2u6_distance 0
    set_counter a2u7_distance 0
    set_counter a2u8_distance 0
    set_counter a2u9_distance 0
    set_counter a2u10_distance 0
    set_counter a2u11_distance 0
    set_counter a2u12_distance 0
    set_counter a2u13_distance 0
    set_counter a2u14_distance 0
    set_counter a2u15_distance 0
    set_counter a2u16_distance 0
    set_counter a2u17_distance 0
    set_counter a2u18_distance 0
    set_counter a2u19_distance 0
    set_counter a2u20_distance 0
;    suspend_unscripted_advice false
end_monitor


;=======================================================;
;============ TITANIUM ADDITIONAL SCRIPTS ==============;
;=======================================================;
;==================================================================================;
;-------------------------------- Loan Script -------------------------------------;
;==================================================================================;
;Counters
	set_event_counter italian_bankers_event 0
	declare_counter loan_refund_amount
	declare_counter finances_panel_open
	declare_counter finances_panel_open2
	declare_counter loan_dread_counter
	;
	declare_counter loan_refund_amount_venice
	declare_counter loan_refund_amount_milan
	declare_counter loan_refund_amount_sicily
	declare_counter loan_refund_amount_spain
	declare_counter loan_refund_amount_aragon
	declare_counter loan_refund_amount_portugal
	declare_counter loan_refund_amount_france
	declare_counter loan_refund_amount_hre
	declare_counter loan_refund_amount_england
	declare_counter loan_refund_amount_scotland
	declare_counter loan_refund_amount_denmark
	declare_counter loan_refund_amount_norway
	declare_counter loan_refund_amount_jerusalem
	declare_counter loan_refund_amount_teutonic_order
	declare_counter loan_refund_amount_hungary
	declare_counter loan_refund_amount_poland
	declare_counter loan_refund_amount_lithuania
	declare_counter loan_refund_amount_byzantium
	declare_counter loan_refund_amount_russia
	declare_counter loan_refund_amount_kievan_rus
	declare_counter loan_refund_amount_cumans
	declare_counter loan_refund_amount_mongols
	declare_counter loan_refund_amount_turks
	declare_counter loan_refund_amount_kwarezm
	declare_counter loan_refund_amount_egypt
	declare_counter loan_refund_amount_moors
	declare_counter loan_refund_amount_abbasids
	declare_counter loan_refund_amount_georgia

;Italian Bankers Historical Event, allow larger loans
add_events
		event	historic	italian_bankers_event
		date	57; 1157AD
end_add_events

;Interests payment included in this monitor
monitor_event FactionTurnEnd not IsFactionAIControlled
	;reset to allow loan panel for next turn
		set_counter finances_panel_open 0
		set_counter finances_panel_open2 0
	;Interests
	if I_CompareCounter loan_refund_amount = 1
		console_command add_money -500
	end_if
	if I_CompareCounter loan_refund_amount = 2
		console_command add_money -1000
	end_if
	if I_CompareCounter loan_refund_amount = 3
		console_command add_money -1500
	end_if
	if I_CompareCounter loan_refund_amount = 4
		console_command add_money -2000
	end_if
	if I_CompareCounter loan_refund_amount = 5
		console_command add_money -2500
	end_if
;Hotseat Compatibility
	if I_HotseatEnabled
	;Venice
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount_venice 5
			set_counter loan_refund_amount 0
		end_if
	;Genoa/Milan
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount_milan 5
			set_counter loan_refund_amount 0
		end_if
	;Sicily
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount_sicily 5
			set_counter loan_refund_amount 0
		end_if
	;Spain
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount_spain 5
			set_counter loan_refund_amount 0
		end_if
	;Aragon
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount_aragon 5
			set_counter loan_refund_amount 0
		end_if
	;Portugal
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount_portugal 5
			set_counter loan_refund_amount 0
		end_if
	;Byzantium
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount_byzantium 5
			set_counter loan_refund_amount 0
		end_if
	;France
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount_france 5
			set_counter loan_refund_amount 0
		end_if
	;Jerusalem
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount_jerusalem 5
			set_counter loan_refund_amount 0
		end_if
	;HRE
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount_hre 5
			set_counter loan_refund_amount 0
		end_if
	;Teutonic Order
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount_teutonic_order 5
			set_counter loan_refund_amount 0
		end_if
	;England
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount_england 5
			set_counter loan_refund_amount 0
		end_if
	;Scotland
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount_scotland 5
			set_counter loan_refund_amount 0
		end_if
	;Denmark
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount_denmark 5
			set_counter loan_refund_amount 0
		end_if
	;Norway
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount_norway 5
			set_counter loan_refund_amount 0
		end_if
	;Hungary
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount_hungary 5
			set_counter loan_refund_amount 0
		end_if
	;Poland
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount_poland 5
			set_counter loan_refund_amount 0
		end_if
	;Lithuania
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount_lithuania 5
			set_counter loan_refund_amount 0
		end_if
	;Cumans
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount_cumans 5
			set_counter loan_refund_amount 0
		end_if
	;Novgorod/Russia
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount_russia 5
			set_counter loan_refund_amount 0
		end_if
	;Kievan Rus
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount_kievan_rus 5
			set_counter loan_refund_amount 0
		end_if
	;Mongols
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount_mongols 5
			set_counter loan_refund_amount 0
		end_if
	;Turks
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount_turks 5
			set_counter loan_refund_amount 0
		end_if
	;Egypt
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount_egypt 5
			set_counter loan_refund_amount 0
		end_if
	;Kwarezm
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount_kwarezm 5
			set_counter loan_refund_amount 0
		end_if
	;Moors
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount_moors 5
			set_counter loan_refund_amount 0
		end_if
	;Abbasids
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount_abbasids 5
			set_counter loan_refund_amount 0
		end_if
	;Georgia
		if I_CompareCounter loan_refund_amount = 0
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount_georgia 5
			set_counter loan_refund_amount 0
		end_if
	end_if
	end_monitor
;End of Hotseat Compatibility
	
monitor_event PreFactionTurnStart FactionIsLocal
	and I_TurnNumber >= 1
	;reset dreadful faction leader event for traits
		set_event_counter loan_dread 0
;Hotseat Compatibility
	if I_HotseatEnabled
	;Venice
		if I_CompareCounter loan_refund_amount_venice = 0
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_venice = 1
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_venice = 2
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_venice = 3
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_venice = 4
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_venice = 5
		and I_CompareCounter turn_fid = 12
			set_counter loan_refund_amount 5
		end_if
	;Genoa/Milan
		if I_CompareCounter loan_refund_amount_milan = 0
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_milan = 1
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_milan = 2
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_milan = 3
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_milan = 4
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_milan = 5
		and I_CompareCounter turn_fid = 14
			set_counter loan_refund_amount 5
		end_if
	;Sicily
		if I_CompareCounter loan_refund_amount_sicily = 0
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 1
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 2
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 3
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 4
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 5
		and I_CompareCounter turn_fid = 13
			set_counter loan_refund_amount 5
		end_if
	;Spain
		if I_CompareCounter loan_refund_amount_spain = 0
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_spain = 1
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_spain = 2
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_spain = 3
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_spain = 4
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_spain = 5
		and I_CompareCounter turn_fid = 22
			set_counter loan_refund_amount 5
		end_if
	;Aragon
		if I_CompareCounter loan_refund_amount_aragon = 0
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 1
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 2
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 3
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 4
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 5
		and I_CompareCounter turn_fid = 24
			set_counter loan_refund_amount 5
		end_if
	;Portugal
		if I_CompareCounter loan_refund_amount_portugal = 0
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 1
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 2
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 3
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 4
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 5
		and I_CompareCounter turn_fid = 20
			set_counter loan_refund_amount 5
		end_if
	;Byzantium
		if I_CompareCounter loan_refund_amount_byzantium = 0
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 1
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 2
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 3
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 4
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 5
		and I_CompareCounter turn_fid = 9
			set_counter loan_refund_amount 5
		end_if
	;France
		if I_CompareCounter loan_refund_amount_france = 0
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_france = 1
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_france = 2
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_france = 3
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_france = 4
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_france = 5
		and I_CompareCounter turn_fid = 17
			set_counter loan_refund_amount 5
		end_if
	;Jerusalem
		if I_CompareCounter loan_refund_amount_jerusalem = 0
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 1
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 2
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 3
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 4
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 5
		and I_CompareCounter turn_fid = 27
			set_counter loan_refund_amount 5
		end_if
	;HRE
		if I_CompareCounter loan_refund_amount_hre = 0
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_hre = 1
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_hre = 2
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_hre = 3
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_hre = 4
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_hre = 5
		and I_CompareCounter turn_fid = 18
			set_counter loan_refund_amount 5
		end_if
	;Teutonic Order
		if I_CompareCounter loan_refund_amount_teutonic_order = 0
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 1
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 2
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 3
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 4
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 5
		and I_CompareCounter turn_fid = 25
			set_counter loan_refund_amount 5
		end_if
	;England
		if I_CompareCounter loan_refund_amount_england = 0
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_england = 1
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_england = 2
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_england = 3
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_england = 4
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_england = 5
		and I_CompareCounter turn_fid = 19
			set_counter loan_refund_amount 5
		end_if
	;Scotland
		if I_CompareCounter loan_refund_amount_scotland = 0
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 1
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 2
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 3
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 4
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 5
		and I_CompareCounter turn_fid = 16
			set_counter loan_refund_amount 5
		end_if
	;Denmark
		if I_CompareCounter loan_refund_amount_denmark = 0
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 1
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 2
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 3
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 4
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 5
		and I_CompareCounter turn_fid = 15
			set_counter loan_refund_amount 5
		end_if
	;Norway
		if I_CompareCounter loan_refund_amount_norway = 0
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_norway = 1
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_norway = 2
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_norway = 3
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_norway = 4
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_norway = 5
		and I_CompareCounter turn_fid = 26
			set_counter loan_refund_amount 5
		end_if
	;Hungary
		if I_CompareCounter loan_refund_amount_hungary = 0
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 1
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 2
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 3
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 4
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 5
		and I_CompareCounter turn_fid = 23
			set_counter loan_refund_amount 5
		end_if
	;Poland
		if I_CompareCounter loan_refund_amount_poland = 0
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_poland = 1
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_poland = 2
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_poland = 3
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_poland = 4
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_poland = 5
		and I_CompareCounter turn_fid = 21
			set_counter loan_refund_amount 5
		end_if
	;Lithuania
		if I_CompareCounter loan_refund_amount_lithuania = 0
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 1
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 2
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 3
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 4
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 5
		and I_CompareCounter turn_fid = 6
			set_counter loan_refund_amount 5
		end_if
	;Cumans
		if I_CompareCounter loan_refund_amount_cumans = 0
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 1
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 2
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 3
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 4
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 5
		and I_CompareCounter turn_fid = 7
			set_counter loan_refund_amount 5
		end_if
	;Novgorod/Russia
		if I_CompareCounter loan_refund_amount_russia = 0
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_russia = 1
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_russia = 2
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_russia = 3
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_russia = 4
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_russia = 5
		and I_CompareCounter turn_fid = 10
			set_counter loan_refund_amount 5
		end_if
	;Kievan Rus
		if I_CompareCounter loan_refund_amount_kievan_rus = 0
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 1
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 2
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 3
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 4
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 5
		and I_CompareCounter turn_fid = 11
			set_counter loan_refund_amount 5
		end_if
	;Mongols
		if I_CompareCounter loan_refund_amount_mongols = 0
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 1
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 2
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 3
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 4
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 5
		and I_CompareCounter turn_fid = 8
			set_counter loan_refund_amount 5
		end_if
	;Turks
		if I_CompareCounter loan_refund_amount_turks = 0
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_turks = 1
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_turks = 2
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_turks = 3
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_turks = 4
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_turks = 5
		and I_CompareCounter turn_fid = 2
			set_counter loan_refund_amount 5
		end_if
	;Egypt
		if I_CompareCounter loan_refund_amount_egypt = 0
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 1
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 2
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 3
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 4
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 5
		and I_CompareCounter turn_fid = 1
			set_counter loan_refund_amount 5
		end_if
	;Kwarezm
		if I_CompareCounter loan_refund_amount_kwarezm = 0
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 1
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 2
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 3
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 4
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 5
		and I_CompareCounter turn_fid = 4
			set_counter loan_refund_amount 5
		end_if
	;Moors
		if I_CompareCounter loan_refund_amount_moors = 0
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_moors = 1
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_moors = 2
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_moors = 3
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_moors = 4
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_moors = 5
		and I_CompareCounter turn_fid = 5
			set_counter loan_refund_amount 5
		end_if
	;Abbasids
		if I_CompareCounter loan_refund_amount_abbasids = 0
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_abbasids = 1
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_abbasids = 2
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_abbasids = 3
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_abbasids = 4
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_abbasids = 5
		and I_CompareCounter turn_fid = 3
			set_counter loan_refund_amount 5
		end_if
	;Georgia
		if I_CompareCounter loan_refund_amount_georgia = 0
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_georgia = 1
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_georgia = 2
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_georgia = 3
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_georgia = 4
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_georgia = 5
		and I_CompareCounter turn_fid = 29
			set_counter loan_refund_amount 5
		end_if
	end_if
;End of Hotseat Compatibility

;Event Counters for Traits
	if I_CompareCounter loan_refund_amount = 0
		set_event_counter loan_refund 0
	end_if
	if I_CompareCounter loan_refund_amount = 1
		set_event_counter loan_refund 1
	end_if
	if I_CompareCounter loan_refund_amount = 2
		set_event_counter loan_refund 2
	end_if
	if I_CompareCounter loan_refund_amount = 3
		set_event_counter loan_refund 3
	end_if
	if I_CompareCounter loan_refund_amount = 4
		set_event_counter loan_refund 4
	end_if
	if I_CompareCounter loan_refund_amount = 5
		set_event_counter loan_refund 5
	end_if
end_monitor

;Dreadful Faction Leader?
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry < -5; Yes, definitively he is
		generate_random_counter bankers_afraid 1 10
		if I_EventCounter bankers_afraid > 7; No loans available for you this turn
			set_counter loan_dread_counter 2
		end_if
		if I_EventCounter bankers_afraid < 8
			set_counter loan_dread_counter 1
		end_if
	end_monitor
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry > -6
	and Attribute Chivalry < 4; Not yet but just needs a little 'push'
		set_counter loan_dread_counter 1
	end_monitor
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry > 3; No
		set_counter loan_dread_counter 0
	end_monitor

;----------------- "Take Loan?" ----------------------
declare_counter has_repay_money;?
monitor_event FinancesPanelOpen FactionIsLocal; YES
	and Treasury > 9999
	set_counter has_repay_money 1
	if I_CompareCounter finances_panel_open = 0
	and I_CompareCounter finances_panel_open2 < 1
		set_counter finances_panel_open 1
		campaign_wait 0.5
		set_counter finances_panel_open 0
	end_if
end_monitor
monitor_event FinancesPanelOpen FactionIsLocal; NO
	and Treasury < 10000
	set_counter has_repay_money 0
	if I_CompareCounter finances_panel_open = 0
	and I_CompareCounter finances_panel_open2 < 1
		set_counter finances_panel_open 1
		campaign_wait 0.5
		if I_CompareCounter finances_panel_open = 1
			set_counter finances_panel_open 0
		end_if
	end_if
end_monitor

monitor_event ButtonPressed TrueCondition
	and I_CompareCounter finances_panel_open = 1
	set_counter finances_panel_open2 1
	;Basic loan available from 1100 till 1157
	if I_EventCounter italian_bankers_event < 1
	and I_CompareCounter loan_dread_counter < 2
		if I_CompareCounter loan_refund_amount < 3;	cannot exceed the max of 30,000f in debt
			if not I_HotseatEnabled
			historic_event loan_offer true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_offer true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_offer true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_offer true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_offer true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_offer true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_offer true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_offer true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_offer true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_offer true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_offer true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_offer true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_offer true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_offer true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_offer true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_offer true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_offer true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_offer true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_offer true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_offer true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_offer true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_offer true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_offer true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_offer true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_offer true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_offer true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_offer true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_offer true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_offer true factions { georgia, }
				end_if
			end_if
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money >= 1
			if not I_HotseatEnabled
			historic_event loan_repay true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_repay true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_repay true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_repay true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_repay true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_repay true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_repay true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_repay true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_repay true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_repay true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_repay true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_repay true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_repay true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_repay true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_repay true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_repay true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_repay true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_repay true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_repay true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_repay true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_repay true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_repay true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_repay true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_repay true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_repay true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_repay true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_repay true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_repay true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_repay true factions { georgia, }
				end_if
			end_if
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 0
			if not I_HotseatEnabled
			historic_event loan_all_fail
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_all_fail factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_all_fail factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_all_fail factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_all_fail factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_all_fail factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_all_fail factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_all_fail factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_all_fail factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_all_fail factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_all_fail factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_all_fail factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_all_fail factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_all_fail factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_all_fail factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_all_fail factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_all_fail factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_all_fail factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_all_fail factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_all_fail factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_all_fail factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_all_fail factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_all_fail factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_all_fail factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_all_fail factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_all_fail factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_all_fail factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_all_fail factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_all_fail factions { georgia, }
				end_if
			end_if
			play_sound_event loan_failure
			campaign_wait 0.5
			set_counter finances_panel_open2 0
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 1
			if not I_HotseatEnabled
			historic_event loan_denied true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_denied true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_denied true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_denied true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_denied true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_denied true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_denied true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_denied true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_denied true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_denied true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_denied true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_denied true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_denied true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_denied true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_denied true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_denied true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_denied true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_denied true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_denied true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_denied true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_denied true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_denied true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_denied true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_denied true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_denied true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_denied true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_denied true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_denied true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_denied true factions { georgia, }
				end_if
			end_if
			play_sound_event loan_failure
			set_counter finances_panel_open 2
		end_if
	end_if
	;Italian Bankers event allow larger loans
	if I_EventCounter italian_bankers_event >= 1
	and I_CompareCounter loan_dread_counter < 2
		if I_CompareCounter loan_refund_amount < 5;	cannot exceed the max of 50,000f in debt
			if not I_HotseatEnabled
			historic_event loan_offer true
			end_if
			if not I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_offer true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_offer true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_offer true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_offer true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_offer true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_offer true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_offer true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_offer true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_offer true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_offer true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_offer true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_offer true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_offer true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_offer true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_offer true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_offer true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_offer true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_offer true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_offer true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_offer true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_offer true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_offer true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_offer true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_offer true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_offer true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_offer true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_offer true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_offer true factions { georgia, }
				end_if
			end_if
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money >= 1
			if not I_HotseatEnabled
			historic_event loan_repay true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_repay true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_repay true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_repay true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_repay true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_repay true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_repay true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_repay true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_repay true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_repay true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_repay true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_repay true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_repay true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_repay true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_repay true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_repay true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_repay true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_repay true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_repay true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_repay true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_repay true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_repay true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_repay true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_repay true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_repay true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_repay true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_repay true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_repay true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_repay true factions { georgia, }
				end_if
			end_if
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 0
			if not I_HotseatEnabled
			historic_event loan_all_fail
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_all_fail factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_all_fail factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_all_fail factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_all_fail factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_all_fail factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_all_fail factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_all_fail factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_all_fail factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_all_fail factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_all_fail factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_all_fail factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_all_fail factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_all_fail factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_all_fail factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_all_fail factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_all_fail factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_all_fail factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_all_fail factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_all_fail factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_all_fail factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_all_fail factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_all_fail factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_all_fail factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_all_fail factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_all_fail factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_all_fail factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_all_fail factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_all_fail factions { georgia, }
				end_if
			end_if
			play_sound_event loan_failure
			campaign_wait 0.5
			set_counter finances_panel_open2 0
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 1
			if not I_HotseatEnabled
			historic_event loan_denied true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_denied true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_denied true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_denied true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_denied true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_denied true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_denied true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_denied true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_denied true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_denied true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_denied true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_denied true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_denied true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_denied true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_denied true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_denied true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_denied true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_denied true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_denied true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_denied true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_denied true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_denied true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_denied true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_denied true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_denied true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_denied true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_denied true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_denied true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_denied true factions { georgia, }
				end_if
			end_if
			play_sound_event loan_failure
			set_counter finances_panel_open 2
		end_if
	end_if
	if I_CompareCounter loan_dread_counter = 2
		if not I_HotseatEnabled
		historic_event loan_bankers_afraid
		end_if
		if I_HotseatEnabled
			if I_LocalFaction egypt
				historic_event loan_bankers_afraid factions { egypt, }
			end_if
			if I_LocalFaction turks
				historic_event loan_bankers_afraid factions { turks, }
			end_if
			if I_LocalFaction timurids
				historic_event loan_bankers_afraid factions { timurids, }
			end_if
			if I_LocalFaction moors
				historic_event loan_bankers_afraid factions { moors, }
			end_if
			if I_LocalFaction kwarezm
				historic_event loan_bankers_afraid factions { kwarezm, }
			end_if
			if I_LocalFaction lithuania
				historic_event loan_bankers_afraid factions { lithuania, }
			end_if
			if I_LocalFaction cumans
				historic_event loan_bankers_afraid factions { cumans, }
			end_if
			if I_LocalFaction mongols
				historic_event loan_bankers_afraid factions { mongols, }
			end_if
			if I_LocalFaction byzantium
				historic_event loan_bankers_afraid factions { byzantium, }
			end_if
			if I_LocalFaction russia
				historic_event loan_bankers_afraid factions { russia, }
			end_if
			if I_LocalFaction kievan_rus
				historic_event loan_bankers_afraid factions { kievan_rus, }
			end_if
			if I_LocalFaction venice
				historic_event loan_bankers_afraid factions { venice, }
			end_if
			if I_LocalFaction sicily
				historic_event loan_bankers_afraid factions { sicily, }
			end_if
			if I_LocalFaction milan
				historic_event loan_bankers_afraid factions { milan, }
			end_if
			if I_LocalFaction spain
				historic_event loan_bankers_afraid factions { spain, }
			end_if
			if I_LocalFaction aragon
				historic_event loan_bankers_afraid factions { aragon, }
			end_if
			if I_LocalFaction portugal
				historic_event loan_bankers_afraid factions { portugal, }
			end_if
			if I_LocalFaction hre
				historic_event loan_bankers_afraid factions { hre, }
			end_if
			if I_LocalFaction france
				historic_event loan_bankers_afraid factions { france, }
			end_if
			if I_LocalFaction england
				historic_event loan_bankers_afraid factions { england, }
			end_if
			if I_LocalFaction scotland
				historic_event loan_bankers_afraid factions { scotland, }
			end_if
			if I_LocalFaction denmark
				historic_event loan_bankers_afraid factions { denmark, }
			end_if
			if I_LocalFaction norway
				historic_event loan_bankers_afraid factions { norway, }
			end_if
			if I_LocalFaction poland
				historic_event loan_bankers_afraid factions { poland, }
			end_if
			if I_LocalFaction hungary
				historic_event loan_bankers_afraid factions { hungary, }
			end_if
			if I_LocalFaction jerusalem
				historic_event loan_bankers_afraid factions { jerusalem, }
			end_if
			if I_LocalFaction teutonic_order
				historic_event loan_bankers_afraid factions { teutonic_order, }
			end_if
			if I_LocalFaction georgia
				historic_event loan_bankers_afraid factions { georgia, }
			end_if
		end_if
		play_sound_event loan_failure
		set_counter finances_panel_open 3
	end_if
end_monitor

monitor_event EventCounter EventCounterType loan_offer_accepted
	and I_EventCounter loan_offer_accepted = 1
	set_event_counter loan_offer_accepted 0
		set_counter finances_panel_open 0
	;Basic loan available from 1100 till 1157
		if I_EventCounter italian_bankers_event < 1
			campaign_wait 0.5
			if not I_HotseatEnabled
			historic_event loan_offer1 true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_offer1 true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_offer1 true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_offer1 true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_offer1 true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_offer1 true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_offer1 true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_offer1 true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_offer1 true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_offer1 true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_offer1 true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_offer1 true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_offer1 true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_offer1 true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_offer1 true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_offer1 true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_offer1 true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_offer1 true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_offer1 true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_offer1 true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_offer1 true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_offer1 true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_offer1 true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_offer1 true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_offer1 true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_offer1 true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_offer1 true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_offer1 true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_offer1 true factions { georgia, }
				end_if
			end_if
			play_sound_event loan_popup
		end_if
	;Italian Bankers event allow larger loans
		if I_EventCounter italian_bankers_event >= 1
		and I_CompareCounter loan_refund_amount < 4
			campaign_wait 0.5
			if not I_HotseatEnabled
			historic_event loan_offer2 true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_offer2 true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_offer2 true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_offer2 true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_offer2 true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_offer2 true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_offer2 true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_offer2 true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_offer2 true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_offer2 true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_offer2 true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_offer2 true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_offer2 true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_offer2 true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_offer2 true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_offer2 true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_offer2 true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_offer2 true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_offer2 true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_offer2 true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_offer2 true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_offer2 true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_offer2 true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_offer2 true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_offer2 true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_offer2 true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_offer2 true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_offer2 true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_offer2 true factions { georgia, }
				end_if
			end_if
			play_sound_event loan_popup
		end_if
		if I_EventCounter italian_bankers_event >= 1
		and I_CompareCounter loan_refund_amount = 4
			campaign_wait 0.5
			if not I_HotseatEnabled
			historic_event loan_offer1 true
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_offer1 true factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_offer1 true factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_offer1 true factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_offer1 true factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_offer1 true factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_offer1 true factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_offer1 true factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_offer1 true factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_offer1 true factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_offer1 true factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_offer1 true factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_offer1 true factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_offer1 true factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_offer1 true factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_offer1 true factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_offer1 true factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_offer1 true factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_offer1 true factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_offer1 true factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_offer1 true factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_offer1 true factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_offer1 true factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_offer1 true factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_offer1 true factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_offer1 true factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_offer1 true factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_offer1 true factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_offer1 true factions { georgia, }
				end_if
			end_if
			play_sound_event loan_popup
		end_if
end_monitor
monitor_event EventCounter EventCounterType loan_offer_declined
	and I_EventCounter loan_offer_declined = 1
	set_event_counter loan_offer_declined 0
		set_counter finances_panel_open 0
	if I_CompareCounter loan_refund_amount >= 1
	and I_CompareCounter has_repay_money >= 1
		campaign_wait 0.5
		if not I_HotseatEnabled
		historic_event loan_repay true
		end_if
		if I_HotseatEnabled
			if I_LocalFaction egypt
				historic_event loan_repay true factions { egypt, }
			end_if
			if I_LocalFaction turks
				historic_event loan_repay true factions { turks, }
			end_if
			if I_LocalFaction timurids
				historic_event loan_repay true factions { timurids, }
			end_if
			if I_LocalFaction moors
				historic_event loan_repay true factions { moors, }
			end_if
			if I_LocalFaction kwarezm
				historic_event loan_repay true factions { kwarezm, }
			end_if
			if I_LocalFaction lithuania
				historic_event loan_repay true factions { lithuania, }
			end_if
			if I_LocalFaction cumans
				historic_event loan_repay true factions { cumans, }
			end_if
			if I_LocalFaction mongols
				historic_event loan_repay true factions { mongols, }
			end_if
			if I_LocalFaction byzantium
				historic_event loan_repay true factions { byzantium, }
			end_if
			if I_LocalFaction russia
				historic_event loan_repay true factions { russia, }
			end_if
			if I_LocalFaction kievan_rus
				historic_event loan_repay true factions { kievan_rus, }
			end_if
			if I_LocalFaction venice
				historic_event loan_repay true factions { venice, }
			end_if
			if I_LocalFaction sicily
				historic_event loan_repay true factions { sicily, }
			end_if
			if I_LocalFaction milan
				historic_event loan_repay true factions { milan, }
			end_if
			if I_LocalFaction spain
				historic_event loan_repay true factions { spain, }
			end_if
			if I_LocalFaction aragon
				historic_event loan_repay true factions { aragon, }
			end_if
			if I_LocalFaction portugal
				historic_event loan_repay true factions { portugal, }
			end_if
			if I_LocalFaction hre
				historic_event loan_repay true factions { hre, }
			end_if
			if I_LocalFaction france
				historic_event loan_repay true factions { france, }
			end_if
			if I_LocalFaction england
				historic_event loan_repay true factions { england, }
			end_if
			if I_LocalFaction scotland
				historic_event loan_repay true factions { scotland, }
			end_if
			if I_LocalFaction denmark
				historic_event loan_repay true factions { denmark, }
			end_if
			if I_LocalFaction norway
				historic_event loan_repay true factions { norway, }
			end_if
			if I_LocalFaction poland
				historic_event loan_repay true factions { poland, }
			end_if
			if I_LocalFaction hungary
				historic_event loan_repay true factions { hungary, }
			end_if
			if I_LocalFaction jerusalem
				historic_event loan_repay true factions { jerusalem, }
			end_if
			if I_LocalFaction teutonic_order
				historic_event loan_repay true factions { teutonic_order, }
			end_if
			if I_LocalFaction georgia
				historic_event loan_repay true factions { georgia, }
			end_if
		end_if
	end_if
	if I_CompareCounter loan_refund_amount >= 1
	and I_CompareCounter has_repay_money < 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
	end_if
	if I_CompareCounter loan_refund_amount < 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
	end_if
end_monitor

monitor_event EventCounter EventCounterType loan_offer1_accepted
	and I_EventCounter loan_offer1_accepted = 1
	set_event_counter loan_offer1_accepted 0
		console_command add_money 10000
		inc_counter loan_refund_amount 1
		play_sound_event loan_success
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_offer1_declined
	and I_EventCounter loan_offer1_declined = 1
	set_event_counter loan_offer1_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

monitor_event EventCounter EventCounterType loan_offer2_accepted
	and I_EventCounter loan_offer2_accepted = 1
	set_event_counter loan_offer2_accepted 0
		console_command add_money 20000
		inc_counter loan_refund_amount 2
		play_sound_event loan_success2
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_offer2_declined
	and I_EventCounter loan_offer2_declined = 1
	set_event_counter loan_offer2_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;------------------ "repay debt?" -------------------------

;Voluntary Repay
monitor_event EventCounter EventCounterType loan_repay_accepted
	and I_EventCounter loan_repay_accepted = 1
	set_event_counter loan_repay_accepted 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		if not I_HotseatEnabled
		historic_event loan_repay1b true
		end_if
		if I_HotseatEnabled
			if I_LocalFaction egypt
				historic_event loan_repay1b true factions { egypt, }
			end_if
			if I_LocalFaction turks
				historic_event loan_repay1b true factions { turks, }
			end_if
			if I_LocalFaction timurids
				historic_event loan_repay1b true factions { timurids, }
			end_if
			if I_LocalFaction moors
				historic_event loan_repay1b true factions { moors, }
			end_if
			if I_LocalFaction kwarezm
				historic_event loan_repay1b true factions { kwarezm, }
			end_if
			if I_LocalFaction lithuania
				historic_event loan_repay1b true factions { lithuania, }
			end_if
			if I_LocalFaction cumans
				historic_event loan_repay1b true factions { cumans, }
			end_if
			if I_LocalFaction mongols
				historic_event loan_repay1b true factions { mongols, }
			end_if
			if I_LocalFaction byzantium
				historic_event loan_repay1b true factions { byzantium, }
			end_if
			if I_LocalFaction russia
				historic_event loan_repay1b true factions { russia, }
			end_if
			if I_LocalFaction kievan_rus
				historic_event loan_repay1b true factions { kievan_rus, }
			end_if
			if I_LocalFaction venice
				historic_event loan_repay1b true factions { venice, }
			end_if
			if I_LocalFaction sicily
				historic_event loan_repay1b true factions { sicily, }
			end_if
			if I_LocalFaction milan
				historic_event loan_repay1b true factions { milan, }
			end_if
			if I_LocalFaction spain
				historic_event loan_repay1b true factions { spain, }
			end_if
			if I_LocalFaction aragon
				historic_event loan_repay1b true factions { aragon, }
			end_if
			if I_LocalFaction portugal
				historic_event loan_repay1b true factions { portugal, }
			end_if
			if I_LocalFaction hre
				historic_event loan_repay1b true factions { hre, }
			end_if
			if I_LocalFaction france
				historic_event loan_repay1b true factions { france, }
			end_if
			if I_LocalFaction england
				historic_event loan_repay1b true factions { england, }
			end_if
			if I_LocalFaction scotland
				historic_event loan_repay1b true factions { scotland, }
			end_if
			if I_LocalFaction denmark
				historic_event loan_repay1b true factions { denmark, }
			end_if
			if I_LocalFaction norway
				historic_event loan_repay1b true factions { norway, }
			end_if
			if I_LocalFaction poland
				historic_event loan_repay1b true factions { poland, }
			end_if
			if I_LocalFaction hungary
				historic_event loan_repay1b true factions { hungary, }
			end_if
			if I_LocalFaction jerusalem
				historic_event loan_repay1b true factions { jerusalem, }
			end_if
			if I_LocalFaction teutonic_order
				historic_event loan_repay1b true factions { teutonic_order, }
			end_if
			if I_LocalFaction georgia
				historic_event loan_repay1b true factions { georgia, }
			end_if
		end_if
end_monitor
monitor_event EventCounter EventCounterType loan_repay_declined
	and I_EventCounter loan_repay_declined = 1
	set_event_counter loan_repay_declined 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;Turn Start Repay Request
monitor_event FactionTurnStart FactionIsLocal
	and I_CompareCounter loan_refund_amount >= 1
	and not LosingMoney
	and Treasury > 25000
	;and RandomPercent >= 50
	if not I_HotseatEnabled
	historic_event loan_repay1b true
	end_if
	if I_HotseatEnabled
		if I_LocalFaction egypt
			historic_event loan_repay1b true factions { egypt, }
		end_if
		if I_LocalFaction turks
			historic_event loan_repay1b true factions { turks, }
		end_if
		if I_LocalFaction timurids
			historic_event loan_repay1b true factions { timurids, }
		end_if
		if I_LocalFaction moors
			historic_event loan_repay1b true factions { moors, }
		end_if
		if I_LocalFaction kwarezm
			historic_event loan_repay1b true factions { kwarezm, }
		end_if
		if I_LocalFaction lithuania
			historic_event loan_repay1b true factions { lithuania, }
		end_if
		if I_LocalFaction cumans
			historic_event loan_repay1b true factions { cumans, }
		end_if
		if I_LocalFaction mongols
			historic_event loan_repay1b true factions { mongols, }
		end_if
		if I_LocalFaction byzantium
			historic_event loan_repay1b true factions { byzantium, }
		end_if
		if I_LocalFaction russia
			historic_event loan_repay1b true factions { russia, }
		end_if
		if I_LocalFaction kievan_rus
			historic_event loan_repay1b true factions { kievan_rus, }
		end_if
		if I_LocalFaction venice
			historic_event loan_repay1b true factions { venice, }
		end_if
		if I_LocalFaction sicily
			historic_event loan_repay1b true factions { sicily, }
		end_if
		if I_LocalFaction milan
			historic_event loan_repay1b true factions { milan, }
		end_if
		if I_LocalFaction spain
			historic_event loan_repay1b true factions { spain, }
		end_if
		if I_LocalFaction aragon
			historic_event loan_repay1b true factions { aragon, }
		end_if
		if I_LocalFaction portugal
			historic_event loan_repay1b true factions { portugal, }
		end_if
		if I_LocalFaction hre
			historic_event loan_repay1b true factions { hre, }
		end_if
		if I_LocalFaction france
			historic_event loan_repay1b true factions { france, }
		end_if
		if I_LocalFaction england
			historic_event loan_repay1b true factions { england, }
		end_if
		if I_LocalFaction scotland
			historic_event loan_repay1b true factions { scotland, }
		end_if
		if I_LocalFaction denmark
			historic_event loan_repay1b true factions { denmark, }
		end_if
		if I_LocalFaction norway
			historic_event loan_repay1b true factions { norway, }
		end_if
		if I_LocalFaction poland
			historic_event loan_repay1b true factions { poland, }
		end_if
		if I_LocalFaction hungary
			historic_event loan_repay1b true factions { hungary, }
		end_if
		if I_LocalFaction jerusalem
			historic_event loan_repay1b true factions { jerusalem, }
		end_if
		if I_LocalFaction teutonic_order
			historic_event loan_repay1b true factions { teutonic_order, }
		end_if
		if I_LocalFaction georgia
			historic_event loan_repay1b true factions { georgia, }
		end_if
	end_if
end_monitor

monitor_event EventCounter EventCounterType loan_repay1b_accepted
	and I_EventCounter loan_repay1b_accepted = 1
	set_event_counter loan_repay1b_accepted 0
		console_command add_money -10000
		inc_counter loan_refund_amount -1
		play_sound_event loan_repaid
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_repay1b_declined
	and I_EventCounter loan_repay1b_declined = 1
	set_event_counter loan_repay1b_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;I will not pay, you banker scum!
monitor_event EventCounter EventCounterType loan_denied_accepted
	and I_EventCounter loan_denied_accepted = 1
	set_event_counter loan_denied_accepted 0
		set_counter finances_panel_open 3
		generate_random_counter kill_bankers 0 100
		if I_EventCounter kill_bankers > 66
		and I_CompareCounter loan_refund_amount >= 1
			campaign_wait 0.5
			if not I_HotseatEnabled
			historic_event loan_denied2
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_denied2 factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_denied2 factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_denied2 factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_denied2 factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_denied2 factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_denied2 factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_denied2 factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_denied2 factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_denied2 factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_denied2 factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_denied2 factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_denied2 factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_denied2 factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_denied2 factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_denied2 factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_denied2 factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_denied2 factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_denied2 factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_denied2 factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_denied2 factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_denied2 factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_denied2 factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_denied2 factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_denied2 factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_denied2 factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_denied2 factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_denied2 factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_denied2 factions { georgia, }
				end_if
			end_if
			inc_counter loan_refund_amount -1
			play_sound_event loan_dread_sfx
			if I_EventCounter kill_bankers > 80
			and I_CompareCounter loan_refund_amount >= 2
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 92
			and I_CompareCounter loan_refund_amount >= 3
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 74
			and I_CompareCounter loan_refund_amount >= 4
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 86
			and I_CompareCounter loan_refund_amount >= 5
				inc_counter loan_refund_amount -1
			end_if
		end_if
		if I_EventCounter kill_bankers < 67
			campaign_wait 0.5
			if not I_HotseatEnabled
			historic_event loan_denied1
			end_if
			if I_HotseatEnabled
				if I_LocalFaction egypt
					historic_event loan_denied1 factions { egypt, }
				end_if
				if I_LocalFaction turks
					historic_event loan_denied1 factions { turks, }
				end_if
				if I_LocalFaction timurids
					historic_event loan_denied1 factions { timurids, }
				end_if
				if I_LocalFaction moors
					historic_event loan_denied1 factions { moors, }
				end_if
				if I_LocalFaction kwarezm
					historic_event loan_denied1 factions { kwarezm, }
				end_if
				if I_LocalFaction lithuania
					historic_event loan_denied1 factions { lithuania, }
				end_if
				if I_LocalFaction cumans
					historic_event loan_denied1 factions { cumans, }
				end_if
				if I_LocalFaction mongols
					historic_event loan_denied1 factions { mongols, }
				end_if
				if I_LocalFaction byzantium
					historic_event loan_denied1 factions { byzantium, }
				end_if
				if I_LocalFaction russia
					historic_event loan_denied1 factions { russia, }
				end_if
				if I_LocalFaction kievan_rus
					historic_event loan_denied1 factions { kievan_rus, }
				end_if
				if I_LocalFaction venice
					historic_event loan_denied1 factions { venice, }
				end_if
				if I_LocalFaction sicily
					historic_event loan_denied1 factions { sicily, }
				end_if
				if I_LocalFaction milan
					historic_event loan_denied1 factions { milan, }
				end_if
				if I_LocalFaction spain
					historic_event loan_denied1 factions { spain, }
				end_if
				if I_LocalFaction aragon
					historic_event loan_denied1 factions { aragon, }
				end_if
				if I_LocalFaction portugal
					historic_event loan_denied1 factions { portugal, }
				end_if
				if I_LocalFaction hre
					historic_event loan_denied1 factions { hre, }
				end_if
				if I_LocalFaction france
					historic_event loan_denied1 factions { france, }
				end_if
				if I_LocalFaction england
					historic_event loan_denied1 factions { england, }
				end_if
				if I_LocalFaction scotland
					historic_event loan_denied1 factions { scotland, }
				end_if
				if I_LocalFaction denmark
					historic_event loan_denied1 factions { denmark, }
				end_if
				if I_LocalFaction norway
					historic_event loan_denied1 factions { norway, }
				end_if
				if I_LocalFaction poland
					historic_event loan_denied1 factions { poland, }
				end_if
				if I_LocalFaction hungary
					historic_event loan_denied1 factions { hungary, }
				end_if
				if I_LocalFaction jerusalem
					historic_event loan_denied1 factions { jerusalem, }
				end_if
				if I_LocalFaction teutonic_order
					historic_event loan_denied1 factions { teutonic_order, }
				end_if
				if I_LocalFaction georgia
					historic_event loan_denied1 factions { georgia, }
				end_if
			end_if
			play_sound_event loan_dread_fail_sfx
		end_if
		set_event_counter loan_dread 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_denied_declined
	and I_EventCounter loan_denied_declined = 1
	set_event_counter loan_denied_declined 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

monitor_event CeasedFactionLeader FactionIsLocal
	set_event_counter loan_dread 0; reseted if FL dies
	set_counter loan_dread_counter 1; set neutral
	if I_CompareCounter finances_panel_open = 3
		set_counter finances_panel_open 0
	end_if
end_monitor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==========================KINGDOM EMPIRE AND REPUBLICS SCRIPTS=============================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==========================================================================================
;================================= MAJOR CITIES UNREST ====================================
;==========================================================================================
declare_counter turmoil_turks
declare_counter turmoil_egypt
declare_counter turmoil_moors
declare_counter turmoil_kwarezm
declare_counter turmoil_timurids
declare_counter turmoil_venice
declare_counter turmoil_sicily
declare_counter turmoil_milan
declare_counter turmoil_spain
declare_counter turmoil_aragon
declare_counter turmoil_portugal
declare_counter turmoil_france
declare_counter turmoil_england
declare_counter turmoil_scotland
declare_counter turmoil_hre
declare_counter turmoil_denmark
declare_counter turmoil_norway
declare_counter turmoil_hungary
declare_counter turmoil_poland
declare_counter turmoil_jerusalem
declare_counter turmoil_teutonic_order
declare_counter turmoil_byzantium
declare_counter turmoil_kievan_rus
declare_counter turmoil_russia
declare_counter turmoil_lithuania
declare_counter turmoil_cumans
declare_counter turmoil_mongols
declare_counter turmoil_georgia
;
declare_counter conversion_paris
declare_counter conversion_bordeaux
declare_counter conversion_toulouse
declare_counter conversion_orleans
declare_counter conversion_london
declare_counter conversion_edinburgh
declare_counter conversion_frankfurt
declare_counter conversion_bern
declare_counter conversion_antwerp
declare_counter conversion_vienna
declare_counter conversion_hamburg
declare_counter conversion_nuremburg
declare_counter conversion_cologne
declare_counter conversion_milan
declare_counter conversion_genoa
declare_counter conversion_venice
declare_counter conversion_rome
declare_counter conversion_palermo
declare_counter conversion_florence
declare_counter conversion_toledo
declare_counter conversion_oporto
declare_counter conversion_zaragoza
declare_counter conversion_granada
declare_counter conversion_prague
declare_counter conversion_esztergom
declare_counter conversion_krakow
declare_counter conversion_vilnius
declare_counter conversion_arhus
declare_counter conversion_bergen
declare_counter conversion_kalmar
declare_counter conversion_novgorod
declare_counter conversion_kiev
declare_counter conversion_constantinople
declare_counter conversion_ras
declare_counter conversion_sofia
declare_counter conversion_zagreb
declare_counter conversion_arta
declare_counter conversion_ankara
declare_counter conversion_iconium
declare_counter conversion_trebizond
declare_counter conversion_kutaisi
declare_counter conversion_jerusalem
declare_counter conversion_damascus
declare_counter conversion_baghdad
declare_counter conversion_mosul
declare_counter conversion_ray
declare_counter conversion_urgench
declare_counter conversion_isfahan
declare_counter conversion_mecca
declare_counter conversion_marrakesh
declare_counter conversion_cairo
declare_counter conversion_al_mahdiya
;------- Start Rebellions -------

;WEST EUROPE

	monitor_event GeneralCaptureSettlement SettlementName Paris
	and not FactionType france
			add_settlement_turmoil Paris 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Bordeaux
			add_settlement_turmoil Bordeaux 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Toulouse
			add_settlement_turmoil Toulouse 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Khlynov; Orleans
	and not FactionType france
	and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
	end_monitor
;BRITISH ISLES
	monitor_event GeneralCaptureSettlement SettlementName London
	and not FactionType england
			add_settlement_turmoil London 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Edinburgh
	and not FactionType scotland
			add_settlement_turmoil Edinburgh 8
	end_monitor
;CENTRAL EUROPE
	monitor_event GeneralCaptureSettlement SettlementName Frankfurt
	and not FactionType hre
			add_settlement_turmoil Frankfurt 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Bern
			add_settlement_turmoil Bern 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Antwerp
			add_settlement_turmoil Antwerp 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Vienna
	and not FactionType hre
			add_settlement_turmoil Vienna 6
	end_monitor
;ITALY
	monitor_event GeneralCaptureSettlement SettlementName Milan
			add_settlement_turmoil Milan 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Genoa
	and not FactionType milan
			add_settlement_turmoil Genoa 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Venice
	and not FactionType venice
			add_settlement_turmoil Venice 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Rome
	and not FactionType papal_states
			add_settlement_turmoil Rome 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Palermo
	and not FactionType sicily
			add_settlement_turmoil Palermo 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Nykoeping; Florence
	and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 8
	end_monitor
;IBERIA
	monitor_event GeneralCaptureSettlement SettlementName Toledo
	and not FactionType spain
			add_settlement_turmoil Toledo 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Oporto
			add_settlement_turmoil Oporto 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Zaragoza
	and not FactionType aragon
			add_settlement_turmoil Zaragoza 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Granada
	and not FactionType moors
			add_settlement_turmoil Granada 8
	end_monitor
;EASTERN EUROPE
	monitor_event GeneralCaptureSettlement SettlementName Prague
			add_settlement_turmoil Prague 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Esztergom
	and not FactionType hungary
			add_settlement_turmoil Esztergom 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Krakow
	and not FactionType poland
			add_settlement_turmoil Krakow 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Vilnius
	and not FactionType lithuania
			add_settlement_turmoil Vilnius 8
	end_monitor
;SCANDINAVIA
	monitor_event GeneralCaptureSettlement SettlementName Arhus
	and not FactionType denmark
			add_settlement_turmoil Arhus 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Bergen
	and not FactionType norway
			add_settlement_turmoil Bergen 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Kalmar
			add_settlement_turmoil Kalmar 5
	end_monitor
;RUSLAND
	monitor_event GeneralCaptureSettlement SettlementName Novgorod
	and not FactionType russia
			add_settlement_turmoil Novgorod 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Kiev
	and not FactionType kievan_rus
			add_settlement_turmoil Kiev 8
	end_monitor
;BALKANS
	monitor_event GeneralCaptureSettlement SettlementName Constantinople
	and not FactionType byzantium
			add_settlement_turmoil Constantinople 10
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Ryazan; Ras
	and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Sofia
			add_settlement_turmoil Sofia 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Zagreb
			add_settlement_turmoil Zagreb 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Arta
	and not FactionType byzantium
			add_settlement_turmoil Arta 5
	end_monitor
;ANATOLIA-CAUCASUS
	monitor_event GeneralCaptureSettlement SettlementName Ankara
	and not FactionType turks
			add_settlement_turmoil Ankara 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Iconium
	and not FactionType turks
			add_settlement_turmoil Iconium 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Trebizond
	and not FactionType byzantium
			add_settlement_turmoil Trebizond 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Kutaisi
	and not FactionType georgia
			add_settlement_turmoil Kutaisi 8
	end_monitor
;LEVANT
	monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and not FactionType jerusalem
			add_settlement_turmoil Jerusalem 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Damascus
			add_settlement_turmoil Damascus 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Aleppo
			add_settlement_turmoil Aleppo 5
	end_monitor
;MESOPOTAMIA
	monitor_event GeneralCaptureSettlement SettlementName Baghdad
	and not FactionType timurids
		if I_EventCounter abbasids_exist != 1
			terminate_monitor
		end_if
			add_settlement_turmoil Baghdad 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Baghdad
		if I_EventCounter abbasids_exist = 1
			terminate_monitor
		end_if
			add_settlement_turmoil Baghdad 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Mosul
			add_settlement_turmoil Mosul 5
	end_monitor
;PERSIA-IRANIA
	monitor_event GeneralCaptureSettlement SettlementName Ray
	and not FactionType kwarezm
			add_settlement_turmoil Ray 5
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Urgench
	and not FactionType kwarezm
			add_settlement_turmoil Urgench 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Isfahan
	and not FactionType turks
			add_settlement_turmoil Isfahan 6
	end_monitor
;ARABIA
	monitor_event GeneralCaptureSettlement SettlementName Mecca
			add_settlement_turmoil Mecca 5
	end_monitor
;NORTH AFRICA
	monitor_event GeneralCaptureSettlement SettlementName Marrakesh
			add_settlement_turmoil Marrakesh 6
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Cairo
	and not FactionType egypt
			add_settlement_turmoil Cairo 8
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Al-Mahdiya
	and not FactionType portugal
			add_settlement_turmoil Al-Mahdiya 8
	end_monitor
;=======================Weak Leader Counter Reset======================

	monitor_event PreFactionTurnStart FactionType slave
	;TURKS
		if I_CompareCounter turmoil_turks = 0
			if I_FactionLeaderTrait turks Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_turks 1
			end_if
			if I_FactionLeaderTrait turks Offensive_To_Nobles = 2
				set_counter turmoil_turks 1
			end_if
		end_if
		if I_CompareCounter turmoil_turks = -1
		and I_FactionLeaderTrait turks Civil_Unrest < 2
		and I_FactionLeaderTrait turks Offensive_To_Nobles < 2
			set_counter turmoil_turks 0
		end_if
		if I_CompareCounter turmoil_turks = 1
			set_counter turmoil_turks -1
		;WEST EUROPE
			if I_SettlementOwner Paris = turks
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = turks
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = turks
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = turks
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = turks
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = turks
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = turks
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = turks
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = turks
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = turks
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = turks
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = turks
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = turks
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = turks
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = turks
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = turks
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = turks
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = turks
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = turks
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = turks
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = turks
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = turks
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = turks
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = turks
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = turks
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = turks
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = turks
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = turks
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = turks
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = turks
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = turks
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = turks
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = turks
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = turks
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = turks
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = turks
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = turks
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = turks
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = turks
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = turks
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = turks
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = turks
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = turks
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = turks
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = turks
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = turks
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = turks
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = turks
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = turks
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = turks
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = turks
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = turks
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;EGYPT
		if I_CompareCounter turmoil_egypt = 0
			if I_FactionLeaderTrait egypt Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_egypt 1
			end_if
			if I_FactionLeaderTrait egypt Offensive_To_Nobles = 2
				set_counter turmoil_egypt 1
			end_if
		end_if
		if I_CompareCounter turmoil_egypt = -1
		and I_FactionLeaderTrait egypt Civil_Unrest < 2
		and I_FactionLeaderTrait egypt Offensive_To_Nobles < 2
			set_counter turmoil_egypt 0
		end_if
		if I_CompareCounter turmoil_egypt = 1
			set_counter turmoil_egypt -1
		;WEST EUROPE
			if I_SettlementOwner Paris = egypt
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = egypt
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = egypt
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = egypt
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = egypt
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = egypt
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = egypt
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = egypt
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = egypt
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = egypt
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = egypt
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = egypt
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = egypt
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = egypt
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = egypt
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = egypt
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = egypt
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = egypt
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = egypt
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = egypt
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = egypt
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = egypt
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = egypt
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = egypt
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = egypt
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = egypt
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = egypt
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = egypt
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = egypt
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = egypt
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = egypt
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = egypt
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = egypt
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = egypt
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = egypt
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = egypt
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = egypt
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = egypt
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = egypt
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = egypt
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = egypt
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = egypt
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = egypt
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = egypt
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = egypt
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = egypt
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = egypt
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = egypt
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = egypt
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = egypt
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = egypt
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = egypt
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;MOORS
		if I_CompareCounter turmoil_moors = 0
			if I_FactionLeaderTrait moors Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_moors 1
			end_if
			if I_FactionLeaderTrait moors Offensive_To_Nobles = 2
				set_counter turmoil_moors 1
			end_if
		end_if
		if I_CompareCounter turmoil_moors = -1
		and I_FactionLeaderTrait moors Civil_Unrest < 2
		and I_FactionLeaderTrait moors Offensive_To_Nobles < 2
			set_counter turmoil_moors 0
		end_if
		if I_CompareCounter turmoil_moors = 1
			set_counter turmoil_moors -1
		;WEST EUROPE
			if I_SettlementOwner Paris = moors
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = moors
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = moors
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = moors
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = moors
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = moors
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = moors
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = moors
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = moors
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = moors
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = moors
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = moors
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = moors
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = moors
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = moors
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = moors
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = moors
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = moors
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = moors
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = moors
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = moors
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = moors
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = moors
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = moors
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = moors
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = moors
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = moors
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = moors
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = moors
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = moors
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = moors
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = moors
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = moors
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = moors
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = moors
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = moors
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = moors
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = moors
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = moors
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = moors
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = moors
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = moors
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = moors
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = moors
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = moors
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = moors
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = moors
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = moors
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = moors
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = moors
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = moors
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = moors
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;KWAREZM
		if I_CompareCounter turmoil_kwarezm = 0
			if I_FactionLeaderTrait kwarezm Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_kwarezm 1
			end_if
			if I_FactionLeaderTrait kwarezm Offensive_To_Nobles = 2
				set_counter turmoil_kwarezm 1
			end_if
		end_if
		if I_CompareCounter turmoil_kwarezm = -1
		and I_FactionLeaderTrait kwarezm Civil_Unrest < 2
		and I_FactionLeaderTrait kwarezm Offensive_To_Nobles < 2
			set_counter turmoil_kwarezm 0
		end_if
		if I_CompareCounter turmoil_kwarezm = 1
			set_counter turmoil_kwarezm 4
		;WEST EUROPE
			if I_SettlementOwner Paris = kwarezm
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = kwarezm
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = kwarezm
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = kwarezm
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = kwarezm
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = kwarezm
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = kwarezm
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = kwarezm
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = kwarezm
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = kwarezm
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = kwarezm
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = kwarezm
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = kwarezm
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = kwarezm
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = kwarezm
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = kwarezm
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = kwarezm
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = kwarezm
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = kwarezm
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = kwarezm
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = kwarezm
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = kwarezm
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = kwarezm
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = kwarezm
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = kwarezm
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = kwarezm
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = kwarezm
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = kwarezm
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = kwarezm
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = kwarezm
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = kwarezm
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = kwarezm
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = kwarezm
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = kwarezm
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = kwarezm
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = kwarezm
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = kwarezm
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = kwarezm
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = kwarezm
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = kwarezm
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = kwarezm
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = kwarezm
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = kwarezm
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = kwarezm
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = kwarezm
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = kwarezm
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = kwarezm
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = kwarezm
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = kwarezm
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = kwarezm
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = kwarezm
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = kwarezm
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;TIMURIDS/ABBASIDS
		if I_CompareCounter turmoil_timurids = 0
			if I_FactionLeaderTrait timurids Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_timurids 1
			end_if
			if I_FactionLeaderTrait timurids Offensive_To_Nobles = 2
				set_counter turmoil_timurids 1
			end_if
		end_if
		if I_CompareCounter turmoil_timurids = -1
		and I_FactionLeaderTrait timurids Civil_Unrest < 2
		and I_FactionLeaderTrait timurids Offensive_To_Nobles < 2
			set_counter turmoil_timurids 0
		end_if
		if I_CompareCounter turmoil_timurids = 1
			set_counter turmoil_timurids -1
		;WEST EUROPE
			if I_SettlementOwner Paris = timurids
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = timurids
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = timurids
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = timurids
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = timurids
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = timurids
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = timurids
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = timurids
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = timurids
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = timurids
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = timurids
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = timurids
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = timurids
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = timurids
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = timurids
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = timurids
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = timurids
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = timurids
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = timurids
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = timurids
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = timurids
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = timurids
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = timurids
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = timurids
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = timurids
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = timurids
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = timurids
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = timurids
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = timurids
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = timurids
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = timurids
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = timurids
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = timurids
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = timurids
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = timurids
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = timurids
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = timurids
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = timurids
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = timurids
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = timurids
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = timurids
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = timurids
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = timurids
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = timurids
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = timurids
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = timurids
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = timurids
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = timurids
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = timurids
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = timurids
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = timurids
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = timurids
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if
		
	;VENICE
		if I_CompareCounter turmoil_venice = 0
			if I_FactionLeaderTrait venice Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_venice 1
			end_if
			if I_FactionLeaderTrait venice Offensive_To_Nobles = 2
				set_counter turmoil_venice 1
			end_if
		end_if
		if I_CompareCounter turmoil_venice = -1
		and I_FactionLeaderTrait venice Civil_Unrest < 2
		and I_FactionLeaderTrait venice Offensive_To_Nobles < 2
			set_counter turmoil_venice 0
		end_if
		if I_CompareCounter turmoil_venice = 1
			set_counter turmoil_venice -1
		;WEST EUROPE
			if I_SettlementOwner Paris = venice
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = venice
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = venice
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = venice
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = venice
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = venice
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = venice
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = venice
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = venice
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = venice
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = venice
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = venice
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = venice
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = venice
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = venice
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = venice
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = venice
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = venice
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = venice
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = venice
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = venice
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = venice
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = venice
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = venice
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = venice
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = venice
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = venice
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = venice
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = venice
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = venice
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = venice
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = venice
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = venice
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = venice
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = venice
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = venice
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = venice
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = venice
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = venice
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = venice
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = venice
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = venice
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = venice
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = venice
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = venice
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = venice
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = venice
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = venice
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = venice
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = venice
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = venice
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = venice
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;SICILY
		if I_CompareCounter turmoil_sicily = 0
			if I_FactionLeaderTrait sicily Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_sicily 1
			end_if
			if I_FactionLeaderTrait sicily Offensive_To_Nobles = 2
				set_counter turmoil_sicily 1
			end_if
		end_if
		if I_CompareCounter turmoil_sicily = -1
		and I_FactionLeaderTrait sicily Civil_Unrest < 2
		and I_FactionLeaderTrait sicily Offensive_To_Nobles < 2
			set_counter turmoil_sicily 0
		end_if
		if I_CompareCounter turmoil_sicily = 1
			set_counter turmoil_sicily -1
		;WEST EUROPE
			if I_SettlementOwner Paris = sicily
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = sicily
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = sicily
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = sicily
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = sicily
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = sicily
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = sicily
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = sicily
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = sicily
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = sicily
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = sicily
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = sicily
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = sicily
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = sicily
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = sicily
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = sicily
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = sicily
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = sicily
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = sicily
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = sicily
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = sicily
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = sicily
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = sicily
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = sicily
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = sicily
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = sicily
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = sicily
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = sicily
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = sicily
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = sicily
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = sicily
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = sicily
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = sicily
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = sicily
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = sicily
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = sicily
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = sicily
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = sicily
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = sicily
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = sicily
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = sicily
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = sicily
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = sicily
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = sicily
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = sicily
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = sicily
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = sicily
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = sicily
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = sicily
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = sicily
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = sicily
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = sicily
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;MILAN/GENOA
		if I_CompareCounter turmoil_milan = 0
			if I_FactionLeaderTrait milan Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_milan 1
			end_if
			if I_FactionLeaderTrait milan Offensive_To_Nobles = 2
				set_counter turmoil_milan 1
			end_if
		end_if
		if I_CompareCounter turmoil_milan = -1
		and I_FactionLeaderTrait milan Civil_Unrest < 2
		and I_FactionLeaderTrait milan Offensive_To_Nobles < 2
			set_counter turmoil_milan 0
		end_if
		if I_CompareCounter turmoil_milan = 1
			set_counter turmoil_milan -1
		;WEST EUROPE
			if I_SettlementOwner Paris = milan
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = milan
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = milan
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = milan
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = milan
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = milan
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = milan
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = milan
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = milan
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = milan
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = milan
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = milan
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = milan
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = milan
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = milan
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = milan
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = milan
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = milan
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = milan
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = milan
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = milan
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = milan
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = milan
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = milan
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = milan
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = milan
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = milan
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = milan
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = milan
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = milan
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = milan
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = milan
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = milan
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = milan
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = milan
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = milan
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = milan
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = milan
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = milan
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = milan
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = milan
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = milan
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = milan
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = milan
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = milan
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = milan
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = milan
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = milan
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = milan
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = milan
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = milan
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = milan
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;SPAIN
		if I_CompareCounter turmoil_spain = 0
			if I_FactionLeaderTrait spain Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_spain 1
			end_if
			if I_FactionLeaderTrait spain Offensive_To_Nobles = 2
				set_counter turmoil_spain 1
			end_if
		end_if
		if I_CompareCounter turmoil_spain = -1
		and I_FactionLeaderTrait spain Civil_Unrest < 2
		and I_FactionLeaderTrait spain Offensive_To_Nobles < 2
			set_counter turmoil_spain 0
		end_if
		if I_CompareCounter turmoil_spain = 1
			set_counter turmoil_spain -1
		;WEST EUROPE
			if I_SettlementOwner Paris = spain
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = spain
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = spain
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = spain
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = spain
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = spain
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = spain
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = spain
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = spain
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = spain
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = spain
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = spain
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = spain
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = spain
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = spain
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = spain
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = spain
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = spain
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = spain
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = spain
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = spain
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = spain
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = spain
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = spain
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = spain
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = spain
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = spain
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = spain
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = spain
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = spain
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = spain
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = spain
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = spain
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = spain
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = spain
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = spain
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = spain
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = spain
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = spain
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = spain
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = spain
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = spain
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = spain
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = spain
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = spain
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = spain
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = spain
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = spain
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = spain
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = spain
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = spain
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = spain
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;ARAGON
		if I_CompareCounter turmoil_aragon = 0
			if I_FactionLeaderTrait aragon Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_aragon 1
			end_if
			if I_FactionLeaderTrait aragon Offensive_To_Nobles = 2
				set_counter turmoil_aragon 1
			end_if
		end_if
		if I_CompareCounter turmoil_aragon = -1
		and I_FactionLeaderTrait aragon Civil_Unrest < 2
		and I_FactionLeaderTrait aragon Offensive_To_Nobles < 2
			set_counter turmoil_aragon 0
		end_if
		if I_CompareCounter turmoil_aragon = 1
			set_counter turmoil_aragon -1
		;WEST EUROPE
			if I_SettlementOwner Paris = aragon
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = aragon
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = aragon
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = aragon
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = aragon
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = aragon
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = aragon
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = aragon
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = aragon
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = aragon
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = aragon
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = aragon
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = aragon
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = aragon
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = aragon
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = aragon
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = aragon
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = aragon
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = aragon
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = aragon
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = aragon
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = aragon
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = aragon
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = aragon
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = aragon
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = aragon
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = aragon
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = aragon
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = aragon
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = aragon
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = aragon
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = aragon
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = aragon
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = aragon
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = aragon
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = aragon
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = aragon
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = aragon
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = aragon
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = aragon
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = aragon
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = aragon
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = aragon
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = aragon
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = aragon
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = aragon
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = aragon
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = aragon
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = aragon
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = aragon
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = aragon
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = aragon
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;PORTUGAL
		if I_CompareCounter turmoil_portugal = 0
			if I_FactionLeaderTrait portugal Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_portugal 1
			end_if
			if I_FactionLeaderTrait portugal Offensive_To_Nobles = 2
				set_counter turmoil_portugal 1
			end_if
		end_if
		if I_CompareCounter turmoil_portugal = -1
		and I_FactionLeaderTrait portugal Civil_Unrest < 2
		and I_FactionLeaderTrait portugal Offensive_To_Nobles < 2
			set_counter turmoil_portugal 0
		end_if
		if I_CompareCounter turmoil_portugal = 1
			set_counter turmoil_portugal -1
		;WEST EUROPE
			if I_SettlementOwner Paris = portugal
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = portugal
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = portugal
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = portugal
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = portugal
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = portugal
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = portugal
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = portugal
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = portugal
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = portugal
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = portugal
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = portugal
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = portugal
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = portugal
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = portugal
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = portugal
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = portugal
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = portugal
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = portugal
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = portugal
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = portugal
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = portugal
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = portugal
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = portugal
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = portugal
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = portugal
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = portugal
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = portugal
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = portugal
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = portugal
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = portugal
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = portugal
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = portugal
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = portugal
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = portugal
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = portugal
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = portugal
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = portugal
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = portugal
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = portugal
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = portugal
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = portugal
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = portugal
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = portugal
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = portugal
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = portugal
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = portugal
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = portugal
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = portugal
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = portugal
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = portugal
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = portugal
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;FRANCE
		if I_CompareCounter turmoil_france = 0
			if I_FactionLeaderTrait france Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_france 1
			end_if
			if I_FactionLeaderTrait france Offensive_To_Nobles = 2
				set_counter turmoil_france 1
			end_if
		end_if
		if I_CompareCounter turmoil_france = -1
		and I_FactionLeaderTrait france Civil_Unrest < 2
		and I_FactionLeaderTrait france Offensive_To_Nobles < 2
			set_counter turmoil_france 0
		end_if
		if I_CompareCounter turmoil_france = 1
			set_counter turmoil_france -1
		;WEST EUROPE
			if I_SettlementOwner Paris = france
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = france
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = france
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = france
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = france
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = france
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = france
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = france
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = france
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = france
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = france
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = france
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = france
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = france
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = france
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = france
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = france
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = france
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = france
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = france
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = france
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = france
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = france
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = france
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = france
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = france
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = france
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = france
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = france
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = france
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = france
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = france
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = france
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = france
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = france
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = france
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = france
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = france
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = france
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = france
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = france
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = france
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = france
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = france
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = france
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = france
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = france
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = france
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = france
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = france
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = france
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = france
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;ENGLAND
		if I_CompareCounter turmoil_england = 0
			if I_FactionLeaderTrait england Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_england 1
			end_if
			if I_FactionLeaderTrait england Offensive_To_Nobles = 2
				set_counter turmoil_england 1
			end_if
		end_if
		if I_CompareCounter turmoil_england = -1
		and I_FactionLeaderTrait england Civil_Unrest < 2
		and I_FactionLeaderTrait england Offensive_To_Nobles < 2
			set_counter turmoil_england 0
		end_if
		if I_CompareCounter turmoil_england = 1
			set_counter turmoil_england -1
		;WEST EUROPE
			if I_SettlementOwner Paris = england
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = england
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = england
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = england
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = england
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = england
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = england
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = england
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = england
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = england
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = england
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = england
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = england
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = england
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = england
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = england
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = england
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = england
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = england
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = england
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = england
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = england
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = england
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = england
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = england
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = england
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = england
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = england
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = england
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = england
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = england
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = england
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = england
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = england
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = england
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = england
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = england
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = england
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = england
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = england
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = england
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = england
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = england
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = england
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = england
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = england
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = england
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = england
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = england
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = england
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = england
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = england
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;SCOTLAND
		if I_CompareCounter turmoil_scotland = 0
			if I_FactionLeaderTrait scotland Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_scotland 1
			end_if
			if I_FactionLeaderTrait scotland Offensive_To_Nobles = 2
				set_counter turmoil_scotland 1
			end_if
		end_if
		if I_CompareCounter turmoil_scotland = -1
		and I_FactionLeaderTrait scotland Civil_Unrest < 2
		and I_FactionLeaderTrait scotland Offensive_To_Nobles < 2
			set_counter turmoil_scotland 0
		end_if
		if I_CompareCounter turmoil_scotland = 1
			set_counter turmoil_scotland -1
		;WEST EUROPE
			if I_SettlementOwner Paris = scotland
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = scotland
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = scotland
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = scotland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = scotland
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = scotland
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = scotland
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = scotland
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = scotland
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = scotland
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = scotland
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = scotland
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = scotland
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = scotland
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = scotland
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = scotland
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = scotland
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = scotland
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = scotland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = scotland
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = scotland
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = scotland
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = scotland
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = scotland
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = scotland
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = scotland
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = scotland
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = scotland
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = scotland
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = scotland
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = scotland
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = scotland
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = scotland
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = scotland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = scotland
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = scotland
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = scotland
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = scotland
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = scotland
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = scotland
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = scotland
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = scotland
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = scotland
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = scotland
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = scotland
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = scotland
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = scotland
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = scotland
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = scotland
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = scotland
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = scotland
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = scotland
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;HRE
		if I_CompareCounter turmoil_hre = 0
			if I_FactionLeaderTrait hre Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_hre 1
			end_if
			if I_FactionLeaderTrait hre Offensive_To_Nobles = 2
				set_counter turmoil_hre 1
			end_if
		end_if
		if I_CompareCounter turmoil_hre = -1
		and I_FactionLeaderTrait hre Civil_Unrest < 2
		and I_FactionLeaderTrait hre Offensive_To_Nobles < 2
			set_counter turmoil_hre 0
		end_if
		if I_CompareCounter turmoil_hre = 1
			set_counter turmoil_hre -1
		;WEST EUROPE
			if I_SettlementOwner Paris = hre
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = hre
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = hre
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = hre
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = hre
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = hre
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = hre
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = hre
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = hre
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = hre
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = hre
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = hre
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = hre
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = hre
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = hre
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = hre
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = hre
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = hre
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = hre
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = hre
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = hre
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = hre
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = hre
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = hre
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = hre
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = hre
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = hre
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = hre
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = hre
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = hre
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = hre
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = hre
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = hre
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = hre
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = hre
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = hre
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = hre
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = hre
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = hre
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = hre
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = hre
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = hre
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = hre
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = hre
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = hre
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = hre
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = hre
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = hre
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = hre
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = hre
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = hre
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = hre
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;DENMARK
		if I_CompareCounter turmoil_denmark = 0
			if I_FactionLeaderTrait denmark Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_denmark 1
			end_if
			if I_FactionLeaderTrait denmark Offensive_To_Nobles = 2
				set_counter turmoil_denmark 1
			end_if
		end_if
		if I_CompareCounter turmoil_denmark = -1
		and I_FactionLeaderTrait denmark Civil_Unrest < 2
		and I_FactionLeaderTrait denmark Offensive_To_Nobles < 2
			set_counter turmoil_denmark 0
		end_if
		if I_CompareCounter turmoil_denmark = 1
			set_counter turmoil_denmark -1
		;WEST EUROPE
			if I_SettlementOwner Paris = denmark
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = denmark
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = denmark
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = denmark
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = denmark
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = denmark
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = denmark
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = denmark
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = denmark
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = denmark
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = denmark
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = denmark
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = denmark
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = denmark
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = denmark
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = denmark
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = denmark
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = denmark
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = denmark
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = denmark
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = denmark
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = denmark
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = denmark
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = denmark
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = denmark
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = denmark
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = denmark
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = denmark
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = denmark
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = denmark
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = denmark
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = denmark
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = denmark
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = denmark
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = denmark
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = denmark
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = denmark
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = denmark
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = denmark
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = denmark
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = denmark
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = denmark
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = denmark
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = denmark
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = denmark
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = denmark
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = denmark
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = denmark
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = denmark
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = denmark
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = denmark
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = denmark
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;NORWAY
		if I_CompareCounter turmoil_norway = 0
			if I_FactionLeaderTrait norway Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_norway 1
			end_if
			if I_FactionLeaderTrait norway Offensive_To_Nobles = 2
				set_counter turmoil_norway 1
			end_if
		end_if
		if I_CompareCounter turmoil_norway = -1
		and I_FactionLeaderTrait norway Civil_Unrest < 2
		and I_FactionLeaderTrait norway Offensive_To_Nobles < 2
			set_counter turmoil_norway 0
		end_if
		if I_CompareCounter turmoil_norway = 1
			set_counter turmoil_norway -1
		;WEST EUROPE
			if I_SettlementOwner Paris = norway
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = norway
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = norway
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = norway
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = norway
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = norway
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = norway
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = norway
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = norway
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = norway
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = norway
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = norway
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = norway
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = norway
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = norway
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = norway
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = norway
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = norway
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = norway
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = norway
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = norway
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = norway
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = norway
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = norway
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = norway
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = norway
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = norway
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = norway
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = norway
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = norway
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = norway
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = norway
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = norway
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = norway
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = norway
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = norway
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = norway
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = norway
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = norway
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = norway
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = norway
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = norway
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = norway
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = norway
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = norway
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = norway
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = norway
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = norway
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = norway
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = norway
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = norway
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = norway
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;HUNGARY
		if I_CompareCounter turmoil_hungary = 0
			if I_FactionLeaderTrait hungary Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_hungary 1
			end_if
			if I_FactionLeaderTrait hungary Offensive_To_Nobles = 2
				set_counter turmoil_hungary 1
			end_if
		end_if
		if I_CompareCounter turmoil_hungary = -1
		and I_FactionLeaderTrait hungary Civil_Unrest < 2
		and I_FactionLeaderTrait hungary Offensive_To_Nobles < 2
			set_counter turmoil_hungary 0
		end_if
		if I_CompareCounter turmoil_hungary = 1
			set_counter turmoil_hungary -1
		;WEST EUROPE
			if I_SettlementOwner Paris = hungary
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = hungary
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = hungary
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = hungary
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = hungary
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = hungary
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = hungary
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = hungary
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = hungary
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = hungary
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = hungary
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = hungary
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = hungary
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = hungary
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = hungary
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = hungary
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = hungary
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = hungary
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = hungary
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = hungary
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = hungary
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = hungary
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = hungary
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = hungary
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = hungary
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = hungary
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = hungary
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = hungary
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = hungary
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = hungary
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = hungary
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = hungary
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = hungary
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = hungary
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = hungary
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = hungary
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = hungary
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = hungary
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = hungary
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = hungary
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = hungary
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = hungary
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = hungary
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = hungary
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = hungary
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = hungary
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = hungary
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = hungary
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = hungary
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = hungary
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = hungary
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = hungary
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;POLAND
		if I_CompareCounter turmoil_poland = 0
			if I_FactionLeaderTrait poland Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_poland 1
			end_if
			if I_FactionLeaderTrait poland Offensive_To_Nobles = 2
				set_counter turmoil_poland 1
			end_if
		end_if
		if I_CompareCounter turmoil_poland = -1
		and I_FactionLeaderTrait poland Civil_Unrest < 2
		and I_FactionLeaderTrait poland Offensive_To_Nobles < 2
			set_counter turmoil_poland 0
		end_if
		if I_CompareCounter turmoil_poland = 1
			set_counter turmoil_poland -1
		;WEST EUROPE
			if I_SettlementOwner Paris = poland
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = poland
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = poland
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = poland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = poland
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = poland
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = poland
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = poland
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = poland
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = poland
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = poland
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = poland
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = poland
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = poland
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = poland
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = poland
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = poland
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = poland
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = poland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = poland
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = poland
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = poland
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = poland
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = poland
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = poland
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = poland
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = poland
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = poland
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = poland
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = poland
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = poland
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = poland
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = poland
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = poland
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = poland
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = poland
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = poland
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = poland
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = poland
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = poland
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = poland
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = poland
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = poland
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = poland
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = poland
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = poland
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = poland
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = poland
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = poland
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = poland
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = poland
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = poland
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;JERUSALEM/CRUSADER STATES
		if I_CompareCounter turmoil_jerusalem = 0
			if I_FactionLeaderTrait jerusalem Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_jerusalem 1
			end_if
			if I_FactionLeaderTrait jerusalem Offensive_To_Nobles = 2
				set_counter turmoil_jerusalem 1
			end_if
		end_if
		if I_CompareCounter turmoil_jerusalem = -1
		and I_FactionLeaderTrait jerusalem Civil_Unrest < 2
		and I_FactionLeaderTrait jerusalem Offensive_To_Nobles < 2
			set_counter turmoil_jerusalem 0
		end_if
		if I_CompareCounter turmoil_jerusalem = 1
			set_counter turmoil_jerusalem -1
		;WEST EUROPE
			if I_SettlementOwner Paris = jerusalem
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = jerusalem
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = jerusalem
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = jerusalem
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = jerusalem
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = jerusalem
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = jerusalem
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = jerusalem
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = jerusalem
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = jerusalem
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = jerusalem
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = jerusalem
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = jerusalem
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = jerusalem
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = jerusalem
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = jerusalem
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = jerusalem
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = jerusalem
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = jerusalem
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = jerusalem
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = jerusalem
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = jerusalem
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = jerusalem
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = jerusalem
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = jerusalem
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = jerusalem
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = jerusalem
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = jerusalem
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = jerusalem
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = jerusalem
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = jerusalem
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = jerusalem
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = jerusalem
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = jerusalem
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = jerusalem
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = jerusalem
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = jerusalem
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = jerusalem
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = jerusalem
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = jerusalem
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = jerusalem
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = jerusalem
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = jerusalem
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = jerusalem
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = jerusalem
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = jerusalem
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = jerusalem
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = jerusalem
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = jerusalem
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = jerusalem
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = jerusalem
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = jerusalem
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;TEUTONIC ORDER
		if I_CompareCounter turmoil_teutonic_order = 0
			if I_FactionLeaderTrait teutonic_order Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_teutonic_order 1
			end_if
			if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles = 2
				set_counter turmoil_teutonic_order 1
			end_if
		end_if
		if I_CompareCounter turmoil_teutonic_order = -1
		and I_FactionLeaderTrait teutonic_order Civil_Unrest < 2
		and I_FactionLeaderTrait teutonic_order Offensive_To_Nobles < 2
			set_counter turmoil_teutonic_order 0
		end_if
		if I_CompareCounter turmoil_teutonic_order = 1
			set_counter turmoil_teutonic_order -1
		;WEST EUROPE
			if I_SettlementOwner Paris = teutonic_order
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = teutonic_order
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = teutonic_order
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = teutonic_order
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = teutonic_order
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = teutonic_order
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = teutonic_order
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = teutonic_order
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = teutonic_order
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = teutonic_order
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = teutonic_order
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = teutonic_order
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = teutonic_order
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = teutonic_order
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = teutonic_order
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = teutonic_order
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = teutonic_order
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = teutonic_order
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = teutonic_order
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = teutonic_order
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = teutonic_order
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = teutonic_order
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = teutonic_order
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = teutonic_order
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = teutonic_order
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = teutonic_order
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = teutonic_order
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = teutonic_order
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = teutonic_order
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = teutonic_order
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = teutonic_order
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = teutonic_order
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = teutonic_order
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = teutonic_order
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = teutonic_order
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = teutonic_order
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = teutonic_order
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = teutonic_order
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = teutonic_order
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = teutonic_order
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = teutonic_order
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = teutonic_order
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = teutonic_order
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = teutonic_order
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = teutonic_order
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = teutonic_order
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = teutonic_order
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = teutonic_order
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = teutonic_order
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = teutonic_order
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = teutonic_order
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = teutonic_order
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;BYZANTIUM
		if I_CompareCounter turmoil_byzantium = 0
			if I_FactionLeaderTrait byzantium Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_byzantium 1
			end_if
			if I_FactionLeaderTrait byzantium Offensive_To_Nobles = 2
				set_counter turmoil_byzantium 1
			end_if
		end_if
		if I_CompareCounter turmoil_byzantium = -1
		and I_FactionLeaderTrait byzantium Civil_Unrest < 2
		and I_FactionLeaderTrait byzantium Offensive_To_Nobles < 2
			set_counter turmoil_byzantium 0
		end_if
		if I_CompareCounter turmoil_byzantium = 1
			set_counter turmoil_byzantium -1
		;WEST EUROPE
			if I_SettlementOwner Paris = byzantium
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = byzantium
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = byzantium
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = byzantium
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = byzantium
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = byzantium
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = byzantium
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = byzantium
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = byzantium
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = byzantium
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = byzantium
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = byzantium
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = byzantium
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = byzantium
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = byzantium
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = byzantium
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = byzantium
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = byzantium
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = byzantium
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = byzantium
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = byzantium
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = byzantium
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = byzantium
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = byzantium
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = byzantium
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = byzantium
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = byzantium
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = byzantium
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = byzantium
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = byzantium
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = byzantium
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = byzantium
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = byzantium
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = byzantium
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = byzantium
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = byzantium
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = byzantium
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = byzantium
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = byzantium
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = byzantium
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = byzantium
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = byzantium
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = byzantium
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = byzantium
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = byzantium
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = byzantium
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = byzantium
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = byzantium
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = byzantium
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = byzantium
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = byzantium
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = byzantium
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;KIEVAN RUS
		if I_CompareCounter turmoil_kievan_rus = 0
			if I_FactionLeaderTrait kievan_rus Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_kievan_rus 1
			end_if
			if I_FactionLeaderTrait kievan_rus Offensive_To_Nobles = 2
				set_counter turmoil_kievan_rus 1
			end_if
		end_if
		if I_CompareCounter turmoil_kievan_rus = -1
		and I_FactionLeaderTrait kievan_rus Civil_Unrest < 2
		and I_FactionLeaderTrait kievan_rus Offensive_To_Nobles < 2
			set_counter turmoil_kievan_rus 0
		end_if
		if I_CompareCounter turmoil_kievan_rus = 1
			set_counter turmoil_kievan_rus -1
		;WEST EUROPE
			if I_SettlementOwner Paris = kievan_rus
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = kievan_rus
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = kievan_rus
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = kievan_rus
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = kievan_rus
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = kievan_rus
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = kievan_rus
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = kievan_rus
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = kievan_rus
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = kievan_rus
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = kievan_rus
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = kievan_rus
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = kievan_rus
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = kievan_rus
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = kievan_rus
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = kievan_rus
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = kievan_rus
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = kievan_rus
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = kievan_rus
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = kievan_rus
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = kievan_rus
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = kievan_rus
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = kievan_rus
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = kievan_rus
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = kievan_rus
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = kievan_rus
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = kievan_rus
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = kievan_rus
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = kievan_rus
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = kievan_rus
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = kievan_rus
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = kievan_rus
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = kievan_rus
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = kievan_rus
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = kievan_rus
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = kievan_rus
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = kievan_rus
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = kievan_rus
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = kievan_rus
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = kievan_rus
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = kievan_rus
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = kievan_rus
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = kievan_rus
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = kievan_rus
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = kievan_rus
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = kievan_rus
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = kievan_rus
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = kievan_rus
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = kievan_rus
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = kievan_rus
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = kievan_rus
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = kievan_rus
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;RUSSIA/NOVGOROD
		if I_CompareCounter turmoil_russia = 0
			if I_FactionLeaderTrait russia Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_russia 1
			end_if
			if I_FactionLeaderTrait russia Offensive_To_Nobles = 2
				set_counter turmoil_russia 1
			end_if
		end_if
		if I_CompareCounter turmoil_russia = -1
		and I_FactionLeaderTrait russia Civil_Unrest < 2
		and I_FactionLeaderTrait russia Offensive_To_Nobles < 2
			set_counter turmoil_russia 0
		end_if
		if I_CompareCounter turmoil_russia = 1
			set_counter turmoil_russia -1
		;WEST EUROPE
			if I_SettlementOwner Paris = russia
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = russia
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = russia
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = russia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = russia
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = russia
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = russia
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = russia
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = russia
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = russia
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = russia
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = russia
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = russia
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = russia
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = russia
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = russia
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = russia
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = russia
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = russia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = russia
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = russia
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = russia
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = russia
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = russia
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = russia
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = russia
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = russia
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = russia
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = russia
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = russia
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = russia
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = russia
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = russia
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = russia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = russia
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = russia
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = russia
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = russia
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = russia
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = russia
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = russia
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = russia
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = russia
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = russia
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = russia
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = russia
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = russia
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = russia
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = russia
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = russia
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = russia
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = russia
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;LITHUANIA
		if I_CompareCounter turmoil_lithuania = 0
			if I_FactionLeaderTrait lithuania Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_lithuania 1
			end_if
			if I_FactionLeaderTrait lithuania Offensive_To_Nobles = 2
				set_counter turmoil_lithuania 1
			end_if
		end_if
		if I_CompareCounter turmoil_lithuania = -1
		and I_FactionLeaderTrait lithuania Civil_Unrest < 2
		and I_FactionLeaderTrait lithuania Offensive_To_Nobles < 2
			set_counter turmoil_lithuania 0
		end_if
		if I_CompareCounter turmoil_lithuania = 1
			set_counter turmoil_lithuania -1
		;WEST EUROPE
			if I_SettlementOwner Paris = lithuania
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = lithuania
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = lithuania
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = lithuania
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = lithuania
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = lithuania
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = lithuania
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = lithuania
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = lithuania
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = lithuania
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = lithuania
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = lithuania
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = lithuania
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = lithuania
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = lithuania
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = lithuania
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = lithuania
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = lithuania
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = lithuania
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = lithuania
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = lithuania
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = lithuania
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = lithuania
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = lithuania
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = lithuania
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = lithuania
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = lithuania
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = lithuania
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = lithuania
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = lithuania
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = lithuania
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = lithuania
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = lithuania
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = lithuania
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = lithuania
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = lithuania
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = lithuania
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = lithuania
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = lithuania
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = lithuania
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = lithuania
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = lithuania
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = lithuania
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = lithuania
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = lithuania
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = lithuania
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = lithuania
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = lithuania
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = lithuania
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = lithuania
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = lithuania
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = lithuania
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;CUMANS
		if I_CompareCounter turmoil_cumans = 0
			if I_FactionLeaderTrait cumans Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_cumans 1
			end_if
			if I_FactionLeaderTrait cumans Offensive_To_Nobles = 2
				set_counter turmoil_cumans 1
			end_if
		end_if
		if I_CompareCounter turmoil_cumans = -1
		and I_FactionLeaderTrait cumans Civil_Unrest < 2
		and I_FactionLeaderTrait cumans Offensive_To_Nobles < 2
			set_counter turmoil_cumans 0
		end_if
		if I_CompareCounter turmoil_cumans = 1
			set_counter turmoil_cumans -1
		;WEST EUROPE
			if I_SettlementOwner Paris = cumans
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = cumans
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = cumans
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = cumans
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = cumans
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = cumans
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = cumans
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = cumans
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = cumans
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = cumans
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = cumans
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = cumans
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = cumans
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = cumans
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = cumans
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = cumans
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = cumans
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = cumans
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = cumans
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = cumans
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = cumans
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = cumans
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = cumans
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = cumans
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = cumans
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = cumans
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = cumans
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = cumans
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = cumans
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = cumans
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = cumans
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = cumans
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = cumans
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = cumans
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = cumans
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = cumans
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = cumans
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = cumans
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = cumans
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = cumans
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = cumans
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = cumans
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = cumans
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = cumans
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = cumans
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = cumans
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = cumans
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = cumans
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = cumans
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = cumans
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = cumans
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = cumans
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;MONGOLS
		if I_CompareCounter turmoil_mongols = 0
			if I_FactionLeaderTrait mongols Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_mongols 1
			end_if
			if I_FactionLeaderTrait mongols Offensive_To_Nobles = 2
				set_counter turmoil_mongols 1
			end_if
		end_if
		if I_CompareCounter turmoil_mongols = -1
		and I_FactionLeaderTrait mongols Civil_Unrest < 2
		and I_FactionLeaderTrait mongols Offensive_To_Nobles < 2
			set_counter turmoil_mongols 0
		end_if
		if I_CompareCounter turmoil_mongols = 1
			set_counter turmoil_mongols -1
		;WEST EUROPE
			if I_SettlementOwner Paris = mongols
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = mongols
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = mongols
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = mongols
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = mongols
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = mongols
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = mongols
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = mongols
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = mongols
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = mongols
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = mongols
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = mongols
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = mongols
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = mongols
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = mongols
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = mongols
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = mongols
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = mongols
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = mongols
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = mongols
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = mongols
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = mongols
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = mongols
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = mongols
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = mongols
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = mongols
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = mongols
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = mongols
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = mongols
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = mongols
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = mongols
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = mongols
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = mongols
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = mongols
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = mongols
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = mongols
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = mongols
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = mongols
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = mongols
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = mongols
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = mongols
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = mongols
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = mongols
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = mongols
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = mongols
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = mongols
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = mongols
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = mongols
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = mongols
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = mongols
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = mongols
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = mongols
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;GEORGIA
		if I_CompareCounter turmoil_georgia = 0
			if I_FactionLeaderTrait georgia Civil_Unrest >= 2
			and RandomPercent >= 50
				set_counter turmoil_georgia 1
			end_if
			if I_FactionLeaderTrait georgia Offensive_To_Nobles = 2
				set_counter turmoil_georgia 1
			end_if
		end_if
		if I_CompareCounter turmoil_georgia = -1
		and I_FactionLeaderTrait georgia Civil_Unrest < 2
		and I_FactionLeaderTrait georgia Offensive_To_Nobles < 2
			set_counter turmoil_georgia 0
		end_if
		if I_CompareCounter turmoil_georgia = 1
			set_counter turmoil_georgia -1
		;WEST EUROPE
			if I_SettlementOwner Paris = georgia
			add_settlement_turmoil Paris 8
			set_counter conversion_paris 8
			set_settlement_founding_conversion_rate Paris 0.05
			end_if
			if I_SettlementOwner Bordeaux = georgia
			add_settlement_turmoil Bordeaux 5
			set_counter conversion_bordeaux 5
			set_settlement_founding_conversion_rate Bordeaux 0.05
			end_if
			if I_SettlementOwner Toulouse = georgia
			add_settlement_turmoil Toulouse 6
			set_counter conversion_toulouse 6
			set_settlement_founding_conversion_rate Toulouse 0.05
			end_if
			if I_SettlementOwner Khlynov = georgia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Khlynov 5
			set_counter conversion_orleans 5
			set_settlement_founding_conversion_rate Khlynov 0.05
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = georgia
			add_settlement_turmoil London 8
			set_counter conversion_london 8
			set_settlement_founding_conversion_rate London 0.05
			end_if
			if I_SettlementOwner Edinburgh = georgia
			add_settlement_turmoil Edinburgh 8
			set_counter conversion_edinburgh 8
			set_settlement_founding_conversion_rate Edinburgh 0.05
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = georgia
			add_settlement_turmoil Frankfurt 8
			set_counter conversion_frankfurt 8
			set_settlement_founding_conversion_rate Frankfurt 0.05
			end_if
			if I_SettlementOwner Bern = georgia
			add_settlement_turmoil Bern 6
			set_counter conversion_bern 6
			set_settlement_founding_conversion_rate Bern 0.05
			end_if
			if I_SettlementOwner Antwerp = georgia
			add_settlement_turmoil Antwerp 5
			set_counter conversion_antwerp 5
			set_settlement_founding_conversion_rate Antwerp 0.05
			end_if
			if I_SettlementOwner Vienna = georgia
			add_settlement_turmoil Vienna 6
			set_counter conversion_vienna 6
			set_settlement_founding_conversion_rate Vienna 0.05
			end_if
			if I_SettlementOwner Hamburg = georgia
			add_settlement_turmoil Hamburg 4
			set_counter conversion_hamburg 4
			set_settlement_founding_conversion_rate Hamburg 0.05
			end_if
			if I_SettlementOwner Nuremburg = georgia
			add_settlement_turmoil Nuremburg 4
			set_counter conversion_nuremburg 4
			set_settlement_founding_conversion_rate Nuremburg 0.05
			end_if
			if I_SettlementOwner Cologne = georgia
			add_settlement_turmoil Cologne 4
			set_counter conversion_cologne 4
			set_settlement_founding_conversion_rate Cologne 0.05
			end_if
		;ITALY
			if I_SettlementOwner Milan = georgia
			add_settlement_turmoil Milan 6
			set_counter conversion_milan 6
			set_settlement_founding_conversion_rate Milan 0.05
			end_if
			if I_SettlementOwner Genoa = georgia
			add_settlement_turmoil Genoa 8
			set_counter conversion_genoa 8
			set_settlement_founding_conversion_rate Genoa 0.05
			end_if
			if I_SettlementOwner Venice = georgia
			add_settlement_turmoil Venice 8
			set_counter conversion_venice 8
			set_settlement_founding_conversion_rate Venice 0.05
			end_if
			if I_SettlementOwner Rome = georgia
			add_settlement_turmoil Rome 6
			set_counter conversion_rome 6
			set_settlement_founding_conversion_rate Rome 0.05
			end_if
			if I_SettlementOwner Palermo = georgia
			add_settlement_turmoil Palermo 8
			set_counter conversion_palermo 8
			set_settlement_founding_conversion_rate Palermo 0.05
			end_if
			if I_SettlementOwner Nykoeping = georgia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Nykoeping 6
			set_counter conversion_florence 6
			set_settlement_founding_conversion_rate Nykoeping 0.05
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = georgia
			add_settlement_turmoil Toledo 8
			set_counter conversion_toledo 8
			set_settlement_founding_conversion_rate Toledo 0.05
			end_if
			if I_SettlementOwner Oporto = georgia
			add_settlement_turmoil Oporto 5
			set_counter conversion_oporto 5
			set_settlement_founding_conversion_rate Oporto 0.05
			end_if
			if I_SettlementOwner Zaragoza = georgia
			add_settlement_turmoil Zaragoza 8
			set_counter conversion_zaragoza 8
			set_settlement_founding_conversion_rate Zaragoza 0.05
			end_if
			if I_SettlementOwner Granada = georgia
			add_settlement_turmoil Granada 8
			set_counter conversion_granada 8
			set_settlement_founding_conversion_rate Granada 0.05
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = georgia
			add_settlement_turmoil Prague 6
			set_counter conversion_prague 6
			set_settlement_founding_conversion_rate Prague 0.05
			end_if
			if I_SettlementOwner Esztergom = georgia
			add_settlement_turmoil Esztergom 8
			set_counter conversion_esztergom 8
			set_settlement_founding_conversion_rate Esztergom 0.05
			end_if
			if I_SettlementOwner Krakow = georgia
			add_settlement_turmoil Krakow 8
			set_counter conversion_krakow 8
			set_settlement_founding_conversion_rate Krakow 0.05
			end_if
			if I_SettlementOwner Vilnius = georgia
			add_settlement_turmoil Vilnius 8
			set_counter conversion_vilnius 8
			set_settlement_founding_conversion_rate Vilnius 0.05
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = georgia
			add_settlement_turmoil Arhus 8
			set_counter conversion_arhus 8
			set_settlement_founding_conversion_rate Arhus 0.05
			end_if
			if I_SettlementOwner Bergen = georgia
			add_settlement_turmoil Bergen 8
			set_counter conversion_bergen 8
			set_settlement_founding_conversion_rate Bergen 0.05
			end_if
			if I_SettlementOwner Kalmar = georgia
			add_settlement_turmoil Kalmar 5
			set_counter conversion_kalmar 5
			set_settlement_founding_conversion_rate Kalmar 0.05
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = georgia
			add_settlement_turmoil Novgorod 8
			set_counter conversion_novgorod 8
			set_settlement_founding_conversion_rate Novgorod 0.05
			end_if
			if I_SettlementOwner Kiev = georgia
			add_settlement_turmoil Kiev 8
			set_counter conversion_kiev 8
			set_settlement_founding_conversion_rate Kiev 0.05
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = georgia
			add_settlement_turmoil Constantinople 10
			set_counter conversion_constantinople 10
			set_settlement_founding_conversion_rate Constantinople 0.05
			end_if
			if I_SettlementOwner Ryazan = georgia
			and I_CompareCounter orleans_exist = 1
			add_settlement_turmoil Ryazan 5
			set_counter conversion_ras 5
			set_settlement_founding_conversion_rate Ryazan 0.05
			end_if
			if I_SettlementOwner Sofia = georgia
			add_settlement_turmoil Sofia 5
			set_counter conversion_sofia 5
			set_settlement_founding_conversion_rate Sofia 0.05
			end_if
			if I_SettlementOwner Zagreb = georgia
			add_settlement_turmoil Zagreb 5
			set_counter conversion_zagreb 5
			set_settlement_founding_conversion_rate Zagreb 0.05
			end_if
			if I_SettlementOwner Arta = georgia
			add_settlement_turmoil Arta 5
			set_counter conversion_arta 5
			set_settlement_founding_conversion_rate Arta 0.05
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = georgia
			add_settlement_turmoil Ankara 6
			set_counter conversion_ankara 6
			set_settlement_founding_conversion_rate Ankara 0.05
			end_if
			if I_SettlementOwner Iconium = georgia
			add_settlement_turmoil Iconium 8
			set_counter conversion_iconium 8
			set_settlement_founding_conversion_rate Iconium 0.05
			end_if
			if I_SettlementOwner Trebizond = georgia
			add_settlement_turmoil Trebizond 5
			set_counter conversion_trebizond 5
			set_settlement_founding_conversion_rate Trebizond 0.05
			end_if
			if I_SettlementOwner Kutaisi = georgia
			add_settlement_turmoil Kutaisi 8
			set_counter conversion_kutaisi 8
			set_settlement_founding_conversion_rate Kutaisi 0.05
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = georgia
			add_settlement_turmoil Jerusalem 8
			set_counter conversion_jerusalem 8
			set_settlement_founding_conversion_rate Jerusalem 0.05
			end_if
			if I_SettlementOwner Damascus = georgia
			add_settlement_turmoil Damascus 6
			set_counter conversion_damascus 6
			set_settlement_founding_conversion_rate Damascus 0.05
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = georgia
			add_settlement_turmoil Baghdad 8
			set_counter conversion_baghdad 8
			set_settlement_founding_conversion_rate Baghdad 0.05
			end_if
			if I_SettlementOwner Mosul = georgia
			add_settlement_turmoil Mosul 5
			set_counter conversion_mosul 5
			set_settlement_founding_conversion_rate Mosul 0.05
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = georgia
			add_settlement_turmoil Ray 5
			set_counter conversion_ray 5
			set_settlement_founding_conversion_rate Ray 0.05
			end_if
			if I_SettlementOwner Urgench = georgia
			add_settlement_turmoil Urgench 8
			set_counter conversion_urgench 8
			set_settlement_founding_conversion_rate Urgench 0.05
			end_if
			if I_SettlementOwner Isfahan = georgia
			add_settlement_turmoil Isfahan 6
			set_counter conversion_isfahan 6
			set_settlement_founding_conversion_rate Isfahan 0.05
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = georgia
			add_settlement_turmoil Mecca 6
			set_counter conversion_mecca 6
			set_settlement_founding_conversion_rate Mecca 0.05
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = georgia
			add_settlement_turmoil Marrakesh 6
			set_counter conversion_marrakesh 6
			set_settlement_founding_conversion_rate Marrakesh 0.05
			end_if
			if I_SettlementOwner Cairo = georgia
			add_settlement_turmoil Cairo 8
			set_counter conversion_cairo 8
			set_settlement_founding_conversion_rate Cairo 0.05
			end_if
			if I_SettlementOwner Al-Mahdiya = georgia
			add_settlement_turmoil Al-Mahdiya 8
			set_counter conversion_al_mahdiya 8
			set_settlement_founding_conversion_rate Al-Mahdiya 0.05
			end_if
		end_if

	;Reset conversion rates
		if I_CompareCounter conversion_paris > 0
			inc_counter conversion_paris -1
			if I_CompareCounter conversion_paris = 0
				set_owner_founding_conversion_rate Paris 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_bordeaux > 0
			inc_counter conversion_bordeaux -1
			if I_CompareCounter conversion_bordeaux = 0
				set_owner_founding_conversion_rate Bordeaux 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_toulouse > 0
			inc_counter conversion_toulouse -1
			if I_CompareCounter conversion_toulouse = 0
				set_owner_founding_conversion_rate Toulouse 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_orleans > 0
			inc_counter conversion_orleans -1
			if I_CompareCounter conversion_orleans = 0
				set_owner_founding_conversion_rate Khlynov 0.0005
			end_if
		end_if

		if I_CompareCounter conversion_london > 0
			inc_counter conversion_london -1
			if I_CompareCounter conversion_london = 0
				set_owner_founding_conversion_rate London 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_edinburgh > 0
			inc_counter conversion_edinburgh -1
			if I_CompareCounter conversion_edinburgh = 0
				set_owner_founding_conversion_rate Edinburgh 0.0005
			end_if
		end_if

		if I_CompareCounter conversion_frankfurt > 0
			inc_counter conversion_frankfurt -1
			if I_CompareCounter conversion_frankfurt = 0
				set_owner_founding_conversion_rate Frankfurt 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_bern > 0
			inc_counter conversion_bern -1
			if I_CompareCounter conversion_bern = 0
				set_owner_founding_conversion_rate Bern 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_antwerp > 0
			inc_counter conversion_antwerp -1
			if I_CompareCounter conversion_antwerp = 0
				set_owner_founding_conversion_rate Antwerp 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_vienna > 0
			inc_counter conversion_vienna -1
			if I_CompareCounter conversion_vienna = 0
				set_owner_founding_conversion_rate Vienna 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_hamburg > 0
			inc_counter conversion_hamburg -1
			if I_CompareCounter conversion_hamburg = 0
				set_owner_founding_conversion_rate Hamburg 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_nuremburg > 0
			inc_counter conversion_nuremburg -1
			if I_CompareCounter conversion_nuremburg = 0
				set_owner_founding_conversion_rate Nuremburg 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_cologne > 0
			inc_counter conversion_cologne -1
			if I_CompareCounter conversion_cologne = 0
				set_owner_founding_conversion_rate Cologne 0.0005
			end_if
		end_if

		if I_CompareCounter conversion_milan > 0
			inc_counter conversion_milan -1
			if I_CompareCounter conversion_milan = 0
				set_owner_founding_conversion_rate Milan 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_genoa > 0
			inc_counter conversion_genoa -1
			if I_CompareCounter conversion_genoa = 0
				set_owner_founding_conversion_rate Genoa 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_venice > 0
			inc_counter conversion_venice -1
			if I_CompareCounter conversion_venice = 0
				set_owner_founding_conversion_rate Venice 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_rome > 0
			inc_counter conversion_rome -1
			if I_CompareCounter conversion_rome = 0
				set_owner_founding_conversion_rate Rome 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_palermo > 0
			inc_counter conversion_palermo -1
			if I_CompareCounter conversion_palermo = 0
				set_owner_founding_conversion_rate Palermo 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_florence > 0
			inc_counter conversion_florence -1
			if I_CompareCounter conversion_florence = 0
				set_owner_founding_conversion_rate Florence 0.0005
			end_if
		end_if

		if I_CompareCounter conversion_toledo > 0
			inc_counter conversion_toledo -1
			if I_CompareCounter conversion_toledo = 0
				set_owner_founding_conversion_rate Toledo 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_oporto > 0
			inc_counter conversion_oporto -1
			if I_CompareCounter conversion_oporto = 0
				set_owner_founding_conversion_rate Oporto 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_zaragoza > 0
			inc_counter conversion_zaragoza -1
			if I_CompareCounter conversion_zaragoza = 0
				set_owner_founding_conversion_rate Zaragoza 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_granada > 0
			inc_counter conversion_granada -1
			if I_CompareCounter conversion_granada = 0
				set_owner_founding_conversion_rate Granada 0.0005
			end_if
		end_if

		if I_CompareCounter conversion_prague > 0
			inc_counter conversion_prague -1
			if I_CompareCounter conversion_prague = 0
				set_owner_founding_conversion_rate Prague 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_esztergom > 0
			inc_counter conversion_esztergom -1
			if I_CompareCounter conversion_esztergom = 0
				set_owner_founding_conversion_rate Esztergom 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_krakow > 0
			inc_counter conversion_krakow -1
			if I_CompareCounter conversion_krakow = 0
				set_owner_founding_conversion_rate Krakow 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_vilnius > 0
			inc_counter conversion_vilnius -1
			if I_CompareCounter conversion_vilnius = 0
				set_owner_founding_conversion_rate Vilnius 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_arhus > 0
			inc_counter conversion_arhus -1
			if I_CompareCounter conversion_arhus = 0
				set_owner_founding_conversion_rate Arhus 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_bergen > 0
			inc_counter conversion_bergen -1
			if I_CompareCounter conversion_bergen = 0
				set_owner_founding_conversion_rate Bergen 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_kalmar > 0
			inc_counter conversion_kalmar -1
			if I_CompareCounter conversion_kalmar = 0
				set_owner_founding_conversion_rate Kalmar 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_novgorod > 0
			inc_counter conversion_novgorod -1
			if I_CompareCounter conversion_novgorod = 0
				set_owner_founding_conversion_rate Novgorod 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_kiev > 0
			inc_counter conversion_kiev -1
			if I_CompareCounter conversion_kiev = 0
				set_owner_founding_conversion_rate Kiev 0.0005
			end_if
		end_if
			
		if I_CompareCounter conversion_constantinople > 0
			inc_counter conversion_constantinople -1
			if I_CompareCounter conversion_constantinople = 0
				set_owner_founding_conversion_rate Constantinople 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_ras > 0
			inc_counter conversion_ras -1
			if I_CompareCounter conversion_ras = 0
				set_owner_founding_conversion_rate Ryazan 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_sofia > 0
			inc_counter conversion_sofia -1
			if I_CompareCounter conversion_sofia = 0
				set_owner_founding_conversion_rate Sofia 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_zagreb > 0
			inc_counter conversion_zagreb -1
			if I_CompareCounter conversion_zagreb = 0
				set_owner_founding_conversion_rate Zagreb 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_arta > 0
			inc_counter conversion_arta -1
			if I_CompareCounter conversion_arta = 0
				set_owner_founding_conversion_rate Arta 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_ankara > 0
			inc_counter conversion_ankara -1
			if I_CompareCounter conversion_ankara = 0
				set_owner_founding_conversion_rate Ankara 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_iconium > 0
			inc_counter conversion_iconium -1
			if I_CompareCounter conversion_iconium = 0
				set_owner_founding_conversion_rate Iconium 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_trebizond > 0
			inc_counter conversion_trebizond -1
			if I_CompareCounter conversion_trebizond = 0
				set_owner_founding_conversion_rate Trebizond 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_kutaisi > 0
			inc_counter conversion_kutaisi -1
			if I_CompareCounter conversion_kutaisi = 0
				set_owner_founding_conversion_rate Kutaisi 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_jerusalem > 0
			inc_counter conversion_jerusalem -1
			if I_CompareCounter conversion_jerusalem = 0
				set_owner_founding_conversion_rate Jerusalem 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_damascus > 0
			inc_counter conversion_damascus -1
			if I_CompareCounter conversion_damascus = 0
				set_owner_founding_conversion_rate Damascus 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_baghdad > 0
			inc_counter conversion_baghdad -1
			if I_CompareCounter conversion_baghdad = 0
				set_owner_founding_conversion_rate Baghdad 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_mosul > 0
			inc_counter conversion_mosul -1
			if I_CompareCounter conversion_mosul = 0
				set_owner_founding_conversion_rate Mosul 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_ray > 0
			inc_counter conversion_ray -1
			if I_CompareCounter conversion_ray = 0
				set_owner_founding_conversion_rate Ray 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_urgench > 0
			inc_counter conversion_urgench -1
			if I_CompareCounter conversion_urgench = 0
				set_owner_founding_conversion_rate Urgench 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_isfahan > 0
			inc_counter conversion_isfahan -1
			if I_CompareCounter conversion_isfahan = 0
				set_owner_founding_conversion_rate Isfahan 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_mecca > 0
			inc_counter conversion_mecca -1
			if I_CompareCounter conversion_mecca = 0
				set_owner_founding_conversion_rate Mecca 0.0005
			end_if
		end_if
		
		if I_CompareCounter conversion_marrakesh > 0
			inc_counter conversion_marrakesh -1
			if I_CompareCounter conversion_marrakesh = 0
				set_owner_founding_conversion_rate Marrakesh 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_cairo > 0
			inc_counter conversion_cairo -1
			if I_CompareCounter conversion_cairo = 0
				set_owner_founding_conversion_rate Cairo 0.0005
			end_if
		end_if
		if I_CompareCounter conversion_al_mahdiya > 0
			inc_counter conversion_al_mahdiya -1
			if I_CompareCounter conversion_al_mahdiya = 0
				set_owner_founding_conversion_rate Al-Mahdiya 0.0005
			end_if
		end_if
	
	end_monitor

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;======================END OF KINGDOM EMPIRE AND REPUBLICS SCRIPTS==========================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;========================= Settlements Auto-Rename ==========================
declare_counter istanople

monitor_event GeneralCaptureSettlement SettlementName Constantinople
	and CharFactionType turks
	and I_CompareCounter istanople = 0

	set_counter istanople 1
	change_settlement_name Constantinople Istanbul
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Constantinople
	and not FactionReligion islam
	and not FactionReligion pagan
	and I_CompareCounter istanople = 1

	set_counter istanople 0
	change_settlement_name Constantinople Constantinople
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Damghan
	campaign_wait 0.1
	if I_SettlementOwner Damghan = hre
		change_settlement_name Damghan Lubeck
		terminate_monitor
	end_if
	if I_SettlementOwner Damghan = teutonic_order
		change_settlement_name Damghan Lubeck
		terminate_monitor
	end_if
end_monitor


monitor_event SettlementUpgraded SettlementName Palanga

	if I_EventCounter palanga_rename = 1
		terminate_monitor
	end_if
	if I_SettlementOwner Palanga = hre
		change_settlement_name Palanga Konigsberg
		historic_event palanga_rename
		terminate_monitor
	end_if
	if I_SettlementOwner Palanga = teutonic_order
		change_settlement_name Palanga Konigsberg
		historic_event palanga_rename
		terminate_monitor
	end_if

end_monitor

;==============================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;RE-EMERGING FACTIONS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;-------------Counters--------------

;Global
	declare_counter ros_po_building
	set_counter ros_po_building 0

	declare_counter faction_emerge_id
	set_counter faction_emerge_id 0
	
	declare_counter me_crusader
	set_counter me_crusader 0
	declare_counter eu_crusader
	set_counter eu_crusader 0
	
	declare_counter turn_vlr

;Scotland
	declare_counter edinburgh_riot
	set_counter edinburgh_riot 0
	declare_counter aberdeen_riot
	set_counter aberdeen_riot 0
	declare_counter inverness_riot
	set_counter inverness_riot 0
	declare_counter scotland_emerge
	set_counter scotland_emerge 0

;Venice
	declare_counter venice_riot
	set_counter venice_riot 0
	declare_counter venice_emerge
	set_counter venice_emerge 0

;Sicily
	declare_counter palermo_riot
	set_counter palermo_riot 0
	declare_counter syracuse_riot
	set_counter syracuse_riot 0
	declare_counter naples_riot
	set_counter naples_riot 0
	declare_counter sicily_emerge
	set_counter sicily_emerge 0

;Milan/Genoa
	declare_counter genoa_riot
	set_counter genoa_riot 0
	declare_counter milan_emerge
	set_counter milan_emerge 0

;Denmark
	declare_counter arhus_riot
	set_counter arhus_riot 0
	declare_counter roskilde_riot
	set_counter roskilde_riot 0
	declare_counter denmark_emerge
	set_counter denmark_emerge 0

;Cumans
	declare_counter jaiksk_riot
	set_counter jaiksk_riot 0
	declare_counter azaq_riot
	set_counter azaq_riot 0
	declare_counter baia_riot
	set_counter baia_riot 0
	declare_counter cumans_emerge
	set_counter cumans_emerge 0

;Turks/Seljuks
	declare_counter caesarea_riot
	set_counter caesarea_riot 0
	declare_counter ankara_riot
	set_counter ankara_riot 0
	declare_counter iconium_riot
	set_counter iconium_riot 0
	declare_counter diyarbakir_riot
	set_counter diyarbakir_riot 0
	declare_counter turks_emerge
	set_counter turks_emerge 0

;France
	declare_counter paris_riot
	set_counter paris_riot 0
	declare_counter rheims_riot
	set_counter rheims_riot 0
	declare_counter clermont_riot
	set_counter clermont_riot 0
	declare_counter angers_riot
	set_counter angers_riot 0
	declare_counter france_emerge
	set_counter france_emerge 0

;HRE
	declare_counter frankfurt_riot
	set_counter frankfurt_riot 0
	declare_counter vienna_riot
	set_counter vienna_riot 0
	declare_counter prague_riot
	set_counter prague_riot 0
	declare_counter staufen_riot
	set_counter staufen_riot 0
	declare_counter nuremburg_riot
	set_counter nuremburg_riot 0
	declare_counter hre_emerge
	set_counter hre_emerge 0

;England
	declare_counter london_riot
	set_counter london_riot 0
	declare_counter nottingham_riot
	set_counter nottingham_riot 0
	declare_counter winchester_riot
	set_counter winchester_riot 0
	declare_counter england_emerge
	set_counter england_emerge 0

;Portugal
	declare_counter oporto_riot
	set_counter oporto_riot 0
	declare_counter lisbon_riot
	set_counter lisbon_riot 0
	declare_counter al_mahdiya_riot
	set_counter al_mahdiya_riot 0
	declare_counter tunis_riot
	set_counter tunis_riot 0
	declare_counter portugal_emerge
	set_counter portugal_emerge 0

;Poland
	declare_counter krakow_riot
	set_counter krakow_riot 0
	declare_counter poznan_riot
	set_counter poznan_riot 0
	declare_counter plock_riot
	set_counter plock_riot 0
	declare_counter poland_emerge
	set_counter poland_emerge 0

;Byzantium
	declare_counter constantinople_riot
	set_counter constantinople_riot 0
	declare_counter nicaea_riot
	set_counter nicaea_riot 0
	declare_counter arta_riot
	set_counter arta_riot 0
	declare_counter trebizond_riot
	set_counter trebizond_riot 0
	declare_counter byzantium_emerge
	set_counter byzantium_emerge 0

;Moors
	declare_counter marrakesh_riot
	set_counter marrakesh_riot 0
	declare_counter fes_riot
	set_counter fes_riot 0
	declare_counter melilla_riot
	set_counter melilla_riot 0
	declare_counter moors_emerge
	set_counter moors_emerge 0

;Russia/Novgorod
	declare_counter novgorod_riot
	set_counter novgorod_riot 0
	declare_counter russia_emerge
	set_counter russia_emerge 0

;Spain/Leon
	declare_counter leon_riot
	set_counter leon_riot 0
	declare_counter toledo_riot
	set_counter toledo_riot 0
	declare_counter salamanca_riot
	set_counter salamanca_riot 0
	declare_counter burgos_riot
	set_counter burgos_riot 0
	declare_counter spain_emerge
	set_counter spain_emerge 0

;Hungary
	declare_counter varad_riot
	set_counter varad_riot 0
	declare_counter esztergom_riot
	set_counter esztergom_riot 0
	declare_counter kassa_riot
	set_counter kassa_riot 0
	declare_counter hungary_emerge
	set_counter hungary_emerge 0

;Aragon
	declare_counter zaragoza_riot
	set_counter zaragoza_riot 0
	declare_counter pamplona_riot
	set_counter pamplona_riot 0
	declare_counter barcelona_riot
	set_counter barcelona_riot 0
	declare_counter aragon_emerge
	set_counter aragon_emerge 0

;Lithuania
	declare_counter vilnius_riot
	set_counter vilnius_riot 0
	declare_counter lithuania_emerge
	set_counter lithuania_emerge 0
	;Obotrites
	declare_counter lubeck_riot
	set_counter lubeck_riot 0

;Kievan Rus
	declare_counter kiev_riot
	set_counter kiev_riot 0
	declare_counter kievan_rus_emerge
	set_counter kievan_rus_emerge 0

;Norway
	declare_counter bergen_riot
	set_counter bergen_riot 0
	declare_counter norway_emerge
	set_counter norway_emerge 0

;Kwarezm
	declare_counter urgench_riot
	set_counter urgench_riot 0
	declare_counter konjikala_riot
	set_counter konjikala_riot 0
	declare_counter kwarezm_emerge
	set_counter kwarezm_emerge 0

;Egypt/Fatimids
	declare_counter cairo_riot
	set_counter cairo_riot 0
	declare_counter alexandria_riot
	set_counter alexandria_riot 0
	declare_counter damietta_riot
	set_counter damietta_riot 0
	declare_counter egypt_emerge
	set_counter egypt_emerge 0

;Jerusalem/Crusader States
	declare_counter nicosia_riot
	set_counter nicosia_riot 0
	declare_counter jerusalem_riot
	set_counter jerusalem_riot 0
	declare_counter acre_riot
	set_counter acre_riot 0
	declare_counter jerusalem_emerge
	set_counter jerusalem_emerge 0
	
;Teutonic Order
	declare_counter thorn_riot
	set_counter thorn_riot 0
	declare_counter palanga_riot
	set_counter palanga_riot 0
	declare_counter riga_riot
	set_counter riga_riot 0
	declare_counter teutonic_order_emerge
	set_counter teutonic_order_emerge 0
	
;Abbasids(timurids)
	declare_counter baghdad_riot
	set_counter baghdad_riot 0
	declare_counter basra_riot
	set_counter basra_riot 0
	declare_counter abbasids_emerge
	set_counter abbasids_emerge 0
	
;Georgia
	declare_counter kutaisi_riot
	set_counter kutaisi_riot 0
	declare_counter tbilisi_riot
	set_counter tbilisi_riot 0
	declare_counter georgia_emerge
	set_counter georgia_emerge 0
;
;---------------------------------------------------------------------------------------
;-------Check if settlements are rioting and factions meet conditions to re-emerge--------
;--------------------------------------------------------------------------------------
;Only 1 faction can re-emerge per turn
;a same faction cannot re-emerge twice consecutively
;giving more chance to the other factions.

;Global
	monitor_event CrusadeEnds
		set_counter eu_crusader 0
		set_counter me_crusader 0
	end_monitor

;Scotland
	monitor_event CityRiots SettlementName Edinburgh
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Edinburgh = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter edinburgh_riot 1
	    set_counter faction_emerge_id 1
	end_monitor
	monitor_event CityRiots SettlementName Aberdeen
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Aberdeen = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter aberdeen_riot 1
	    set_counter faction_emerge_id 1
	end_monitor
	monitor_event CityRiots SettlementName Inverness
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Inverness = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter inverness_riot 1
	    set_counter faction_emerge_id 1
	end_monitor

;Venice
	monitor_event CityRiots SettlementName Venice
	  and I_NumberOfSettlements venice = 0
	  and I_IsFactionAIControlled venice
	  and not I_SettlementOwner Venice = venice
	  and I_CompareCounter venice_emerge = 0
	    set_counter venice_riot 1
	    set_counter faction_emerge_id 2
	end_monitor

;Sicily
	monitor_event CityRiots SettlementName Palermo
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Palermo = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter palermo_riot 1
	    set_counter faction_emerge_id 3
	end_monitor
	monitor_event CityRiots SettlementName Syracuse
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Syracuse = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter syracuse_riot 1
	    set_counter faction_emerge_id 3
	end_monitor
	monitor_event CityRiots SettlementName Naples
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Naples = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter naples_riot 1
	    set_counter faction_emerge_id 3
	end_monitor

;Milan/Genoa
	monitor_event CityRiots SettlementName Genoa
	  and I_NumberOfSettlements milan = 0
	  and I_IsFactionAIControlled milan
	  and not I_SettlementOwner Genoa = milan
	  and I_CompareCounter milan_emerge = 0
	    set_counter genoa_riot 1
	    set_counter faction_emerge_id 4
	end_monitor

;Denmark
	monitor_event CityRiots SettlementName Arhus
	  and I_NumberOfSettlements denmark = 0
	  and I_IsFactionAIControlled denmark
	  and not I_SettlementOwner Arhus = denmark
	  and I_CompareCounter denmark_emerge = 0
	    set_counter arhus_riot 1
	    set_counter faction_emerge_id 5
	end_monitor
	monitor_event CityRiots SettlementName Roskilde
	  and I_NumberOfSettlements denmark = 0
	  and I_IsFactionAIControlled denmark
	  and not I_SettlementOwner Roskilde = denmark
	  and I_CompareCounter denmark_emerge = 0
	    set_counter roskilde_riot 1
	    set_counter faction_emerge_id 5
	end_monitor

;Cumans
	monitor_event CityRiots SettlementName Jaiksk
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Jaiksk = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter jaiksk_riot 1
	    set_counter faction_emerge_id 6
	end_monitor
	monitor_event CityRiots SettlementName Azaq
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Azaq = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter azaq_riot 1
	    set_counter faction_emerge_id 6
	end_monitor
	monitor_event CityRiots SettlementName Baia
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Baia = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter baia_riot 1
	    set_counter faction_emerge_id 6
	end_monitor

;Turks/Seljuks
	monitor_event CityRiots SettlementName Caesarea
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Caesarea = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter caesarea_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Ankara
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Ankara = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter ankara_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Iconium
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Iconium = turks
	  and I_CompareCounter turks_emerge = 0
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter iconium_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Diyarbakir
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Diyarbakir = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter diyarbakir_riot 1
	    set_counter faction_emerge_id 7
	end_monitor

;France
	monitor_event CityRiots SettlementName Paris
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Paris = france
	  and I_CompareCounter france_emerge = 0
	    set_counter paris_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Rheims
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Rheims = france
	  and I_CompareCounter france_emerge = 0
	    set_counter rheims_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Clermont
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Clermont = france
	  and I_CompareCounter france_emerge = 0
	    set_counter clermont_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Angers
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Angers = france
	  and I_CompareCounter france_emerge = 0
	    set_counter angers_riot 1
	    set_counter faction_emerge_id 8
	end_monitor

;HRE
	monitor_event CityRiots SettlementName Frankfurt
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Frankfurt = hre
	  and I_CompareCounter hre_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter frankfurt_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Vienna
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Vienna = hre
	  and I_CompareCounter hre_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter vienna_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Prague
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Prague = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter prague_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Staufen
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Staufen = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter staufen_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Nuremburg
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Nuremburg = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter nuremburg_riot 1
	    set_counter faction_emerge_id 9
	end_monitor

;England
	monitor_event CityRiots SettlementName London
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner London = england
	  and I_CompareCounter england_emerge = 0
	    set_counter london_riot 1
	    set_counter faction_emerge_id 10
	end_monitor
	monitor_event CityRiots SettlementName Nottingham
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner Nottingham = england
	  and I_CompareCounter england_emerge = 0
	    set_counter nottingham_riot 1
	    set_counter faction_emerge_id 10
	end_monitor
	monitor_event CityRiots SettlementName Winchester
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner Winchester = england
	  and I_CompareCounter england_emerge = 0
	    set_counter winchester_riot 1
	    set_counter faction_emerge_id 10
	end_monitor

;Portugal/Zirids
	monitor_event CityRiots SettlementName Al-Mahdiya
	  and I_NumberOfSettlements portugal = 0
	  and I_IsFactionAIControlled portugal
	  and not I_SettlementOwner Al-Mahdiya = portugal
	  and I_CompareCounter portugal_emerge = 0
	    set_counter al_mahdiya_riot 1
	    set_counter faction_emerge_id 11
	end_monitor
	monitor_event CityRiots SettlementName Tunis
	  and I_NumberOfSettlements portugal = 0
	  and I_IsFactionAIControlled portugal
	  and not I_SettlementOwner Tunis = portugal
	  and I_CompareCounter portugal_emerge = 0
	    set_counter tunis_riot 1
	    set_counter faction_emerge_id 11
	end_monitor

;Poland
	monitor_event CityRiots SettlementName Krakow
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Krakow = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter krakow_riot 1
	    set_counter faction_emerge_id 12
	end_monitor
	monitor_event CityRiots SettlementName Khiva ;Poznan
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Khiva = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter poznan_riot 1
	    set_counter faction_emerge_id 12
	end_monitor
	monitor_event CityRiots SettlementName Plock
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Plock = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter plock_riot 1
	    set_counter faction_emerge_id 12
	end_monitor

;Byzantium
	monitor_event CityRiots SettlementName Constantinople
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Constantinople = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter constantinople_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Nicaea
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Nicaea = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter nicaea_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Arta
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Arta = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter arta_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Trebizond
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Trebizond = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter trebizond_riot 1
	    set_counter faction_emerge_id 13
	end_monitor

;Moors
	monitor_event CityRiots SettlementName Marrakesh
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Marrakesh = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter marrakesh_riot 1
	    set_counter faction_emerge_id 14
	end_monitor
	monitor_event CityRiots SettlementName Fes
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Fes = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter fes_riot 1
	    set_counter faction_emerge_id 14
	end_monitor
	monitor_event CityRiots SettlementName Melilla
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Melilla = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter melilla_riot 1
	    set_counter faction_emerge_id 14
	end_monitor

;Russia/Novgorod
	monitor_event CityRiots SettlementName Novgorod
	  and I_NumberOfSettlements russia = 0
	  and I_IsFactionAIControlled russia
	  and not I_SettlementOwner Novgorod = russia
	  and I_CompareCounter russia_emerge = 0
	    set_counter novgorod_riot 1
	    set_counter faction_emerge_id 15
	end_monitor

;Spain/Leon
	monitor_event CityRiots SettlementName Leon
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Leon = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter leon_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Toledo
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Toledo = spain
	  and I_CompareCounter spain_emerge = 0
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter toledo_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Salamanca
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Salamanca = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter salamanca_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Burgos
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Burgos = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter burgos_riot 1
	    set_counter faction_emerge_id 16
	end_monitor

;Hungary
	monitor_event CityRiots SettlementName Varad
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Varad = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter varad_riot 1
	    set_counter faction_emerge_id 17
	end_monitor
	monitor_event CityRiots SettlementName Esztergom
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Esztergom = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter esztergom_riot 1
	    set_counter faction_emerge_id 17
	end_monitor
	monitor_event CityRiots SettlementName Kassa
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Kassa = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter kassa_riot 1
	    set_counter faction_emerge_id 17
	end_monitor

;Aragon
	monitor_event CityRiots SettlementName Zaragoza
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Zaragoza = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter zaragoza_riot 1
	    set_counter faction_emerge_id 18
	end_monitor
	monitor_event CityRiots SettlementName Pamplona
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Pamplona = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter pamplona_riot 1
	    set_counter faction_emerge_id 18
	end_monitor
	monitor_event CityRiots SettlementName Barcelona
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Barcelona = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter barcelona_riot 1
	    set_counter faction_emerge_id 18
	end_monitor

;Lithuania
	monitor_event CityRiots SettlementName Vilnius
	  and I_NumberOfSettlements lithuania = 0
	  and I_EventCounter obotrites_exist != 1
	  and I_IsFactionAIControlled lithuania
	  and not I_SettlementOwner Vilnius = lithuania
	  and I_CompareCounter lithuania_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter vilnius_riot 1
	    set_counter faction_emerge_id 19
	end_monitor
	;Obotrites
	monitor_event CityRiots SettlementName Damghan
	  and I_NumberOfSettlements lithuania = 0
	  and I_EventCounter obotrites_exist = 1
	  and I_IsFactionAIControlled lithuania
	  and not I_SettlementOwner Damghan = lithuania
	  and I_CompareCounter lithuania_emerge = 0
	    set_counter lubeck_riot 1
	    set_counter faction_emerge_id 19
	end_monitor

;Kievan Rus
	monitor_event CityRiots SettlementName Kiev
	  and I_NumberOfSettlements kievan_rus = 0
	  and I_IsFactionAIControlled kievan_rus
	  and not I_SettlementOwner Kiev = kievan_rus
	  and I_CompareCounter kievan_rus_emerge = 0
	    set_counter kiev_riot 1
	    set_counter faction_emerge_id 20
	end_monitor

;Norway
	monitor_event CityRiots SettlementName Bergen
	  and I_NumberOfSettlements norway = 0
	  and I_IsFactionAIControlled norway
	  and not I_SettlementOwner Bergen = norway
	  and I_CompareCounter norway_emerge = 0
	    set_counter bergen_riot 1
	    set_counter faction_emerge_id 21
	end_monitor

;Kwarezm
	monitor_event CityRiots SettlementName Urgench
	  and I_NumberOfSettlements kwarezm = 0
	  and I_IsFactionAIControlled kwarezm
	  and not I_SettlementOwner Urgench = kwarezm
	  and I_CompareCounter kwarezm_emerge = 0
	    set_counter urgench_riot 1
	    set_counter faction_emerge_id 22
	end_monitor
	monitor_event CityRiots SettlementName Konjikala
	  and I_NumberOfSettlements kwarezm = 0
	  and I_IsFactionAIControlled kwarezm
	  and not I_SettlementOwner Konjikala = kwarezm
	  and I_CompareCounter kwarezm_emerge = 0
	    set_counter konjikala_riot 1
	    set_counter faction_emerge_id 22
	end_monitor

;Egypt/Fatimids
	monitor_event CityRiots SettlementName Cairo
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Cairo = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter cairo_riot 1
	    set_counter faction_emerge_id 23
	end_monitor
	monitor_event CityRiots SettlementName Alexandria
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Alexandria = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter alexandria_riot 1
	    set_counter faction_emerge_id 23
	end_monitor
	monitor_event CityRiots SettlementName Damietta
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Damietta = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter damietta_riot 1
	    set_counter faction_emerge_id 23
	end_monitor

;Jerusalem/Crusader States
	;Check for Middle East Crusades in Progress
	monitor_event CrusadeCalled TargetSettlementName Jerusalem
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Antioch
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Acre
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Gaza
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Medina
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Baghdad
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Alexandria
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Cairo
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Damietta
	    set_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Constantinople
	    set_counter me_crusader 1
	end_monitor
	monitor_event CityRiots SettlementName Nicosia
	  and I_NumberOfSettlements jerusalem = 0
	  and I_IsFactionAIControlled jerusalem
	  and not I_SettlementOwner Nicosia = jerusalem
	  and I_CrusadeInProgress
	  and I_CompareCounter me_crusader = 1
	  and I_CompareCounter jerusalem_emerge = 0
	    set_counter nicosia_riot 1
	    set_counter faction_emerge_id 24
	end_monitor
	monitor_event CityRiots SettlementName Jerusalem
	  and I_NumberOfSettlements jerusalem = 0
	  and I_IsFactionAIControlled jerusalem
	  and not I_SettlementOwner Jerusalem = jerusalem
	  and I_CrusadeInProgress
	  and I_CompareCounter me_crusader = 1
	  and I_CompareCounter jerusalem_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter jerusalem_riot 1
	    set_counter faction_emerge_id 24
	end_monitor
	monitor_event CityRiots SettlementName Acre
	  and I_NumberOfSettlements jerusalem = 0
	  and I_IsFactionAIControlled jerusalem
	  and not I_SettlementOwner Acre = jerusalem
	  and I_CrusadeInProgress
	  and I_CompareCounter jerusalem_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter acre_riot 1
	    set_counter faction_emerge_id 24
	end_monitor

;Teutonic Order
	;Check for Northern Europe Crusades in Progress
	monitor_event CrusadeCalled TargetSettlementName Riga
	    set_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Vilnius
	    set_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Frankfurt
	    set_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Vienna
	    set_counter eu_crusader 1
	end_monitor
	monitor_event CityRiots SettlementName Thorn
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 0
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Thorn = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	    set_counter thorn_riot 1
	    set_counter faction_emerge_id 25
	end_monitor
	monitor_event CityRiots SettlementName Palanga
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 0
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Palanga = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	    set_counter palanga_riot 1
	    set_counter faction_emerge_id 25
	end_monitor
	monitor_event CityRiots SettlementName Riga
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 0
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Riga = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter riga_riot 1
	    set_counter faction_emerge_id 25
	end_monitor

;Abbasids
	monitor_event CityRiots SettlementName Baghdad
	  and I_NumberOfSettlements timurids = 0
	  and I_EventCounter abbasids_exist = 1
	  and I_IsFactionAIControlled timurids
	  and not I_SettlementOwner Baghdad = timurids
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter baghdad_riot 1
	    set_counter faction_emerge_id 26
	end_monitor
	monitor_event CityRiots SettlementName Basra
	  and I_NumberOfSettlements timurids = 0
	  and I_EventCounter abbasids_exist = 1
	  and I_IsFactionAIControlled timurids
	  and not I_SettlementOwner Basra = timurids
	    set_counter basra_riot 1
	    set_counter faction_emerge_id 26
	end_monitor

;Georgia
	monitor_event CityRiots SettlementName Kutaisi
	  and I_NumberOfSettlements georgia = 0
	  and I_EventCounter georgia_exist = 1
	  and I_IsFactionAIControlled georgia
	  and not I_SettlementOwner Kutaisi = georgia
	    set_counter kutaisi_riot 1
	    set_counter faction_emerge_id 27
	end_monitor
	monitor_event CityRiots SettlementName Tbilisi
	  and I_NumberOfSettlements georgia = 0
	  and I_EventCounter georgia_exist = 1
	  and I_IsFactionAIControlled georgia
	  and not I_SettlementOwner Tbilisi = georgia
	    set_counter tbilisi_riot 1
	    set_counter faction_emerge_id 27
	end_monitor


;Experimental, make faction re-emerge if these settlement are in rebels control
	monitor_event PreFactionTurnStart FactionType slave
		if I_SettlementOwner Edinburgh = slave
		and I_NumberOfSettlements scotland = 0
		and I_IsFactionAIControlled scotland
		and I_CompareCounter scotland_emerge = 0
		and RandomPercent > 66
			set_counter edinburgh_riot 1
			set_counter faction_emerge_id 1
		end_if
		if I_SettlementOwner Venice = slave
		and I_NumberOfSettlements venice = 0
		and I_IsFactionAIControlled venice
		and I_CompareCounter venice_emerge = 0
		and RandomPercent > 66
			set_counter venice_riot 1
			set_counter faction_emerge_id 2
		end_if
		if I_SettlementOwner Palermo = slave
		and I_NumberOfSettlements sicily = 0
		and I_IsFactionAIControlled sicily
		and I_CompareCounter sicily_emerge = 0
		and RandomPercent > 66
			set_counter palermo_riot 1
			set_counter faction_emerge_id 3
		end_if
		if I_SettlementOwner Genoa = slave
		and I_NumberOfSettlements milan = 0
		and I_IsFactionAIControlled milan
		and I_CompareCounter milan_emerge = 0
		and RandomPercent > 66
			set_counter genoa_riot 1
			set_counter faction_emerge_id 4
		end_if
		if I_SettlementOwner Arhus = slave
		and I_NumberOfSettlements denmark = 0
		and I_IsFactionAIControlled denmark
		and I_CompareCounter denmark_emerge = 0
		and RandomPercent > 66
			set_counter arhus_riot 1
			set_counter faction_emerge_id 5
		end_if
		if I_SettlementOwner Jaiksk = slave
		and I_NumberOfSettlements cumans = 0
		and I_IsFactionAIControlled cumans
		and I_CompareCounter cumans_emerge = 0
		and RandomPercent > 66
			set_counter jaiksk_riot 1
			set_counter faction_emerge_id 6
		end_if
		if I_SettlementOwner Caesarea = slave
		and I_NumberOfSettlements turks = 0
		and I_IsFactionAIControlled turks
		and I_CompareCounter turks_emerge = 0
		and RandomPercent > 66
			set_counter caesarea_riot 1
			set_counter faction_emerge_id 7
		end_if
		if I_SettlementOwner Paris = slave
		and I_NumberOfSettlements france = 0
		and I_IsFactionAIControlled france
		and I_CompareCounter france_emerge = 0
		and RandomPercent > 66
			set_counter paris_riot 1
			set_counter faction_emerge_id 8
		end_if
		if I_SettlementOwner Frankfurt = slave
		and I_NumberOfSettlements hre = 0
		and I_IsFactionAIControlled hre
		and I_CompareCounter hre_emerge = 0
		and RandomPercent > 66
			set_counter frankfurt_riot 1
			set_counter faction_emerge_id 9
		end_if
		if I_SettlementOwner Vienna = slave
		and I_NumberOfSettlements hre = 0
		and I_IsFactionAIControlled hre
		and I_CompareCounter hre_emerge = 0
		and RandomPercent > 66
			set_counter vienna_riot 1
			set_counter faction_emerge_id 9
		end_if
		if I_SettlementOwner London = slave
		and I_NumberOfSettlements england = 0
		and I_IsFactionAIControlled england
		and I_CompareCounter england_emerge = 0
		and RandomPercent > 66
			set_counter london_riot 1
			set_counter faction_emerge_id 10
		end_if
		if I_SettlementOwner Al-Mahdiya = slave
		and I_NumberOfSettlements portugal = 0
		and I_IsFactionAIControlled portugal
		and I_CompareCounter portugal_emerge = 0
		and RandomPercent > 66
			set_counter al_mahdiya_riot 1
			set_counter faction_emerge_id 11
		end_if
		if I_SettlementOwner Krakow = slave
		and I_NumberOfSettlements poland = 0
		and I_IsFactionAIControlled poland
		and I_CompareCounter poland_emerge = 0
		and RandomPercent > 66
			set_counter krakow_riot 1
			set_counter faction_emerge_id 12
		end_if
		if I_SettlementOwner Constantinople = slave
		and I_NumberOfSettlements byzantium = 0
		and I_IsFactionAIControlled byzantium
		and I_CompareCounter byzantium_emerge = 0
		and RandomPercent > 66
			set_counter constantinople_riot 1
			set_counter faction_emerge_id 13
		end_if
		if I_SettlementOwner Nicaea = slave
		and I_NumberOfSettlements byzantium = 0
		and I_IsFactionAIControlled byzantium
		and I_CompareCounter byzantium_emerge = 0
		and RandomPercent > 66
			set_counter nicaea_riot 1
			set_counter faction_emerge_id 13
		end_if
		if I_SettlementOwner Marrakesh = slave
		and I_NumberOfSettlements moors = 0
		and I_IsFactionAIControlled moors
		and I_CompareCounter moors_emerge = 0
		and RandomPercent > 66
			set_counter marrakesh_riot 1
			set_counter faction_emerge_id 14
		end_if
		if I_SettlementOwner Novgorod = slave
		and I_NumberOfSettlements russia = 0
		and I_IsFactionAIControlled russia
		and I_CompareCounter russia_emerge = 0
		and RandomPercent > 66
			set_counter novgorod_riot 1
			set_counter faction_emerge_id 15
		end_if
		if I_SettlementOwner Toledo = slave
		and I_NumberOfSettlements spain = 0
		and I_IsFactionAIControlled spain
		and I_CompareCounter spain_emerge = 0
		and RandomPercent > 66
			set_counter toledo_riot 1
			set_counter faction_emerge_id 16
		end_if
		if I_SettlementOwner Esztergom = slave
		and I_NumberOfSettlements hungary = 0
		and I_IsFactionAIControlled hungary
		and I_CompareCounter hungary_emerge = 0
		and RandomPercent > 66
			set_counter esztergom_riot 1
			set_counter faction_emerge_id 17
		end_if
		if I_SettlementOwner Zaragoza = slave
		and I_NumberOfSettlements aragon = 0
		and I_IsFactionAIControlled aragon
		and I_CompareCounter aragon_emerge = 0
		and RandomPercent > 66
			set_counter zaragoza_riot 1
			set_counter faction_emerge_id 18
		end_if
		if I_SettlementOwner Vilnius = slave
		and I_EventCounter obotrites_exist != 1
		and I_NumberOfSettlements lithuania = 0
		and I_IsFactionAIControlled lithuania
		and I_CompareCounter lithuania_emerge = 0
		and RandomPercent > 66
			set_counter vilnius_riot 1
			set_counter faction_emerge_id 19
		end_if
		if I_SettlementOwner Damghan = slave
		and I_EventCounter obotrites_exist = 1
		and I_NumberOfSettlements lithuania = 0
		and I_IsFactionAIControlled lithuania
		and I_CompareCounter lithuania_emerge = 0
		and RandomPercent > 66
			set_counter lubeck_riot 1
			set_counter faction_emerge_id 19
		end_if
		if I_SettlementOwner Kiev = slave
		and I_NumberOfSettlements kievan_rus = 0
		and I_IsFactionAIControlled kievan_rus
		and I_CompareCounter kievan_rus_emerge = 0
		and RandomPercent > 66
			set_counter kiev_riot 1
			set_counter faction_emerge_id 20
		end_if
		if I_SettlementOwner Bergen = slave
		and I_NumberOfSettlements norway = 0
		and I_IsFactionAIControlled norway
		and I_CompareCounter norway_emerge = 0
		and RandomPercent > 66
			set_counter bergen_riot 1
			set_counter faction_emerge_id 21
		end_if
		if I_SettlementOwner Urgench = slave
		and I_NumberOfSettlements kwarezm = 0
		and I_IsFactionAIControlled kwarezm
		and I_CompareCounter kwarezm_emerge = 0
		and RandomPercent > 66
			set_counter urgench_riot 1
			set_counter faction_emerge_id 22
		end_if
		if I_SettlementOwner Cairo = slave
		and I_NumberOfSettlements egypt = 0
		and I_IsFactionAIControlled egypt
		and I_CompareCounter egypt_emerge = 0
		and RandomPercent > 66
			set_counter cairo_riot 1
			set_counter faction_emerge_id 23
		end_if
		if I_SettlementOwner Acre = slave
		and I_NumberOfSettlements jerusalem = 0
		and I_IsFactionAIControlled jerusalem
		and I_CompareCounter jerusalem_emerge = 0
		and RandomPercent > 66
			set_counter acre_riot 1
			set_counter faction_emerge_id 24
		end_if
		if I_SettlementOwner Thorn = slave
		and I_NumberOfSettlements teutonic_order = 0
		and I_EventCounter status_teutonic_order = 0
		;and I_IsFactionAIControlled teutonic_order
		and I_CompareCounter teutonic_order_emerge = 0
		and RandomPercent > 66
			set_counter thorn_riot 1
			set_counter faction_emerge_id 25
		end_if
		if I_SettlementOwner Baghdad = slave
		and I_EventCounter abbasids_exist = 1
		and I_NumberOfSettlements timurids = 0
		and I_IsFactionAIControlled timurids
		and I_CompareCounter abbasids_emerge = 0
		and RandomPercent > 66
			set_counter baghdad_riot 1
			set_counter faction_emerge_id 26
		end_if
		if I_SettlementOwner Kutaisi = slave
		and I_EventCounter georgia_exist = 1
		and I_NumberOfSettlements georgia = 0
		and I_IsFactionAIControlled georgia
		and I_CompareCounter georgia_emerge = 0
		and RandomPercent > 66
			set_counter kutaisi_riot 1
			set_counter faction_emerge_id 27
		end_if
	end_monitor
;
;------------------------------------------------------------------
;--------------PO Buildings, Re-emerge, Spawn armies---------------
;------------------------------------------------------------------

;Global
;monitor_event FactionTurnEnd FactionType slave ; For normalizing emerge counters every turn regardless if a faction emerged or not
;	set_counter turn_vlr 1
;if I_CompareCounter faction_emerge_id >= 1
monitor_event FactionTurnEnd FactionType slave
and I_CompareCounter faction_emerge_id >= 1
	set_counter ros_po_building 1
	console_command create_building Oslo ros_po_bonus
	console_command create_building Nykoeping ros_po_bonus
	console_command create_building Moscow ros_po_bonus
	console_command create_building Bulgar ros_po_bonus
	console_command create_building Smolensk ros_po_bonus
	console_command create_building Dublin ros_po_bonus
	console_command create_building Oleshe ros_po_bonus
	console_command create_building York ros_po_bonus
	console_command create_building Ryazan ros_po_bonus
	console_command create_building Caernarvon ros_po_bonus
	console_command create_building Stettin ros_po_bonus
	console_command create_building Hamburg ros_po_bonus
	console_command create_building Sarkel ros_po_bonus
	console_command create_building Antwerp ros_po_bonus
	console_command create_building Magdeburg ros_po_bonus
	console_command create_building Wroclaw ros_po_bonus
	console_command create_building Bruges ros_po_bonus
	console_command create_building Metz ros_po_bonus
	console_command create_building Caen ros_po_bonus
	console_command create_building Rennes ros_po_bonus
	console_command create_building Brasov ros_po_bonus
	console_command create_building Caffa ros_po_bonus
	console_command create_building Dijon ros_po_bonus
	console_command create_building Bern ros_po_bonus
	console_command create_building Innsbruck ros_po_bonus
	console_command create_building Bordeaux ros_po_bonus
	console_command create_building Targoviste ros_po_bonus
	console_command create_building Milan ros_po_bonus
	console_command create_building Toulouse ros_po_bonus
	console_command create_building Zagreb ros_po_bonus
	console_command create_building Sofia ros_po_bonus
	console_command create_building Ragusa ros_po_bonus
	console_command create_building Bologna ros_po_bonus
	console_command create_building Pisa ros_po_bonus
	console_command create_building Marseille ros_po_bonus
	console_command create_building Yerevan ros_po_bonus
	console_command create_building Thessalonica ros_po_bonus
	console_command create_building Ajaccio ros_po_bonus
	console_command create_building Rome ros_po_bonus
	console_command create_building Cordoba ros_po_bonus
	console_command create_building Durazzo ros_po_bonus
	console_command create_building Valencia ros_po_bonus
	console_command create_building Adana ros_po_bonus
	console_command create_building Mosul ros_po_bonus
	console_command create_building Cagliari ros_po_bonus
	console_command create_building Edessa ros_po_bonus
	console_command create_building Smyrna ros_po_bonus
	console_command create_building Antioch ros_po_bonus
	console_command create_building Granada ros_po_bonus
	console_command create_building Aleppo ros_po_bonus
	console_command create_building Medina ros_po_bonus
	console_command create_building Corinth ros_po_bonus
	console_command create_building Damascus ros_po_bonus
	console_command create_building Algiers ros_po_bonus
	console_command create_building Iraklion ros_po_bonus
	console_command create_building Gaza ros_po_bonus
	console_command create_building Tripoli ros_po_bonus
	console_command create_building Qarisiya ros_po_bonus
	console_command create_building Benghazi ros_po_bonus
	console_command create_building Bryansk ros_po_bonus
	console_command create_building Lyon ros_po_bonus
	console_command create_building Sinop ros_po_bonus
	console_command create_building Belgrade ros_po_bonus
	console_command create_building Palma ros_po_bonus
	console_command create_building Bari ros_po_bonus
	console_command create_building Skara ros_po_bonus
	console_command create_building Exeter ros_po_bonus
	console_command create_building Mecca ros_po_bonus
	console_command create_building Beleb_el_Anab ros_po_bonus
	console_command create_building Tortosa ros_po_bonus
	console_command create_building Astrakhan ros_po_bonus
	console_command create_building Luxor ros_po_bonus
	console_command create_building Groningen ros_po_bonus
	console_command create_building Khlynov ros_po_bonus
	console_command create_building Salzburg ros_po_bonus
	console_command create_building Ancona ros_po_bonus
	console_command create_building Canakkale ros_po_bonus
	console_command create_building Tmutarakan ros_po_bonus
	console_command create_building Uppsala ros_po_bonus
	console_command create_building Silves ros_po_bonus
	console_command create_building Scopia ros_po_bonus
	console_command create_building Baku ros_po_bonus
	console_command create_building Murcia ros_po_bonus
	console_command create_building Al-Mu'miniya ros_po_bonus
	console_command create_building Mensk ros_po_bonus
	console_command create_building Cologne ros_po_bonus
	console_command create_building Al_Aqaba ros_po_bonus
	console_command create_building Yaroslavl ros_po_bonus
	console_command create_building Kerak ros_po_bonus
	console_command create_building Galway ros_po_bonus
	console_command create_building Pskov ros_po_bonus
	console_command create_building Visby ros_po_bonus
	console_command create_building Lund ros_po_bonus
	console_command create_building Mashhad ros_po_bonus
	console_command create_building Kerman ros_po_bonus
	console_command create_building Ray ros_po_bonus
	console_command create_building Isfahan ros_po_bonus
	console_command create_building Shiraz ros_po_bonus
	console_command create_building Sharjah ros_po_bonus
	console_command create_building Gorgan ros_po_bonus
	console_command create_building Kazan ros_po_bonus
	console_command create_building Tayma ros_po_bonus
	console_command create_building Bulgar ros_po_bonus
	console_command create_building Yazd ros_po_bonus
	console_command create_building Zhytomyr ros_po_bonus
	console_command create_building Polotsk ros_po_bonus
	console_command create_building Embi ros_po_bonus
	console_command create_building Turku ros_po_bonus
	console_command create_building Kermanshah ros_po_bonus
	console_command create_building Tabriz ros_po_bonus
	console_command create_building Pereyaslav ros_po_bonus
	console_command create_building Adrianople ros_po_bonus
	console_command create_building Seville ros_po_bonus
	console_command create_building Oran ros_po_bonus
	console_command create_building Hrodna ros_po_bonus
	console_command create_building Reval ros_po_bonus
	console_command create_building Kalmar ros_po_bonus
	console_command create_building Yelabuga ros_po_bonus
	console_command create_building Alamut ros_po_bonus
	console_command create_building Murom ros_po_bonus
	console_command create_building Isparta ros_po_bonus
	console_command create_building Ahvaz ros_po_bonus
	console_command create_building Serdobinskaya ros_po_bonus
	console_command create_building Eikundarsund ros_po_bonus
	console_command create_building Athens ros_po_bonus
	console_command create_building Rhodes ros_po_bonus
	console_command create_building Halych ros_po_bonus
	console_command create_building Oporto ros_po_bonus
	console_command create_building Lisbon ros_po_bonus
	if I_CompareCounter faction_emerge_id != 1
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 2
		console_command create_building Venice ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 3
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 4
		console_command create_building Genoa ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 5
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 6
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 7
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 8
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 9
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 10
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 11
		console_command create_building Al-Mahdiya ros_po_bonus
		console_command create_building Tunis ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 12
		console_command create_building Krakow ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Plock ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 13
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 14
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 15
		console_command create_building Novgorod ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 16
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 17
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 18
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 19
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Damghan ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 20
		console_command create_building Kiev ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 21
		console_command create_building Bergen ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 22
		console_command create_building Urgench ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 23
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 24
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Jerusalem ros_po_bonus
		console_command create_building Acre ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 25
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 26
		console_command create_building Baghdad ros_po_bonus
		console_command create_building Basra ros_po_bonus
	end_if
	if I_CompareCounter faction_emerge_id != 27
		console_command create_building Kutaisi ros_po_bonus
		console_command create_building Tbilisi ros_po_bonus
	end_if

;Scotland
  if I_CompareCounter faction_emerge_id = 1
	if I_CompareCounter edinburgh_riot = 0
		console_command create_building Edinburgh ros_po_bonus
	end_if
	if I_CompareCounter aberdeen_riot = 0
		console_command create_building Aberdeen ros_po_bonus
	end_if
	if I_CompareCounter inverness_riot = 0
		console_command create_building Inverness ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Edinburgh
			faction scotland
			character random_name, named character, age 30, x 54, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Aberdeen
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Inverness
			faction scotland
			character random_name, named character, age 30, x 50, y 259, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Edinburgh
			faction scotland
			character random_name, named character, age 30, x 54, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights	exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Aberdeen
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Inverness
			faction scotland
			character random_name, named character, age 30, x 50, y 259, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Edinburgh
			faction scotland
			character random_name, named character, age 30, x 54, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights	exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers	exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers	exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Aberdeen
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Inverness
			faction scotland
			character random_name, named character, age 30, x 50, y 259, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter edinburgh_riot = 1
		console_command create_building Edinburgh ros_target
		if I_SettlementOwner Edinburgh = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = georgia
			faction_emerge scotland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Edinburgh = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter aberdeen_riot = 1
		console_command create_building Aberdeen ros_target
		if I_SettlementOwner Aberdeen = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = georgia
			faction_emerge scotland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Aberdeen = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter inverness_riot = 1
		console_command create_building Inverness ros_target
		if I_SettlementOwner Inverness = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = georgia
			faction_emerge scotland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Inverness = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event scotland_emerged
	set_counter edinburgh_riot 0
	set_counter aberdeen_riot 0
	set_counter inverness_riot 0
	set_counter scotland_emerge 5
	add_money scotland 40000
  end_if

;Venice
  if I_CompareCounter faction_emerge_id = 2
	if I_CompareCounter venice_riot = 0
		console_command create_building Venice ros_po_bonus
	end_if
	if I_CompareCounter venice_riot = 1
		console_command create_building Venice ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction venice
			character random_name, named character, age 30, x 166, y 171, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction venice
			character random_name, named character, age 30, x 166, y 171, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Venetian Heavy Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			end
			spawn_army
			faction venice
			character random_name, named character, age 30, x 166, y 171, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Venetian Heavy Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Venice = scotland
			faction_emerge venice scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = sicily
			faction_emerge venice sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = milan
			faction_emerge venice milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = denmark
			faction_emerge venice denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = egypt
			faction_emerge venice egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = cumans
			faction_emerge venice cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = turks
			faction_emerge venice turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = france
			faction_emerge venice france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = hre
			faction_emerge venice hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = england
			faction_emerge venice england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = portugal
			faction_emerge venice portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = poland
			faction_emerge venice poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = byzantium
			faction_emerge venice byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = moors
			faction_emerge venice moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = russia
			faction_emerge venice russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = spain
			faction_emerge venice spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = hungary
			faction_emerge venice hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = aragon
			faction_emerge venice aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = lithuania
			faction_emerge venice lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = kievan_rus
			faction_emerge venice kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = norway
			faction_emerge venice norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = jerusalem
			faction_emerge venice jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = kwarezm
			faction_emerge venice kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = papal_states
			faction_emerge venice papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = mongols
			faction_emerge venice mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = teutonic_order
			faction_emerge venice teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = timurids
			faction_emerge venice timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = georgia
			faction_emerge venice georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Venice = slave
			faction_emerge venice slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event venice_emerged
	set_counter venice_riot 0
	set_counter venice_emerge 5
	add_money venice 40000
  end_if

;Sicily
  if I_CompareCounter faction_emerge_id = 3
	if I_CompareCounter palermo_riot = 0
		console_command create_building Palermo ros_po_bonus
	end_if
	if I_CompareCounter syracuse_riot = 0
		console_command create_building Syracuse ros_po_bonus
	end_if
	if I_CompareCounter naples_riot = 0
		console_command create_building Naples ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Palermo
			faction sicily
			character random_name, named character, age 30, x 173, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Reggio
			faction sicily
			character random_name, named character, age 30, x 192, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Naples
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Palermo
			faction sicily
			character random_name, named character, age 30, x 173, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Reggio
			faction sicily
			character random_name, named character, age 30, x 192, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Naples
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Palermo
			faction sicily
			character random_name, named character, age 30, x 173, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Reggio
			faction sicily
			character random_name, named character, age 30, x 192, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Naples
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
	if I_CompareCounter palermo_riot = 1
		console_command create_building Palermo ros_target
		if I_SettlementOwner Palermo = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = georgia
			faction_emerge sicily georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palermo = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter syracuse_riot = 1
		console_command create_building Syracuse ros_target
		if I_SettlementOwner Syracuse = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = georgia
			faction_emerge sicily georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Syracuse = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter naples_riot = 1
		console_command create_building Naples ros_target
		if I_SettlementOwner Naples = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = georgia
			faction_emerge sicily georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Naples = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event sicily_emerged
	set_counter palermo_riot 0
	set_counter syracuse_riot 0
	set_counter naples_riot 0
	set_counter sicily_emerge 5
	add_money sicily 40000
  end_if

;Milan/Genoa
  if I_CompareCounter faction_emerge_id = 4
	if I_CompareCounter genoa_riot = 0
		console_command create_building Genoa ros_po_bonus
	end_if
	if I_CompareCounter genoa_riot = 1
		console_command create_building Genoa ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction milan
			character random_name, named character, age 30, x 140, y 165, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction milan
			character random_name, named character, age 30, x 140, y 165, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Italian MAA				exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Voulgier				exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army
			faction milan
			character random_name, named character, age 30, x 140, y 165, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Italian MAA				exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Voulgier				exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Genoa = venice
			faction_emerge milan venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = sicily
			faction_emerge milan sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = scotland
			faction_emerge milan scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = denmark
			faction_emerge milan denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = egypt
			faction_emerge milan egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = cumans
			faction_emerge milan cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = turks
			faction_emerge milan turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = france
			faction_emerge milan france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = hre
			faction_emerge milan hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = england
			faction_emerge milan england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = portugal
			faction_emerge milan portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = poland
			faction_emerge milan poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = byzantium
			faction_emerge milan byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = moors
			faction_emerge milan moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = russia
			faction_emerge milan russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = spain
			faction_emerge milan spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = hungary
			faction_emerge milan hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = aragon
			faction_emerge milan aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = lithuania
			faction_emerge milan lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = kievan_rus
			faction_emerge milan kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = norway
			faction_emerge milan norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = jerusalem
			faction_emerge milan jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = kwarezm
			faction_emerge milan kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = papal_states
			faction_emerge milan papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = mongols
			faction_emerge milan mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = teutonic_order
			faction_emerge milan teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = timurids
			faction_emerge milan timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = georgia
			faction_emerge milan georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Genoa = slave
			faction_emerge milan slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event milan_emerged
	set_counter genoa_riot 0
	set_counter milan_emerge 5
	add_money milan 40000
  end_if

;Denmark
  if I_CompareCounter faction_emerge_id = 5
	if I_CompareCounter arhus_riot = 0
		console_command create_building Arhus ros_po_bonus
	end_if
	if I_CompareCounter roskilde_riot = 0
		console_command create_building Roskilde ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Arhus
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Roskilde
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Arhus
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Roskilde
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Arhus
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Armats				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Roskilde
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Armats				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter arhus_riot = 1
		console_command create_building Arhus ros_target
		if I_SettlementOwner Arhus = venice
			faction_emerge denmark venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = sicily
			faction_emerge denmark sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = milan
			faction_emerge denmark milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = scotland
			faction_emerge denmark scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = egypt
			faction_emerge denmark egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = cumans
			faction_emerge denmark cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = turks
			faction_emerge denmark turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = france
			faction_emerge denmark france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = hre
			faction_emerge denmark hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = england
			faction_emerge denmark england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = portugal
			faction_emerge denmark portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = poland
			faction_emerge denmark poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = byzantium
			faction_emerge denmark byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = moors
			faction_emerge denmark moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = russia
			faction_emerge denmark russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = spain
			faction_emerge denmark spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = hungary
			faction_emerge denmark hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = aragon
			faction_emerge denmark aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = lithuania
			faction_emerge denmark lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = kievan_rus
			faction_emerge denmark kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = norway
			faction_emerge denmark norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = jerusalem
			faction_emerge denmark jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = kwarezm
			faction_emerge denmark kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = papal_states
			faction_emerge denmark papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = mongols
			faction_emerge denmark mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = teutonic_order
			faction_emerge denmark teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = timurids
			faction_emerge denmark timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = georgia
			faction_emerge denmark georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arhus = slave
			faction_emerge denmark slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter roskilde_riot = 1
		console_command create_building Roskilde ros_target
		if I_SettlementOwner Roskilde = venice
			faction_emerge denmark venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = sicily
			faction_emerge denmark sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = milan
			faction_emerge denmark milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = scotland
			faction_emerge denmark scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = egypt
			faction_emerge denmark egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = cumans
			faction_emerge denmark cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = turks
			faction_emerge denmark turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = france
			faction_emerge denmark france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = hre
			faction_emerge denmark hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = england
			faction_emerge denmark england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = portugal
			faction_emerge denmark portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = poland
			faction_emerge denmark poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = byzantium
			faction_emerge denmark byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = moors
			faction_emerge denmark moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = russia
			faction_emerge denmark russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = spain
			faction_emerge denmark spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = hungary
			faction_emerge denmark hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = aragon
			faction_emerge denmark aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = lithuania
			faction_emerge denmark lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = kievan_rus
			faction_emerge denmark kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = norway
			faction_emerge denmark norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = jerusalem
			faction_emerge denmark jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = kwarezm
			faction_emerge denmark kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = papal_states
			faction_emerge denmark papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = mongols
			faction_emerge denmark mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = teutonic_order
			faction_emerge denmark teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = timurids
			faction_emerge denmark timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = georgia
			faction_emerge denmark georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Roskilde = slave
			faction_emerge denmark slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event denmark_emerged
	set_counter arhus_riot 0
	set_counter roskilde_riot 0
	set_counter denmark_emerge 5
	add_money denmark 40000
  end_if

;Cumans
  if I_CompareCounter faction_emerge_id = 6
	if I_CompareCounter jaiksk_riot = 0
		console_command create_building Jaiksk ros_po_bonus
	end_if
	if I_CompareCounter azaq_riot = 0
		console_command create_building Azaq ros_po_bonus
	end_if
	if I_CompareCounter baia_riot = 0
		console_command create_building Baia ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Aktobe
			faction cumans
			character random_name, named character, age 30, x 488, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Azaq
			faction cumans
			character random_name, named character, age 30, x 362, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Iasi
			faction cumans
			character random_name, named character, age 30, x 277, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Aktobe
			faction cumans
			character random_name, named character, age 30, x 488, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Azaq
			faction cumans
			character random_name, named character, age 30, x 362, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Iasi
			faction cumans
			character random_name, named character, age 30, x 277, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Aktobe
			faction cumans
			character random_name, named character, age 30, x 488, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Azaq
			faction cumans
			character random_name, named character, age 30, x 362, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Iasi
			faction cumans
			character random_name, named character, age 30, x 277, y 186, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter jaiksk_riot = 1
		console_command create_building Jaiksk ros_target
		if I_SettlementOwner Jaiksk = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = georgia
			faction_emerge cumans georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jaiksk = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter azaq_riot = 1
		console_command create_building Azaq ros_target
		if I_SettlementOwner Azaq = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = georgia
			faction_emerge cumans georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Azaq = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter baia_riot = 1
		console_command create_building Baia ros_target
		if I_SettlementOwner Baia = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = georgia
			faction_emerge cumans georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baia = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event cumans_emerged
	set_counter jaiksk_riot 0
	set_counter azaq_riot 0
	set_counter baia_riot 0
	set_counter cumans_emerge 5
	add_money cumans 40000
  end_if

;Turks/Seljuks
  if I_CompareCounter faction_emerge_id = 7
	if I_CompareCounter caesarea_riot = 0
		console_command create_building Caesarea ros_po_bonus
	end_if
	if I_CompareCounter ankara_riot = 0
		console_command create_building Ankara ros_po_bonus
	end_if
	if I_CompareCounter iconium_riot = 0
		console_command create_building Iconium ros_po_bonus
	end_if
	if I_CompareCounter diyarbakir_riot = 0
		console_command create_building Diyarbakir ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Caesarea
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Ankara
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Iconium
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Diyarbakir
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Caesarea
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Ankara
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Iconium
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Diyarbakir
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Caesarea
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Ankara
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Iconium
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Diyarbakir
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
	if I_CompareCounter caesarea_riot = 1
		console_command create_building Caesarea ros_target
		if I_SettlementOwner Caesarea = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = georgia
			faction_emerge turks georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Caesarea = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter ankara_riot = 1
		console_command create_building Ankara ros_target
		if I_SettlementOwner Ankara = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = georgia
			faction_emerge turks georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Ankara = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter iconium_riot = 1
		console_command create_building Iconium ros_target
		if I_SettlementOwner Iconium = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = georgia
			faction_emerge turks georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Iconium = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter diyarbakir_riot = 1
		console_command create_building Diyarbakir ros_target
		if I_SettlementOwner Diyarbakir = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = georgia
			faction_emerge turks georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Diyarbakir = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event turks_emerged
	set_counter caesarea_riot 0
	set_counter ankara_riot 0
	set_counter iconium_riot 0
	set_counter diyarbakir_riot 0
	set_counter turks_emerge 5
	add_money turks 40000
  end_if

;France
  if I_CompareCounter faction_emerge_id = 8
	if I_CompareCounter paris_riot = 0
		console_command create_building Paris ros_po_bonus
	end_if
	if I_CompareCounter rheims_riot = 0
		console_command create_building Rheims ros_po_bonus
	end_if
	if I_CompareCounter clermont_riot = 0
		console_command create_building Clermont ros_po_bonus
	end_if
	if I_CompareCounter angers_riot = 0
		console_command create_building Angers ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Paris
			faction france
			character random_name, named character, age 30, x 94, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Rheims
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Clermont
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Angers
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Paris
			faction france
			character random_name, named character, age 30, x 94, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Rheims
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Clermont
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Angers
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Paris
			faction france
			character random_name, named character, age 30, x 94, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Rheims
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Clermont
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Angers
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter paris_riot = 1
		console_command create_building Paris ros_target
		if I_SettlementOwner Paris = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = england
			faction_emerge france england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = georgia
			faction_emerge france georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Paris = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter rheims_riot = 1
		console_command create_building Rheims ros_target
		if I_SettlementOwner Rheims = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = england
			faction_emerge france england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = georgia
			faction_emerge france georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Rheims = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter clermont_riot = 1
		console_command create_building Clermont ros_target
		if I_SettlementOwner Clermont = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = england
			faction_emerge france england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = georgia
			faction_emerge france georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Clermont = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter angers_riot = 1
		console_command create_building Angers ros_target
		if I_SettlementOwner Angers = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = england
			faction_emerge france england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = georgia
			faction_emerge france georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Angers = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event france_emerged
	set_counter paris_riot 0
	set_counter rheims_riot 0
	set_counter clermont_riot 0
	set_counter angers_riot 0
	set_counter france_emerge 5
	add_money france 40000
  end_if

;HRE
  if I_CompareCounter faction_emerge_id = 9
	if I_CompareCounter frankfurt_riot = 0
		console_command create_building Frankfurt ros_po_bonus
	end_if
	if I_CompareCounter vienna_riot = 0
		console_command create_building Vienna ros_po_bonus
	end_if
	if I_CompareCounter prague_riot = 0
		console_command create_building Prague ros_po_bonus
	end_if
	if I_CompareCounter staufen_riot = 0
		console_command create_building Staufen ros_po_bonus
	end_if
	if I_CompareCounter nuremburg_riot = 0
		console_command create_building Nuremburg ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Frankfurt
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Vienna
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Prague
			faction hre
			character random_name, named character, age 30, x 182, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Staufen
			faction hre
			character random_name, named character, age 30, x 132, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nuremburg
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Frankfurt
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Vienna
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Prague
			faction hre
			character random_name, named character, age 30, x 182, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Staufen
			faction hre
			character random_name, named character, age 30, x 132, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nuremburg
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Frankfurt
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Vienna
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Prague
			faction hre
			character random_name, named character, age 30, x 182, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Staufen
			faction hre
			character random_name, named character, age 30, x 132, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nuremburg
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter frankfurt_riot = 1
		console_command create_building Frankfurt ros_target
		if I_SettlementOwner Frankfurt = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = georgia
			faction_emerge hre georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Frankfurt = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter vienna_riot = 1
		console_command create_building Vienna ros_target
		if I_SettlementOwner Vienna = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = georgia
			faction_emerge hre georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vienna = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter prague_riot = 1
		console_command create_building Prague ros_target
		if I_SettlementOwner Prague = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = georgia
			faction_emerge hre georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Prague = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter staufen_riot = 1
		console_command create_building Staufen ros_target
		if I_SettlementOwner Staufen = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = georgia
			faction_emerge hre georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Staufen = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter nuremburg_riot = 1
		console_command create_building Nuremburg ros_target
		if I_SettlementOwner Nuremburg = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = georgia
			faction_emerge hre georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nuremburg = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event hre_emerged
	set_counter frankfurt_riot 0
	set_counter vienna_riot 0
	set_counter prague_riot 0
	set_counter staufen_riot 0
	set_counter nuremburg_riot 0
	set_counter hre_emerge 5
	add_money hre 40000
  end_if

;England
  if I_CompareCounter faction_emerge_id = 10
	if I_CompareCounter london_riot = 0
		console_command create_building London ros_po_bonus
	end_if
	if I_CompareCounter nottingham_riot = 0
		console_command create_building Nottingham ros_po_bonus
	end_if
	if I_CompareCounter winchester_riot = 0
		console_command create_building Winchester ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; London
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nottingham
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Bristol
			faction england
			character random_name, named character, age 30, x 59, y 216, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; London
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nottingham
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Bristol
			faction england
			character random_name, named character, age 30, x 59, y 216, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; London
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			end
			spawn_army; Nottingham
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			end
			spawn_army; Bristol
			faction england
			character random_name, named character, age 30, x 59, y 216, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 2 weapon_lvl 0
			end
		end_if
	if I_CompareCounter london_riot = 1
		console_command create_building London ros_target
		if I_SettlementOwner London = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = france
			faction_emerge england france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = georgia
			faction_emerge england georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner London = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter nottingham_riot = 1
		console_command create_building Nottingham ros_target
		if I_SettlementOwner Nottingham = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = france
			faction_emerge england france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = georgia
			faction_emerge england georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nottingham = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter winchester_riot = 1
		console_command create_building Winchester ros_target
		if I_SettlementOwner Winchester = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = france
			faction_emerge england france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = georgia
			faction_emerge england georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Winchester = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event england_emerged
	set_counter london_riot 0
	set_counter nottingham_riot 0
	set_counter winchester_riot 0
	set_counter england_emerge 5
	add_money england 40000
  end_if

;Portugal/ZIRIDS
  if I_CompareCounter faction_emerge_id = 11
	if I_CompareCounter al_mahdiya_riot = 0
		console_command create_building Al-Mahdiya ros_po_bonus
	end_if
	if I_CompareCounter tunis_riot = 0
		console_command create_building Tunis ros_po_bonus
	end_if
	if I_EventCounter HEAVY_MAIL_ARMOR = 0
		spawn_army; Al-Mahdiya
		faction portugal
		character random_name, named character, age 30, x 156, y 100, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 1 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 0 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 0 weapon_lvl 0
		unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   Desert Archers		exp 0 armour 0 weapon_lvl 0
		unit   Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
		spawn_army; Tunis
		faction portugal
		character random_name, named character, age 30, x 151, y 108, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 1 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 0 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 0 weapon_lvl 0
		unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit   Desert Archers		exp 0 armour 0 weapon_lvl 0
		unit   Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
	and I_EventCounter HALF_PLATE_ARMOR = 0
		spawn_army; Al-Mahdiya
		faction portugal
		character random_name, named character, age 30, x 156, y 100, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 2 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 2 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Hashishim		exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
		spawn_army; Tunis
		faction portugal
		character random_name, named character, age 30, x 151, y 108, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 2 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 2 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Hashishim		exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 0 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
		spawn_army; Al-Mahdiya
		faction portugal
		character random_name, named character, age 30, x 156, y 100, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 1 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 2 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 2 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Hashishim		exp 1 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Archers	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Archers	exp 0 armour 0 weapon_lvl 0
		end
		spawn_army; Tunis
		faction portugal
		character random_name, named character, age 30, x 151, y 108, family
		traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
		unit   ME Bodyguard		exp 2 armour 1 weapon_lvl 0
		unit   Arab Cavalry		exp 2 armour 2 weapon_lvl 0
		unit   Arab Cavalry		exp 1 armour 2 weapon_lvl 0
		unit   Desert Cavalry		exp 1 armour 1 weapon_lvl 0
		unit   Hashishim		exp 1 armour 0 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Spearmen	exp 0 armour 1 weapon_lvl 0
		unit   ME Crossbow Militia	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Archers	exp 0 armour 1 weapon_lvl 0
		unit   ME Heavy Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_CompareCounter al_mahdiya_riot = 1
		console_command create_building Al-Mahdiya ros_target
		if I_SettlementOwner Al-Mahdiya = venice
			faction_emerge portugal venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = sicily
			faction_emerge portugal sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = milan
			faction_emerge portugal milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = denmark
			faction_emerge portugal denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = egypt
			faction_emerge portugal egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = cumans
			faction_emerge portugal cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = turks
			faction_emerge portugal turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = scotland
			faction_emerge portugal scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = hre
			faction_emerge portugal hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = england
			faction_emerge portugal england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = france
			faction_emerge portugal france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = poland
			faction_emerge portugal poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = byzantium
			faction_emerge portugal byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = moors
			faction_emerge portugal moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = russia
			faction_emerge portugal russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = spain
			faction_emerge portugal spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = hungary
			faction_emerge portugal hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = aragon
			faction_emerge portugal aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = lithuania
			faction_emerge portugal lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = kievan_rus
			faction_emerge portugal kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = norway
			faction_emerge portugal norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = jerusalem
			faction_emerge portugal jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = kwarezm
			faction_emerge portugal kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = papal_states
			faction_emerge portugal papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = mongols
			faction_emerge portugal mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = teutonic_order
			faction_emerge portugal teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = timurids
			faction_emerge portugal timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = georgia
			faction_emerge portugal georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Al-Mahdiya = slave
			faction_emerge portugal slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter tunis_riot = 1
		console_command create_building Tunis ros_target
		if I_SettlementOwner Tunis = venice
			faction_emerge portugal venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = sicily
			faction_emerge portugal sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = milan
			faction_emerge portugal milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = denmark
			faction_emerge portugal denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = egypt
			faction_emerge portugal egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = cumans
			faction_emerge portugal cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = turks
			faction_emerge portugal turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = scotland
			faction_emerge portugal scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = hre
			faction_emerge portugal hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = england
			faction_emerge portugal england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = france
			faction_emerge portugal france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = poland
			faction_emerge portugal poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = byzantium
			faction_emerge portugal byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = moors
			faction_emerge portugal moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = russia
			faction_emerge portugal russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = spain
			faction_emerge portugal spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = hungary
			faction_emerge portugal hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = aragon
			faction_emerge portugal aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = lithuania
			faction_emerge portugal lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = kievan_rus
			faction_emerge portugal kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = norway
			faction_emerge portugal norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = jerusalem
			faction_emerge portugal jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = kwarezm
			faction_emerge portugal kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = papal_states
			faction_emerge portugal papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = mongols
			faction_emerge portugal mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = teutonic_order
			faction_emerge portugal teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = timurids
			faction_emerge portugal timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = georgia
			faction_emerge portugal georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tunis = slave
			faction_emerge portugal slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event zirids_emerged
	set_counter al_mahdiya_riot 0
	set_counter tunis_riot 0
	set_counter portugal_emerge 5
	add_money portugal 40000
  end_if

;Poland
  if I_CompareCounter faction_emerge_id = 12
	if I_CompareCounter krakow_riot = 0
		console_command create_building Krakow ros_po_bonus
	end_if
	if I_CompareCounter poznan_riot = 0
		console_command create_building Khiva ros_po_bonus
	end_if
	if I_CompareCounter plock_riot = 0
		console_command create_building Plock ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Krakow
			faction poland
			character random_name, named character, age 30, x 221, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Poznan
			faction poland
			character random_name, named character, age 30, x 199, y 222, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Plock
			faction poland
			character random_name, named character, age 30, x 220, y 224, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Krakow
			faction poland
			character random_name, named character, age 30, x 221, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Poznan
			faction poland
			character random_name, named character, age 30, x 199, y 222, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Plock
			faction poland
			character random_name, named character, age 30, x 220, y 224, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Krakow
			faction poland
			character random_name, named character, age 30, x 221, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Poznan
			faction poland
			character random_name, named character, age 30, x 199, y 222, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Plock
			faction poland
			character random_name, named character, age 30, x 220, y 224, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
	if I_CompareCounter krakow_riot = 1
		console_command create_building Krakow ros_target
		if I_SettlementOwner Krakow = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = georgia
			faction_emerge poland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Krakow = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter poznan_riot = 1
		console_command create_building Khiva ros_target
		if I_SettlementOwner Khiva = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = georgia
			faction_emerge poland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Khiva = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter plock_riot = 1
		console_command create_building Plock ros_target
		if I_SettlementOwner Plock = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = georgia
			faction_emerge poland georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Plock = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event poland_emerged
	set_counter krakow_riot 0
	set_counter poznan_riot 0
	set_counter plock_riot 0
	set_counter poland_emerge 5
	add_money poland 40000
  end_if

;Byzantium
  if I_CompareCounter faction_emerge_id = 13
	if I_CompareCounter constantinople_riot = 0
		console_command create_building Constantinople ros_po_bonus
	end_if
	if I_CompareCounter nicaea_riot = 0
		console_command create_building Nicaea ros_po_bonus
	end_if
	if I_CompareCounter arta_riot = 0
		console_command create_building Arta ros_po_bonus
	end_if
	if I_CompareCounter trebizond_riot = 0
		console_command create_building Trebizond ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Constantinople
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nicaea
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Athens
			faction byzantium
			character random_name, named character, age 30, x 248, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Arta
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Trebizond
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Constantinople
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nicaea
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Athens
			faction byzantium
			character random_name, named character, age 30, x 248, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Arta
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Trebizond
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Constantinople
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Nicaea
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Athens
			faction byzantium
			character random_name, named character, age 30, x 248, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Arta
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Trebizond
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi Swordsmen		exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter constantinople_riot = 1
		console_command create_building Constantinople ros_target
		if I_SettlementOwner Constantinople = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = georgia
			faction_emerge byzantium georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Constantinople = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter nicaea_riot = 1
		console_command create_building Nicaea ros_target
		if I_SettlementOwner Nicaea = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = georgia
			faction_emerge byzantium georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicaea = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter arta_riot = 1
		console_command create_building Arta ros_target
		if I_SettlementOwner Arta = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = georgia
			faction_emerge byzantium georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Arta = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter trebizond_riot = 1
		console_command create_building Trebizond ros_target
		if I_SettlementOwner Trebizond = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = georgia
			faction_emerge byzantium georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Trebizond = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event byzantium_emerged
	set_counter constantinople_riot 0
	set_counter nicaea_riot 0
	set_counter arta_riot 0
	set_counter trebizond_riot 0
	set_counter byzantium_emerge 5
	add_money byzantium 40000
  end_if

;Moors
  if I_CompareCounter faction_emerge_id = 14
	if I_CompareCounter marrakesh_riot = 0
		console_command create_building Marrakesh ros_po_bonus
	end_if
	if I_CompareCounter fes_riot = 0
		console_command create_building Fes ros_po_bonus
	end_if
	if I_CompareCounter melilla_riot = 0
		console_command create_building Melilla ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Marrakesh
			faction moors
			character random_name, named character, age 30, x 21, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Fes
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Tlemcen (previously Melilla)
			faction moors
			character random_name, named character, age 30, x 66, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Marrakesh
			faction moors
			character random_name, named character, age 30, x 21, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Fes
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Tlemcen (previously Melilla)
			faction moors
			character random_name, named character, age 30, x 66, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Marrakesh
			faction moors
			character random_name, named character, age 30, x 21, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Fes
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Tlemcen (previously Melilla)
			faction moors
			character random_name, named character, age 30, x 66, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter marrakesh_riot = 1
		console_command create_building Marrakesh ros_target
		if I_SettlementOwner Marrakesh = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = georgia
			faction_emerge moors georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Marrakesh = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter fes_riot = 1
		console_command create_building Fes ros_target
		if I_SettlementOwner Fes = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = georgia
			faction_emerge moors georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Fes = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter melilla_riot = 1
		console_command create_building Melilla ros_target
		if I_SettlementOwner Melilla = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = georgia
			faction_emerge moors georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Melilla = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event moors_emerged
	set_counter marrakesh_riot 0
	set_counter fes_riot 0
	set_counter melilla_riot 0
	set_counter moors_emerge 5
	add_money moors 40000
  end_if

;Russia/Novgorod
  if I_CompareCounter faction_emerge_id = 15
	if I_CompareCounter novgorod_riot = 0
		console_command create_building Novgorod ros_po_bonus
	end_if
	if I_CompareCounter novgorod_riot = 1
		console_command create_building Novgorod ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction russia
			character random_name, named character, age 30, x 301, y 265, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction russia
			character random_name, named character, age 30, x 301, y 265, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction russia
			character random_name, named character, age 30, x 301, y 265, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Novgorod = venice
			faction_emerge russia venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = sicily
			faction_emerge russia sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = milan
			faction_emerge russia milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = denmark
			faction_emerge russia denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = egypt
			faction_emerge russia egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = cumans
			faction_emerge russia cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = turks
			faction_emerge russia turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = scotland
			faction_emerge russia scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = hre
			faction_emerge russia hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = england
			faction_emerge russia england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = portugal
			faction_emerge russia portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = poland
			faction_emerge russia poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = byzantium
			faction_emerge russia byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = moors
			faction_emerge russia moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = france
			faction_emerge russia france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = spain
			faction_emerge russia spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = hungary
			faction_emerge russia hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = aragon
			faction_emerge russia aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = lithuania
			faction_emerge russia lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = kievan_rus
			faction_emerge russia kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = norway
			faction_emerge russia norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = jerusalem
			faction_emerge russia jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = kwarezm
			faction_emerge russia kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = papal_states
			faction_emerge russia papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = mongols
			faction_emerge russia mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = teutonic_order
			faction_emerge russia teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = timurids
			faction_emerge russia timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = georgia
			faction_emerge russia georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Novgorod = slave
			faction_emerge russia slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event russia_emerged
	set_counter novgorod_riot 0
	set_counter russia_emerge 5
	add_money russia 40000
  end_if

;Spain/Leon
  if I_CompareCounter faction_emerge_id = 16
	if I_CompareCounter leon_riot = 0
		console_command create_building Leon ros_po_bonus
	end_if
	if I_CompareCounter toledo_riot = 0
		console_command create_building Toledo ros_po_bonus
	end_if
	if I_CompareCounter salamanca_riot = 0
		console_command create_building Salamanca ros_po_bonus
	end_if
	if I_CompareCounter burgos_riot = 0
		console_command create_building Burgos ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Leon
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Toledo
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Santiago
			faction spain
			character random_name, named character, age 30, x 16, y 155, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Burgos
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Leon
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Toledo
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Santiago
			faction spain
			character random_name, named character, age 30, x 16, y 155, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Burgos
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Leon
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Toledo
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Santiago
			faction spain
			character random_name, named character, age 30, x 16, y 155, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Burgos
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter leon_riot = 1
		console_command create_building Leon ros_target
		if I_SettlementOwner Leon = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = georgia
			faction_emerge spain georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Leon = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter toledo_riot = 1
		console_command create_building Toledo ros_target
		if I_SettlementOwner Toledo = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = georgia
			faction_emerge spain georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Toledo = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter salamanca_riot = 1
		console_command create_building Salamanca ros_target
		if I_SettlementOwner Salamanca = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = georgia
			faction_emerge spain georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Salamanca = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter burgos_riot = 1
		console_command create_building Burgos ros_target
		if I_SettlementOwner Burgos = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = georgia
			faction_emerge spain georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Burgos = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event spain_emerged
	set_counter leon_riot 0
	set_counter toledo_riot 0
	set_counter salamanca_riot 0
	set_counter burgos_riot 0
	set_counter spain_emerge 5
	add_money spain 40000
  end_if

;Hungary;Hungary
  if I_CompareCounter faction_emerge_id = 17
	if I_CompareCounter varad_riot = 0
		console_command create_building Varad ros_po_bonus
	end_if
	if I_CompareCounter esztergom_riot = 0
		console_command create_building Esztergom ros_po_bonus
	end_if
	if I_CompareCounter kassa_riot = 0
		console_command create_building Kassa ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army ; Varad
			faction hungary
			character random_name, named character, age 30, x 234, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Esztergom
			faction hungary
			character random_name, named character, age 30, x 212, y 190, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Kassa
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Varad
			faction hungary
			character random_name, named character, age 30, x 234, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Esztergom
			faction hungary
			character random_name, named character, age 30, x 212, y 190, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Kassa
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Varad
			faction hungary
			character random_name, named character, age 30, x 234, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Esztergom
			faction hungary
			character random_name, named character, age 30, x 212, y 190, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Kassa
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter varad_riot = 1
		console_command create_building Varad ros_target
		if I_SettlementOwner Varad = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = georgia
			faction_emerge hungary georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Varad = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter esztergom_riot = 1
		console_command create_building Esztergom ros_target
		if I_SettlementOwner Esztergom = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = georgia
			faction_emerge hungary georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Esztergom = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter kassa_riot = 1
		console_command create_building Kassa ros_target
		if I_SettlementOwner Kassa = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = georgia
			faction_emerge hungary georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kassa = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event hungary_emerged
	set_counter varad_riot 0
	set_counter esztergom_riot 0
	set_counter kassa_riot 0
	set_counter hungary_emerge 5
	add_money hungary 40000
  end_if

;Aragon
  if I_CompareCounter faction_emerge_id = 18
	if I_CompareCounter zaragoza_riot = 0
		console_command create_building Zaragoza ros_po_bonus
	end_if
	if I_CompareCounter pamplona_riot = 0
		console_command create_building Pamplona ros_po_bonus
	end_if
	if I_CompareCounter barcelona_riot = 0
		console_command create_building Barcelona ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Zaragoza
			faction aragon
			character random_name, named character, age 30, x 71, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Pamplona
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Barcelona
			faction aragon
			character random_name, named character, age 30, x 94, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Zaragoza
			faction aragon
			character random_name, named character, age 30, x 71, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Pamplona
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Barcelona
			faction aragon
			character random_name, named character, age 30, x 94, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Zaragoza
			faction aragon
			character random_name, named character, age 30, x 71, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Pamplona
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Barcelona
			faction aragon
			character random_name, named character, age 30, x 94, y 145, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter zaragoza_riot = 1
		console_command create_building Zaragoza ros_target
		if I_SettlementOwner Zaragoza = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = georgia
			faction_emerge aragon georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Zaragoza = slave
			faction_emerge aragon slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter pamplona_riot = 1
		console_command create_building Pamplona ros_target
		if I_SettlementOwner Pamplona = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = georgia
			faction_emerge aragon georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Pamplona = slave
			faction_emerge aragon slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter barcelona_riot = 1
		console_command create_building Barcelona ros_target
		if I_SettlementOwner Barcelona = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = georgia
			faction_emerge aragon georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Barcelona = slave
			faction_emerge aragon slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event aragon_emerged
	set_counter zaragoza_riot 0
	set_counter pamplona_riot 0
	set_counter barcelona_riot 0
	set_counter aragon_emerge 5
	add_money aragon 40000
  end_if

;Lithuania
  if I_CompareCounter faction_emerge_id = 19
	if I_CompareCounter vilnius_riot = 0
		console_command create_building Vilnius ros_po_bonus
	end_if
	if I_CompareCounter lubeck_riot = 0
		console_command create_building Damghan ros_po_bonus
	end_if
	if I_CompareCounter vilnius_riot = 1
		console_command create_building Vilnius ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 257, y 240, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 250, y 242, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 257, y 240, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 250, y 242, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 257, y 240, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 2 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 250, y 242, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 2 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Vilnius = venice
			faction_emerge lithuania venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = sicily
			faction_emerge lithuania sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = milan
			faction_emerge lithuania milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = denmark
			faction_emerge lithuania denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = egypt
			faction_emerge lithuania egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = cumans
			faction_emerge lithuania cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = turks
			faction_emerge lithuania turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = scotland
			faction_emerge lithuania scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = hre
			faction_emerge lithuania hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = england
			faction_emerge lithuania england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = portugal
			faction_emerge lithuania portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = poland
			faction_emerge lithuania poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = byzantium
			faction_emerge lithuania byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = moors
			faction_emerge lithuania moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = russia
			faction_emerge lithuania russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = spain
			faction_emerge lithuania spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = hungary
			faction_emerge lithuania hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = aragon
			faction_emerge lithuania aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = france
			faction_emerge lithuania france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = kievan_rus
			faction_emerge lithuania kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = norway
			faction_emerge lithuania norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = jerusalem
			faction_emerge lithuania jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = kwarezm
			faction_emerge lithuania kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = papal_states
			faction_emerge lithuania papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = mongols
			faction_emerge lithuania mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = teutonic_order
			faction_emerge lithuania teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = timurids
			faction_emerge lithuania timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = georgia
			faction_emerge lithuania georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Vilnius = slave
			faction_emerge lithuania slave 1 400.0 0.0 1.2 town true
		end_if
		historic_event lithuania_emerged
		set_counter vilnius_riot 0
	end_if
	if I_CompareCounter lubeck_riot = 1
		console_command create_building Damghan ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 155, y 232, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 154, y 231, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 155, y 232, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 154, y 231, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 155, y 232, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 2 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 154, y 231, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 2 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Damghan = venice
			faction_emerge lithuania venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = sicily
			faction_emerge lithuania sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = milan
			faction_emerge lithuania milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = denmark
			faction_emerge lithuania denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = egypt
			faction_emerge lithuania egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = cumans
			faction_emerge lithuania cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = turks
			faction_emerge lithuania turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = scotland
			faction_emerge lithuania scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = hre
			faction_emerge lithuania hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = england
			faction_emerge lithuania england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = portugal
			faction_emerge lithuania portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = poland
			faction_emerge lithuania poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = byzantium
			faction_emerge lithuania byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = moors
			faction_emerge lithuania moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = russia
			faction_emerge lithuania russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = spain
			faction_emerge lithuania spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = hungary
			faction_emerge lithuania hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = aragon
			faction_emerge lithuania aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = france
			faction_emerge lithuania france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = kievan_rus
			faction_emerge lithuania kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = norway
			faction_emerge lithuania norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = jerusalem
			faction_emerge lithuania jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = kwarezm
			faction_emerge lithuania kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = papal_states
			faction_emerge lithuania papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = mongols
			faction_emerge lithuania mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = teutonic_order
			faction_emerge lithuania teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = timurids
			faction_emerge lithuania timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = georgia
			faction_emerge lithuania georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damghan = slave
			faction_emerge lithuania slave 1 400.0 0.0 1.2 town true
		end_if
		historic_event obotrites_emerged
		set_counter lubeck_riot 0
	end_if
	set_counter lithuania_emerge 5
	add_money lithuania 40000
  end_if

;Kievan Rus
  if I_CompareCounter faction_emerge_id = 20
	if I_CompareCounter kiev_riot = 0
		console_command create_building Kiev ros_po_bonus
	end_if
	if I_CompareCounter kiev_riot = 1
		console_command create_building Kiev ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 296, y 210, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 295, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 296, y 210, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 295, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 296, y 210, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 295, y 207, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Kiev = venice
			faction_emerge kievan_rus venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = sicily
			faction_emerge kievan_rus sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = milan
			faction_emerge kievan_rus milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = denmark
			faction_emerge kievan_rus denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = egypt
			faction_emerge kievan_rus egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = cumans
			faction_emerge kievan_rus cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = turks
			faction_emerge kievan_rus turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = scotland
			faction_emerge kievan_rus scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = hre
			faction_emerge kievan_rus hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = england
			faction_emerge kievan_rus england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = portugal
			faction_emerge kievan_rus portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = poland
			faction_emerge kievan_rus poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = byzantium
			faction_emerge kievan_rus byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = moors
			faction_emerge kievan_rus moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = russia
			faction_emerge kievan_rus russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = spain
			faction_emerge kievan_rus spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = hungary
			faction_emerge kievan_rus hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = aragon
			faction_emerge kievan_rus aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = lithuania
			faction_emerge kievan_rus lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = kievan_rus
			faction_emerge kievan_rus france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = norway
			faction_emerge kievan_rus norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = jerusalem
			faction_emerge kievan_rus jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = kwarezm
			faction_emerge kievan_rus kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = papal_states
			faction_emerge kievan_rus papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = mongols
			faction_emerge kievan_rus mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = teutonic_order
			faction_emerge kievan_rus teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = timurids
			faction_emerge kievan_rus timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = georgia
			faction_emerge kievan_rus georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kiev = slave
			faction_emerge kievan_rus slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event kievan_rus_emerged
	set_counter kiev_riot 0
	set_counter kievan_rus_emerge 5
	add_money kievan_rus 40000
  end_if

;Norway
  if I_CompareCounter faction_emerge_id = 21
	if I_CompareCounter bergen_riot = 0
		console_command create_building Bergen ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Bergen
			faction norway
			character random_name, named character, age 30, x 117, y 280, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Gotland Footmen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Eikundarsund
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Gotland Footmen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Bergen
			faction norway
			character random_name, named character, age 30, x 117, y 280, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Eikundarsund
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Bergen
			faction norway
			character random_name, named character, age 30, x 117, y 280, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Eikundarsund
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter bergen_riot = 1
		console_command create_building Bergen ros_target
		if I_SettlementOwner Bergen = venice
			faction_emerge norway venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = sicily
			faction_emerge norway sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = milan
			faction_emerge norway milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = denmark
			faction_emerge norway denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = egypt
			faction_emerge norway egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = cumans
			faction_emerge norway cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = turks
			faction_emerge norway turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = scotland
			faction_emerge norway scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = hre
			faction_emerge norway hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = england
			faction_emerge norway england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = portugal
			faction_emerge norway portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = poland
			faction_emerge norway poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = byzantium
			faction_emerge norway byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = moors
			faction_emerge norway moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = russia
			faction_emerge norway russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = spain
			faction_emerge norway spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = hungary
			faction_emerge norway hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = aragon
			faction_emerge norway aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = lithuania
			faction_emerge norway lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = kievan_rus
			faction_emerge norway kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = france
			faction_emerge norway france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = jerusalem
			faction_emerge norway jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = kwarezm
			faction_emerge norway kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = papal_states
			faction_emerge norway papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = mongols
			faction_emerge norway mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = teutonic_order
			faction_emerge norway teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = timurids
			faction_emerge norway timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = georgia
			faction_emerge norway georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Bergen = slave
			faction_emerge norway slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event norway_emerged
	set_counter bergen_riot 0
	set_counter norway_emerge 5
	add_money norway 40000
  end_if

;Kwarezm
  if I_CompareCounter faction_emerge_id = 23
	if I_CompareCounter urgench_riot = 0
		console_command create_building Urgench ros_po_bonus
	end_if
	if I_CompareCounter konjikala_riot = 0
		console_command create_building Konjikala ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Urgench
			faction kwarezm
			character random_name, named character, age 30, x 503, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Khiva
			faction kwarezm
			character random_name, named character, age 30, x 505, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Konjikala
			faction kwarezm
			character random_name, named character, age 30, x 497, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Urgench
			faction kwarezm
			character random_name, named character, age 30, x 503, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Khiva
			faction kwarezm
			character random_name, named character, age 30, x 505, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Konjikala
			faction kwarezm
			character random_name, named character, age 30, x 497, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Urgench
			faction kwarezm
			character random_name, named character, age 30, x 503, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Khiva
			faction kwarezm
			character random_name, named character, age 30, x 505, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Konjikala
			faction kwarezm
			character random_name, named character, age 30, x 497, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
		end_if
	if I_CompareCounter urgench_riot = 1
		console_command create_building Urgench ros_target
		if I_SettlementOwner Urgench = venice
			faction_emerge kwarezm venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = sicily
			faction_emerge kwarezm sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = milan
			faction_emerge kwarezm milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = denmark
			faction_emerge kwarezm denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = egypt
			faction_emerge kwarezm egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = cumans
			faction_emerge kwarezm cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = turks
			faction_emerge kwarezm turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = scotland
			faction_emerge kwarezm scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = hre
			faction_emerge kwarezm hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = england
			faction_emerge kwarezm england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = portugal
			faction_emerge kwarezm portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = poland
			faction_emerge kwarezm poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = byzantium
			faction_emerge kwarezm byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = moors
			faction_emerge kwarezm moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = russia
			faction_emerge kwarezm russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = spain
			faction_emerge kwarezm spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = hungary
			faction_emerge kwarezm hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = aragon
			faction_emerge kwarezm aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = lithuania
			faction_emerge kwarezm lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = kievan_rus
			faction_emerge kwarezm kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = norway
			faction_emerge kwarezm norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = jerusalem
			faction_emerge kwarezm jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = france
			faction_emerge kwarezm france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = papal_states
			faction_emerge kwarezm papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = mongols
			faction_emerge kwarezm mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = teutonic_order
			faction_emerge kwarezm teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = timurids
			faction_emerge kwarezm timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = georgia
			faction_emerge kwarezm georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Urgench = slave
			faction_emerge kwarezm slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter konjikala_riot = 1
		console_command create_building Konjikala ros_target
		if I_SettlementOwner Konjikala = venice
			faction_emerge kwarezm venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = sicily
			faction_emerge kwarezm sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = milan
			faction_emerge kwarezm milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = denmark
			faction_emerge kwarezm denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = egypt
			faction_emerge kwarezm egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = cumans
			faction_emerge kwarezm cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = turks
			faction_emerge kwarezm turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = scotland
			faction_emerge kwarezm scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = hre
			faction_emerge kwarezm hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = england
			faction_emerge kwarezm england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = portugal
			faction_emerge kwarezm portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = poland
			faction_emerge kwarezm poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = byzantium
			faction_emerge kwarezm byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = moors
			faction_emerge kwarezm moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = russia
			faction_emerge kwarezm russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = spain
			faction_emerge kwarezm spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = hungary
			faction_emerge kwarezm hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = aragon
			faction_emerge kwarezm aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = lithuania
			faction_emerge kwarezm lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = kievan_rus
			faction_emerge kwarezm kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = norway
			faction_emerge kwarezm norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = jerusalem
			faction_emerge kwarezm jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = france
			faction_emerge kwarezm france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = papal_states
			faction_emerge kwarezm papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = mongols
			faction_emerge kwarezm mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = teutonic_order
			faction_emerge kwarezm teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = timurids
			faction_emerge kwarezm timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = georgia
			faction_emerge kwarezm georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Konjikala = slave
			faction_emerge kwarezm slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event kwarezm_emerged
	set_counter urgench_riot 0
	set_counter konjikala_riot 0
	set_counter kwarezm_emerge 5
	add_money kwarezm 40000
  end_if

;Egypt/Fatimids
  if I_CompareCounter faction_emerge_id = 23
	if I_CompareCounter cairo_riot = 0
		console_command create_building Cairo ros_po_bonus
	end_if
	if I_CompareCounter alexandria_riot = 0
		console_command create_building Alexandria ros_po_bonus
	end_if
	if I_CompareCounter damietta_riot = 0
		console_command create_building Damietta ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Cairo
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Alexandria
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Damietta
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Cairo
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Alexandria
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Damietta
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Cairo
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Alexandria
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Damietta
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter cairo_riot = 1
		console_command create_building Cairo ros_target
		if I_SettlementOwner Cairo = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = georgia
			faction_emerge egypt georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Cairo = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter alexandria_riot = 1
		console_command create_building Alexandria ros_target
		if I_SettlementOwner Alexandria = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = georgia
			faction_emerge egypt georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Alexandria = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter damietta_riot = 1
		console_command create_building Damietta ros_target
		if I_SettlementOwner Damietta = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = georgia
			faction_emerge egypt georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Damietta = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event egypt_emerged
	set_counter cairo_riot 0
	set_counter alexandria_riot 0
	set_counter damietta_riot 0
	set_counter egypt_emerge 5
	add_money egypt 40000
  end_if

;Jerusalem/Crusader States
  if I_CompareCounter faction_emerge_id = 24
	if I_CompareCounter nicosia_riot = 0
		console_command create_building Nicosia ros_po_bonus
	end_if
	if I_CompareCounter jerusalem_riot = 0
		console_command create_building Jerusalem ros_po_bonus
	end_if
	if I_CompareCounter acre_riot = 0
		console_command create_building Acre ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 30, x 332, y 84, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 21, x 330, y 82, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end
			
			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 30, x 329, y 74, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 21, x 330, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 326, y 76, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 30, x 332, y 84, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 21, x 330, y 82, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 30, x 329, y 74, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 21, x 330, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Knights of Jerusalem			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights of Jerusalem	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 326, y 76, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 30, x 332, y 84, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller				exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Acre
			faction jerusalem
			character random_name, named character, age 21, x 330, y 82, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller				exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 30, x 329, y 74, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller				exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army; Jerusalem
			faction jerusalem
			character random_name, named character, age 21, x 330, y 75, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 326, y 76, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter nicosia_riot = 1
		console_command create_building Nicosia ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 1 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard					exp 2 armour 1 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Knights Templar				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Templar		exp 1 armour 2 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Free Company Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Nicosia = venice
			faction_emerge jerusalem venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = sicily
			faction_emerge jerusalem sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = milan
			faction_emerge jerusalem milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = denmark
			faction_emerge jerusalem denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = scotland
			faction_emerge jerusalem scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = hre
			faction_emerge jerusalem hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = england
			faction_emerge jerusalem england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = portugal
			faction_emerge jerusalem portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = poland
			faction_emerge jerusalem poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = spain
			faction_emerge jerusalem spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = hungary
			faction_emerge jerusalem hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = aragon
			faction_emerge jerusalem aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = norway
			faction_emerge jerusalem norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = france
			faction_emerge jerusalem france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = papal_states
			faction_emerge jerusalem papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = teutonic_order
			faction_emerge jerusalem teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Nicosia = cumans
			faction_emerge jerusalem cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = egypt
			faction_emerge jerusalem egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = turks
			faction_emerge jerusalem turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = byzantium
			faction_emerge jerusalem byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = moors
			faction_emerge jerusalem moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = russia
			faction_emerge jerusalem russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = lithuania
			faction_emerge jerusalem lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = kievan_rus
			faction_emerge jerusalem kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = kwarezm
			faction_emerge jerusalem kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = mongols
			faction_emerge jerusalem mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = timurids
			faction_emerge jerusalem timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = georgia
			faction_emerge jerusalem georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Nicosia = slave
			faction_emerge jerusalem slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter jerusalem_riot = 1
		console_command create_building Jerusalem ros_target
		if I_SettlementOwner Jerusalem = venice
			faction_emerge jerusalem venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = sicily
			faction_emerge jerusalem sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = milan
			faction_emerge jerusalem milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = denmark
			faction_emerge jerusalem denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = scotland
			faction_emerge jerusalem scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = hre
			faction_emerge jerusalem hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = england
			faction_emerge jerusalem england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = portugal
			faction_emerge jerusalem portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = poland
			faction_emerge jerusalem poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = spain
			faction_emerge jerusalem spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = hungary
			faction_emerge jerusalem hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = aragon
			faction_emerge jerusalem aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = norway
			faction_emerge jerusalem norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = france
			faction_emerge jerusalem france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = papal_states
			faction_emerge jerusalem papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = teutonic_order
			faction_emerge jerusalem teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Jerusalem = cumans
			faction_emerge jerusalem cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = egypt
			faction_emerge jerusalem egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = turks
			faction_emerge jerusalem turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = byzantium
			faction_emerge jerusalem byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = moors
			faction_emerge jerusalem moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = russia
			faction_emerge jerusalem russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = lithuania
			faction_emerge jerusalem lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = kievan_rus
			faction_emerge jerusalem kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = kwarezm
			faction_emerge jerusalem kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = mongols
			faction_emerge jerusalem mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = timurids
			faction_emerge jerusalem timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = georgia
			faction_emerge jerusalem georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Jerusalem = slave
			faction_emerge jerusalem slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter acre_riot = 1
		console_command create_building Acre ros_target
		if I_SettlementOwner Acre = venice
			faction_emerge jerusalem venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = sicily
			faction_emerge jerusalem sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = milan
			faction_emerge jerusalem milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = denmark
			faction_emerge jerusalem denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = scotland
			faction_emerge jerusalem scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = hre
			faction_emerge jerusalem hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = england
			faction_emerge jerusalem england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = portugal
			faction_emerge jerusalem portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = poland
			faction_emerge jerusalem poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = spain
			faction_emerge jerusalem spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = hungary
			faction_emerge jerusalem hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = aragon
			faction_emerge jerusalem aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = norway
			faction_emerge jerusalem norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = france
			faction_emerge jerusalem france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = papal_states
			faction_emerge jerusalem papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = teutonic_order
			faction_emerge jerusalem teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Acre = cumans
			faction_emerge jerusalem cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = egypt
			faction_emerge jerusalem egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = turks
			faction_emerge jerusalem turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = byzantium
			faction_emerge jerusalem byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = moors
			faction_emerge jerusalem moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = russia
			faction_emerge jerusalem russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = lithuania
			faction_emerge jerusalem lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = kievan_rus
			faction_emerge jerusalem kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = kwarezm
			faction_emerge jerusalem kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = mongols
			faction_emerge jerusalem mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = timurids
			faction_emerge jerusalem timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = georgia
			faction_emerge jerusalem georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Acre = slave
			faction_emerge jerusalem slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event jerusalem_emerged
	set_counter nicosia_riot 0
	set_counter jerusalem_riot 0
	set_counter acre_riot 0
	set_counter jerusalem_emerge 5
	add_money jerusalem 40000
  end_if

;Teutonic Order
  if I_CompareCounter faction_emerge_id = 25
	if I_CompareCounter thorn_riot = 0
		console_command create_building Thorn ros_po_bonus
	end_if
	if I_CompareCounter palanga_riot = 0
		console_command create_building Palanga ros_po_bonus
	end_if
	if I_CompareCounter riga_riot = 0
		console_command create_building Riga ros_po_bonus
	end_if
	if I_CompareCounter thorn_riot = 1
		console_command create_building Thorn ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 211, y 228, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 212, y 234, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 211, y 228, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 212, y 234, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Thorn = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Thorn = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = georgia
			faction_emerge teutonic_order georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Thorn = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter palanga_riot = 1
		console_command create_building Palanga ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 226, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 224, y 237, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 226, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 224, y 237, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Palanga = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Palanga = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = georgia
			faction_emerge teutonic_order georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Palanga = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter riga_riot = 1
		console_command create_building Riga ros_target
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 250, y 255, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 254, y 256, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 250, y 255, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 254, y 256, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Riga = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true
		end_if
		;
		if I_SettlementOwner Riga = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = georgia
			faction_emerge teutonic_order georgia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Riga = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event teutonic_order_emerged
	set_counter thorn_riot 0
	set_counter palanga_riot 0
	set_counter riga_riot 0
	set_counter teutonic_order_emerge 5
	add_money teutonic_order 40000
  end_if

;Abbasids
  if I_CompareCounter faction_emerge_id = 26
	if I_CompareCounter baghdad_riot = 0
		console_command create_building Baghdad ros_po_bonus
	end_if
	if I_CompareCounter basra_riot = 0
		console_command create_building Basra ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Baghdad
			faction timurids
			character random_name, named character, age 30, x 396, y 89, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Basra
			faction timurids
			character random_name, named character, age 30, x 419, y 66, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Baghdad
			faction timurids
			character random_name, named character, age 30, x 396, y 89, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkomans				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Basra
			faction timurids
			character random_name, named character, age 30, x 419, y 66, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkomans				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Baghdad
			faction timurids
			character random_name, named character, age 30, x 396, y 89, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Turkomans				exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Basra
			faction timurids
			character random_name, named character, age 30, x 419, y 66, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Turkomans				exp 0 armour 0 weapon_lvl 0
			end
		end_if
	if I_CompareCounter baghdad_riot = 1
		console_command create_building Baghdad ros_target
		if I_SettlementOwner Baghdad = venice
			faction_emerge timurids venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = sicily
			faction_emerge timurids sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = milan
			faction_emerge timurids milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = denmark
			faction_emerge timurids denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = egypt
			faction_emerge timurids egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = kwarezm
			faction_emerge timurids kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = cumans
			faction_emerge timurids cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = turks
			faction_emerge timurids turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = scotland
			faction_emerge timurids scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = hre
			faction_emerge timurids hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = england
			faction_emerge timurids england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = portugal
			faction_emerge timurids portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = poland
			faction_emerge timurids poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = byzantium
			faction_emerge timurids byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = moors
			faction_emerge timurids moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = russia
			faction_emerge timurids russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = spain
			faction_emerge timurids spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = hungary
			faction_emerge timurids hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = aragon
			faction_emerge timurids aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = lithuania
			faction_emerge timurids lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = kievan_rus
			faction_emerge timurids kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = norway
			faction_emerge timurids norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = jerusalem
			faction_emerge timurids jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = france
			faction_emerge timurids france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = papal_states
			faction_emerge timurids papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = mongols
			faction_emerge timurids mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = teutonic_order
			faction_emerge timurids teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Baghdad = slave
			faction_emerge timurids slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter basra_riot = 1
		console_command create_building Basra ros_target
		if I_SettlementOwner Basra = venice
			faction_emerge timurids venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = sicily
			faction_emerge timurids sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = milan
			faction_emerge timurids milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = denmark
			faction_emerge timurids denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = egypt
			faction_emerge timurids egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = kwarezm
			faction_emerge timurids kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = cumans
			faction_emerge timurids cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = turks
			faction_emerge timurids turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = scotland
			faction_emerge timurids scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = hre
			faction_emerge timurids hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = england
			faction_emerge timurids england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = portugal
			faction_emerge timurids portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = poland
			faction_emerge timurids poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = byzantium
			faction_emerge timurids byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = moors
			faction_emerge timurids moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = russia
			faction_emerge timurids russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = spain
			faction_emerge timurids spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = hungary
			faction_emerge timurids hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = aragon
			faction_emerge timurids aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = lithuania
			faction_emerge timurids lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = kievan_rus
			faction_emerge timurids kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = norway
			faction_emerge timurids norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = jerusalem
			faction_emerge timurids jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = france
			faction_emerge timurids france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = papal_states
			faction_emerge timurids papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = mongols
			faction_emerge timurids mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = teutonic_order
			faction_emerge timurids teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Basra = slave
			faction_emerge timurids slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event abbasids_emerged
	set_counter baghdad_riot 0
	set_counter basra_riot 0
	set_counter abbasids_emerge 5
	add_money timurids 40000
  end_if

;Georgia
  if I_CompareCounter faction_emerge_id = 27
	if I_CompareCounter kutaisi_riot = 0
		console_command create_building Kutaisi ros_po_bonus
	end_if
	if I_CompareCounter tbilisi_riot = 0
		console_command create_building Tbilisi ros_po_bonus
	end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 0
			spawn_army; Kutaisi
			faction georgia
			character random_name, named character, age 30, x 385, y 151, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 0 weapon_lvl 0
			unit   Azenuri Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Azenuri Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Azenuri Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Azenuri Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Tbilisi
			faction georgia
			character random_name, named character, age 30, x 400, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 0 weapon_lvl 0
			unit   Azenuri Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Azenuri Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Azenuri Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Azenuri Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HEAVY_MAIL_ARMOR = 1; Heavy Mail 1200
		and I_EventCounter HALF_PLATE_ARMOR = 0
			spawn_army; Kutaisi
			faction georgia
			character random_name, named character, age 30, x 385, y 151, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 0 weapon_lvl 0
			unit   Eristavi Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Eristavi		exp 1 armour 1 weapon_lvl 0
			unit   Azenuri Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			end
			spawn_army; Tbilisi
			faction georgia
			character random_name, named character, age 30, x 400, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 0 weapon_lvl 0
			unit   Eristavi Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Eristavi		exp 1 armour 1 weapon_lvl 0
			unit   Azenuri Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Pechenegs				exp 1 armour 0 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			unit   Metsikhovne Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_EventCounter HALF_PLATE_ARMOR = 1; Partial Plate 1300
			spawn_army; Kutaisi
			faction georgia
			character random_name, named character, age 30, x 385, y 151, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 2 weapon_lvl 0
			unit   Monaspa Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Monaspa Archers			exp 1 armour 2 weapon_lvl 0
			unit   Eristavi Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Eristavi		exp 1 armour 2 weapon_lvl 0
			unit   Azenuri Cavalry			exp 0 armour 2 weapon_lvl 0
			unit   Pechenegs				exp 0 armour 0 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			end
			spawn_army; Tbilisi
			faction georgia
			character random_name, named character, age 30, x 400, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 2 , Energetic 4 , ReligionStarter 1 , Intelligent 2
			unit   Royal Monaspa			exp 2 armour 2 weapon_lvl 0
			unit   Monaspa Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Monaspa Archers			exp 1 armour 2 weapon_lvl 0
			unit   Eristavi Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Eristavi		exp 1 armour 2 weapon_lvl 0
			unit   Azenuri Cavalry			exp 0 armour 2 weapon_lvl 0
			unit   Pechenegs				exp 0 armour 0 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   Tadzreuli				exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			end
		end_if
	if I_CompareCounter kutaisi_riot = 1
		console_command create_building Kutaisi ros_target
		if I_SettlementOwner Kutaisi = venice
			faction_emerge georgia venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = sicily
			faction_emerge georgia sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = milan
			faction_emerge georgia milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = denmark
			faction_emerge georgia denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = egypt
			faction_emerge georgia egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = kwarezm
			faction_emerge georgia kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = cumans
			faction_emerge georgia cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = turks
			faction_emerge georgia turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = scotland
			faction_emerge georgia scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = hre
			faction_emerge georgia hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = england
			faction_emerge georgia england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = portugal
			faction_emerge georgia portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = poland
			faction_emerge georgia poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = byzantium
			faction_emerge georgia byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = moors
			faction_emerge georgia moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = russia
			faction_emerge georgia russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = spain
			faction_emerge georgia spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = hungary
			faction_emerge georgia hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = aragon
			faction_emerge georgia aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = lithuania
			faction_emerge georgia lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = kievan_rus
			faction_emerge georgia kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = norway
			faction_emerge georgia norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = jerusalem
			faction_emerge georgia jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = france
			faction_emerge georgia france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = papal_states
			faction_emerge georgia papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = mongols
			faction_emerge georgia mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = teutonic_order
			faction_emerge georgia teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = timurids
			faction_emerge georgia timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Kutaisi = slave
			faction_emerge georgia slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	if I_CompareCounter tbilisi_riot = 1
		console_command create_building Tbilisi ros_target
		if I_SettlementOwner Tbilisi = venice
			faction_emerge georgia venice 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = sicily
			faction_emerge georgia sicily 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = milan
			faction_emerge georgia milan 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = denmark
			faction_emerge georgia denmark 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = egypt
			faction_emerge georgia egypt 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = kwarezm
			faction_emerge georgia kwarezm 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = cumans
			faction_emerge georgia cumans 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = turks
			faction_emerge georgia turks 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = scotland
			faction_emerge georgia scotland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = hre
			faction_emerge georgia hre 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = england
			faction_emerge georgia england 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = portugal
			faction_emerge georgia portugal 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = poland
			faction_emerge georgia poland 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = byzantium
			faction_emerge georgia byzantium 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = moors
			faction_emerge georgia moors 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = russia
			faction_emerge georgia russia 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = spain
			faction_emerge georgia spain 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = hungary
			faction_emerge georgia hungary 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = aragon
			faction_emerge georgia aragon 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = lithuania
			faction_emerge georgia lithuania 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = kievan_rus
			faction_emerge georgia kievan_rus 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = norway
			faction_emerge georgia norway 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = jerusalem
			faction_emerge georgia jerusalem 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = france
			faction_emerge georgia france 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = papal_states
			faction_emerge georgia papal_states 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = mongols
			faction_emerge georgia mongols 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = teutonic_order
			faction_emerge georgia teutonic_order 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = timurids
			faction_emerge georgia timurids 2 400.0 0.0 1.2 town true
		end_if
		if I_SettlementOwner Tbilisi = slave
			faction_emerge georgia slave 1 400.0 0.0 1.2 town true
		end_if
	end_if
	historic_event georgia_emerged
	set_counter kutaisi_riot 0
	set_counter tbilisi_riot 0
	set_counter georgia_emerge 5
	add_money georgia 40000
  end_if
  set_counter faction_emerge_id 0
;end_if
end_monitor

;--------------------------------------------------------------------------------
;---------------------Destroy PO Buildings, Reset Counter------------------------
;--------------------------------------------------------------------------------

;monitor_event PreFactionTurnStart I_CompareCounter turn_vlr = 1 ; For normalizing emerge counters every turn regardless if a faction emerged or not
;	set_counter turn_vlr 0
;	if I_CompareCounter ros_po_building = 1
monitor_event PreFactionTurnStart I_CompareCounter ros_po_building = 1
		destroy_buildings venice ros_temp_buildings false
		destroy_buildings sicily ros_temp_buildings false
		destroy_buildings milan ros_temp_buildings false
		destroy_buildings denmark ros_temp_buildings false
		destroy_buildings egypt ros_temp_buildings false
		destroy_buildings scotland ros_temp_buildings false
		destroy_buildings cumans ros_temp_buildings false
		destroy_buildings turks ros_temp_buildings false
		destroy_buildings france ros_temp_buildings false
		destroy_buildings hre ros_temp_buildings false
		destroy_buildings england ros_temp_buildings false
		destroy_buildings portugal ros_temp_buildings false
		destroy_buildings poland ros_temp_buildings false
		destroy_buildings byzantium ros_temp_buildings false
		destroy_buildings moors ros_temp_buildings false
		destroy_buildings russia ros_temp_buildings false
		destroy_buildings spain ros_temp_buildings false
		destroy_buildings hungary ros_temp_buildings false
		destroy_buildings aragon ros_temp_buildings false
		destroy_buildings lithuania ros_temp_buildings false
		destroy_buildings kievan_rus ros_temp_buildings false
		destroy_buildings norway ros_temp_buildings false
		destroy_buildings jerusalem ros_temp_buildings false
		destroy_buildings kwarezm ros_temp_buildings false
		destroy_buildings papal_states ros_temp_buildings false
		destroy_buildings mongols ros_temp_buildings false
		destroy_buildings teutonic_order ros_temp_buildings false
		destroy_buildings timurids ros_temp_buildings false
		destroy_buildings georgia ros_temp_buildings false
		destroy_buildings slave ros_temp_buildings false
		;Second swept as suggested by Withwnar
		destroy_buildings venice ros_temp_buildings false
		destroy_buildings sicily ros_temp_buildings false
		destroy_buildings milan ros_temp_buildings false
		destroy_buildings denmark ros_temp_buildings false
		destroy_buildings egypt ros_temp_buildings false
		destroy_buildings scotland ros_temp_buildings false
		destroy_buildings cumans ros_temp_buildings false
		destroy_buildings turks ros_temp_buildings false
		destroy_buildings france ros_temp_buildings false
		destroy_buildings hre ros_temp_buildings false
		destroy_buildings england ros_temp_buildings false
		destroy_buildings portugal ros_temp_buildings false
		destroy_buildings poland ros_temp_buildings false
		destroy_buildings byzantium ros_temp_buildings false
		destroy_buildings moors ros_temp_buildings false
		destroy_buildings russia ros_temp_buildings false
		destroy_buildings spain ros_temp_buildings false
		destroy_buildings hungary ros_temp_buildings false
		destroy_buildings aragon ros_temp_buildings false
		destroy_buildings lithuania ros_temp_buildings false
		destroy_buildings kievan_rus ros_temp_buildings false
		destroy_buildings norway ros_temp_buildings false
		destroy_buildings jerusalem ros_temp_buildings false
		destroy_buildings kwarezm ros_temp_buildings false
		destroy_buildings papal_states ros_temp_buildings false
		destroy_buildings mongols ros_temp_buildings false
		destroy_buildings teutonic_order ros_temp_buildings false
		destroy_buildings timurids ros_temp_buildings false
		destroy_buildings georgia ros_temp_buildings false
		destroy_buildings slave ros_temp_buildings false
		set_counter ros_po_building 0
	;end_if
	;Normalize emerge counters
		if I_CompareCounter scotland_emerge > 0
			inc_counter scotland_emerge -1
		end_if
		if I_CompareCounter venice_emerge > 0
			inc_counter venice_emerge -1
		end_if
		if I_CompareCounter sicily_emerge > 0
			inc_counter sicily_emerge -1
		end_if
		if I_CompareCounter milan_emerge > 0
			inc_counter milan_emerge -1
		end_if
		if I_CompareCounter denmark_emerge > 0
			inc_counter denmark_emerge -1
		end_if
		if I_CompareCounter cumans_emerge > 0
			inc_counter cumans_emerge -1
		end_if
		if I_CompareCounter turks_emerge > 0
			inc_counter turks_emerge -1
		end_if
		if I_CompareCounter france_emerge > 0
			inc_counter france_emerge -1
		end_if
		if I_CompareCounter hre_emerge > 0
			inc_counter hre_emerge -1
		end_if
		if I_CompareCounter england_emerge > 0
			inc_counter england_emerge -1
		end_if
		if I_CompareCounter portugal_emerge > 0
			inc_counter portugal_emerge -1
		end_if
		if I_CompareCounter poland_emerge > 0
			inc_counter poland_emerge -1
		end_if
		if I_CompareCounter byzantium_emerge > 0
			inc_counter byzantium_emerge -1
		end_if
		if I_CompareCounter moors_emerge > 0
			inc_counter moors_emerge -1
		end_if
		if I_CompareCounter russia_emerge > 0
			inc_counter russia_emerge -1
		end_if
		if I_CompareCounter spain_emerge > 0
			inc_counter spain_emerge -1
		end_if
		if I_CompareCounter hungary_emerge > 0
			inc_counter hungary_emerge -1
		end_if
		if I_CompareCounter aragon_emerge > 0
			inc_counter aragon_emerge -1
		end_if
		if I_CompareCounter lithuania_emerge > 0
			inc_counter lithuania_emerge -1
		end_if
		if I_CompareCounter kievan_rus_emerge > 0
			inc_counter kievan_rus_emerge -1
		end_if
		if I_CompareCounter norway_emerge > 0
			inc_counter norway_emerge -1
		end_if
		if I_CompareCounter kwarezm_emerge > 0
			inc_counter kwarezm_emerge -1
		end_if
		if I_CompareCounter egypt_emerge > 0
			inc_counter egypt_emerge -1
		end_if
		if I_CompareCounter jerusalem_emerge > 0
			inc_counter jerusalem_emerge -1
		end_if
		if I_CompareCounter teutonic_order_emerge > 0
			inc_counter teutonic_order_emerge -1
		end_if
		if I_CompareCounter abbasids_emerge > 0
			inc_counter abbasids_emerge -1
		end_if
		if I_CompareCounter georgia_emerge > 0
			inc_counter georgia_emerge -1
		end_if
end_monitor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;END OF RE-EMERGING FACTIONS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==================================================================================;
;-------------------------- Middle Eastern Princesses mod -------------------------;
;----------------- Faction Leader Religion Excomunication Script ------------------;
;==================================================================================;
monitor_event FactionTurnStart FactionType papal_states
	if I_FactionLeaderTrait venice Muslim = 1
	and I_FactionLeaderTrait venice Excommunication < 1
	and I_FactionLeaderTrait venice ExcommunicationJoke < 1
		set_faction_standing papal_states venice -1
	end_if
	if I_FactionLeaderTrait venice Pagan = 1
	and I_FactionLeaderTrait venice Excommunication < 1
	and I_FactionLeaderTrait venice ExcommunicationJoke < 1
		set_faction_standing papal_states venice -1
	end_if
	if I_FactionLeaderTrait venice Orthodox = 1
	and I_FactionLeaderTrait venice Excommunication < 1
	and I_FactionLeaderTrait venice ExcommunicationJoke < 1
		set_faction_standing papal_states venice -1
	end_if

	if I_FactionLeaderTrait sicily Muslim = 1
	and I_FactionLeaderTrait sicily Excommunication < 1
	and I_FactionLeaderTrait sicily ExcommunicationJoke < 1
		set_faction_standing papal_states sicily -1
	end_if
	if I_FactionLeaderTrait sicily Pagan = 1
	and I_FactionLeaderTrait sicily Excommunication < 1
	and I_FactionLeaderTrait sicily ExcommunicationJoke < 1
		set_faction_standing papal_states sicily -1
	end_if
	if I_FactionLeaderTrait sicily Orthodox = 1
	and I_FactionLeaderTrait sicily Excommunication < 1
	and I_FactionLeaderTrait sicily ExcommunicationJoke < 1
		set_faction_standing papal_states sicily -1
	end_if

	if I_FactionLeaderTrait milan Muslim = 1
	and I_FactionLeaderTrait milan Excommunication < 1
	and I_FactionLeaderTrait milan ExcommunicationJoke < 1
		set_faction_standing papal_states milan -1
	end_if
	if I_FactionLeaderTrait milan Pagan = 1
	and I_FactionLeaderTrait milan Excommunication < 1
	and I_FactionLeaderTrait milan ExcommunicationJoke < 1
		set_faction_standing papal_states milan -1
	end_if
	if I_FactionLeaderTrait milan Orthodox = 1
	and I_FactionLeaderTrait milan Excommunication < 1
	and I_FactionLeaderTrait milan ExcommunicationJoke < 1
		set_faction_standing papal_states milan -1
	end_if

	if I_FactionLeaderTrait france Muslim = 1
	and I_FactionLeaderTrait france Excommunication < 1
	and I_FactionLeaderTrait france ExcommunicationJoke < 1
		set_faction_standing papal_states france -1
	end_if
	if I_FactionLeaderTrait france Pagan = 1
	and I_FactionLeaderTrait france Excommunication < 1
	and I_FactionLeaderTrait france ExcommunicationJoke < 1
		set_faction_standing papal_states france -1
	end_if
	if I_FactionLeaderTrait france Orthodox = 1
	and I_FactionLeaderTrait france Excommunication < 1
	and I_FactionLeaderTrait france ExcommunicationJoke < 1
		set_faction_standing papal_states france -1
	end_if

	if I_FactionLeaderTrait hre Muslim = 1
	and I_FactionLeaderTrait hre Excommunication < 1
	and I_FactionLeaderTrait hre ExcommunicationJoke < 1
		set_faction_standing papal_states hre -1
	end_if
	if I_FactionLeaderTrait hre Pagan = 1
	and I_FactionLeaderTrait hre Excommunication < 1
	and I_FactionLeaderTrait hre ExcommunicationJoke < 1
		set_faction_standing papal_states hre -1
	end_if
	if I_FactionLeaderTrait hre Orthodox = 1
	and I_FactionLeaderTrait hre Excommunication < 1
	and I_FactionLeaderTrait hre ExcommunicationJoke < 1
		set_faction_standing papal_states hre -1
	end_if

	if I_FactionLeaderTrait england Muslim = 1
	and I_FactionLeaderTrait england Excommunication < 1
	and I_FactionLeaderTrait england ExcommunicationJoke < 1
		set_faction_standing papal_states england -1
	end_if
	if I_FactionLeaderTrait england Pagan = 1
	and I_FactionLeaderTrait england Excommunication < 1
	and I_FactionLeaderTrait england ExcommunicationJoke < 1
		set_faction_standing papal_states england -1
	end_if
	if I_FactionLeaderTrait england Orthodox = 1
	and I_FactionLeaderTrait england Excommunication < 1
	and I_FactionLeaderTrait england ExcommunicationJoke < 1
		set_faction_standing papal_states england -1
	end_if

	if I_FactionLeaderTrait scotland Muslim = 1
	and I_FactionLeaderTrait scotland Excommunication < 1
	and I_FactionLeaderTrait scotland ExcommunicationJoke < 1
		set_faction_standing papal_states scotland -1
	end_if
	if I_FactionLeaderTrait scotland Pagan = 1
	and I_FactionLeaderTrait scotland Excommunication < 1
	and I_FactionLeaderTrait scotland ExcommunicationJoke < 1
		set_faction_standing papal_states scotland -1
	end_if
	if I_FactionLeaderTrait scotland Orthodox = 1
	and I_FactionLeaderTrait scotland Excommunication < 1
	and I_FactionLeaderTrait scotland ExcommunicationJoke < 1
		set_faction_standing papal_states scotland -1
	end_if

	if I_FactionLeaderTrait denmark Muslim = 1
	and I_FactionLeaderTrait denmark Excommunication < 1
	and I_FactionLeaderTrait denmark ExcommunicationJoke < 1
		set_faction_standing papal_states denmark -1
	end_if
	if I_FactionLeaderTrait denmark Pagan = 1
	and I_FactionLeaderTrait denmark Excommunication < 1
	and I_FactionLeaderTrait denmark ExcommunicationJoke < 1
		set_faction_standing papal_states denmark -1
		set_counter excom_fl_denmark 1
	end_if
	if I_FactionLeaderTrait denmark Orthodox = 1
	and I_FactionLeaderTrait denmark Excommunication < 1
	and I_FactionLeaderTrait denmark ExcommunicationJoke < 1
		set_faction_standing papal_states denmark -1
	end_if

	if I_FactionLeaderTrait norway Muslim = 1
	and I_FactionLeaderTrait norway Excommunication < 1
	and I_FactionLeaderTrait norway ExcommunicationJoke < 1
		set_faction_standing papal_states norway -1
	end_if
	if I_FactionLeaderTrait norway Pagan = 1
	and I_FactionLeaderTrait norway Excommunication < 1
	and I_FactionLeaderTrait norway ExcommunicationJoke < 1
		set_faction_standing papal_states norway -1
	end_if
	if I_FactionLeaderTrait norway Orthodox = 1
	and I_FactionLeaderTrait norway Excommunication < 1
	and I_FactionLeaderTrait norway ExcommunicationJoke < 1
		set_faction_standing papal_states norway -1
	end_if

	if I_FactionLeaderTrait spain Muslim = 1
	and I_FactionLeaderTrait spain Excommunication < 1
	and I_FactionLeaderTrait spain ExcommunicationJoke < 1
		set_faction_standing papal_states spain -1
	end_if
	if I_FactionLeaderTrait spain Pagan = 1
	and I_FactionLeaderTrait spain Excommunication < 1
	and I_FactionLeaderTrait spain ExcommunicationJoke < 1
		set_faction_standing papal_states spain -1
	end_if
	if I_FactionLeaderTrait spain Orthodox = 1
	and I_FactionLeaderTrait spain Excommunication < 1
	and I_FactionLeaderTrait spain ExcommunicationJoke < 1
		set_faction_standing papal_states spain -1
	end_if

	if I_FactionLeaderTrait aragon Muslim = 1
	and I_FactionLeaderTrait aragon Excommunication < 1
	and I_FactionLeaderTrait aragon ExcommunicationJoke < 1
		set_faction_standing papal_states aragon -1
	end_if
	if I_FactionLeaderTrait aragon Pagan = 1
	and I_FactionLeaderTrait aragon Excommunication < 1
	and I_FactionLeaderTrait aragon ExcommunicationJoke < 1
		set_faction_standing papal_states aragon -1
	end_if
	if I_FactionLeaderTrait aragon Orthodox = 1
	and I_FactionLeaderTrait aragon Excommunication < 1
	and I_FactionLeaderTrait aragon ExcommunicationJoke < 1
		set_faction_standing papal_states aragon -1
	end_if

	if I_FactionLeaderTrait poland Muslim = 1
	and I_FactionLeaderTrait poland Excommunication < 1
	and I_FactionLeaderTrait poland ExcommunicationJoke < 1
		set_faction_standing papal_states poland -1
	end_if
	if I_FactionLeaderTrait poland Pagan = 1
	and I_FactionLeaderTrait poland Excommunication < 1
	and I_FactionLeaderTrait poland ExcommunicationJoke < 1
		set_faction_standing papal_states poland -1
	end_if
	if I_FactionLeaderTrait poland Orthodox = 1
	and I_FactionLeaderTrait poland Excommunication < 1
	and I_FactionLeaderTrait poland ExcommunicationJoke < 1
		set_faction_standing papal_states poland -1
	end_if

	if I_FactionLeaderTrait hungary Muslim = 1
	and I_FactionLeaderTrait hungary Excommunication < 1
	and I_FactionLeaderTrait hungary ExcommunicationJoke < 1
		set_faction_standing papal_states hungary -1
	end_if
	if I_FactionLeaderTrait hungary Pagan = 1
	and I_FactionLeaderTrait hungary Excommunication < 1
	and I_FactionLeaderTrait hungary ExcommunicationJoke < 1
		set_faction_standing papal_states hungary -1
	end_if
	if I_FactionLeaderTrait hungary Orthodox = 1
	and I_FactionLeaderTrait hungary Excommunication < 1
	and I_FactionLeaderTrait hungary ExcommunicationJoke < 1
		set_faction_standing papal_states hungary -1
	end_if

	if I_FactionLeaderTrait jerusalem Muslim = 1
	and I_FactionLeaderTrait jerusalem Excommunication < 1
	and I_FactionLeaderTrait jerusalem ExcommunicationJoke < 1
		set_faction_standing papal_states jerusalem -1
	end_if
	if I_FactionLeaderTrait jerusalem Pagan = 1
	and I_FactionLeaderTrait jerusalem Excommunication < 1
	and I_FactionLeaderTrait jerusalem ExcommunicationJoke < 1
		set_faction_standing papal_states jerusalem -1
	end_if
	if I_FactionLeaderTrait jerusalem Orthodox = 1
	and I_FactionLeaderTrait jerusalem Excommunication < 1
	and I_FactionLeaderTrait jerusalem ExcommunicationJoke < 1
		set_faction_standing papal_states jerusalem -1
	end_if

	;if I_FactionLeaderTrait teutonic_order Muslim = 1
	;and I_FactionLeaderTrait teutonic_order Excommunication < 1
	;and I_FactionLeaderTrait teutonic_order ExcommunicationJoke < 1
	;	set_faction_standing papal_states teutonic_order -1
	;end_if
	;if I_FactionLeaderTrait teutonic_order Pagan = 1
	;and I_FactionLeaderTrait teutonic_order Excommunication < 1
	;and I_FactionLeaderTrait teutonic_order ExcommunicationJoke < 1
	;	set_faction_standing papal_states teutonic_order -1
	;end_if
	;if I_FactionLeaderTrait teutonic_order Orthodox = 1
	;and I_FactionLeaderTrait teutonic_order Excommunication < 1
	;and I_FactionLeaderTrait teutonic_order ExcommunicationJoke < 1
	;	set_faction_standing papal_states teutonic_order -1
	;end_if

	if I_EventCounter lithuania_catholic = 1
		if I_FactionLeaderTrait lithuania Muslim = 1
		and I_FactionLeaderTrait lithuania Excommunication < 1
		and I_FactionLeaderTrait lithuania ExcommunicationJoke < 1
			set_faction_standing papal_states lithuania -1
		end_if
		if I_FactionLeaderTrait lithuania Pagan = 1
		and I_FactionLeaderTrait lithuania Excommunication < 1
		and I_FactionLeaderTrait lithuania ExcommunicationJoke < 1
			set_faction_standing papal_states lithuania -1
		end_if
		if I_FactionLeaderTrait lithuania Orthodox = 1
		and I_FactionLeaderTrait lithuania Excommunication < 1
		and I_FactionLeaderTrait lithuania ExcommunicationJoke < 1
			set_faction_standing papal_states lithuania -1
		end_if
	end_if
end_monitor

;==================================================================================;
;-------------------------- Religion Change Script -------------------------;
;==================================================================================;

declare_counter convert_lith_fl
declare_counter convert_lithuania
set_counter convert_lithuania 5
declare_counter lithuania_crusade_target
set_counter lithuania_crusade_target 0
monitor_event CrusadeEnds IsCrusade
	set_counter lithuania_crusade_target 0
end_monitor
monitor_event CrusadeCalled TargetFactionType lithuania
	and IsCrusade

	if I_EventCounter lithuania_catholic = 1 ;that is, lithuania excommunicated
		terminate_monitor
	end_if

	set_counter lithuania_crusade_target 1
end_monitor
monitor_event FactionTurnStart FactionType lithuania
	
	if I_EventCounter lithuania_catholic = 1
		terminate_monitor
	end_if
	
	inc_counter convert_lithuania 1
	
	if I_NumberOfSettlements lithuania > 3
	and I_CompareCounter lithuania_crusade_target = 0
	and I_FactionLeaderTrait lithuania Catholic >= 1
	and I_FactionLeaderAttribute lithuania Authority >= 7
	and I_CompareCounter convert_lithuania >= 5; asked every 5 turns at max
	and I_CompareCounter convert_lith_fl != 1; asked only once for each FL
		set_counter convert_lithuania 0
		set_counter convert_lith_fl 1
		if I_IsFactionAIControlled lithuania
		and RandomPercent > 50
			set_event_counter lithuania_conversion_accepted 1
			terminate_monitor
		end_if
		historic_event lithuania_conversion true factions { lithuania, }
	end_if
	
end_monitor
monitor_event EventCounter EventCounterType lithuania_conversion_accepted

	;Convert the people
	set_religion lithuania catholic
	change_population_religion lithuania catholic 40 pagan
	set_event_counter CatholicLithuania 1
	set_event_counter PaganLithuania 0
	
	;Destroy the pagan buildings
	destroy_buildings lithuania temple_dievas true
	destroy_buildings lithuania temple_dievas_castle true
	destroy_buildings lithuania temple_perkunas true
	destroy_buildings lithuania temple_perkunas_castle true
	destroy_buildings lithuania temple_giltine true
	destroy_buildings lithuania temple_giltine_castle true
	
	;Disband the pagan units
	retire_characters Lithuania priest

	;notify all factions that Lithuania has converted and become Catholic
	historic_event lithuania_catholic

	; change ai label
	if I_EventCounter DifficultyLevel >= 2
		link_faction_ai lithuania catholic
	end_if
	
	;Improve relations with the pope
	set_faction_standing papal_states lithuania 0.0 ; they still have to prove they're "good christians"
	
	terminate_monitor
end_monitor

;--- DIPLOMACY FACTION DESTROYED WORK AROUND ---
	declare_counter dead_diplomacy_venice
	declare_counter dead_diplomacy_sicily
	declare_counter dead_diplomacy_milan
	;declare_counter dead_diplomacy_papal_states ; teh pope always respawn
	declare_counter dead_diplomacy_denmark
	declare_counter dead_diplomacy_egypt
	declare_counter dead_diplomacy_scotland
	declare_counter dead_diplomacy_cumans
	declare_counter dead_diplomacy_mongols
	declare_counter dead_diplomacy_turks
	declare_counter dead_diplomacy_france
	declare_counter dead_diplomacy_hre
	declare_counter dead_diplomacy_england
	declare_counter dead_diplomacy_portugal
	declare_counter dead_diplomacy_poland
	declare_counter dead_diplomacy_byzantium
	declare_counter dead_diplomacy_moors
	declare_counter dead_diplomacy_russia
	declare_counter dead_diplomacy_spain
	declare_counter dead_diplomacy_hungary
	declare_counter dead_diplomacy_aragon
	declare_counter dead_diplomacy_lithuania
	declare_counter dead_diplomacy_kievan_rus
	declare_counter dead_diplomacy_teutonic_order
	declare_counter dead_diplomacy_timurids
	declare_counter dead_diplomacy_norway
	declare_counter dead_diplomacy_jerusalem
	declare_counter dead_diplomacy_kwarezm
	declare_counter dead_diplomacy_georgia
monitor_event FactionTurnEnd FactionType slave
	if I_NumberOfSettlements venice < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_venice != 1
		set_counter dead_diplomacy_venice 1
		console_command diplomatic_stance sicily venice neutral
		console_command diplomatic_stance milan venice neutral
		console_command diplomatic_stance spain venice neutral
		console_command diplomatic_stance portugal venice neutral
		console_command diplomatic_stance aragon venice neutral
		console_command diplomatic_stance hre venice neutral
		console_command diplomatic_stance france venice neutral
		console_command diplomatic_stance england venice neutral
		console_command diplomatic_stance scotland venice neutral
		console_command diplomatic_stance denmark venice neutral
		console_command diplomatic_stance norway venice neutral
		console_command diplomatic_stance poland venice neutral
		console_command diplomatic_stance hungary venice neutral
		console_command diplomatic_stance jerusalem venice neutral
		console_command diplomatic_stance teutonic_order venice neutral
		console_command diplomatic_stance byzantium venice neutral
		console_command diplomatic_stance russia venice neutral
		console_command diplomatic_stance kievan_rus venice neutral
		console_command diplomatic_stance turks venice neutral
		console_command diplomatic_stance egypt venice neutral
		console_command diplomatic_stance moors venice neutral
		console_command diplomatic_stance kwarezm venice neutral
		console_command diplomatic_stance lithuania venice neutral
		console_command diplomatic_stance cumans venice neutral
		console_command diplomatic_stance georgia venice neutral
		console_command diplomatic_stance mongols venice neutral
		console_command diplomatic_stance timurids venice neutral
		console_command diplomatic_stance papal_states venice neutral
	end_if
	if I_NumberOfSettlements sicily < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_sicily != 1
		set_counter dead_diplomacy_sicily 1
		console_command diplomatic_stance venice sicily neutral
		console_command diplomatic_stance milan sicily neutral
		console_command diplomatic_stance spain sicily neutral
		console_command diplomatic_stance portugal sicily neutral
		console_command diplomatic_stance aragon sicily neutral
		console_command diplomatic_stance hre sicily neutral
		console_command diplomatic_stance france sicily neutral
		console_command diplomatic_stance england sicily neutral
		console_command diplomatic_stance scotland sicily neutral
		console_command diplomatic_stance denmark sicily neutral
		console_command diplomatic_stance norway sicily neutral
		console_command diplomatic_stance poland sicily neutral
		console_command diplomatic_stance hungary sicily neutral
		console_command diplomatic_stance jerusalem sicily neutral
		console_command diplomatic_stance teutonic_order sicily neutral
		console_command diplomatic_stance byzantium sicily neutral
		console_command diplomatic_stance russia sicily neutral
		console_command diplomatic_stance kievan_rus sicily neutral
		console_command diplomatic_stance turks sicily neutral
		console_command diplomatic_stance egypt sicily neutral
		console_command diplomatic_stance moors sicily neutral
		console_command diplomatic_stance kwarezm sicily neutral
		console_command diplomatic_stance lithuania sicily neutral
		console_command diplomatic_stance cumans sicily neutral
		console_command diplomatic_stance georgia sicily neutral
		console_command diplomatic_stance mongols sicily neutral
		console_command diplomatic_stance timurids sicily neutral
		console_command diplomatic_stance papal_states sicily neutral
	end_if
	if I_NumberOfSettlements milan < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_milan != 1
		set_counter dead_diplomacy_milan 1
		console_command diplomatic_stance venice milan neutral
		console_command diplomatic_stance sicily milan neutral
		console_command diplomatic_stance spain milan neutral
		console_command diplomatic_stance portugal milan neutral
		console_command diplomatic_stance aragon milan neutral
		console_command diplomatic_stance hre milan neutral
		console_command diplomatic_stance france milan neutral
		console_command diplomatic_stance england milan neutral
		console_command diplomatic_stance scotland milan neutral
		console_command diplomatic_stance denmark milan neutral
		console_command diplomatic_stance norway milan neutral
		console_command diplomatic_stance poland milan neutral
		console_command diplomatic_stance hungary milan neutral
		console_command diplomatic_stance jerusalem milan neutral
		console_command diplomatic_stance teutonic_order milan neutral
		console_command diplomatic_stance byzantium milan neutral
		console_command diplomatic_stance russia milan neutral
		console_command diplomatic_stance kievan_rus milan neutral
		console_command diplomatic_stance turks milan neutral
		console_command diplomatic_stance egypt milan neutral
		console_command diplomatic_stance moors milan neutral
		console_command diplomatic_stance kwarezm milan neutral
		console_command diplomatic_stance lithuania milan neutral
		console_command diplomatic_stance cumans milan neutral
		console_command diplomatic_stance georgia milan neutral
		console_command diplomatic_stance mongols milan neutral
		console_command diplomatic_stance timurids milan neutral
		console_command diplomatic_stance papal_states milan neutral
	end_if
	if I_NumberOfSettlements spain < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_spain != 1
		set_counter dead_diplomacy_spain 1
		console_command diplomatic_stance venice spain neutral
		console_command diplomatic_stance sicily spain neutral
		console_command diplomatic_stance milan spain neutral
		console_command diplomatic_stance portugal spain neutral
		console_command diplomatic_stance aragon spain neutral
		console_command diplomatic_stance hre spain neutral
		console_command diplomatic_stance france spain neutral
		console_command diplomatic_stance england spain neutral
		console_command diplomatic_stance scotland spain neutral
		console_command diplomatic_stance denmark spain neutral
		console_command diplomatic_stance norway spain neutral
		console_command diplomatic_stance poland spain neutral
		console_command diplomatic_stance hungary spain neutral
		console_command diplomatic_stance jerusalem spain neutral
		console_command diplomatic_stance teutonic_order spain neutral
		console_command diplomatic_stance byzantium spain neutral
		console_command diplomatic_stance russia spain neutral
		console_command diplomatic_stance kievan_rus spain neutral
		console_command diplomatic_stance turks spain neutral
		console_command diplomatic_stance egypt spain neutral
		console_command diplomatic_stance moors spain neutral
		console_command diplomatic_stance kwarezm spain neutral
		console_command diplomatic_stance lithuania spain neutral
		console_command diplomatic_stance cumans spain neutral
		console_command diplomatic_stance georgia spain neutral
		console_command diplomatic_stance mongols spain neutral
		console_command diplomatic_stance timurids spain neutral
		console_command diplomatic_stance papal_states spain neutral
	end_if
	if I_NumberOfSettlements portugal < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_portugal != 1
		set_counter dead_diplomacy_portugal 1
		console_command diplomatic_stance venice portugal neutral
		console_command diplomatic_stance sicily portugal neutral
		console_command diplomatic_stance milan portugal neutral
		console_command diplomatic_stance spain portugal neutral
		console_command diplomatic_stance aragon portugal neutral
		console_command diplomatic_stance hre portugal neutral
		console_command diplomatic_stance france portugal neutral
		console_command diplomatic_stance england portugal neutral
		console_command diplomatic_stance scotland portugal neutral
		console_command diplomatic_stance denmark portugal neutral
		console_command diplomatic_stance norway portugal neutral
		console_command diplomatic_stance poland portugal neutral
		console_command diplomatic_stance hungary portugal neutral
		console_command diplomatic_stance jerusalem portugal neutral
		console_command diplomatic_stance teutonic_order portugal neutral
		console_command diplomatic_stance byzantium portugal neutral
		console_command diplomatic_stance russia portugal neutral
		console_command diplomatic_stance kievan_rus portugal neutral
		console_command diplomatic_stance turks portugal neutral
		console_command diplomatic_stance egypt portugal neutral
		console_command diplomatic_stance moors portugal neutral
		console_command diplomatic_stance kwarezm portugal neutral
		console_command diplomatic_stance lithuania portugal neutral
		console_command diplomatic_stance cumans portugal neutral
		console_command diplomatic_stance georgia portugal neutral
		console_command diplomatic_stance mongols portugal neutral
		console_command diplomatic_stance timurids portugal neutral
		console_command diplomatic_stance papal_states portugal neutral
	end_if
	if I_NumberOfSettlements aragon < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_aragon != 1
		set_counter dead_diplomacy_aragon 1
		console_command diplomatic_stance venice aragon neutral
		console_command diplomatic_stance sicily aragon neutral
		console_command diplomatic_stance milan aragon neutral
		console_command diplomatic_stance spain aragon neutral
		console_command diplomatic_stance portugal aragon neutral
		console_command diplomatic_stance hre aragon neutral
		console_command diplomatic_stance france aragon neutral
		console_command diplomatic_stance england aragon neutral
		console_command diplomatic_stance scotland aragon neutral
		console_command diplomatic_stance denmark aragon neutral
		console_command diplomatic_stance norway aragon neutral
		console_command diplomatic_stance poland aragon neutral
		console_command diplomatic_stance hungary aragon neutral
		console_command diplomatic_stance jerusalem aragon neutral
		console_command diplomatic_stance teutonic_order aragon neutral
		console_command diplomatic_stance byzantium aragon neutral
		console_command diplomatic_stance russia aragon neutral
		console_command diplomatic_stance kievan_rus aragon neutral
		console_command diplomatic_stance turks aragon neutral
		console_command diplomatic_stance egypt aragon neutral
		console_command diplomatic_stance moors aragon neutral
		console_command diplomatic_stance kwarezm aragon neutral
		console_command diplomatic_stance lithuania aragon neutral
		console_command diplomatic_stance cumans aragon neutral
		console_command diplomatic_stance georgia aragon neutral
		console_command diplomatic_stance mongols aragon neutral
		console_command diplomatic_stance timurids aragon neutral
		console_command diplomatic_stance papal_states aragon neutral
	end_if
	if I_NumberOfSettlements hre < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_hre != 1
		set_counter dead_diplomacy_hre 1
		console_command diplomatic_stance venice hre neutral
		console_command diplomatic_stance sicily hre neutral
		console_command diplomatic_stance milan hre neutral
		console_command diplomatic_stance spain hre neutral
		console_command diplomatic_stance portugal hre neutral
		console_command diplomatic_stance aragon hre neutral
		console_command diplomatic_stance france hre neutral
		console_command diplomatic_stance england hre neutral
		console_command diplomatic_stance scotland hre neutral
		console_command diplomatic_stance denmark hre neutral
		console_command diplomatic_stance norway hre neutral
		console_command diplomatic_stance poland hre neutral
		console_command diplomatic_stance hungary hre neutral
		console_command diplomatic_stance jerusalem hre neutral
		console_command diplomatic_stance teutonic_order hre neutral
		console_command diplomatic_stance byzantium hre neutral
		console_command diplomatic_stance russia hre neutral
		console_command diplomatic_stance kievan_rus hre neutral
		console_command diplomatic_stance turks hre neutral
		console_command diplomatic_stance egypt hre neutral
		console_command diplomatic_stance moors hre neutral
		console_command diplomatic_stance kwarezm hre neutral
		console_command diplomatic_stance lithuania hre neutral
		console_command diplomatic_stance cumans hre neutral
		console_command diplomatic_stance georgia hre neutral
		console_command diplomatic_stance mongols hre neutral
		console_command diplomatic_stance timurids hre neutral
		console_command diplomatic_stance papal_states hre neutral
	end_if
	if I_NumberOfSettlements france < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_france != 1
		set_counter dead_diplomacy_france 1
		console_command diplomatic_stance venice france neutral
		console_command diplomatic_stance sicily france neutral
		console_command diplomatic_stance milan france neutral
		console_command diplomatic_stance spain france neutral
		console_command diplomatic_stance portugal france neutral
		console_command diplomatic_stance aragon france neutral
		console_command diplomatic_stance hre france neutral
		console_command diplomatic_stance england france neutral
		console_command diplomatic_stance scotland france neutral
		console_command diplomatic_stance denmark france neutral
		console_command diplomatic_stance norway france neutral
		console_command diplomatic_stance poland france neutral
		console_command diplomatic_stance hungary france neutral
		console_command diplomatic_stance jerusalem france neutral
		console_command diplomatic_stance teutonic_order france neutral
		console_command diplomatic_stance byzantium france neutral
		console_command diplomatic_stance russia france neutral
		console_command diplomatic_stance kievan_rus france neutral
		console_command diplomatic_stance turks france neutral
		console_command diplomatic_stance egypt france neutral
		console_command diplomatic_stance moors france neutral
		console_command diplomatic_stance kwarezm france neutral
		console_command diplomatic_stance lithuania france neutral
		console_command diplomatic_stance cumans france neutral
		console_command diplomatic_stance georgia france neutral
		console_command diplomatic_stance mongols france neutral
		console_command diplomatic_stance timurids france neutral
		console_command diplomatic_stance papal_states france neutral
	end_if
	if I_NumberOfSettlements england < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_england != 1
		set_counter dead_diplomacy_england 1
		console_command diplomatic_stance venice england neutral
		console_command diplomatic_stance sicily england neutral
		console_command diplomatic_stance milan england neutral
		console_command diplomatic_stance spain england neutral
		console_command diplomatic_stance portugal england neutral
		console_command diplomatic_stance aragon england neutral
		console_command diplomatic_stance hre england neutral
		console_command diplomatic_stance france england neutral
		console_command diplomatic_stance scotland england neutral
		console_command diplomatic_stance denmark england neutral
		console_command diplomatic_stance norway england neutral
		console_command diplomatic_stance poland england neutral
		console_command diplomatic_stance hungary england neutral
		console_command diplomatic_stance jerusalem england neutral
		console_command diplomatic_stance teutonic_order england neutral
		console_command diplomatic_stance byzantium england neutral
		console_command diplomatic_stance russia england neutral
		console_command diplomatic_stance kievan_rus england neutral
		console_command diplomatic_stance turks england neutral
		console_command diplomatic_stance egypt england neutral
		console_command diplomatic_stance moors england neutral
		console_command diplomatic_stance kwarezm england neutral
		console_command diplomatic_stance lithuania england neutral
		console_command diplomatic_stance cumans england neutral
		console_command diplomatic_stance georgia england neutral
		console_command diplomatic_stance mongols england neutral
		console_command diplomatic_stance timurids england neutral
		console_command diplomatic_stance papal_states england neutral
	end_if
	if I_NumberOfSettlements scotland < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_scotland != 1
		set_counter dead_diplomacy_scotland 1
		console_command diplomatic_stance venice scotland neutral
		console_command diplomatic_stance sicily scotland neutral
		console_command diplomatic_stance milan scotland neutral
		console_command diplomatic_stance spain scotland neutral
		console_command diplomatic_stance portugal scotland neutral
		console_command diplomatic_stance aragon scotland neutral
		console_command diplomatic_stance hre scotland neutral
		console_command diplomatic_stance france scotland neutral
		console_command diplomatic_stance england scotland neutral
		console_command diplomatic_stance denmark scotland neutral
		console_command diplomatic_stance norway scotland neutral
		console_command diplomatic_stance poland scotland neutral
		console_command diplomatic_stance hungary scotland neutral
		console_command diplomatic_stance jerusalem scotland neutral
		console_command diplomatic_stance teutonic_order scotland neutral
		console_command diplomatic_stance byzantium scotland neutral
		console_command diplomatic_stance russia scotland neutral
		console_command diplomatic_stance kievan_rus scotland neutral
		console_command diplomatic_stance turks scotland neutral
		console_command diplomatic_stance egypt scotland neutral
		console_command diplomatic_stance moors scotland neutral
		console_command diplomatic_stance kwarezm scotland neutral
		console_command diplomatic_stance lithuania scotland neutral
		console_command diplomatic_stance cumans scotland neutral
		console_command diplomatic_stance georgia scotland neutral
		console_command diplomatic_stance mongols scotland neutral
		console_command diplomatic_stance timurids scotland neutral
		console_command diplomatic_stance papal_states scotland neutral
	end_if
	if I_NumberOfSettlements denmark < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_denmark != 1
		set_counter dead_diplomacy_denmark 1
		console_command diplomatic_stance venice denmark neutral
		console_command diplomatic_stance sicily denmark neutral
		console_command diplomatic_stance milan denmark neutral
		console_command diplomatic_stance spain denmark neutral
		console_command diplomatic_stance portugal denmark neutral
		console_command diplomatic_stance aragon denmark neutral
		console_command diplomatic_stance hre denmark neutral
		console_command diplomatic_stance france denmark neutral
		console_command diplomatic_stance england denmark neutral
		console_command diplomatic_stance scotland denmark neutral
		console_command diplomatic_stance norway denmark neutral
		console_command diplomatic_stance poland denmark neutral
		console_command diplomatic_stance hungary denmark neutral
		console_command diplomatic_stance jerusalem denmark neutral
		console_command diplomatic_stance teutonic_order denmark neutral
		console_command diplomatic_stance byzantium denmark neutral
		console_command diplomatic_stance russia denmark neutral
		console_command diplomatic_stance kievan_rus denmark neutral
		console_command diplomatic_stance turks denmark neutral
		console_command diplomatic_stance egypt denmark neutral
		console_command diplomatic_stance moors denmark neutral
		console_command diplomatic_stance kwarezm denmark neutral
		console_command diplomatic_stance lithuania denmark neutral
		console_command diplomatic_stance cumans denmark neutral
		console_command diplomatic_stance georgia denmark neutral
		console_command diplomatic_stance mongols denmark neutral
		console_command diplomatic_stance timurids denmark neutral
		console_command diplomatic_stance papal_states denmark neutral
	end_if
	if I_NumberOfSettlements norway < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_norway != 1
		set_counter dead_diplomacy_norway 1
		console_command diplomatic_stance venice norway neutral
		console_command diplomatic_stance sicily norway neutral
		console_command diplomatic_stance milan norway neutral
		console_command diplomatic_stance spain norway neutral
		console_command diplomatic_stance portugal norway neutral
		console_command diplomatic_stance aragon norway neutral
		console_command diplomatic_stance hre norway neutral
		console_command diplomatic_stance france norway neutral
		console_command diplomatic_stance england norway neutral
		console_command diplomatic_stance scotland norway neutral
		console_command diplomatic_stance denmark norway neutral
		console_command diplomatic_stance poland norway neutral
		console_command diplomatic_stance hungary norway neutral
		console_command diplomatic_stance jerusalem norway neutral
		console_command diplomatic_stance teutonic_order norway neutral
		console_command diplomatic_stance byzantium norway neutral
		console_command diplomatic_stance russia norway neutral
		console_command diplomatic_stance kievan_rus norway neutral
		console_command diplomatic_stance turks norway neutral
		console_command diplomatic_stance egypt norway neutral
		console_command diplomatic_stance moors norway neutral
		console_command diplomatic_stance kwarezm norway neutral
		console_command diplomatic_stance lithuania norway neutral
		console_command diplomatic_stance cumans norway neutral
		console_command diplomatic_stance georgia norway neutral
		console_command diplomatic_stance mongols norway neutral
		console_command diplomatic_stance timurids norway neutral
		console_command diplomatic_stance papal_states norway neutral
	end_if
	if I_NumberOfSettlements poland < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_poland != 1
		set_counter dead_diplomacy_poland 1
		console_command diplomatic_stance venice poland neutral
		console_command diplomatic_stance sicily poland neutral
		console_command diplomatic_stance milan poland neutral
		console_command diplomatic_stance spain poland neutral
		console_command diplomatic_stance portugal poland neutral
		console_command diplomatic_stance aragon poland neutral
		console_command diplomatic_stance hre poland neutral
		console_command diplomatic_stance france poland neutral
		console_command diplomatic_stance england poland neutral
		console_command diplomatic_stance scotland poland neutral
		console_command diplomatic_stance denmark poland neutral
		console_command diplomatic_stance norway poland neutral
		console_command diplomatic_stance hungary poland neutral
		console_command diplomatic_stance jerusalem poland neutral
		console_command diplomatic_stance teutonic_order poland neutral
		console_command diplomatic_stance byzantium poland neutral
		console_command diplomatic_stance russia poland neutral
		console_command diplomatic_stance kievan_rus poland neutral
		console_command diplomatic_stance turks poland neutral
		console_command diplomatic_stance egypt poland neutral
		console_command diplomatic_stance moors poland neutral
		console_command diplomatic_stance kwarezm poland neutral
		console_command diplomatic_stance lithuania poland neutral
		console_command diplomatic_stance cumans poland neutral
		console_command diplomatic_stance georgia poland neutral
		console_command diplomatic_stance mongols poland neutral
		console_command diplomatic_stance timurids poland neutral
		console_command diplomatic_stance papal_states poland neutral
	end_if
	if I_NumberOfSettlements hungary < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_hungary != 1
		set_counter dead_diplomacy_hungary 1
		console_command diplomatic_stance venice hungary neutral
		console_command diplomatic_stance sicily hungary neutral
		console_command diplomatic_stance milan hungary neutral
		console_command diplomatic_stance spain hungary neutral
		console_command diplomatic_stance portugal hungary neutral
		console_command diplomatic_stance aragon hungary neutral
		console_command diplomatic_stance hre hungary neutral
		console_command diplomatic_stance france hungary neutral
		console_command diplomatic_stance england hungary neutral
		console_command diplomatic_stance scotland hungary neutral
		console_command diplomatic_stance denmark hungary neutral
		console_command diplomatic_stance norway hungary neutral
		console_command diplomatic_stance poland hungary neutral
		console_command diplomatic_stance jerusalem hungary neutral
		console_command diplomatic_stance teutonic_order hungary neutral
		console_command diplomatic_stance byzantium hungary neutral
		console_command diplomatic_stance russia hungary neutral
		console_command diplomatic_stance kievan_rus hungary neutral
		console_command diplomatic_stance turks hungary neutral
		console_command diplomatic_stance egypt hungary neutral
		console_command diplomatic_stance moors hungary neutral
		console_command diplomatic_stance kwarezm hungary neutral
		console_command diplomatic_stance lithuania hungary neutral
		console_command diplomatic_stance cumans hungary neutral
		console_command diplomatic_stance georgia hungary neutral
		console_command diplomatic_stance mongols hungary neutral
		console_command diplomatic_stance timurids hungary neutral
		console_command diplomatic_stance papal_states hungary neutral
	end_if
	if I_NumberOfSettlements jerusalem < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_jerusalem != 1
		set_counter dead_diplomacy_jerusalem 1
		console_command diplomatic_stance venice jerusalem neutral
		console_command diplomatic_stance sicily jerusalem neutral
		console_command diplomatic_stance milan jerusalem neutral
		console_command diplomatic_stance spain jerusalem neutral
		console_command diplomatic_stance portugal jerusalem neutral
		console_command diplomatic_stance aragon jerusalem neutral
		console_command diplomatic_stance hre jerusalem neutral
		console_command diplomatic_stance france jerusalem neutral
		console_command diplomatic_stance england jerusalem neutral
		console_command diplomatic_stance scotland jerusalem neutral
		console_command diplomatic_stance denmark jerusalem neutral
		console_command diplomatic_stance norway jerusalem neutral
		console_command diplomatic_stance poland jerusalem neutral
		console_command diplomatic_stance hungary jerusalem neutral
		console_command diplomatic_stance teutonic_order jerusalem neutral
		console_command diplomatic_stance byzantium jerusalem neutral
		console_command diplomatic_stance russia jerusalem neutral
		console_command diplomatic_stance kievan_rus jerusalem neutral
		console_command diplomatic_stance turks jerusalem neutral
		console_command diplomatic_stance egypt jerusalem neutral
		console_command diplomatic_stance moors jerusalem neutral
		console_command diplomatic_stance kwarezm jerusalem neutral
		console_command diplomatic_stance lithuania jerusalem neutral
		console_command diplomatic_stance cumans jerusalem neutral
		console_command diplomatic_stance georgia jerusalem neutral
		console_command diplomatic_stance mongols jerusalem neutral
		console_command diplomatic_stance timurids jerusalem neutral
		console_command diplomatic_stance papal_states jerusalem neutral
	end_if
	if  I_EventCounter status_teutonic_order = 0 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_teutonic_order != 1
		set_counter dead_diplomacy_teutonic_order 1
		console_command diplomatic_stance venice teutonic_order neutral
		console_command diplomatic_stance sicily teutonic_order neutral
		console_command diplomatic_stance milan teutonic_order neutral
		console_command diplomatic_stance spain teutonic_order neutral
		console_command diplomatic_stance portugal teutonic_order neutral
		console_command diplomatic_stance aragon teutonic_order neutral
		console_command diplomatic_stance hre teutonic_order neutral
		console_command diplomatic_stance france teutonic_order neutral
		console_command diplomatic_stance england teutonic_order neutral
		console_command diplomatic_stance scotland teutonic_order neutral
		console_command diplomatic_stance denmark teutonic_order neutral
		console_command diplomatic_stance norway teutonic_order neutral
		console_command diplomatic_stance poland teutonic_order neutral
		console_command diplomatic_stance hungary teutonic_order neutral
		console_command diplomatic_stance jerusalem teutonic_order neutral
		console_command diplomatic_stance byzantium teutonic_order neutral
		console_command diplomatic_stance russia teutonic_order neutral
		console_command diplomatic_stance kievan_rus teutonic_order neutral
		console_command diplomatic_stance turks teutonic_order neutral
		console_command diplomatic_stance egypt teutonic_order neutral
		console_command diplomatic_stance moors teutonic_order neutral
		console_command diplomatic_stance kwarezm teutonic_order neutral
		console_command diplomatic_stance lithuania teutonic_order neutral
		console_command diplomatic_stance cumans teutonic_order neutral
		console_command diplomatic_stance georgia teutonic_order neutral
		console_command diplomatic_stance mongols teutonic_order neutral
		console_command diplomatic_stance timurids teutonic_order neutral
		console_command diplomatic_stance papal_states teutonic_order neutral
	end_if
	if I_NumberOfSettlements byzantium < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_byzantium != 1
		set_counter dead_diplomacy_byzantium 1
		console_command diplomatic_stance venice byzantium neutral
		console_command diplomatic_stance sicily byzantium neutral
		console_command diplomatic_stance milan byzantium neutral
		console_command diplomatic_stance spain byzantium neutral
		console_command diplomatic_stance portugal byzantium neutral
		console_command diplomatic_stance aragon byzantium neutral
		console_command diplomatic_stance hre byzantium neutral
		console_command diplomatic_stance france byzantium neutral
		console_command diplomatic_stance england byzantium neutral
		console_command diplomatic_stance scotland byzantium neutral
		console_command diplomatic_stance denmark byzantium neutral
		console_command diplomatic_stance norway byzantium neutral
		console_command diplomatic_stance poland byzantium neutral
		console_command diplomatic_stance hungary byzantium neutral
		console_command diplomatic_stance jerusalem byzantium neutral
		console_command diplomatic_stance teutonic_order byzantium neutral
		console_command diplomatic_stance russia byzantium neutral
		console_command diplomatic_stance kievan_rus byzantium neutral
		console_command diplomatic_stance turks byzantium neutral
		console_command diplomatic_stance egypt byzantium neutral
		console_command diplomatic_stance moors byzantium neutral
		console_command diplomatic_stance kwarezm byzantium neutral
		console_command diplomatic_stance lithuania byzantium neutral
		console_command diplomatic_stance cumans byzantium neutral
		console_command diplomatic_stance georgia byzantium neutral
		console_command diplomatic_stance mongols byzantium neutral
		console_command diplomatic_stance timurids byzantium neutral
		console_command diplomatic_stance papal_states byzantium neutral
	end_if
	if I_NumberOfSettlements russia < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_russia != 1
		set_counter dead_diplomacy_russia 1
		console_command diplomatic_stance venice russia neutral
		console_command diplomatic_stance sicily russia neutral
		console_command diplomatic_stance milan russia neutral
		console_command diplomatic_stance spain russia neutral
		console_command diplomatic_stance portugal russia neutral
		console_command diplomatic_stance aragon russia neutral
		console_command diplomatic_stance hre russia neutral
		console_command diplomatic_stance france russia neutral
		console_command diplomatic_stance england russia neutral
		console_command diplomatic_stance scotland russia neutral
		console_command diplomatic_stance denmark russia neutral
		console_command diplomatic_stance norway russia neutral
		console_command diplomatic_stance poland russia neutral
		console_command diplomatic_stance hungary russia neutral
		console_command diplomatic_stance jerusalem russia neutral
		console_command diplomatic_stance teutonic_order russia neutral
		console_command diplomatic_stance byzantium russia neutral
		console_command diplomatic_stance kievan_rus russia neutral
		console_command diplomatic_stance turks russia neutral
		console_command diplomatic_stance egypt russia neutral
		console_command diplomatic_stance moors russia neutral
		console_command diplomatic_stance kwarezm russia neutral
		console_command diplomatic_stance lithuania russia neutral
		console_command diplomatic_stance cumans russia neutral
		console_command diplomatic_stance georgia russia neutral
		console_command diplomatic_stance mongols russia neutral
		console_command diplomatic_stance timurids russia neutral
		console_command diplomatic_stance papal_states russia neutral
	end_if
	if I_NumberOfSettlements kievan_rus < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_kievan_rus != 1
		set_counter dead_diplomacy_kievan_rus 1
		console_command diplomatic_stance venice kievan_rus neutral
		console_command diplomatic_stance sicily kievan_rus neutral
		console_command diplomatic_stance milan kievan_rus neutral
		console_command diplomatic_stance spain kievan_rus neutral
		console_command diplomatic_stance portugal kievan_rus neutral
		console_command diplomatic_stance aragon kievan_rus neutral
		console_command diplomatic_stance hre kievan_rus neutral
		console_command diplomatic_stance france kievan_rus neutral
		console_command diplomatic_stance england kievan_rus neutral
		console_command diplomatic_stance scotland kievan_rus neutral
		console_command diplomatic_stance denmark kievan_rus neutral
		console_command diplomatic_stance norway kievan_rus neutral
		console_command diplomatic_stance poland kievan_rus neutral
		console_command diplomatic_stance hungary kievan_rus neutral
		console_command diplomatic_stance jerusalem kievan_rus neutral
		console_command diplomatic_stance teutonic_order kievan_rus neutral
		console_command diplomatic_stance byzantium kievan_rus neutral
		console_command diplomatic_stance russia kievan_rus neutral
		console_command diplomatic_stance turks kievan_rus neutral
		console_command diplomatic_stance egypt kievan_rus neutral
		console_command diplomatic_stance moors kievan_rus neutral
		console_command diplomatic_stance kwarezm kievan_rus neutral
		console_command diplomatic_stance lithuania kievan_rus neutral
		console_command diplomatic_stance cumans kievan_rus neutral
		console_command diplomatic_stance georgia kievan_rus neutral
		console_command diplomatic_stance mongols kievan_rus neutral
		console_command diplomatic_stance timurids kievan_rus neutral
		console_command diplomatic_stance papal_states kievan_rus neutral
	end_if
	if I_NumberOfSettlements turks < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_turks != 1
		set_counter dead_diplomacy_turks 1
		console_command diplomatic_stance venice turks neutral
		console_command diplomatic_stance sicily turks neutral
		console_command diplomatic_stance milan turks neutral
		console_command diplomatic_stance spain turks neutral
		console_command diplomatic_stance portugal turks neutral
		console_command diplomatic_stance aragon turks neutral
		console_command diplomatic_stance hre turks neutral
		console_command diplomatic_stance france turks neutral
		console_command diplomatic_stance england turks neutral
		console_command diplomatic_stance scotland turks neutral
		console_command diplomatic_stance denmark turks neutral
		console_command diplomatic_stance norway turks neutral
		console_command diplomatic_stance poland turks neutral
		console_command diplomatic_stance hungary turks neutral
		console_command diplomatic_stance jerusalem turks neutral
		console_command diplomatic_stance teutonic_order turks neutral
		console_command diplomatic_stance byzantium turks neutral
		console_command diplomatic_stance russia turks neutral
		console_command diplomatic_stance kievan_rus turks neutral
		console_command diplomatic_stance egypt turks neutral
		console_command diplomatic_stance moors turks neutral
		console_command diplomatic_stance kwarezm turks neutral
		console_command diplomatic_stance lithuania turks neutral
		console_command diplomatic_stance cumans turks neutral
		console_command diplomatic_stance georgia turks neutral
		console_command diplomatic_stance mongols turks neutral
		console_command diplomatic_stance timurids turks neutral
		console_command diplomatic_stance papal_states turks neutral
	end_if
	if I_NumberOfSettlements egypt < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_egypt != 1
		set_counter dead_diplomacy_egypt 1
		console_command diplomatic_stance venice egypt neutral
		console_command diplomatic_stance sicily egypt neutral
		console_command diplomatic_stance milan egypt neutral
		console_command diplomatic_stance spain egypt neutral
		console_command diplomatic_stance portugal egypt neutral
		console_command diplomatic_stance aragon egypt neutral
		console_command diplomatic_stance hre egypt neutral
		console_command diplomatic_stance france egypt neutral
		console_command diplomatic_stance england egypt neutral
		console_command diplomatic_stance scotland egypt neutral
		console_command diplomatic_stance denmark egypt neutral
		console_command diplomatic_stance norway egypt neutral
		console_command diplomatic_stance poland egypt neutral
		console_command diplomatic_stance hungary egypt neutral
		console_command diplomatic_stance jerusalem egypt neutral
		console_command diplomatic_stance teutonic_order egypt neutral
		console_command diplomatic_stance byzantium egypt neutral
		console_command diplomatic_stance russia egypt neutral
		console_command diplomatic_stance kievan_rus egypt neutral
		console_command diplomatic_stance turks egypt neutral
		console_command diplomatic_stance moors egypt neutral
		console_command diplomatic_stance kwarezm egypt neutral
		console_command diplomatic_stance lithuania egypt neutral
		console_command diplomatic_stance cumans egypt neutral
		console_command diplomatic_stance georgia egypt neutral
		console_command diplomatic_stance mongols egypt neutral
		console_command diplomatic_stance timurids egypt neutral
		console_command diplomatic_stance papal_states egypt neutral
	end_if
	if I_NumberOfSettlements  moors < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_moors != 1
		set_counter dead_diplomacy_moors 1
		console_command diplomatic_stance venice  moors neutral
		console_command diplomatic_stance sicily  moors neutral
		console_command diplomatic_stance milan  moors neutral
		console_command diplomatic_stance spain  moors neutral
		console_command diplomatic_stance portugal  moors neutral
		console_command diplomatic_stance aragon  moors neutral
		console_command diplomatic_stance hre  moors neutral
		console_command diplomatic_stance france  moors neutral
		console_command diplomatic_stance england  moors neutral
		console_command diplomatic_stance scotland  moors neutral
		console_command diplomatic_stance denmark  moors neutral
		console_command diplomatic_stance norway  moors neutral
		console_command diplomatic_stance poland  moors neutral
		console_command diplomatic_stance hungary  moors neutral
		console_command diplomatic_stance jerusalem  moors neutral
		console_command diplomatic_stance teutonic_order  moors neutral
		console_command diplomatic_stance byzantium  moors neutral
		console_command diplomatic_stance russia  moors neutral
		console_command diplomatic_stance kievan_rus  moors neutral
		console_command diplomatic_stance turks  moors neutral
		console_command diplomatic_stance egypt  moors neutral
		console_command diplomatic_stance kwarezm  moors neutral
		console_command diplomatic_stance lithuania  moors neutral
		console_command diplomatic_stance cumans  moors neutral
		console_command diplomatic_stance georgia  moors neutral
		console_command diplomatic_stance mongols  moors neutral
		console_command diplomatic_stance timurids  moors neutral
		console_command diplomatic_stance papal_states  moors neutral
	end_if
	if I_NumberOfSettlements kwarezm < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_kwarezm != 1
		set_counter dead_diplomacy_kwarezm 1
		console_command diplomatic_stance venice kwarezm neutral
		console_command diplomatic_stance sicily kwarezm neutral
		console_command diplomatic_stance milan kwarezm neutral
		console_command diplomatic_stance spain kwarezm neutral
		console_command diplomatic_stance portugal kwarezm neutral
		console_command diplomatic_stance aragon kwarezm neutral
		console_command diplomatic_stance hre kwarezm neutral
		console_command diplomatic_stance france kwarezm neutral
		console_command diplomatic_stance england kwarezm neutral
		console_command diplomatic_stance scotland kwarezm neutral
		console_command diplomatic_stance denmark kwarezm neutral
		console_command diplomatic_stance norway kwarezm neutral
		console_command diplomatic_stance poland kwarezm neutral
		console_command diplomatic_stance hungary kwarezm neutral
		console_command diplomatic_stance jerusalem kwarezm neutral
		console_command diplomatic_stance teutonic_order kwarezm neutral
		console_command diplomatic_stance byzantium kwarezm neutral
		console_command diplomatic_stance russia kwarezm neutral
		console_command diplomatic_stance kievan_rus kwarezm neutral
		console_command diplomatic_stance turks kwarezm neutral
		console_command diplomatic_stance egypt kwarezm neutral
		console_command diplomatic_stance moors kwarezm neutral
		console_command diplomatic_stance lithuania kwarezm neutral
		console_command diplomatic_stance cumans kwarezm neutral
		console_command diplomatic_stance georgia kwarezm neutral
		console_command diplomatic_stance mongols kwarezm neutral
		console_command diplomatic_stance timurids kwarezm neutral
		console_command diplomatic_stance papal_states kwarezm neutral
	end_if
	if I_NumberOfSettlements lithuania < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_lithuania != 1
		set_counter dead_diplomacy_lithuania 1
		console_command diplomatic_stance venice lithuania neutral
		console_command diplomatic_stance sicily lithuania neutral
		console_command diplomatic_stance milan lithuania neutral
		console_command diplomatic_stance spain lithuania neutral
		console_command diplomatic_stance portugal lithuania neutral
		console_command diplomatic_stance aragon lithuania neutral
		console_command diplomatic_stance hre lithuania neutral
		console_command diplomatic_stance france lithuania neutral
		console_command diplomatic_stance england lithuania neutral
		console_command diplomatic_stance scotland lithuania neutral
		console_command diplomatic_stance denmark lithuania neutral
		console_command diplomatic_stance norway lithuania neutral
		console_command diplomatic_stance poland lithuania neutral
		console_command diplomatic_stance hungary lithuania neutral
		console_command diplomatic_stance jerusalem lithuania neutral
		console_command diplomatic_stance teutonic_order lithuania neutral
		console_command diplomatic_stance byzantium lithuania neutral
		console_command diplomatic_stance russia lithuania neutral
		console_command diplomatic_stance kievan_rus lithuania neutral
		console_command diplomatic_stance turks lithuania neutral
		console_command diplomatic_stance egypt lithuania neutral
		console_command diplomatic_stance moors lithuania neutral
		console_command diplomatic_stance kwarezm lithuania neutral
		console_command diplomatic_stance cumans lithuania neutral
		console_command diplomatic_stance georgia lithuania neutral
		console_command diplomatic_stance mongols lithuania neutral
		console_command diplomatic_stance timurids lithuania neutral
		console_command diplomatic_stance papal_states lithuania neutral
	end_if
	if I_NumberOfSettlements cumans < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_cumans != 1
		set_counter dead_diplomacy_cumans 1
		console_command diplomatic_stance venice cumans neutral
		console_command diplomatic_stance sicily cumans neutral
		console_command diplomatic_stance milan cumans neutral
		console_command diplomatic_stance spain cumans neutral
		console_command diplomatic_stance portugal cumans neutral
		console_command diplomatic_stance aragon cumans neutral
		console_command diplomatic_stance hre cumans neutral
		console_command diplomatic_stance france cumans neutral
		console_command diplomatic_stance england cumans neutral
		console_command diplomatic_stance scotland cumans neutral
		console_command diplomatic_stance denmark cumans neutral
		console_command diplomatic_stance norway cumans neutral
		console_command diplomatic_stance poland cumans neutral
		console_command diplomatic_stance hungary cumans neutral
		console_command diplomatic_stance jerusalem cumans neutral
		console_command diplomatic_stance teutonic_order cumans neutral
		console_command diplomatic_stance byzantium cumans neutral
		console_command diplomatic_stance russia cumans neutral
		console_command diplomatic_stance kievan_rus cumans neutral
		console_command diplomatic_stance turks cumans neutral
		console_command diplomatic_stance egypt cumans neutral
		console_command diplomatic_stance moors cumans neutral
		console_command diplomatic_stance kwarezm cumans neutral
		console_command diplomatic_stance lithuania cumans neutral
		console_command diplomatic_stance mongols cumans neutral
		console_command diplomatic_stance timurids cumans neutral
		console_command diplomatic_stance papal_states cumans neutral
	end_if
	if I_NumberOfSettlements georgia < 1 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_georgia != 1
		set_counter dead_diplomacy_georgia 1
		console_command diplomatic_stance venice georgia neutral
		console_command diplomatic_stance sicily georgia neutral
		console_command diplomatic_stance milan georgia neutral
		console_command diplomatic_stance spain georgia neutral
		console_command diplomatic_stance portugal georgia neutral
		console_command diplomatic_stance aragon georgia neutral
		console_command diplomatic_stance hre georgia neutral
		console_command diplomatic_stance france georgia neutral
		console_command diplomatic_stance england georgia neutral
		console_command diplomatic_stance scotland georgia neutral
		console_command diplomatic_stance denmark georgia neutral
		console_command diplomatic_stance norway georgia neutral
		console_command diplomatic_stance poland georgia neutral
		console_command diplomatic_stance hungary georgia neutral
		console_command diplomatic_stance jerusalem georgia neutral
		console_command diplomatic_stance teutonic_order georgia neutral
		console_command diplomatic_stance byzantium georgia neutral
		console_command diplomatic_stance russia georgia neutral
		console_command diplomatic_stance kievan_rus georgia neutral
		console_command diplomatic_stance turks georgia neutral
		console_command diplomatic_stance egypt georgia neutral
		console_command diplomatic_stance moors georgia neutral
		console_command diplomatic_stance kwarezm georgia neutral
		console_command diplomatic_stance lithuania georgia neutral
		console_command diplomatic_stance cumans georgia neutral
		console_command diplomatic_stance mongols georgia neutral
		console_command diplomatic_stance timurids georgia neutral
		console_command diplomatic_stance papal_states georgia neutral
	end_if
	if I_CompareCounter status_mongols = 0 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_mongols != 1
		set_counter dead_diplomacy_mongols 1
		console_command diplomatic_stance venice mongols war
		console_command diplomatic_stance sicily mongols war
		console_command diplomatic_stance milan mongols war
		console_command diplomatic_stance spain mongols war
		console_command diplomatic_stance portugal mongols war
		console_command diplomatic_stance aragon mongols war
		console_command diplomatic_stance hre mongols war
		console_command diplomatic_stance france mongols war
		console_command diplomatic_stance england mongols war
		console_command diplomatic_stance scotland mongols war
		console_command diplomatic_stance denmark mongols war
		console_command diplomatic_stance norway mongols war
		console_command diplomatic_stance poland mongols war
		console_command diplomatic_stance hungary mongols war
		console_command diplomatic_stance jerusalem mongols war
		console_command diplomatic_stance teutonic_order mongols war
		console_command diplomatic_stance byzantium mongols war
		console_command diplomatic_stance russia mongols war
		console_command diplomatic_stance kievan_rus mongols war
		console_command diplomatic_stance turks mongols war
		console_command diplomatic_stance egypt mongols war
		console_command diplomatic_stance moors mongols war
		console_command diplomatic_stance kwarezm mongols war
		console_command diplomatic_stance lithuania mongols war
		console_command diplomatic_stance cumans mongols war
		console_command diplomatic_stance georgia mongols war
		console_command diplomatic_stance timurids mongols war
		console_command diplomatic_stance papal_states mongols war
	end_if
	if I_CompareCounter status_timurids = 0 ; checks if faction is dead
	and I_CompareCounter dead_diplomacy_timurids != 1
		set_counter dead_diplomacy_timurids 1
		console_command diplomatic_stance venice timurids neutral
		console_command diplomatic_stance sicily timurids neutral
		console_command diplomatic_stance milan timurids neutral
		console_command diplomatic_stance spain timurids neutral
		console_command diplomatic_stance portugal timurids neutral
		console_command diplomatic_stance aragon timurids neutral
		console_command diplomatic_stance hre timurids neutral
		console_command diplomatic_stance france timurids neutral
		console_command diplomatic_stance england timurids neutral
		console_command diplomatic_stance scotland timurids neutral
		console_command diplomatic_stance denmark timurids neutral
		console_command diplomatic_stance norway timurids neutral
		console_command diplomatic_stance poland timurids neutral
		console_command diplomatic_stance hungary timurids neutral
		console_command diplomatic_stance jerusalem timurids neutral
		console_command diplomatic_stance teutonic_order timurids neutral
		console_command diplomatic_stance byzantium timurids neutral
		console_command diplomatic_stance russia timurids neutral
		console_command diplomatic_stance kievan_rus timurids neutral
		console_command diplomatic_stance turks timurids neutral
		console_command diplomatic_stance egypt timurids neutral
		console_command diplomatic_stance moors timurids neutral
		console_command diplomatic_stance kneutralezm timurids neutral
		console_command diplomatic_stance lithuania timurids neutral
		console_command diplomatic_stance cumans timurids neutral
		console_command diplomatic_stance georgia timurids neutral
		console_command diplomatic_stance mongols timurids neutral
		console_command diplomatic_stance papal_states timurids neutral
	end_if
end_monitor

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;--- Conquered Crowns Script (TBD)

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


;=======================================================;
;================= ADDITIONAL SCRIPTS ==================;
;=======================================================;

;================== Hotseat Treasurer ===================
; "Hotseat Treasurer is not available to slave faction...
if I_HotseatEnabled

 declare_counter egypt_has_brain
 declare_counter turks_has_brain
 declare_counter timurids_has_brain
 declare_counter kwarezm_has_brain
 declare_counter moors_has_brain
 declare_counter lithuania_has_brain
 declare_counter cumans_has_brain
 declare_counter mongols_has_brain
 declare_counter byzantium_has_brain
 declare_counter russia_has_brain
 declare_counter kievan_rus_has_brain
 declare_counter venice_has_brain
 declare_counter sicily_has_brain
 declare_counter milan_has_brain
 declare_counter denmark_has_brain
 declare_counter scotland_has_brain
 declare_counter france_has_brain
 declare_counter hre_has_brain
 declare_counter england_has_brain
 declare_counter portugal_has_brain
 declare_counter poland_has_brain
 declare_counter spain_has_brain
 declare_counter hungary_has_brain
 declare_counter aragon_has_brain
 declare_counter teutonic_order_has_brain
 declare_counter norway_has_brain
 declare_counter jerusalem_has_brain
 declare_counter georgia_has_brain
 declare_counter papal_states_has_brain

 if not I_IsFactionAIControlled egypt
	set_counter egypt_has_brain 1
 end_if
 if not I_IsFactionAIControlled turks
	set_counter turks_has_brain 1
 end_if
 if not I_IsFactionAIControlled timurids
	set_counter timurids_has_brain 1
 end_if
 if not I_IsFactionAIControlled kwarezm
	set_counter kwarezm_has_brain 1
 end_if
 if not I_IsFactionAIControlled moors
	set_counter moors_has_brain 1
 end_if
 if not I_IsFactionAIControlled lithuania
	set_counter lithuania_has_brain 1
 end_if
 if not I_IsFactionAIControlled cumans
	set_counter cumans_has_brain 1
 end_if
; if not I_IsFactionAIControlled mongols
;	set_counter mongols_has_brain 1
; end_if
 if not I_IsFactionAIControlled byzantium
	set_counter byzantium_has_brain 1
 end_if
 if not I_IsFactionAIControlled russia
	set_counter russia_has_brain 1
 end_if
 if not I_IsFactionAIControlled kievan_rus
	set_counter kievan_rus_has_brain 1
 end_if
 if not I_IsFactionAIControlled venice
	set_counter venice_has_brain 1
 end_if
 if not I_IsFactionAIControlled sicily
	set_counter sicily_has_brain 1
 end_if
 if not I_IsFactionAIControlled milan
	set_counter milan_has_brain 1
 end_if
 if not I_IsFactionAIControlled denmark
	set_counter denmark_has_brain 1
 end_if
 if not I_IsFactionAIControlled scotland
	set_counter scotland_has_brain 1
 end_if
 if not I_IsFactionAIControlled france
	set_counter france_has_brain 1
 end_if
 if not I_IsFactionAIControlled hre
	set_counter hre_has_brain 1
 end_if
 if not I_IsFactionAIControlled england
	set_counter england_has_brain 1
 end_if
 if not I_IsFactionAIControlled portugal
	set_counter portugal_has_brain 1
 end_if
 if not I_IsFactionAIControlled poland
	set_counter poland_has_brain 1
 end_if
 if not I_IsFactionAIControlled spain
	set_counter spain_has_brain 1
 end_if
 if not I_IsFactionAIControlled hungary
	set_counter hungary_has_brain 1
 end_if
 if not I_IsFactionAIControlled aragon
	set_counter aragon_has_brain 1
 end_if
; if not I_IsFactionAIControlled teutonic_order
;	set_counter teutonic_order_has_brain 1
; end_if
 if not I_IsFactionAIControlled norway
	set_counter norway_has_brain 1
 end_if
 if not I_IsFactionAIControlled jerusalem
	set_counter jerusalem_has_brain 1
 end_if
 if not I_IsFactionAIControlled georgia
	set_counter georgia_has_brain 1
 end_if
; if not I_IsFactionAIControlled papal_states
;	set_counter papal_states_has_brain 1
; end_if

end_if


declare_counter hs_difficultylevel
monitor_event FactionTurnStart

 if I_HotseatEnabled
	if I_EventCounter DifficultyLevel = 1
		set_counter	hs_difficultylevel 1
	end_if
	if I_EventCounter DifficultyLevel = 2
		set_counter	hs_difficultylevel 2
	end_if
	if I_EventCounter DifficultyLevel = 3
		set_counter	hs_difficultylevel 3
	end_if
	if I_EventCounter DifficultyLevel = 4
		set_counter	hs_difficultylevel 4
	end_if
 end_if

 terminate_monitor
end_monitor


;declare_counter hs_console
;monitor_event ShortcutTriggered ShortcutTriggered object_manager show_console
;	and I_CompareCounter hs_console = 0

;	if not I_HotseatEnabled
;	 set_counter hs_console 10
;	 terminate_monitor
;	end_if

;	set_counter hs_console 1
;end_monitor


;-- DifficultyLevel = 1 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 1
	 terminate_monitor
	end_if

;	set_counter hs_console 0

;egypt used to be under human control, but now is AI controlled
	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 600
	end_if
;egypt used to be under AI control, but now is under human control
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -600
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 700
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -700
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 300
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -300
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 700
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -700
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 600
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -600
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 300
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -300
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 700
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -700
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 300
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -300
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 600
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -600
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 600
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -600
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 500
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -500
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 700
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -700
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 700
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -700
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 400
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -400
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 600
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -600
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 400
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -400
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 600
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -600
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 500
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -500
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 700
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -700
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 600
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -600
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 500
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -500
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 500
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -500
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 500
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -500
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 600
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -600
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 300
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -300
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 600
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -600
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 600
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -600
	end_if

	if I_CompareCounter georgia_has_brain = 1
	and I_IsFactionAIControlled georgia
		set_counter georgia_has_brain 0
		increment_kings_purse georgia 600
	end_if
	if not I_IsFactionAIControlled georgia
	and I_CompareCounter georgia_has_brain = 0
		set_counter georgia_has_brain 1
		increment_kings_purse georgia -600
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 300
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -300
	end_if

end_monitor

;-- DifficultyLevel = 2 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 2
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 800
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -800
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 900
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -900
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 900
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -900
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 700
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -700
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 500
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -500
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 800
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -800
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 900
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -900
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 700
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -700
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 700
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -700
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 900
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -900
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 900
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -900
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 700
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -700
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 800
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -800
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 600
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -600
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 800
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -800
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 700
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -700
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 900
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -900
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 800
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -800
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 700
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -700
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 700
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -700
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 700
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -700
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 600
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -600
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 500
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -500
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 800
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -800
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 800
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -800
	end_if

	if I_CompareCounter georgia_has_brain = 1
	and I_IsFactionAIControlled georgia
		set_counter georgia_has_brain 0
		increment_kings_purse georgia 800
	end_if
	if not I_IsFactionAIControlled georgia
	and I_CompareCounter georgia_has_brain = 0
		set_counter georgia_has_brain 1
		increment_kings_purse georgia -800
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 400
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -400
	end_if

end_monitor

;-- DifficultyLevel = 3 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 3
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 1200
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -1200
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 1300
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -1300
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 1500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -1500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 1300
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -1300
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 1200
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -1200
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 1000
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -1000
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 1300
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -1300
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 1500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -1500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 1300
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -1300
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 1200
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -1200
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 1100
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -1100
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 1000
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -1000
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 1100
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -1100
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 900
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -900
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 1300
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -1300
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 900
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -900
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 1300
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -1300
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 1200
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -1200
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 1400
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -1400
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 1000
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -1000
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 1200
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -1200
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 1100
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -1100
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 1200
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -1200
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 1000
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -1000
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 1000
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -1000
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 1200
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -1200
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 1200
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -1200
	end_if

	if I_CompareCounter georgia_has_brain = 1
	and I_IsFactionAIControlled georgia
		set_counter georgia_has_brain 0
		increment_kings_purse georgia 1200
	end_if
	if not I_IsFactionAIControlled georgia
	and I_CompareCounter georgia_has_brain = 0
		set_counter georgia_has_brain 1
		increment_kings_purse georgia -1200
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 500
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -500
	end_if

end_monitor

;-- DifficultyLevel = 4 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 4
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 1700
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -1700
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 1800
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -1800
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 2500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -2500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 1800
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -1800
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 1700
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -1700
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 1500
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -1500
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 1800
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -1800
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 2500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -2500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 1800
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -1800
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 1700
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -1700
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 1600
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -1600
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 1500
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -1500
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 1600
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -1600
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 1300
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -1300
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 1800
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -1800
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 1500
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -1500
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 1800
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -1800
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 1700
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -1700
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 1900
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -1900
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 1500
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -1500
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 1700
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -1700
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 1600
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -1600
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 1700
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -1700
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 1500
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -1500
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 1500
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -1500
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 1700
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -1700
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 1900
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -1900
	end_if

	if I_CompareCounter georgia_has_brain = 1
	and I_IsFactionAIControlled georgia
		set_counter georgia_has_brain 0
		increment_kings_purse georgia 1900
	end_if
	if not I_IsFactionAIControlled georgia
	and I_CompareCounter georgia_has_brain = 0
		set_counter georgia_has_brain 1
		increment_kings_purse georgia -1900
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 600
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -600
	end_if

end_monitor

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;		Stratmap UI toggle on/off
;credits to userpro from totalwar center
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
declare_counter ui_hidden
monitor_event ShortcutTriggered ShortcutTriggered object_manager hide_gui
	wait 0.5
	if I_CompareCounter ui_hidden = 1
		show_ui
		set_counter ui_hidden 2
	end_if
	if I_CompareCounter ui_hidden = 0
		hide_ui
		disable_movie_view
		set_counter ui_hidden 1
	end_if
	if I_CompareCounter ui_hidden = 2
		set_counter ui_hidden 0
	end_if
end_monitor

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


wait_monitors
end_script