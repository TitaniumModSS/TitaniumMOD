; Titanium - Early Era Campaign Script
;========================================================
;===================== CONTENTS =========================
;========================================================
;* Prelude
;* 1) CAMP PREPARE
;---- Setup AI
;---- Setup Events
;* 2) PREPARE FOR NEW FACTION'S TURN
;---- Reset counters
;---- Whose turn is on?
;---- AI Citadel check
;---x Ageing Script
;---x Great People Ancillaries
;* 3) OTHER AI STUFF
;---- Byzantine Leader Battle Models
;---- Church Titles
;---- Hanseatic System
;---- Faction Leader Global Traits
;---- Faction Killer Workaround
;---- AI REINFORCEMENTS
;---- Money Script
;* 4)PLAYER PART
;---- Looting Script Compact
;---- Besiege Upkeep
;---- City Reveal
;---- Major Events
;---- Player notifications
;---- Interactive Events
;* 5)EMERGENT FACTIONS/NATIONAL UPRISINGS
;---- William Wallace Uprising
;---- Teutonic Order Emergent
;---- Golden Horde Emergent
;---- Bulgarian Uprising
;---- Timurids Invasion
;* 6) G5 BAI STUFF
;* 7) ADDITIONAL SCRIPTS
;---- Loan Script
;---- KINGDOM EMPIRE AND REPUBLICS SCRIPTS
;---- Istanople
;---- Re-emerging Factions
;---- Royal Ladies of the Court
;---- Hotseat Treasurer


;******** Prelude (WIP)**********
; CS file based on Melooo182's bugfix compilation v1.26
; original SS6.4 file edited by gracul Jan-2011
; gracul's file edited by Melooo182 Sept-2014
; last edited by gsthoed for Titanium_Alpha Rev.31

; G5 BAI v5.7 by Germanicu5


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
script
restrict_strat_radar false


;========================================================
;********************************************************
;************** AI STUFF & CAMP PREPARE *****************
;********************************************************
;========================================================

;====================== Setup AI ========================
set_event_counter DifficultyLevel 2 ; default level is medium

monitor_event PreFactionTurnStart CampaignDifficulty >= hard

	set_event_counter DifficultyLevel 3

	link_faction_ai england catholic
	link_faction_ai france catholic
	link_faction_ai hre catholic
	link_faction_ai spain catholic
	link_faction_ai venice catholic
	link_faction_ai sicily catholic
	link_faction_ai milan catholic
	link_faction_ai scotland catholic
	link_faction_ai cumans pagan
	link_faction_ai byzantium byzantium_faction
	link_faction_ai russia default
	link_faction_ai moors islam
	link_faction_ai turks islam
	link_faction_ai egypt islam
	link_faction_ai denmark catholic
	link_faction_ai portugal catholic
	link_faction_ai poland catholic
	link_faction_ai hungary catholic
	link_faction_ai lithuania pagan
	link_faction_ai kievan_rus default
	link_faction_ai aragon catholic
	link_faction_ai norway catholic
	link_faction_ai kwarezm islam
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols mongols_faction
	link_faction_ai timurids islam
	link_faction_ai teutonic_order catholic
	link_faction_ai jerusalem catholic
	link_faction_ai slave slave_faction

	terminate_monitor
end_monitor

monitor_event PreFactionTurnStart CampaignDifficulty = very_hard

	set_event_counter DifficultyLevel 4

	historic_event difficulty_very_hard

	if I_IsFactionAIControlled england
		increment_kings_purse england 1900
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 1800
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 1700
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 1600
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 1500
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 1600
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 1300
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 1500
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 1800
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 1500
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 1700
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 1700
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 1700
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 1700
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 1800
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 1700
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 1800
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 1900
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 1600
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 1500
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 1700
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 1500
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 1800
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 1800
	end_if
	increment_kings_purse mongols 2500
	increment_kings_purse timurids 2500
	increment_kings_purse teutonic_order 1500
	increment_kings_purse papal_states 600
	increment_kings_purse slave 3500

 terminate_monitor
end_monitor

monitor_event PreFactionTurnStart CampaignDifficulty != medium

 if I_EventCounter DifficultyLevel = 2 ;so if it is not >=hard
	set_event_counter DifficultyLevel 1

	historic_event difficulty_easy

	link_faction_ai england default
	link_faction_ai france default
	link_faction_ai hre default
	link_faction_ai spain default
	link_faction_ai venice default
	link_faction_ai sicily default
	link_faction_ai milan default
	link_faction_ai scotland default
	link_faction_ai cumans default
	link_faction_ai byzantium default
	link_faction_ai russia default
	link_faction_ai moors default
	link_faction_ai turks default
	link_faction_ai egypt default
	link_faction_ai denmark default
	link_faction_ai portugal default
	link_faction_ai poland default
	link_faction_ai hungary default
	link_faction_ai lithuania default
	link_faction_ai kievan_rus default
	link_faction_ai aragon default
	link_faction_ai norway default
	link_faction_ai kwarezm default
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols default
	link_faction_ai timurids default
	link_faction_ai teutonic_order default
	link_faction_ai jerusalem default
	link_faction_ai slave default

	if I_IsFactionAIControlled england
		increment_kings_purse england 700
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 600
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 500
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 500
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 700
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 700
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 400
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 400
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 600
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 600
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 500
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 500
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 600
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 600
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 700
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 600
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 600
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 600
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 500
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 600
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 600
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 300
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 700
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 700
	end_if
	increment_kings_purse mongols 300
	increment_kings_purse timurids 300
	increment_kings_purse teutonic_order 300
	increment_kings_purse papal_states 300
	increment_kings_purse slave 1500

 end_if
 terminate_monitor
end_monitor

monitor_event PreFactionTurnStart

 if I_EventCounter DifficultyLevel = 3

	historic_event difficulty_hard

	if I_IsFactionAIControlled england
		increment_kings_purse england 1400
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 1300
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 1200
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 1100
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 1000
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 1100
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 900
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 900
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 1300
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 1000
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 1200
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 1200
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 1200
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 1200
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 1300
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 1200
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 1300
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 1200
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 1100
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 1000
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 1200
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 1000
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 1300
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 1300
	end_if
	increment_kings_purse mongols 1500
	increment_kings_purse timurids 1500
	increment_kings_purse teutonic_order 1000
	increment_kings_purse papal_states 500
	increment_kings_purse slave 2700
	terminate_monitor
 end_if

 if I_EventCounter DifficultyLevel = 2

	historic_event difficulty_medium

	link_faction_ai england catholic
	link_faction_ai france catholic
	link_faction_ai hre catholic
	link_faction_ai spain catholic
	link_faction_ai venice catholic
	link_faction_ai sicily catholic
	link_faction_ai milan catholic
	link_faction_ai scotland catholic
	link_faction_ai cumans pagan
	link_faction_ai byzantium default
	link_faction_ai russia default
	link_faction_ai moors islam
	link_faction_ai turks islam
	link_faction_ai egypt islam
	link_faction_ai denmark catholic
	link_faction_ai portugal catholic
	link_faction_ai poland catholic
	link_faction_ai hungary catholic
	link_faction_ai lithuania pagan
	link_faction_ai kievan_rus default
	link_faction_ai aragon catholic
	link_faction_ai norway catholic
	link_faction_ai kwarezm islam
	link_faction_ai papal_states papal_faction
	link_faction_ai mongols mongols_faction
	link_faction_ai timurids islam
	link_faction_ai teutonic_order catholic
	link_faction_ai jerusalem catholic
	link_faction_ai slave slave_faction

	if I_IsFactionAIControlled england
		increment_kings_purse england 900
	end_if
	if I_IsFactionAIControlled france
		increment_kings_purse france 800
	end_if
	if I_IsFactionAIControlled hre
		increment_kings_purse hre 700
	end_if
	if I_IsFactionAIControlled spain
		increment_kings_purse spain 700
	end_if
	if I_IsFactionAIControlled venice
		increment_kings_purse venice 900
	end_if
	if I_IsFactionAIControlled sicily
		increment_kings_purse sicily 900
	end_if
	if I_IsFactionAIControlled milan
		increment_kings_purse milan 700
	end_if
	if I_IsFactionAIControlled scotland
		increment_kings_purse scotland 600
	end_if
	if I_IsFactionAIControlled denmark
		increment_kings_purse denmark 800
	end_if
	if I_IsFactionAIControlled portugal
		increment_kings_purse portugal 800
	end_if
	if I_IsFactionAIControlled poland
		increment_kings_purse poland 700
	end_if
	if I_IsFactionAIControlled hungary
		increment_kings_purse hungary 700
	end_if
	if I_IsFactionAIControlled russia
		increment_kings_purse russia 700
	end_if
	if I_IsFactionAIControlled moors
		increment_kings_purse moors 700
	end_if
	if I_IsFactionAIControlled turks
		increment_kings_purse turks 900
	end_if
	if I_IsFactionAIControlled egypt
		increment_kings_purse egypt 800
	end_if
	if I_IsFactionAIControlled byzantium
		increment_kings_purse byzantium 900
	end_if
	if I_IsFactionAIControlled jerusalem
		increment_kings_purse jerusalem 800
	end_if
	if I_IsFactionAIControlled kievan_rus
		increment_kings_purse kievan_rus 700
	end_if
	if I_IsFactionAIControlled aragon
		increment_kings_purse aragon 600
	end_if
	if I_IsFactionAIControlled norway
		increment_kings_purse norway 800
	end_if
	if I_IsFactionAIControlled lithuania
		increment_kings_purse lithuania 500
	end_if
	if I_IsFactionAIControlled kwarezm
		increment_kings_purse kwarezm 900
	end_if
	if I_IsFactionAIControlled cumans
		increment_kings_purse cumans 800
	end_if
	increment_kings_purse mongols 500
	increment_kings_purse timurids 500
	increment_kings_purse teutonic_order 500
	increment_kings_purse papal_states 400
	increment_kings_purse slave 2000
 end_if

 terminate_monitor
end_monitor

;==================== Setup Events ======================
monitor_event PreFactionTurnStart

	if I_EventCounter DifficultyLevel >= 3
		if not I_IsFactionAIControlled england
			console_command give_trait england4leader HarshRuler 2
			console_command give_trait england4heir Arse 1
			console_command give_trait england4heir PublicAtheism 1
			console_command give_trait england4heir Feck 1
			console_command give_trait england4general1 Embezzler 1
			console_command give_trait england4general1 Corrupt 1
		end_if
		if not I_IsFactionAIControlled france
			console_command give_trait france4general1 DiscontentGeneral 1
			console_command give_trait france4general2 DiscontentGeneral 1
			console_command give_trait france4general3 DiscontentGeneral 1
		end_if
		if not I_IsFactionAIControlled hre
			console_command give_trait hre4leader Offensive_To_Nobles 1
			console_command give_trait hre4leader PublicAtheism 1
			console_command give_trait hre4heir DiscontentGeneral 1
			console_command diplomatic_stance hre venice neutral
			console_command diplomatic_stance hre milan neutral
		end_if
		if not I_IsFactionAIControlled spain
			console_command diplomatic_stance spain portugal neutral
		end_if
		if not I_IsFactionAIControlled venice
			console_command diplomatic_stance venice papal_states neutral
			console_command diplomatic_stance venice hre neutral
		end_if
		if not I_IsFactionAIControlled sicily
			console_command diplomatic_stance sicily papal_states neutral
		end_if
		if not I_IsFactionAIControlled milan
			console_command diplomatic_stance milan papal_states neutral
			console_command diplomatic_stance milan hre neutral
		end_if
		if not I_IsFactionAIControlled russia
			console_command diplomatic_stance russia kievan_rus neutral
		end_if
		if not I_IsFactionAIControlled portugal
			console_command diplomatic_stance portugal spain neutral
		end_if
		if not I_IsFactionAIControlled kievan_rus
			console_command diplomatic_stance kievan_rus russia neutral
		end_if
		if not I_IsFactionAIControlled kwarezm
			console_command give_trait kwarezm4leader Paranoia 1
		end_if
	end_if

 terminate_monitor
end_monitor


;========================================================
;********************************************************
;************ Prepare for new faction's turn ************
;********************************************************
;========================================================

;==================== Reset counters ====================
;declare_counter campaign_year
;declare_counter campaign_year_set
;set_counter campaign_year_set -1

declare_counter new_fturn

monitor_event PreFactionTurnStart not IsFactionAIControlled
	set_counter new_fturn 0
	set_event_counter is_the_ai 0
end_monitor


monitor_event PreFactionTurnStart

	set_counter turn_fid 0

 if I_CompareCounter new_fturn = 1
	set_event_counter is_the_ai 1
 end_if
	set_counter new_fturn 1

 set_event_counter freeze_recr_pool 0
 set_event_counter citadel_boost 0
 set_event_counter hanseatic_count -1 ; "Hanseatic System"

 ;--- "Faction Leader Global Traits"
 set_event_counter thinks_of_his_people 0
 set_event_counter wise_administrator 0
 set_event_counter strictly_religious 0
 set_event_counter protector 0
 set_event_counter merchant_skills 0
 set_event_counter greedy_ruler 0
 set_event_counter shady_connections 0

end_monitor


monitor_event FactionTurnEnd

 set_event_counter killed_factions_count 0 ;"Faction Killer Workaround"

 ;--- "Church Titles"
 if I_CompareCounter turn_fid > 8 ; if true, it was a christian faction
 set_event_counter Patriarch 0
 set_event_counter AppointBishop 0
 set_event_counter StripBishop 0
 set_event_counter Ordain_Antipope 0
 set_counter bishop_count 0
 set_counter holiness_count 0
 end_if

 ;--- "Interactive Events"
 if I_EventCounter is_the_ai = 0
 set_event_counter great_fair_accepted 0
 set_event_counter great_fair_declined 0
 set_event_counter great_tourney_accepted 0
 set_event_counter great_tourney_declined 0
 set_event_counter troubadours_event_accepted 0
 set_event_counter troubadours_event_declined 0
 if I_CompareCounter awaiting_answer_ie > 0; (hotseat)just in case current faction had been destroyed in this turn
 set_counter awaiting_answer_ie 0
 set_counter awaiting_answer_great_fair 0
 set_counter awaiting_answer_great_tourney 0
 set_counter awaiting_answer_troubadours 0
 end_if
 end_if

end_monitor


;================== Whose turn is on? ===================
declare_counter turn_fid

monitor_event PreFactionTurnStart FactionType egypt
	set_counter turn_fid 1
end_monitor
monitor_event PreFactionTurnStart FactionType turks
	set_counter turn_fid 2
end_monitor
monitor_event PreFactionTurnStart FactionType timurids
	set_counter turn_fid 3
end_monitor
monitor_event PreFactionTurnStart FactionType kwarezm
	set_counter turn_fid 4
end_monitor
monitor_event PreFactionTurnStart FactionType moors
	set_counter turn_fid 5
end_monitor
monitor_event PreFactionTurnStart FactionType lithuania
	set_counter turn_fid 6
end_monitor
monitor_event PreFactionTurnStart FactionType cumans
	set_counter turn_fid 7
end_monitor
monitor_event PreFactionTurnStart FactionType mongols
	set_counter turn_fid 8
end_monitor
monitor_event PreFactionTurnStart FactionType byzantium
	set_counter turn_fid 9
end_monitor
monitor_event PreFactionTurnStart FactionType russia
	set_counter turn_fid 10
end_monitor
monitor_event PreFactionTurnStart FactionType kievan_rus
	set_counter turn_fid 11
end_monitor
monitor_event PreFactionTurnStart FactionType venice
	set_counter turn_fid 12
end_monitor
monitor_event PreFactionTurnStart FactionType sicily
	set_counter turn_fid 13
end_monitor
monitor_event PreFactionTurnStart FactionType milan
	set_counter turn_fid 14
end_monitor
monitor_event PreFactionTurnStart FactionType denmark
	set_counter turn_fid 15
end_monitor
monitor_event PreFactionTurnStart FactionType scotland
	set_counter turn_fid 16
end_monitor
monitor_event PreFactionTurnStart FactionType france
	set_counter turn_fid 17
end_monitor
monitor_event PreFactionTurnStart FactionType hre
	set_counter turn_fid 18
end_monitor
monitor_event PreFactionTurnStart FactionType england
	set_counter turn_fid 19
end_monitor
monitor_event PreFactionTurnStart FactionType portugal
	set_counter turn_fid 20
end_monitor
monitor_event PreFactionTurnStart FactionType poland
	set_counter turn_fid 21
end_monitor
monitor_event PreFactionTurnStart FactionType spain
	set_counter turn_fid 22
end_monitor
monitor_event PreFactionTurnStart FactionType hungary
	set_counter turn_fid 23
end_monitor
monitor_event PreFactionTurnStart FactionType aragon
	set_counter turn_fid 24
end_monitor
monitor_event PreFactionTurnStart FactionType teutonic_order
	set_counter turn_fid 25
end_monitor
monitor_event PreFactionTurnStart FactionType norway
	set_counter turn_fid 26
end_monitor
monitor_event PreFactionTurnStart FactionType jerusalem
	set_counter turn_fid 27
end_monitor
monitor_event PreFactionTurnStart FactionType papal_states
	set_counter turn_fid 28
end_monitor

;=================== AI Citadel check ===================
monitor_event PreFactionTurnStart IsFactionAIControlled
	and not FactionBuildingExists = citadel
	and I_TurnNumber > 120

	set_event_counter citadel_boost 1
end_monitor


;=================== AGEING SCRIPT ======================
;==================================================
;===================== DISABLED =====================
;==================================================

;============= Great People Ancillaries =================
;========== was moved to descr_events.txt ===========
;========================================================


;========================================================
;********************************************************
;****************** OTHER AI STUFF **********************
;********************************************************
;========================================================

;========== Byzantine Leader Battle Models ==============
monitor_event BecomesFactionLeader FactionType byzantium
	change_battle_model byzantium leader byzantine_emperor
end_monitor

monitor_event BecomesFactionHeir FactionType byzantium
	change_battle_model byzantium heir byzantine_heir
end_monitor

;=================== Church Titles ======================
; This is linked with the "Is the AI" section
declare_counter bishop_count
declare_counter holiness_count

; france or hre excommunicated
monitor_event FactionExcommunicated I_CompareCounter turn_fid >= 17
	and I_CompareCounter turn_fid <= 18

	set_event_counter Ordain_Antipope 1
end_monitor

monitor_event CharacterTurnStart AgentType = priest
	and Trait PriestLevel >= 3

	set_event_counter Ordain_Antipope 0
	set_event_counter Patriarch 1
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and ! Religion islam
	and ! Religion pagan
	and Attribute Piety > 4
	and I_CompareCounter holiness_count < 2

	if I_CompareCounter holiness_count = 1
		set_event_counter Ordain_Antipope 0
		set_event_counter Patriarch 1
	end_if

	inc_counter holiness_count 1
end_monitor

monitor_event CharacterTurnStart AgentType = priest
	and Trait PriestLevel = 1

	inc_counter bishop_count 1
end_monitor

monitor_event SettlementTurnStart I_CompareCounter turn_fid > 8 ; christian factions

	inc_counter bishop_count -1
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and not Religion islam
	and not Religion pagan
	and Trait PriestLevel = 0

	if I_CompareCounter bishop_count = 0
		set_event_counter AppointBishop 0
	end_if

	if I_CompareCounter bishop_count < 0
		set_event_counter AppointBishop 1
		inc_counter bishop_count 1
	end_if
end_monitor

monitor_event CharacterTurnEnd AgentType = priest
	and Trait PriestLevel = 1; so he's a christian bishop
	and I_CompareCounter bishop_count >= 0

	if I_CompareCounter bishop_count = 0
		set_event_counter StripBishop 0
	end_if

	if I_CompareCounter bishop_count > 0
		set_event_counter StripBishop 1
		inc_counter bishop_count -1
	end_if
end_monitor

;================== Hanseatic System ====================
; this was moved to the "Is the AI?" section
;monitor_event PreFactionTurnStart TrueCondition
;	set_event_counter hanseatic_count -1
;end_monitor

monitor_event CharacterTurnStart GovernorPlugInExists = hansa
	and I_EventCounter hanseatic_league = 1

	inc_event_counter hanseatic_count 1
end_monitor

monitor_event CharacterTurnStart GovernorPlugInExists = c_hansa
	and I_EventCounter hanseatic_league = 1

	inc_event_counter hanseatic_count 1
end_monitor

	set_event_counter hanseatic_constructed 0

monitor_event GuildUpgraded BuildingName = hanseatic_guild
	set_event_counter hanseatic_constructed 1
	reset_guild_standing hanseatic_guild
end_monitor

monitor_event BuildingDestroyed BuildingName = hanseatic_guild
	set_event_counter hanseatic_constructed 0
	reset_guild_standing hanseatic_guild
end_monitor


;=========== Faction Leader Global Traits ===============
; This section is linked with "Is the AI?" section

monitor_event CharacterTurnStart IsFactionLeader
	and Trait ThinksOfHisPeople > 0
	set_event_counter thinks_of_his_people 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait WiseAdministrator > 0
	set_event_counter wise_administrator 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait StrictlyReligious > 0
	set_event_counter strictly_religious 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait Protector > 0
	set_event_counter protector 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait MerchantSkills > 0
	set_event_counter merchant_skills 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait GreedyRuler > 0
	set_event_counter greedy_ruler 1
end_monitor

monitor_event CharacterTurnStart IsFactionLeader
	and Trait ShadyConnections > 0
	set_event_counter shady_connections 1
end_monitor

;============== Faction Killer Workaround ===============
;This script is linked with EDCT and "Reset counters"

monitor_event CeasedFactionLeader not FactionType papal_states
	and FactionHasRank
	inc_event_counter killed_factions_count 1
end_monitor

monitor_event BecomesFactionLeader not FactionType papal_states
	and FactionHasRank ; to filter (re)emerging factions

	inc_event_counter killed_factions_count -1
end_monitor



;========================================================
;================== AI REINFORCEMENTS ===================
;========================================================
;---- Section's Contents
;- Constantinople JIHAD garrison script
;- Startup Reinforcements
;- Merchant&Priest&Ship Support Spawn with Turn10 Reinforcement
;- No Heir Reinforcement

;========= Constantinople JIHAD garrison script =========
declare_counter conple_jgs
if not I_HotseatEnabled
and I_LocalFaction byzantium
 set_counter conple_jgs 10
end_if

monitor_event GeneralArrivesCrusadeTargetRegion IsRegionOneOf Constantinople_Province
	and IsOnJihad
	and IsJihad
	and TargetFactionType byzantium
	and I_CompareCounter conple_jgs != 1

	if I_CompareCounter conple_jgs = 10
	 terminate_monitor
	end_if

	set_counter conple_jgs 1
end_monitor

monitor_event Transgression TransgressionName = TC_INSTIGATE_SIEGE
	and TargetFactionType byzantium
	and I_CompareCounter conple_jgs > 0
	and not I_SettlementUnderSiege Constantinople

	if I_CompareCounter conple_jgs = 10
	 terminate_monitor
	end_if

 if I_JihadInProgress
 and I_SettlementOwner Constantinople = byzantium
 and I_IsFactionAIControlled byzantium

	campaign_wait 0.1

	if I_SettlementUnderSiege Constantinople
		console_command create_unit Constantinople "Contaratoi" 3 0 0 0
		console_command create_unit Constantinople "Toxotae" 4 0 1 0
	end_if
 end_if

	set_counter conple_jgs 0
end_monitor

;================ Startup Reinforcements ================
monitor_event FactionTurnStart

 ;Seljuk Reinforcement
 if I_EventCounter DifficultyLevel > 1
 and not I_IsFactionAIControlled byzantium
 and I_IsFactionAIControlled turks
	spawn_army 
		faction turks
		character	Kasim, general, age 28, x 293, y 135
		unit		ME Bodyguard		exp 1 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		Turkish Archers		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		ME Spear Militia		exp 0 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
		unit		Turkomans			exp 1 armour 0 weapon_lvl 0
	end
	add_money turks 8000
 end_if


 if I_EventCounter DifficultyLevel <= 2
	if I_IsFactionAIControlled england
		spawn_army
		faction england
		character	David Plantagenet, named character, age 20, x 83, y 220, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army 
		faction france
		character	Amaury Capet, named character, age 20, x 92, y 202, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
		faction hre
		character	Arnoldt von_Hohenstaufen, named character, age 20, x 143, y 207, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
		faction spain
		character	Enrique de_Castilla, named character, age 20, x 32, y 148, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
		faction venice
		character	Barbus Selvo, named character, age 20, x 161, y 173, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Venetian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
		faction sicily
		character	Ettore d_Altavilla, named character, age 20, x 177, y 114, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
		faction milan
		character	Azolino Rossi, named character, age 20, x 137, y 168, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Milanese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
		faction scotland
		character	Comgell mac_Donnchada, named character, age 20, x 53, y 253, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
		faction cumans
		character	Balamir of_the_Oghuz, named character, age 20, x 440, y 250, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
		unit	Cuman Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
		faction byzantium
		character	Areovindos Komnenos, named character, age 20, x 278, y 148, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
		unit	Greek Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
		faction russia
		character	Domazhir Novgorodskii, named character, age 20, x 301, y 275, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Russian 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
		faction poland
		character	Dobromir Piast, named character, age 20, x 222, y 213, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
		faction moors
		character	Ayyub al_Andalusi, named character, age 20, x 40, y 113, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
		faction turks
		character	Bahadir Celaluddevle, named character, age 20, x 339, y 133, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
		faction egypt
		character	Abdul-Malik al-Fatimiyyun, named character, age 20, x 309, y 60, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
		faction denmark
		character	Birger Svendsen, named character, age 20, x 146, y 253, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
		faction portugal
		character	Claudio de_Portugal, named character, age 20, x 17, y 123, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
		faction hungary
		character	Bod Arpadhazi, named character, age 20, x 206, y 179, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army 
		faction jerusalem
		character	Colin de_Boulogne, named character, age 20, x 329, y 78, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Jerusalem 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
		faction lithuania
		character	Kestutis, named character, age 20, x 262, y 240, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
		unit	Lith Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
		faction kievan_rus
		character	Dobroslav Yaroslavich, named character, age 20, x 292, y 214, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
		faction aragon
		character	Alvar Ramirez, named character, age 20, x 83, y 150, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
		faction norway
		character	Erik Haakonsson, named character, age 20, x 114, y 280, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
		faction kwarezm
		character	Batu Mohammed, named character, age 20, x 449, y 93, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 2 armour 0 weapon_lvl 0
		end
	end_if
 end_if
 if I_EventCounter DifficultyLevel >= 3
	if I_IsFactionAIControlled england
		spawn_army
		faction england
		character	David Plantagenet, named character, age 30, x 78, y 218, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Fyrd Spearmen	exp 1 armour 0 weapon_lvl 0
		unit	Fyrd Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 1 armour 0 weapon_lvl 0
		unit	Fyrd Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 0 armour 0 weapon_lvl 0
		unit	Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army
		faction france
		character	Amaury Capet, named character, age 30, x 94, y 199, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
		faction hre
		character	Arnoldt von_Hohenstaufen, named character, age 30, x 156, y 201, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
		faction spain
		character	Enrique de_Castilla, named character, age 30, x 38, y 152, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
		faction venice
		character	Barbus Selvo, named character, age 30, x 165, y 173, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Venetian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
		faction sicily
		character	Ettore d_Altavilla, named character, age 30, x 170, y 117, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
		faction milan
		character	Azolino Rossi, named character, age 30, x 139, y 168, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Milanese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
		unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
		faction scotland
		character	Comgell mac_Donnchada, named character, age 30, x 62, y 247, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 0 armour 0 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 1 armour 0 weapon_lvl 0
		unit	Highlanders	exp 0 armour 0 weapon_lvl 0
		unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
		faction cumans
		character	Balamir of_the_Oghuz, named character, age 30, x 431, y 250, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
		unit	Cuman Bodyguard	exp 2 armour 1 weapon_lvl 0
		unit	Yasi Archers	exp 1 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 2 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 1 armour 0 weapon_lvl 0
		unit	Cuman Horse Militia	exp 1 armour 0 weapon_lvl 0
		unit	Kasogi Senior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Kasogi Senior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
		faction byzantium
		character	Areovindos Komnenos, named character, age 30, x 282, y 143, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 3 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
		unit	Greek Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Skythikoi	exp 1 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 1 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Contaratoi	exp 0 armour 0 weapon_lvl 0
		unit	Mourtatoi	exp 1 armour 0 weapon_lvl 0
		unit	Toxotae	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
		faction russia
		character	Domazhir Novgorodskii, named character, age 30, x 301, y 269, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Russian 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Pechenegs		exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
		faction poland
		character	Dobromir Piast, named character, age 30, x 215, y 210, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 3 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Polish Shooters	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
		unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
		faction moors
		character	Ayyub al_Andalusi, named character, age 30, x 44, y 119, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 3 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
		faction turks
		character	Bahadir Celaluddevle, named character, age 30, x 312, y 119, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Turkomans	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Turkish Archers	exp 1 armour 0 weapon_lvl 0
		unit	Turkish Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
		faction egypt
		character	Abdul-Malik al-Fatimiyyun, named character, age 30, x 302, y 59, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 1 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		unit	Desert Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
		faction denmark
		character	Birger Svendsen, named character, age 30, x 147, y 246, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 1 armour 0 weapon_lvl 0
		unit	Norse Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
		faction portugal
		character	Claudio de_Portugal, named character, age 30, x 19, y 128, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Jinetes		exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Crossbowmen	exp 1 armour 0 weapon_lvl 0
		unit	Peasant Crossbowmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
		faction hungary
		character	Bod Arpadhazi, named character, age 30, x 215, y 188, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Magyar Cavalry	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army 
		faction jerusalem
		character	Colin de_Boulogne, named character, age 30, x 331, y 77, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Jerusalem 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Mounted Sergeants	exp 1 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 1 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Pilgrims	exp 0 armour 0 weapon_lvl 0
		unit	Sergeant Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Pilgrims	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
		faction lithuania
		character	Kestutis, named character, age 30, x 258, y 239, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
		unit	Lith Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Lithuanian Axemen	exp 1 armour 0 weapon_lvl 0
		unit	Lithuanian Axemen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		unit	Baltic Spearmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
		faction kievan_rus
		character	Dobroslav Yaroslavich, named character, age 30, x 295, y 209, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
		unit	EE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Pechenegs		exp 1 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
		unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
		unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
		faction aragon
		character	Alvar Ramirez, named character, age 30, x 76, y 147, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
		unit	SE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 1 armour 0 weapon_lvl 0
		unit	Peasant Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
		faction norway
		character	Erik Haakonsson, named character, age 30, x 116, y 279, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
		unit	NE Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Viking Raiders	exp 1 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 0 armour 0 weapon_lvl 0
		unit	Viking Raiders	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
		faction kwarezm
		character	Batu Mohammed, named character, age 30, x 499, y 93, family
		traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
		unit	ME Bodyguard	exp 1 armour 1 weapon_lvl 0
		unit	Turkomans	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
		unit	Afghan Javelinmen	exp 1 armour 0 weapon_lvl 0
		unit	Daylami Light Infantry	exp 0 armour 0 weapon_lvl 0
		end
	end_if
 end_if

 terminate_monitor
end_monitor


;==========  Merchant&Priest&Ship Support Spawn =========
;================ & Turn10 Reinforcement ================
add_events
	event	counter	Ranked_merchants_priest_reinforcement
	date	15
	event	counter	Ranked_merchants_priest_reinforcement
	date	30
	event	counter	Ranked_merchants_priest_reinforcement
	date	45
	event	counter	Ranked_merchants_priest_reinforcement
	date	70
	event	counter	Ranked_merchants_priest_reinforcement
	date	90
	event	counter	Ranked_merchants_priest_reinforcement
	date	140
	event	counter	Slave_merchants_reinforcement
	date	0
	event	counter	Slave_merchants_reinforcement
	date	35
	event	counter	Slave_merchants_reinforcement
	date	70
	event	counter	Ranked_merchant_reinforcement
	date	2 summer
	event	counter	Ranked_merchant_reinforcement
	date	5
	event	counter	Ships_reinforcement
	date	40
	event	counter	Ships_reinforcement
	date	80
	event	counter	Turn10Reinforcement
	date	5
	event	counter	MPSSS
	date	0
	event	counter	MPSSS
	date	2 summer
	event	counter	MPSSS
	date	5
	event	counter	MPSSS
	date	15
	event	counter	MPSSS
	date	30
	event	counter	MPSSS
	date	35
	event	counter	MPSSS
	date	40
	event	counter	MPSSS
	date	45
	event	counter	MPSSS
	date	70
	event	counter	MPSSS
	date	80
	event	counter	MPSSS
	date	90
	event	counter	MPSSS
	date	140
end_add_events

declare_counter rmpr_set
monitor_event PreFactionTurnStart FactionType slave
	and I_EventCounter MPSSS = 1

 if I_EventCounter Ranked_merchants_priest_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_character england random_name, merchant, age 20, x 222, y 238
		spawn_character england random_name, merchant, age 20, x 222, y 238
		spawn_character england random_name, priest, age 20, x 222, y 238
	end_if
	if I_IsFactionAIControlled france
	and I_NumberOfSettlements france > 1
		spawn_character france random_name, merchant, age 20, x 94, y 199
		spawn_character france random_name, merchant, age 20, x 94, y 199
		spawn_character france random_name, priest, age 20, x 94, y 199
	end_if
	if I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre > 1
		spawn_character hre random_name, merchant, age 20, x 156, y 201
		spawn_character hre random_name, merchant, age 20, x 156, y 201
		spawn_character hre random_name, priest, age 20, x 156, y 201
	end_if
	if I_IsFactionAIControlled spain
	and I_NumberOfSettlements spain > 1
		spawn_character spain random_name, merchant, age 20, x 38, y 152
		spawn_character spain random_name, merchant, age 20, x 38, y 152
		spawn_character spain random_name, priest, age 20, x 38, y 152
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_character venice random_name, merchant, age 20, x 165, y 173
		spawn_character venice random_name, merchant, age 20, x 165, y 173
		spawn_character venice random_name, priest, age 20, x 165, y 173
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
		spawn_character sicily random_name, priest, age 20, x 170, y 117
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_character milan random_name, merchant, age 20, x 139, y 168
		spawn_character milan random_name, merchant, age 20, x 139, y 168
		spawn_character milan random_name, priest, age 20, x 139, y 168
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
		spawn_character scotland random_name, priest, age 20, x 62, y 247
	end_if
	if I_IsFactionAIControlled cumans
	and I_NumberOfSettlements cumans > 1
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
		spawn_character cumans random_name, priest, age 20, x 431, y 250
	end_if
	if I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium > 1
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
		spawn_character byzantium random_name, priest, age 20, x 282, y 143
	end_if
	if I_IsFactionAIControlled russia
	and I_NumberOfSettlements russia > 1
		spawn_character russia random_name, merchant, age 20, x 301, y 269
		spawn_character russia random_name, merchant, age 20, x 301, y 269
		spawn_character russia random_name, priest, age 20, x 301, y 269
	end_if
	if I_IsFactionAIControlled moors
	and I_NumberOfSettlements moors > 1
		spawn_character moors random_name, merchant, age 20, x 44, y 119
		spawn_character moors random_name, merchant, age 20, x 44, y 119
		spawn_character moors random_name, priest, age 20, x 44, y 119
	end_if
	if I_IsFactionAIControlled turks
	and I_NumberOfSettlements turks > 1
		spawn_character turks random_name, merchant, age 20, x 312, y 119
		spawn_character turks random_name, merchant, age 20, x 312, y 119
		spawn_character turks random_name, priest, age 20, x 312, y 119
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
		spawn_character egypt random_name, priest, age 20, x 302, y 59
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
		spawn_character denmark random_name, priest, age 20, x 147, y 246
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_character portugal random_name, merchant, age 20, x 19, y 128
		spawn_character portugal random_name, merchant, age 20, x 19, y 128
		spawn_character portugal random_name, priest, age 20, x 19, y 128
	end_if
	if I_IsFactionAIControlled poland
	and I_NumberOfSettlements poland > 1
		spawn_character poland random_name, merchant, age 20, x 215, y 210
		spawn_character poland random_name, merchant, age 20, x 215, y 210
		spawn_character poland random_name, priest, age 20, x 215, y 210
	end_if
	if I_IsFactionAIControlled hungary
	and I_NumberOfSettlements hungary > 1
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
		spawn_character hungary random_name, priest, age 20, x 215, y 188
	end_if
	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfSettlements kievan_rus > 1
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
		spawn_character kievan_rus random_name, priest, age 20, x 295, y 209
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
		spawn_character aragon random_name, priest, age 20, x 76, y 147
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_character norway random_name, merchant, age 20, x 116, y 279
		spawn_character norway random_name, merchant, age 20, x 116, y 279
		spawn_character norway random_name, priest, age 20, x 116, y 279
	end_if
	if I_IsFactionAIControlled lithuania
	and I_NumberOfSettlements lithuania > 1
		spawn_character lithuania random_name, merchant, age 20, x 258, y 239
		spawn_character lithuania random_name, merchant, age 20, x 258, y 239
		spawn_character lithuania random_name, priest, age 20, x 258, y 239
	end_if
	if I_IsFactionAIControlled kwarezm
	and I_NumberOfSettlements kwarezm > 1
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
		spawn_character kwarezm random_name, priest, age 20, x 449, y 93
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_NumberOfSettlements jerusalem > 1
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
		spawn_character jerusalem random_name, priest, age 20, x 331, y 77
	end_if

	if I_CompareCounter rmpr_set = 5
	 terminate_monitor
	end_if
	inc_counter rmpr_set 1

  set_event_counter Ranked_merchants_priest_reinforcement 0
 end_if

 if I_EventCounter Slave_merchants_reinforcement = 1
	spawn_character slave random_name, merchant, age 20, x 138, y 101
	spawn_character slave random_name, merchant, age 20, x 66, y 131
	spawn_character slave random_name, merchant, age 20, x 349, y 89
	spawn_character slave random_name, merchant, age 20, x 428, y 218
	spawn_character slave random_name, merchant, age 20, x 234, y 218
	spawn_character slave random_name, merchant, age 20, x 81, y 184
	spawn_character slave random_name, merchant, age 20, x 57, y 233
	spawn_character slave random_name, merchant, age 20, x 178, y 248
	spawn_character slave random_name, merchant, age 20, x 184, y 144
	spawn_character slave random_name, merchant, age 20, x 223, y 157
	spawn_character slave random_name, merchant, age 20, x 482, y 104
	spawn_character slave random_name, merchant, age 20, x 20, y 125
	spawn_character slave random_name, merchant, age 20, x 30, y 237
	spawn_character slave random_name, merchant, age 20, x 238, y 118
  set_event_counter Slave_merchants_reinforcement 0
 end_if

 if I_EventCounter Ranked_merchant_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_character england random_name, merchant, age 20, x 222, y 238
	end_if
	if I_IsFactionAIControlled france
	and I_NumberOfSettlements france > 1
		spawn_character france random_name, merchant, age 20, x 94, y 199
	end_if
	if I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre > 1
		spawn_character hre random_name, merchant, age 20, x 156, y 201
	end_if
	if I_IsFactionAIControlled spain
	and I_NumberOfSettlements spain > 1
		spawn_character spain random_name, merchant, age 20, x 38, y 152
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_character venice random_name, merchant, age 20, x 165, y 173
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_character sicily random_name, merchant, age 20, x 170, y 117
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_character milan random_name, merchant, age 20, x 139, y 168
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_character scotland random_name, merchant, age 20, x 62, y 247
	end_if
	if I_IsFactionAIControlled cumans
	and I_NumberOfSettlements cumans > 1
		spawn_character cumans random_name, merchant, age 20, x 431, y 250
	end_if
	if I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium > 1
		spawn_character byzantium random_name, merchant, age 20, x 282, y 143
	end_if
	if I_IsFactionAIControlled russia
	and I_NumberOfSettlements russia > 1
		spawn_character russia random_name, merchant, age 20, x 301, y 269
	end_if
	if I_IsFactionAIControlled moors
	and I_NumberOfSettlements moors > 1
		spawn_character moors random_name, merchant, age 20, x 44, y 119
	end_if
	if I_IsFactionAIControlled turks
	and I_NumberOfSettlements turks > 1
		spawn_character turks random_name, merchant, age 20, x 312, y 119
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_character egypt random_name, merchant, age 20, x 302, y 59
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_character denmark random_name, merchant, age 20, x 147, y 246
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_character portugal random_name, merchant, age 20, x 19, y 128
	end_if
	if I_IsFactionAIControlled poland
	and I_NumberOfSettlements poland > 1
		spawn_character poland random_name, merchant, age 20, x 215, y 210
	end_if
	if I_IsFactionAIControlled hungary
	and I_NumberOfSettlements hungary > 1
		spawn_character hungary random_name, merchant, age 20, x 215, y 188
	end_if
	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfSettlements kievan_rus > 1
		spawn_character kievan_rus random_name, merchant, age 20, x 295, y 209
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_character aragon random_name, merchant, age 20, x 76, y 147
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_character norway random_name, merchant, age 20, x 116, y 279
	end_if
	if I_IsFactionAIControlled lithuania
	and I_NumberOfSettlements lithuania > 1
		spawn_character lithuania random_name, merchant, age 20, x 258, y 239
	end_if
	if I_IsFactionAIControlled kwarezm
	and I_NumberOfSettlements kwarezm > 1
		spawn_character kwarezm random_name, merchant, age 20, x 449, y 93
	end_if
	if I_IsFactionAIControlled jerusalem
	and I_NumberOfSettlements jerusalem > 1
		spawn_character jerusalem random_name, merchant, age 20, x 331, y 77
	end_if
  set_event_counter Ranked_merchant_reinforcement 0
 end_if

 if I_EventCounter Ships_reinforcement = 1
	if I_IsFactionAIControlled england
	and I_NumberOfSettlements england > 1
		spawn_army
			faction england
			character random_name, admiral, age 20, x 76, y 211
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice > 1
		spawn_army
			faction venice
			character random_name, admiral, age 20, x 171, y 170
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily > 1
		spawn_army
			faction sicily
			character random_name, admiral, age 20, x 170, y 122
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan > 1
		spawn_army
			faction milan
			character random_name, admiral, age 20, x 76, y 211
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
			unit	galley		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland > 1
		spawn_army
			faction scotland
			character random_name, admiral, age 20, x 61, y 253
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt > 1
		spawn_army
			faction egypt
			character random_name, admiral, age 20, x 76, y 211
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
			unit	dhow		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark > 1
		spawn_army
			faction denmark
			character random_name, admiral, age 20, x 170, y 242
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal > 1
		spawn_army
			faction portugal
			character random_name, admiral, age 20, x 12, y 144
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon > 1
		spawn_army
			faction aragon
			character random_name, admiral, age 20, x 96, y 143
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
			unit	cog		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway > 1
		spawn_army
			faction norway
			character random_name, admiral, age 20, x 154, y 270
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
			unit	longboat		exp 0 armour 0 weapon_lvl 0
		end
	end_if
  set_event_counter Ships_reinforcement 0
 end_if

 if I_EventCounter Turn10Reinforcement = 1
	if I_IsFactionAIControlled england
		spawn_army
			faction england
			character	Fulk Plantagenet, named character, age 30, x 78, y 218, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_English 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Fyrd Spearmen		exp 1 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Archer Militia		exp 1 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Archer Militia		exp 0 armour 0 weapon_lvl 0
			unit	Fyrd Spearmen		exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled france
		spawn_army
			faction france
			character	Gautier Capet, named character, age 30, x 94, y 199, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_French 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 1 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hre
		spawn_army
			faction hre
			character	Bruno von_Hohenstaufen, named character, age 30, x 156, y 201, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_HRE 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled spain
		spawn_army
			faction spain
			character	Eusebio de_Castilla, named character, age 30, x 38, y 152, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Spanish 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 1 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled venice
		spawn_army
			faction venice
			character	Bucello Selvo, named character, age 30, x 165, y 173, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Venetian 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled sicily
		spawn_army
			faction sicily
			character	Guaimario d_Altavilla, named character, age 30, x 170, y 117, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Sicilian 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled milan
		spawn_army
			faction milan
			character	Lapo Rossi, named character, age 30, x 139, y 168, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Milanese 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Urban Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 1 armour 0 weapon_lvl 0
			unit	Urban Crossbow Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled scotland
		spawn_army
			faction scotland
			character	Amlaib mac_Donnchada, named character, age 30, x 62, y 247, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Scottish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Highlanders		exp 1 armour 0 weapon_lvl 0
			unit	Highlanders		exp 0 armour 0 weapon_lvl 0
			unit	Highlanders		exp 0 armour 0 weapon_lvl 0
			unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
			unit	Highland Archers	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled cumans
		spawn_army
			faction cumans
			character	Bartan of_the_Oghuz, named character, age 30, x 431, y 250, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Cumans 1 , BiologicalSon 1
			unit	Cuman Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit	Yasi Archers	exp 1 armour 0 weapon_lvl 0
			unit	Cuman Horse Militia	exp 2 armour 0 weapon_lvl 0
			unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
			unit	Steppe Alans	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled byzantium
		spawn_army
			faction byzantium
			character	Arsenios Komnenos, named character, age 30, x 282, y 143, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Greek 1 , BiologicalSon 1
			unit	Greek Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 1 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Contaratoi		exp 0 armour 0 weapon_lvl 0
			unit	Mourtatoi		exp 1 armour 0 weapon_lvl 0
			unit	Toxotae		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled russia
		spawn_army
			faction russia
			character	Gorislav Novgorodskii, named character, age 30, x 301, y 269, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Russian 1 , BiologicalSon 1
			unit	EE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled moors
		spawn_army
			faction moors
			character	Bakr al_Andalusi, named character, age 30, x 44, y 119, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Moorish 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled turks
		spawn_army
			faction turks
			character	Ali Celaluddevle, named character, age 30, x 312, y 119, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Turkish 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Turkomans		exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Turkish Archers		exp 1 armour 0 weapon_lvl 0
			unit	Turkish Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled egypt
		spawn_army
			faction egypt
			character	Dinar al-Fatimiyyun, named character, age 30, x 302, y 59, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Egyptian 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	ME Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 1 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
			unit	Desert Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled denmark
		spawn_army
			faction denmark
			character	Bue Svendsen, named character, age 30, x 147, y 246, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Danish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 1 armour 0 weapon_lvl 0
			unit	Norse Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled portugal
		spawn_army
			faction portugal
			character	Baltazar de_Portugal, named character, age 30, x 19, y 128, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Portuguese 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Jinetes			exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Crossbowmen	exp 1 armour 0 weapon_lvl 0
			unit	Peasant Crossbowmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled poland
		spawn_army
			faction poland
			character	Ignacy Piast, named character, age 30, x 215, y 210, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Polish 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Polish Shooters		exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 1 armour 0 weapon_lvl 0
			unit	Woodsmen	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled hungary
		spawn_army
			faction hungary
			character	Bank Arpadhazi, named character, age 30, x 215, y 188, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Hungarian 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Magyar Cavalry		exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 1 armour 0 weapon_lvl 0
			unit	EE Spear Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kievan_rus
		spawn_army
			faction kievan_rus
			character	Gavriil Yaroslavich, named character, age 30, x 295, y 209, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kievan 1 , BiologicalSon 1
			unit	EE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Pechenegs			exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Archer Militia	exp 1 armour 0 weapon_lvl 0
			unit	Junior Militia	exp 0 armour 0 weapon_lvl 0
			unit	EE Archer Militia	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled aragon
		spawn_army
			faction aragon
			character	Jimeno Ramirez, named character, age 30, x 76, y 147, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Aragonese 1 , BiologicalSon 1
			unit	SE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 1 armour 0 weapon_lvl 0
			unit	Peasant Archers		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled norway
		spawn_army
			faction norway
			character	Yngwie Haakonsson, named character, age 30, x 116, y 279, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Norwegian 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Viking Raiders		exp 1 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 0 armour 0 weapon_lvl 0
			unit	Viking Raiders		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 1 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit	Spear Militia		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled lithuania
		spawn_army
			faction lithuania
			character	Vasalgas, named character, age 30, x 258, y 239, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Lithuanian 1 , BiologicalSon 1
			unit	Lith Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Lithuanian Axemen	exp 1 armour 0 weapon_lvl 0
			unit	Lithuanian Axemen	exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
			unit	Baltic Spearmen		exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled kwarezm
		spawn_army
			faction kwarezm
			character	Melik Mohammed, named character, age 30, x 449, y 93, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , Royal_Blood_Kwarezm 1 , BiologicalSon 1
			unit	ME Bodyguard		exp 1 armour 1 weapon_lvl 0
			unit	Turkomans		exp 1 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	ME Spear Militia	exp 0 armour 0 weapon_lvl 0
			unit	Afghan Javelinmen	exp 1 armour 0 weapon_lvl 0
			unit	Daylami Light Infantry	exp 0 armour 0 weapon_lvl 0
		end
	end_if
	if I_IsFactionAIControlled jerusalem
		spawn_army
			faction jerusalem
			character	Simon de_Brienne, named character, age 30, x 331, y 77, family
			traits LoyaltyStarter 1 , MilitaryInclination 1 , Military_Edu 2 , GoodCommander 2 , ReligionStarter 1 , BiologicalSon 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Crossbow Militia	exp 0 armour 1 weapon_lvl 0
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0	  
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Dismounted Knights Of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
			unit	Knights of Jerusalem		exp 1 armour 0 weapon_lvl 0
		end
	end_if
  set_event_counter Turn10Reinforcement 0
 end_if

 set_event_counter MPSSS 0
end_monitor

;================ No Heir Reinforcement =================
declare_counter heir_venice
declare_counter heir_sicily
declare_counter heir_milan
declare_counter heir_papal_states
declare_counter heir_denmark
declare_counter heir_egypt
declare_counter heir_scotland
declare_counter heir_cumans
declare_counter heir_mongols
declare_counter heir_turks
declare_counter heir_france
declare_counter heir_hre
declare_counter heir_england
declare_counter heir_portugal
declare_counter heir_poland
declare_counter heir_byzantium
declare_counter heir_moors
declare_counter heir_russia
declare_counter heir_spain
declare_counter heir_hungary
declare_counter heir_aragon
declare_counter heir_lithuania
declare_counter heir_kievan_rus
declare_counter heir_teutonic_order
declare_counter heir_timurids
declare_counter heir_norway
declare_counter heir_jerusalem
declare_counter heir_kwarezm
declare_counter no_other_heir_spawn

monitor_event FactionTurnStart FactionType slave

	if I_IsFactionAIControlled england
	and I_NumberOfHeirs england < 4
	and I_CompareCounter heir_england < 3
	and I_NumberOfSettlements england >= 1
		spawn_army
			faction england
			character	random_name, named character, age 20, x 83, y 220, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_england 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled scotland
	and I_NumberOfHeirs scotland < 4
	and I_CompareCounter heir_scotland < 3
	and I_NumberOfSettlements scotland >= 1
		spawn_army
			faction scotland
			character	random_name, named character, age 20, x 53, y 253, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_scotland 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled denmark
	and I_NumberOfHeirs denmark < 4
	and I_CompareCounter heir_denmark < 3
	and I_NumberOfSettlements denmark >= 1
		spawn_army
			faction denmark
			character	random_name, named character, age 20, x 146, y 253, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_denmark 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled norway
	and I_NumberOfHeirs norway < 4
	and I_CompareCounter heir_norway < 3
	and I_NumberOfSettlements norway >= 1
		spawn_army
			faction norway
			character	random_name, named character, age 20, x 114, y 280, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_norway 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled france
	and I_NumberOfHeirs france < 4
	and I_CompareCounter heir_france < 3
	and I_NumberOfSettlements france >= 1
		spawn_army
			faction france
			character	random_name, named character, age 20, x 92, y 202, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_france 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled hre
	and I_NumberOfHeirs hre < 4
	and I_CompareCounter heir_hre < 3
	and I_NumberOfSettlements hre >= 1
		spawn_army
			faction hre
			character	random_name, named character, age 20, x 143, y 207, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_hre 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled milan
	and I_NumberOfHeirs milan < 4
	and I_CompareCounter heir_milan < 3
	and I_NumberOfSettlements milan >= 1
		spawn_army
			faction milan
			character	random_name, named character, age 20, x 137, y 168, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_milan 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled aragon
	and I_NumberOfHeirs aragon < 4
	and I_CompareCounter heir_aragon < 3
	and I_NumberOfSettlements aragon >= 1
		spawn_army
			faction aragon
			character	random_name, named character, age 20, x 83, y 150, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_aragon 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled spain
	and I_NumberOfHeirs spain < 4
	and I_CompareCounter heir_spain < 3
	and I_NumberOfSettlements spain >= 1
		spawn_army
			faction spain
			character	random_name, named character, age 20, x 32, y 148, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_spain 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled portugal
	and I_NumberOfHeirs portugal < 4
	and I_CompareCounter heir_portugal < 3
	and I_NumberOfSettlements portugal >= 1
		spawn_army
			faction portugal
			character	random_name, named character, age 20, x 17, y 123, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_portugal 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled venice
	and I_NumberOfHeirs venice < 4
	and I_CompareCounter heir_venice < 3
	and I_NumberOfSettlements venice >= 1
		spawn_army
			faction venice
			character	random_name, named character, age 20, x 161, y 173, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_venice 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled sicily
	and I_NumberOfHeirs sicily < 4
	and I_CompareCounter heir_sicily < 3
	and I_NumberOfSettlements sicily >= 1
		spawn_army
			faction sicily
			character	random_name, named character, age 20, x 177, y 114, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	SE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_sicily 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled poland
	and I_NumberOfHeirs poland < 4
	and I_CompareCounter heir_poland < 3
	and I_NumberOfSettlements poland >= 1
		spawn_army
			faction poland
			character	random_name, named character, age 20, x 222, y 213, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_poland 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled hungary
	and I_NumberOfHeirs hungary < 4
	and I_CompareCounter heir_hungary < 3
	and I_NumberOfSettlements hungary >= 1
		spawn_army
			faction hungary
			character	random_name, named character, age 20, x 206, y 179, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_hungary 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled kievan_rus
	and I_NumberOfHeirs kievan_rus < 4
	and I_CompareCounter heir_kievan_rus < 3
	and I_NumberOfSettlements kievan_rus >= 1
		spawn_army
			faction kievan_rus
			character	random_name, named character, age 20, x 292, y 214, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	EE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_kievan_rus 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled russia
	and I_NumberOfHeirs russia < 4
	and I_CompareCounter heir_russia < 3
	and I_NumberOfSettlements russia >= 1
		spawn_army
			faction russia
			character	random_name, named character, age 20, x 301, y 275, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	EE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_russia 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled byzantium
	and I_NumberOfHeirs byzantium < 4
	and I_CompareCounter heir_byzantium < 3
	and I_NumberOfSettlements byzantium >= 1
		spawn_army
			faction byzantium
			character	random_name, named character, age 20, x 278, y 148, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Greek Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_byzantium 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled lithuania
	and I_NumberOfHeirs lithuania < 4
	and I_CompareCounter heir_lithuania < 3
	and I_NumberOfSettlements lithuania >= 1
		spawn_army
			faction lithuania
			character	random_name, named character, age 20, x 262, y 240, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Lith Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_lithuania 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled teutonic_order
	and I_FactionLeaderAttribute teutonic_order Command < 999
	and I_NumberOfHeirs teutonic_order < 4
	and I_CompareCounter heir_teutonic_order < 3
	;and I_EventCounter inquisition > 0
	;and I_EventCounter status_teutonic_order = 2
		spawn_army
			faction teutonic_order
			character	random_name, named character, age 20, x 232, y 237, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	TO Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_teutonic_order 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled jerusalem
	and I_NumberOfHeirs jerusalem < 4
	and I_CompareCounter heir_jerusalem < 3
	and I_NumberOfSettlements jerusalem >= 1
		spawn_army
			faction jerusalem
			character	random_name, named character, age 20, x 329, y 78, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	NE Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_jerusalem 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled turks
	and I_NumberOfHeirs turks < 4
	and I_CompareCounter heir_turks < 3
	and I_NumberOfSettlements turks >= 1
		spawn_army
			faction turks
			character	random_name, named character, age 20, x 339, y 133, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_turks 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled egypt
	and I_NumberOfHeirs egypt < 4
	and I_CompareCounter heir_egypt < 3
	and I_NumberOfSettlements egypt >= 1
		spawn_army
			faction egypt
			character	random_name, named character, age 20, x 309, y 60, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_egypt 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled moors
	and I_NumberOfHeirs moors < 4
	and I_CompareCounter heir_moors < 3
	and I_NumberOfSettlements moors >= 1
		spawn_army
			faction moors
			character	random_name, named character, age 20, x 40, y 113, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_moors 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled kwarezm
	and I_NumberOfHeirs kwarezm < 4
	and I_CompareCounter heir_kwarezm < 3
	and I_NumberOfSettlements kwarezm >= 1
		spawn_army
			faction kwarezm
			character	random_name, named character, age 20, x 449, y 93, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	ME Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_kwarezm 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled cumans
	and I_NumberOfHeirs cumans < 4
	and I_CompareCounter heir_cumans < 3
	and I_NumberOfSettlements cumans >= 1
		spawn_army
			faction cumans
			character	random_name, named character, age 20, x 440, y 250, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_cumans 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled mongols
	and I_FactionLeaderAttribute mongols Command < 999
	and I_NumberOfHeirs mongols < 4
	and I_CompareCounter heir_mongols < 3
	;and I_EventCounter mongols_invasion > 0
		spawn_army
			faction mongols
			character	random_name, named character, age 20, x 502, y 160, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Keshikten Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_mongols 1
		inc_counter no_other_heir_spawn 1
	end_if

	if I_IsFactionAIControlled timurids
	and I_FactionLeaderAttribute timurids Command < 999
	and I_NumberOfHeirs timurids < 4
	and I_CompareCounter heir_timurids < 3
	;and I_EventCounter timurids_invasion > 0
		spawn_army
			faction timurids
			character	random_name, named character, age 20, x 502, y 161, family
			traits MilitaryInclination 2 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , Loyal 2 , ReligionStarter 1
			unit	Keshikten Bodyguard		exp 2 armour 0 weapon_lvl 0
		end
		inc_counter heir_timurids 1
		inc_counter no_other_heir_spawn 1
	end_if
	
	if I_CompareCounter no_other_heir_spawn = 78;	that is, 3x[27(=Number of factions with family tree)-1]
		terminate_monitor
	end_if
end_monitor

;===================== MONEY SCRIPT =====================
;--- FES religion islam
declare_counter freeze_egypt
declare_counter freeze_turks
declare_counter freeze_timurids
declare_counter freeze_kwarezm
declare_counter freeze_moors
;--- FES religion pagan 
declare_counter freeze_lithuania
declare_counter freeze_cumans
declare_counter freeze_mongols
;--- FES religion orthodox 
declare_counter freeze_byzantium
declare_counter freeze_russia
declare_counter freeze_kievan_rus
;--- FES religion catholic 
declare_counter freeze_venice
declare_counter freeze_sicily
declare_counter freeze_milan
declare_counter freeze_denmark
declare_counter freeze_scotland
declare_counter freeze_france
declare_counter freeze_hre
declare_counter freeze_england
declare_counter freeze_portugal
declare_counter freeze_poland
declare_counter freeze_spain
declare_counter freeze_hungary
declare_counter freeze_aragon
declare_counter freeze_teutonic_order
declare_counter freeze_norway
declare_counter freeze_jerusalem
declare_counter freeze_papal_states

; Rich AI faction
monitor_event PreFactionTurnStart not FactionType slave
	;and IsFactionAIControlled
	and Treasury > 85000

	if I_CompareCounter turn_fid = 1
		add_money egypt -10000
	end_if
	if I_CompareCounter turn_fid = 2
		add_money turks -10000
	end_if
	if I_CompareCounter turn_fid = 3
		add_money timurids -10000
	end_if
	if I_CompareCounter turn_fid = 4
		add_money kwarezm -10000
	end_if
	if I_CompareCounter turn_fid = 5
		add_money moors -10000
	end_if
	if I_CompareCounter turn_fid = 6
		add_money lithuania -10000
	end_if
	if I_CompareCounter turn_fid = 7
		add_money cumans -10000
	end_if
	if I_CompareCounter turn_fid = 8
		add_money mongols -10000
	end_if
	if I_CompareCounter turn_fid = 9
		add_money byzantium -10000
	end_if
	if I_CompareCounter turn_fid = 10
		add_money russia -10000
	end_if
	if I_CompareCounter turn_fid = 11
		add_money kievan_rus -10000
	end_if
	if I_CompareCounter turn_fid = 12
		add_money venice -10000
	end_if
	if I_CompareCounter turn_fid = 13
		add_money sicily -10000
	end_if
	if I_CompareCounter turn_fid = 14
		add_money milan -10000
	end_if
	if I_CompareCounter turn_fid = 15
		add_money denmark -10000
	end_if
	if I_CompareCounter turn_fid = 16
		add_money scotland -10000
	end_if
	if I_CompareCounter turn_fid = 17
		add_money france -10000
	end_if
	if I_CompareCounter turn_fid = 18
		add_money hre -10000
	end_if
	if I_CompareCounter turn_fid = 19
		add_money england -10000
	end_if
	if I_CompareCounter turn_fid = 20
		add_money portugal -10000
	end_if
	if I_CompareCounter turn_fid = 21
		add_money poland -10000
	end_if
	if I_CompareCounter turn_fid = 22
		add_money spain -10000
	end_if
	if I_CompareCounter turn_fid = 23
		add_money hungary -10000
	end_if
	if I_CompareCounter turn_fid = 24
		add_money aragon -10000
	end_if
	if I_CompareCounter turn_fid = 25
		add_money teutonic_order -10000
	end_if
	if I_CompareCounter turn_fid = 26
		add_money norway -10000
	end_if
	if I_CompareCounter turn_fid = 27
		add_money jerusalem -10000
	end_if
	if I_CompareCounter turn_fid = 28
		add_money papal_states -10000
	end_if
end_monitor

; Small FactionIncome at their TurnStart - prepare to freeze their recruitment pool if next turn they 'll start with small Treasury
monitor_event FactionTurnStart IsFactionAIControlled
	and not FactionType slave
	and FactionIncome < 1000

	if I_CompareCounter turn_fid = 1
		set_counter freeze_egypt 1
	end_if
	if I_CompareCounter turn_fid = 2
		set_counter freeze_turks 1
	end_if
	if I_CompareCounter turn_fid = 3
		set_counter freeze_timurids 1
	end_if
	if I_CompareCounter turn_fid = 4
		set_counter freeze_kwarezm 1
	end_if
	if I_CompareCounter turn_fid = 5
		set_counter freeze_moors 1
	end_if
	if I_CompareCounter turn_fid = 6
		set_counter freeze_lithuania 1
	end_if
	if I_CompareCounter turn_fid = 7
		set_counter freeze_cumans 1
	end_if
	if I_CompareCounter turn_fid = 8
		set_counter freeze_mongols 1
	end_if
	if I_CompareCounter turn_fid = 9
		set_counter freeze_byzantium 1
	end_if
	if I_CompareCounter turn_fid = 10
		set_counter freeze_russia 1
	end_if
	if I_CompareCounter turn_fid = 11
		set_counter freeze_kievan_rus 1
	end_if
	if I_CompareCounter turn_fid = 12
		set_counter freeze_venice 1
	end_if
	if I_CompareCounter turn_fid = 13
		set_counter freeze_sicily 1
	end_if
	if I_CompareCounter turn_fid = 14
		set_counter freeze_milan 1
	end_if
	if I_CompareCounter turn_fid = 15
		set_counter freeze_denmark 1
	end_if
	if I_CompareCounter turn_fid = 16
		set_counter freeze_scotland 1
	end_if
	if I_CompareCounter turn_fid = 17
		set_counter freeze_france 1
	end_if
	if I_CompareCounter turn_fid = 18
		set_counter freeze_hre 1
	end_if
	if I_CompareCounter turn_fid = 19
		set_counter freeze_england 1
	end_if
	if I_CompareCounter turn_fid = 20
		set_counter freeze_portugal 1
	end_if
	if I_CompareCounter turn_fid = 21
		set_counter freeze_poland 1
	end_if
	if I_CompareCounter turn_fid = 22
		set_counter freeze_spain 1
	end_if
	if I_CompareCounter turn_fid = 23
		set_counter freeze_hungary 1
	end_if
	if I_CompareCounter turn_fid = 24
		set_counter freeze_aragon 1
	end_if
	if I_CompareCounter turn_fid = 25
		set_counter freeze_teutonic_order 1
	end_if
	if I_CompareCounter turn_fid = 26
		set_counter freeze_norway 1
	end_if
	if I_CompareCounter turn_fid = 27
		set_counter freeze_jerusalem 1
	end_if
	if I_CompareCounter turn_fid = 28
		set_counter freeze_papal_states 1
	end_if
end_monitor

;Great AI debt - if they are not slaves, disband their mercenaries
monitor_event PreFactionTurnStart IsFactionAIControlled
	and Treasury < -5000

	if I_CompareCounter turn_fid = 0
		add_money slave -2147478647
		add_money slave 2147483647
		add_money slave 101
	end_if

	if I_CompareCounter turn_fid = 1
		destroy_units egypt, mercenary_unit
		add_money egypt -2147478647
		add_money egypt 2147483647
		add_money egypt 101
		set_counter freeze_egypt 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 2
		destroy_units turks, mercenary_unit
		add_money turks -2147478647
		add_money turks 2147483647
		add_money turks 101
		set_counter freeze_turks 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 3
		destroy_units timurids, mercenary_unit
		add_money timurids -2147478647
		add_money timurids 2147483647
		add_money timurids 101
		set_counter freeze_timurids 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 4
		destroy_units kwarezm, mercenary_unit
		add_money kwarezm -2147478647
		add_money kwarezm 2147483647
		add_money kwarezm 101
		set_counter freeze_kwarezm 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 5
		destroy_units moors, mercenary_unit
		add_money moors -2147478647
		add_money moors 2147483647
		add_money moors 101
		set_counter freeze_moors 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 6
		destroy_units lithuania, mercenary_unit
		add_money lithuania -2147478647
		add_money lithuania 2147483647
		add_money lithuania 101
		set_counter freeze_lithuania 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 7
		destroy_units cumans, mercenary_unit
		add_money cumans -2147478647
		add_money cumans 2147483647
		add_money cumans 101
		set_counter freeze_cumans 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 8
		destroy_units mongols, mercenary_unit
		add_money mongols -2147478647
		add_money mongols 2147483647
		add_money mongols 101
		set_counter freeze_mongols 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 9
		destroy_units byzantium, mercenary_unit
		add_money byzantium -2147478647
		add_money byzantium 2147483647
		add_money byzantium 101
		set_counter freeze_byzantium 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 10
		destroy_units russia, mercenary_unit
		add_money russia -2147478647
		add_money russia 2147483647
		add_money russia 101
		set_counter freeze_russia 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 11
		destroy_units kievan_rus, mercenary_unit
		add_money kievan_rus -2147478647
		add_money kievan_rus 2147483647
		add_money kievan_rus 101
		set_counter freeze_kievan_rus 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 12
		destroy_units venice, mercenary_unit
		add_money venice -2147478647
		add_money venice 2147483647
		add_money venice 101
		set_counter freeze_venice 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 13
		destroy_units sicily, mercenary_unit
		add_money sicily -2147478647
		add_money sicily 2147483647
		add_money sicily 101
		set_counter freeze_sicily 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 14
		destroy_units milan, mercenary_unit
		add_money milan -2147478647
		add_money milan 2147483647
		add_money milan 101
		set_counter freeze_milan 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 15
		destroy_units denmark, mercenary_unit
		add_money denmark -2147478647
		add_money denmark 2147483647
		add_money denmark 101
		set_counter freeze_denmark 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 16
		destroy_units scotland, mercenary_unit
		add_money scotland -2147478647
		add_money scotland 2147483647
		add_money scotland 101
		set_counter freeze_scotland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 17
		destroy_units france, mercenary_unit
		add_money france -2147478647
		add_money france 2147483647
		add_money france 101
		set_counter freeze_france 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 18
		destroy_units hre, mercenary_unit
		add_money hre -2147478647
		add_money hre 2147483647
		add_money hre 101
		set_counter freeze_hre 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 19
		destroy_units england, mercenary_unit
		add_money england -2147478647
		add_money england 2147483647
		add_money england 101
		set_counter freeze_england 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 20
		destroy_units portugal, mercenary_unit
		add_money portugal -2147478647
		add_money portugal 2147483647
		add_money portugal 101
		set_counter freeze_portugal 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 21
		destroy_units poland, mercenary_unit
		add_money poland -2147478647
		add_money poland 2147483647
		add_money poland 101
		set_counter freeze_poland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 22
		destroy_units spain, mercenary_unit
		add_money spain -2147478647
		add_money spain 2147483647
		add_money spain 101
		set_counter freeze_spain 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 23
		destroy_units hungary, mercenary_unit
		add_money hungary -2147478647
		add_money hungary 2147483647
		add_money hungary 101
		set_counter freeze_hungary 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 24
		destroy_units aragon, mercenary_unit
		add_money aragon -2147478647
		add_money aragon 2147483647
		add_money aragon 101
		set_counter freeze_aragon 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 25
		destroy_units teutonic_order, mercenary_unit
		add_money teutonic_order -2147478647
		add_money teutonic_order 2147483647
		add_money teutonic_order 101
		set_counter freeze_teutonic_order 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 26
		destroy_units norway, mercenary_unit
		add_money norway -2147478647
		add_money norway 2147483647
		add_money norway 101
		set_counter freeze_norway 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 27
		destroy_units jerusalem, mercenary_unit
		add_money jerusalem -2147478647
		add_money jerusalem 2147483647
		add_money jerusalem 101
		set_counter freeze_jerusalem 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 28
		destroy_units papal_states, mercenary_unit
		add_money papal_states -2147478647
		add_money papal_states 2147483647
		add_money papal_states 101
		set_counter freeze_papal_states 0
		set_event_counter freeze_recr_pool 1
	end_if
end_monitor

;Small AI debt - don't disband their mercenaries
monitor_event PreFactionTurnStart IsFactionAIControlled
	and Treasury < 0

	if I_CompareCounter turn_fid = 0
		add_money slave -2147483647
		add_money slave 2147483647
		add_money slave 101
	end_if

	if I_CompareCounter turn_fid = 1
		add_money egypt -2147483647
		add_money egypt 2147483647
		add_money egypt 101
		set_counter freeze_egypt 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 2
		add_money turks -2147483647
		add_money turks 2147483647
		add_money turks 101
		set_counter freeze_turks 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 3
		add_money timurids -2147483647
		add_money timurids 2147483647
		add_money timurids 101
		set_counter freeze_timurids 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 4
		add_money kwarezm -2147483647
		add_money kwarezm 2147483647
		add_money kwarezm 101
		set_counter freeze_kwarezm 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 5
		add_money moors -2147483647
		add_money moors 2147483647
		add_money moors 101
		set_counter freeze_moors 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 6
		add_money lithuania -2147483647
		add_money lithuania 2147483647
		add_money lithuania 101
		set_counter freeze_lithuania 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 7
		add_money cumans -2147483647
		add_money cumans 2147483647
		add_money cumans 101
		set_counter freeze_cumans 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 8
		add_money mongols -2147483647
		add_money mongols 2147483647
		add_money mongols 101
		set_counter freeze_mongols 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 9
		add_money byzantium -2147483647
		add_money byzantium 2147483647
		add_money byzantium 101
		set_counter freeze_byzantium 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 10
		add_money russia -2147483647
		add_money russia 2147483647
		add_money russia 101
		set_counter freeze_russia 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 11
		add_money kievan_rus -2147483647
		add_money kievan_rus 2147483647
		add_money kievan_rus 101
		set_counter freeze_kievan_rus 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 12
		add_money venice -2147483647
		add_money venice 2147483647
		add_money venice 101
		set_counter freeze_venice 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 13
		add_money sicily -2147483647
		add_money sicily 2147483647
		add_money sicily 101
		set_counter freeze_sicily 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 14
		add_money milan -2147483647
		add_money milan 2147483647
		add_money milan 101
		set_counter freeze_milan 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 15
		add_money denmark -2147483647
		add_money denmark 2147483647
		add_money denmark 101
		set_counter freeze_denmark 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 16
		add_money scotland -2147483647
		add_money scotland 2147483647
		add_money scotland 101
		set_counter freeze_scotland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 17
		add_money france -2147483647
		add_money france 2147483647
		add_money france 101
		set_counter freeze_france 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 18
		add_money hre -2147483647
		add_money hre 2147483647
		add_money hre 101
		set_counter freeze_hre 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 19
		add_money england -2147483647
		add_money england 2147483647
		add_money england 101
		set_counter freeze_england 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 20
		add_money portugal -2147483647
		add_money portugal 2147483647
		add_money portugal 101
		set_counter freeze_portugal 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 21
		add_money poland -2147483647
		add_money poland 2147483647
		add_money poland 101
		set_counter freeze_poland 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 22
		add_money spain -2147483647
		add_money spain 2147483647
		add_money spain 101
		set_counter freeze_spain 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 23
		add_money hungary -2147483647
		add_money hungary 2147483647
		add_money hungary 101
		set_counter freeze_hungary 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 24
		add_money aragon -2147483647
		add_money aragon 2147483647
		add_money aragon 101
		set_counter freeze_aragon 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 25
		add_money teutonic_order -2147483647
		add_money teutonic_order 2147483647
		add_money teutonic_order 101
		set_counter freeze_teutonic_order 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 26
		add_money norway -2147483647
		add_money norway 2147483647
		add_money norway 101
		set_counter freeze_norway 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 27
		add_money jerusalem -2147483647
		add_money jerusalem 2147483647
		add_money jerusalem 101
		set_counter freeze_jerusalem 0
		set_event_counter freeze_recr_pool 1
	end_if
	if I_CompareCounter turn_fid = 28
		add_money papal_states -2147483647
		add_money papal_states 2147483647
		add_money papal_states 101
		set_counter freeze_papal_states 0
		set_event_counter freeze_recr_pool 1
	end_if
end_monitor

; Poor AI faction
monitor_event PreFactionTurnStart IsFactionAIControlled
	and not FactionType slave
	and Treasury < 10000
	and I_EventCounter freeze_recr_pool = 0

	if I_CompareCounter turn_fid = 1
	and I_CompareCounter freeze_egypt = 1
		if not I_FactionBesieged egypt
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_egypt 0
	end_if
	if I_CompareCounter turn_fid = 2
	and I_CompareCounter freeze_turks = 1
		if not I_FactionBesieged turks
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_turks 0
	end_if
	if I_CompareCounter turn_fid = 3
	and I_CompareCounter freeze_timurids = 1
		if not I_FactionBesieged timurids
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_timurids 0
	end_if
	if I_CompareCounter turn_fid = 4
	and I_CompareCounter freeze_kwarezm = 1
		if not I_FactionBesieged kwarezm
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_kwarezm 0
	end_if
	if I_CompareCounter turn_fid = 5
	and I_CompareCounter freeze_moors = 1
		if not I_FactionBesieged moors
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_moors 0
	end_if
	if I_CompareCounter turn_fid = 6
	and I_CompareCounter freeze_lithuania = 1
		if not I_FactionBesieged lithuania
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_lithuania 0
	end_if
	if I_CompareCounter turn_fid = 7
	and I_CompareCounter freeze_cumans = 1
		if not I_FactionBesieged cumans
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_cumans 0
	end_if
	if I_CompareCounter turn_fid = 8
	and I_CompareCounter freeze_mongols = 1
		if not I_FactionBesieged mongols
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_mongols 0
	end_if
	if I_CompareCounter turn_fid = 9
	and I_CompareCounter freeze_byzantium = 1
		if not I_FactionBesieged byzantium
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_byzantium 0
	end_if
	if I_CompareCounter turn_fid = 10
	and I_CompareCounter freeze_russia = 1
		if not I_FactionBesieged russia
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_russia 0
	end_if
	if I_CompareCounter turn_fid = 11
	and I_CompareCounter freeze_kievan_rus = 1
		if not I_FactionBesieged kievan_rus
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_kievan_rus 0
	end_if
	if I_CompareCounter turn_fid = 12
	and I_CompareCounter freeze_venice = 1
		if not I_FactionBesieged venice
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_venice 0
	end_if
	if I_CompareCounter turn_fid = 13
	and I_CompareCounter freeze_sicily = 1
		if not I_FactionBesieged sicily
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_sicily 0
	end_if
	if I_CompareCounter turn_fid = 14
	and I_CompareCounter freeze_milan = 1
		if not I_FactionBesieged milan
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_milan 0
	end_if
	if I_CompareCounter turn_fid = 15
	and I_CompareCounter freeze_denmark = 1
		if not I_FactionBesieged denmark
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_denmark 0
	end_if
	if I_CompareCounter turn_fid = 16
	and I_CompareCounter freeze_scotland = 1
		if not I_FactionBesieged scotland
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_scotland 0
	end_if
	if I_CompareCounter turn_fid = 17
	and I_CompareCounter freeze_france = 1
		if not I_FactionBesieged france
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_france 0
	end_if
	if I_CompareCounter turn_fid = 18
	and I_CompareCounter freeze_hre = 1
		if not I_FactionBesieged hre
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_hre 0
	end_if
	if I_CompareCounter turn_fid = 19
	and I_CompareCounter freeze_england = 1
		if not I_FactionBesieged england
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_england 0
	end_if
	if I_CompareCounter turn_fid = 20
	and I_CompareCounter freeze_portugal = 1
		if not I_FactionBesieged portugal
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_portugal 0
	end_if
	if I_CompareCounter turn_fid = 21
	and I_CompareCounter freeze_poland = 1
		if not I_FactionBesieged poland
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_poland 0
	end_if
	if I_CompareCounter turn_fid = 22
	and I_CompareCounter freeze_spain = 1
		if not I_FactionBesieged spain
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_spain 0
	end_if
	if I_CompareCounter turn_fid = 23
	and I_CompareCounter freeze_hungary = 1
		if not I_FactionBesieged hungary
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_hungary 0
	end_if
	if I_CompareCounter turn_fid = 24
	and I_CompareCounter freeze_aragon = 1
		if not I_FactionBesieged aragon
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_aragon 0
	end_if
	if I_CompareCounter turn_fid = 25
	and I_CompareCounter freeze_teutonic_order = 1
		if not I_FactionBesieged teutonic_order
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_teutonic_order 0
	end_if
	if I_CompareCounter turn_fid = 26
	and I_CompareCounter freeze_norway = 1
		if not I_FactionBesieged norway
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_norway 0
	end_if
	if I_CompareCounter turn_fid = 27
	and I_CompareCounter freeze_jerusalem = 1
		if not I_FactionBesieged jerusalem
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_jerusalem 0
	end_if
	if I_CompareCounter turn_fid = 28
	and I_CompareCounter freeze_papal_states = 1
		if not I_FactionBesieged papal_states
			set_event_counter freeze_recr_pool 1
		end_if
		set_counter freeze_papal_states 0
	end_if
end_monitor

;========================================================
;********************************************************
;********************* PLAYER PART **********************
;********************************************************
;========================================================

;================== BESIEGE UPKEEP ======================
monitor_event CharacterTurnStart CharacterIsLocal
	and Trait ArmyCost > 0

	if I_TurnNumber < 20
	;if I_EventCounter Campaign_Year < 20
	console_command add_money -150
	end_if

	if I_TurnNumber < 40
	and I_TurnNumber >= 20
	;if I_EventCounter Campaign_Year >= 20
	;and I_EventCounter Campaign_Year < 40
	 console_command add_money -210
	end_if

	if I_TurnNumber < 80
	and I_TurnNumber >= 40
	;if I_EventCounter Campaign_Year >= 40
	;and I_EventCounter Campaign_Year < 80
	 console_command add_money -300
	end_if

	if I_TurnNumber >= 80
	;if I_EventCounter Campaign_Year >= 80
	 console_command add_money -400
	end_if

end_monitor

;========= G5 LOOTING SCRIPT COMPACT (tweaked) ==========
declare_counter sizearmy_levl

monitor_event BattleConflictPhaseCommenced FactionIsLocal
	and I_BattleEnemyArmyNumberOfUnits > 2

	set_counter sizearmy_levl 1

	if I_BattleEnemyArmyNumberOfUnits > 8
		set_counter sizearmy_levl 2
	end_if

	if I_BattleEnemyArmyNumberOfUnits > 14
		set_counter sizearmy_levl 3
	end_if

end_monitor

monitor_event PostBattle FactionIsLocal
	and WonBattle
	and not I_ConflictType Naval
	and I_CompareCounter sizearmy_levl > 0

	if RandomPercent > 25
	if I_CompareCounter sizearmy_levl = 1
		console_command add_money 50
	end_if
	if I_CompareCounter sizearmy_levl = 2
		console_command add_money 100
	end_if
	if I_CompareCounter sizearmy_levl = 3
		console_command add_money 200
	end_if
	end_if

	set_counter sizearmy_levl 0
end_monitor

monitor_event PostBattle FactionIsLocal
	and not WonBattle
	and not I_ConflictType Naval
	and I_CompareCounter sizearmy_levl > 0

	if RandomPercent > 90
		console_command add_money -100
	end_if

	if RandomPercent > 55
		console_command add_money -100
	end_if

	console_command add_money -100

;	historic_event sack_player

	set_counter sizearmy_levl 0
end_monitor

;==================== City Reveal (fixed) =======================

monitor_event FactionTurnStart

 ;catholic
 if I_CompareCounter turn_fid >= 12 
	reveal_tile 330,74	;Jerusalem
	reveal_tile 169,146	;Rome 
	reveal_tile 37,152	;Leon - Santiago
 end_if

 ;orthodox
 if I_CompareCounter turn_fid < 12
 and I_CompareCounter turn_fid > 8
	reveal_tile 330,74	;Jerusalem
	reveal_tile 284,142	;Constantinople
 end_if

 ;islam
 if I_CompareCounter turn_fid <= 8
	reveal_tile 330,74	;Jerusalem
	reveal_tile 416,94	;Baghdad
	reveal_tile 359,23	;Medina
	reveal_tile 360,6		;Mecca
 end_if

	hide_all_revealed_tiles

 terminate_monitor
end_monitor

;==================== Major Events ====================== 
;--- Jerusalem Captured
monitor_event GeneralCaptureSettlement SettlementName Jerusalem
    and not CharacterReligion islam
    and not CharacterReligion pagan
    and not CharacterReligion heretic
    and not TargetFactionReligion catholic
    and not TargetFactionReligion orthodox

    historic_event jerusalem_christian event/Christians_Capture_Jerusalem.bik
terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and CharacterReligion islam

	historic_event jerusalem_muslim event/Muslims_Capture_Jerusalem.bik
terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Jerusalem
	and CharacterReligion pagan
	and not FactionIsLocal

	historic_event jerusalem_pagan
terminate_monitor
end_monitor

;--- World is round 
monitor_event EventCounter EventCounterType world_is_round
	and EventCounter > 0

	historic_event america_discovered event/america_discovered.bik
terminate_monitor
end_monitor

;-- Player built first great temple
monitor_event BuildingCompleted not IsFactionAIControlled
	and SettlementBuildingFinished = huge_cathedral

	historic_event player_first_huge_cathedral event/huge_cathedral_built.bik
terminate_monitor
end_monitor

monitor_event BuildingCompleted not IsFactionAIControlled
	and SettlementBuildingFinished = great_jama

	historic_event player_first_great_jama event/great_mosque_created.bik
terminate_monitor
end_monitor

;--- Capital Change
monitor_event FactionNewCapital not IsFactionAIControlled

	if I_EventCounter DifficultyLevel = 1
		terminate_monitor
	end_if

	if not I_HotseatEnabled
		historic_event capital_change
	end_if

 if I_HotseatEnabled
	if I_LocalFaction egypt
  historic_event capital_change false factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event capital_change false factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event capital_change false factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event capital_change false factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event capital_change false factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event capital_change false factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event capital_change false factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event capital_change false factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event capital_change false factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event capital_change false factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event capital_change false factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event capital_change false factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event capital_change false factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event capital_change false factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event capital_change false factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event capital_change false factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event capital_change false factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event capital_change false factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event capital_change false factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event capital_change false factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event capital_change false factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event capital_change false factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event capital_change false factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event capital_change false factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event capital_change false factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event capital_change false factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event capital_change false factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event capital_change false factions { papal_states, }
	end_if
 end_if

	if I_EventCounter DifficultyLevel = 2
		console_command add_money -2000
	end_if

	if I_EventCounter DifficultyLevel > 2
		console_command add_money -5000
	end_if

end_monitor

;================= Player Notification ==================
;--- Death of Leaders
declare_counter moors_death_leader_counter
declare_counter turks_death_leader_counter
declare_counter egypt_death_leader_counter
declare_counter kwarezm_death_leader_counter
declare_counter portugal_death_leader_counter
declare_counter spain_death_leader_counter
declare_counter aragon_death_leader_counter
declare_counter venice_death_leader_counter
declare_counter milan_death_leader_counter
declare_counter sicily_death_leader_counter
declare_counter byzantium_death_leader_counter
declare_counter hre_death_leader_counter
declare_counter france_death_leader_counter
declare_counter england_death_leader_counter
declare_counter scotland_death_leader_counter
declare_counter jerusalem_death_leader_counter
declare_counter teutonic_order_death_leader_counter
declare_counter denmark_death_leader_counter
declare_counter norway_death_leader_counter
declare_counter poland_death_leader_counter
declare_counter hungary_death_leader_counter
declare_counter kievan_rus_death_leader_counter
declare_counter russia_death_leader_counter
declare_counter lithuania_death_leader_counter
declare_counter timurids_death_leader_counter
declare_counter mongols_death_leader_counter
declare_counter cumans_death_leader_counter
;
declare_counter moors_civil_war_counter
declare_counter turks_civil_war_counter
declare_counter egypt_civil_war_counter
declare_counter kwarezm_civil_war_counter
declare_counter portugal_civil_war_counter
declare_counter spain_civil_war_counter
declare_counter aragon_civil_war_counter
declare_counter venice_civil_war_counter
declare_counter milan_civil_war_counter
declare_counter sicily_civil_war_counter
declare_counter byzantium_civil_war_counter
declare_counter hre_civil_war_counter
declare_counter france_civil_war_counter
declare_counter england_civil_war_counter
declare_counter scotland_civil_war_counter
declare_counter jerusalem_civil_war_counter
declare_counter teutonic_order_civil_war_counter
declare_counter denmark_civil_war_counter
declare_counter norway_civil_war_counter
declare_counter poland_civil_war_counter
declare_counter hungary_civil_war_counter
declare_counter kievan_rus_civil_war_counter
declare_counter russia_civil_war_counter
declare_counter lithuania_civil_war_counter
declare_counter timurids_civil_war_counter
declare_counter mongols_civil_war_counter
declare_counter cumans_civil_war_counter
;
declare_counter moors_king
declare_counter turks_king
declare_counter egypt_king
declare_counter kwarezm_king
declare_counter portugal_king
declare_counter spain_king
declare_counter aragon_king
declare_counter venice_king
declare_counter milan_king
declare_counter sicily_king
declare_counter byzantium_king
declare_counter hre_king
declare_counter france_king
declare_counter england_king
declare_counter scotland_king
declare_counter jerusalem_king
declare_counter teutonic_order_king
declare_counter denmark_king
declare_counter norway_king
declare_counter poland_king
declare_counter hungary_king
declare_counter kievan_rus_king
declare_counter russia_king
declare_counter lithuania_king
declare_counter timurids_king
declare_counter mongols_king
declare_counter cumans_king

monitor_event CeasedFactionLeader FactionType moors
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter moors_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType moors
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter moors_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType moors
	and IsFactionAIControlled
	and I_CompareCounter moors_king >= 1

		set_counter moors_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType turks
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter turks_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType turks
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter turks_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType turks
	and IsFactionAIControlled
	and I_CompareCounter turks_king >= 1

		set_counter turks_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType egypt
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter egypt_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType egypt
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter egypt_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType egypt
	and IsFactionAIControlled
	and I_CompareCounter egypt_king >= 1

		set_counter egypt_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType kwarezm
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter kwarezm_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType kwarezm
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter kwarezm_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType kwarezm
	and IsFactionAIControlled
	and I_CompareCounter kwarezm_king >= 1

		set_counter kwarezm_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType spain
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter spain_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType spain
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter spain_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType spain
	and IsFactionAIControlled
	and I_CompareCounter spain_king >= 1

		set_counter spain_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType aragon
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter aragon_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType aragon
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter aragon_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType aragon
	and IsFactionAIControlled
	and I_CompareCounter aragon_king >= 1

		set_counter aragon_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType portugal
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter portugal_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType portugal
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter portugal_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType portugal
	and IsFactionAIControlled
	and I_CompareCounter portugal_king >= 1

		set_counter portugal_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType venice
	and IsFactionAIControlled

	set_counter venice_king 1
terminate_monitor
end_monitor
monitor_event BecomesFactionLeader FactionType venice
	and IsFactionAIControlled
	and I_CompareCounter venice_king >= 1

		set_counter venice_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType milan
	and IsFactionAIControlled

	set_counter milan_king 1
terminate_monitor
end_monitor
monitor_event BecomesFactionLeader FactionType milan
	and IsFactionAIControlled
	and I_CompareCounter milan_king >= 1

		set_counter milan_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType sicily
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter sicily_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType sicily
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter sicily_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType sicily
	and IsFactionAIControlled
	and I_CompareCounter sicily_king >= 1

		set_counter sicily_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType byzantium
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter byzantium_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType byzantium
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter byzantium_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType byzantium
	and IsFactionAIControlled
	and I_CompareCounter byzantium_king >= 1

		set_counter byzantium_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType hre
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter hre_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType hre
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter hre_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType hre
	and IsFactionAIControlled
	and I_CompareCounter hre_king >= 1

		set_counter hre_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType france
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter france_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType france
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter france_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType france
	and IsFactionAIControlled
	and I_CompareCounter france_king >= 1

		set_counter france_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType england
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter england_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType england
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter england_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType england
	and IsFactionAIControlled
	and I_CompareCounter england_king >= 1

		set_counter england_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType scotland
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter scotland_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType scotland
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter scotland_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType scotland
	and IsFactionAIControlled
	and I_CompareCounter scotland_king >= 1

		set_counter scotland_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType denmark
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter denmark_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType denmark
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter denmark_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType denmark
	and IsFactionAIControlled
	and I_CompareCounter denmark_king >= 1

		set_counter denmark_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType norway
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter norway_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType norway
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter norway_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType norway
	and IsFactionAIControlled
	and I_CompareCounter norway_king >= 1

		set_counter norway_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType jerusalem
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter jerusalem_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType jerusalem
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter jerusalem_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType jerusalem
	and IsFactionAIControlled
	and I_CompareCounter jerusalem_king >= 1

		set_counter jerusalem_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType teutonic_order
	and IsFactionAIControlled

	set_counter teutonic_order_king 1
terminate_monitor
end_monitor
monitor_event BecomesFactionLeader FactionType teutonic_order
	and IsFactionAIControlled
	and I_CompareCounter teutonic_order_king = 1

		set_counter teutonic_order_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType poland
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter poland_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType poland
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter poland_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType poland
	and IsFactionAIControlled
	and I_CompareCounter poland_king >= 1

		set_counter poland_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType hungary
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter hungary_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType hungary
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter hungary_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType hungary
	and IsFactionAIControlled
	and I_CompareCounter hungary_king >= 1

		set_counter hungary_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType russia
	and IsFactionAIControlled

	set_counter russia_king 1
terminate_monitor
end_monitor
monitor_event BecomesFactionLeader FactionType russia
	and IsFactionAIControlled
	and I_CompareCounter russia_king >= 1

		set_counter russia_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType kievan_rus
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter kievan_rus_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType kievan_rus
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter kievan_rus_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType kievan_rus
	and IsFactionAIControlled
	and I_CompareCounter kievan_rus_king >= 1

		set_counter kievan_rus_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType lithuania
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter lithuania_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType lithuania
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter lithuania_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType lithuania
	and IsFactionAIControlled
	and I_CompareCounter lithuania_king >= 1

		set_counter lithuania_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType cumans
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter cumans_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType cumans
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter cumans_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType cumans
	and IsFactionAIControlled
	and I_CompareCounter cumans_king >= 1

		set_counter cumans_death_leader_counter 1
end_monitor


monitor_event CeasedFactionLeader FactionType timurids
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter timurids_king 1
end_monitor
monitor_event CeasedFactionLeader FactionType timurids
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter timurids_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType timurids
	and IsFactionAIControlled
	and I_CompareCounter timurids_king = 1

		set_counter timurids_death_leader_counter 1
end_monitor

monitor_event CeasedFactionLeader FactionType mongols
	and IsFactionAIControlled
	and Trait FactionUsurper < 1
	and Trait FactionRegent < 1
		set_counter mongols_king 1

end_monitor
monitor_event CeasedFactionLeader FactionType mongols
	and IsFactionAIControlled
	and Trait FactionLeader < 1
		set_counter mongols_king 2
end_monitor
monitor_event BecomesFactionLeader FactionType mongols
	and IsFactionAIControlled
	and I_CompareCounter mongols_king = 1

		set_counter mongols_death_leader_counter 1
end_monitor


monitor_event FactionTurnStart not IsFactionAIControlled

	if I_CompareCounter moors_death_leader_counter = 0
	;and I_NumberOfSettlements moors >= 1
	and I_CompareCounter moors_civil_war_counter = 1
	and I_FactionLeaderTrait moors FactionUsurper < 1
		set_counter moors_civil_war_counter 0
		historic_event moors_civil_war_end
	end_if
	if I_CompareCounter moors_death_leader_counter = 1
	;and I_NumberOfSettlements moors >= 1
		if I_FactionLeaderTrait moors FactionUsurper < 1
		and I_FactionLeaderTrait moors FactionRegent < 1
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 1
				historic_event moors_king_event
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 2
				historic_event moors_king_event2
			end_if
			if I_CompareCounter moors_civil_war_counter = 1
				historic_event moors_civil_war_end_king
				set_counter moors_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait moors FactionRegent >= 1
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 1
				historic_event moors_regent_event
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
			and I_CompareCounter moors_king = 2
				historic_event moors_regent_event2
			end_if
			if I_CompareCounter moors_civil_war_counter = 1
				historic_event moors_civil_war_end_regent
				set_counter moors_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait moors FactionUsurper >= 1
			if I_CompareCounter moors_civil_war_counter = 1
				historic_event moors_civil_war_continue
			end_if
			if I_CompareCounter moors_civil_war_counter < 1
				historic_event moors_civil_war
				set_counter moors_civil_war_counter 1
			end_if
		end_if
		set_counter moors_death_leader_counter 0
	end_if

	if I_CompareCounter turks_death_leader_counter = 0
	;and I_NumberOfSettlements turks >= 1
	and I_CompareCounter turks_civil_war_counter = 1
	and I_FactionLeaderTrait turks FactionUsurper < 1
		set_counter turks_civil_war_counter 0
		historic_event turks_civil_war_end
	end_if
	if I_CompareCounter turks_death_leader_counter = 1
	;and I_NumberOfSettlements turks >= 1
		if I_FactionLeaderTrait turks FactionUsurper < 1
		and I_FactionLeaderTrait turks FactionRegent < 1
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 1
				historic_event turks_king_event
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 2
				historic_event turks_king_event2
			end_if
			if I_CompareCounter turks_civil_war_counter = 1
				historic_event turks_civil_war_end_king
				set_counter turks_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait turks FactionRegent >= 1
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 1
				historic_event turks_regent_event
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
			and I_CompareCounter turks_king = 2
				historic_event turks_regent_event2
			end_if
			if I_CompareCounter turks_civil_war_counter = 1
				historic_event turks_civil_war_end_regent
				set_counter turks_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait turks FactionUsurper >= 1
			if I_CompareCounter turks_civil_war_counter = 1
				historic_event turks_civil_war_continue
			end_if
			if I_CompareCounter turks_civil_war_counter < 1
				historic_event turks_civil_war
				set_counter turks_civil_war_counter 1
			end_if
		end_if
		set_counter turks_death_leader_counter 0
	end_if

	if I_CompareCounter egypt_death_leader_counter = 0
	;and I_NumberOfSettlements egypt >= 1
	and I_CompareCounter egypt_civil_war_counter = 1
	and I_FactionLeaderTrait egypt FactionUsurper < 1
		set_counter egypt_civil_war_counter 0
		historic_event egypt_civil_war_end
	end_if
	if I_CompareCounter egypt_death_leader_counter = 1
	;and I_NumberOfSettlements egypt >= 1
		if I_FactionLeaderTrait egypt FactionUsurper < 1
		and I_FactionLeaderTrait egypt FactionRegent < 1
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 1
				historic_event egypt_king_event
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 2
				historic_event egypt_king_event2
			end_if
			if I_CompareCounter egypt_civil_war_counter = 1
				historic_event egypt_civil_war_end_king
				set_counter egypt_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait egypt FactionRegent >= 1
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 1
				historic_event egypt_regent_event
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
			and I_CompareCounter egypt_king = 2
				historic_event egypt_regent_event2
			end_if
			if I_CompareCounter egypt_civil_war_counter = 1
				historic_event egypt_civil_war_end_regent
				set_counter egypt_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait egypt FactionUsurper >= 1
			if I_CompareCounter egypt_civil_war_counter = 1
				historic_event egypt_civil_war_continue
			end_if
			if I_CompareCounter egypt_civil_war_counter < 1
				historic_event egypt_civil_war
				set_counter egypt_civil_war_counter 1
			end_if
		end_if
		set_counter egypt_death_leader_counter 0
	end_if

	if I_CompareCounter kwarezm_death_leader_counter = 0
	;and I_NumberOfSettlements kwarezm >= 1
	and I_CompareCounter kwarezm_civil_war_counter = 1
	and I_FactionLeaderTrait kwarezm FactionUsurper < 1
		set_counter kwarezm_civil_war_counter 0
		historic_event kwarezm_civil_war_end
	end_if
	if I_CompareCounter kwarezm_death_leader_counter = 1
	;and I_NumberOfSettlements kwarezm >= 1
		if I_FactionLeaderTrait kwarezm FactionUsurper < 1
		and I_FactionLeaderTrait kwarezm FactionRegent < 1
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 1
				historic_event kwarezm_king_event
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 2
				historic_event kwarezm_king_event2
			end_if
			if I_CompareCounter kwarezm_civil_war_counter = 1
				historic_event kwarezm_civil_war_end_king
				set_counter kwarezm_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kwarezm FactionRegent >= 1
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 1
				historic_event kwarezm_regent_event
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
			and I_CompareCounter kwarezm_king = 2
				historic_event kwarezm_regent_event2
			end_if
			if I_CompareCounter kwarezm_civil_war_counter = 1
				historic_event kwarezm_civil_war_end_regent
				set_counter kwarezm_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kwarezm FactionUsurper >= 1
			if I_CompareCounter kwarezm_civil_war_counter = 1
				historic_event kwarezm_civil_war_continue
			end_if
			if I_CompareCounter kwarezm_civil_war_counter < 1
				historic_event kwarezm_civil_war
				set_counter kwarezm_civil_war_counter 1
			end_if
		end_if
		set_counter kwarezm_death_leader_counter 0
	end_if

	if I_CompareCounter spain_death_leader_counter = 0
	;and I_NumberOfSettlements spain >= 1
	and I_CompareCounter spain_civil_war_counter = 1
	and I_FactionLeaderTrait spain FactionUsurper < 1
		set_counter spain_civil_war_counter 0
		historic_event spain_civil_war_end
	end_if
	if I_CompareCounter spain_death_leader_counter = 1
	;and I_NumberOfSettlements spain >= 1
		if I_FactionLeaderTrait spain FactionUsurper < 1
		and I_FactionLeaderTrait spain FactionRegent < 1
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 1
				historic_event spain_king_event
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 2
				historic_event spain_king_event2
			end_if
			if I_CompareCounter spain_civil_war_counter = 1
				historic_event spain_civil_war_end_king
				set_counter spain_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait spain FactionRegent >= 1
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 1
				historic_event spain_regent_event
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
			and I_CompareCounter spain_king = 2
				historic_event spain_regent_event2
			end_if
			if I_CompareCounter spain_civil_war_counter = 1
				historic_event spain_civil_war_end_regent
				set_counter spain_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait spain FactionUsurper >= 1
			if I_CompareCounter spain_civil_war_counter = 1
				historic_event spain_civil_war_continue
			end_if
			if I_CompareCounter spain_civil_war_counter < 1
				historic_event spain_civil_war
				set_counter spain_civil_war_counter 1
			end_if
		end_if
		set_counter spain_death_leader_counter 0
	end_if

	if I_CompareCounter aragon_death_leader_counter = 0
	;and I_NumberOfSettlements aragon >= 1
	and I_CompareCounter aragon_civil_war_counter = 1
	and I_FactionLeaderTrait aragon FactionUsurper < 1
		set_counter aragon_civil_war_counter 0
		historic_event aragon_civil_war_end
	end_if
	if I_CompareCounter aragon_death_leader_counter = 1
	;and I_NumberOfSettlements aragon >= 1
		if I_FactionLeaderTrait aragon FactionUsurper < 1
		and I_FactionLeaderTrait aragon FactionRegent < 1
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 1
				historic_event aragon_king_event
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 2
				historic_event aragon_king_event2
			end_if
			if I_CompareCounter aragon_civil_war_counter = 1
				historic_event aragon_civil_war_end_king
				set_counter aragon_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait aragon FactionRegent >= 1
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 1
				historic_event aragon_regent_event
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
			and I_CompareCounter aragon_king = 2
				historic_event aragon_regent_event2
			end_if
			if I_CompareCounter aragon_civil_war_counter = 1
				historic_event aragon_civil_war_end_regent
				set_counter aragon_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait aragon FactionUsurper >= 1
			if I_CompareCounter aragon_civil_war_counter = 1
				historic_event aragon_civil_war_continue
			end_if
			if I_CompareCounter aragon_civil_war_counter < 1
				historic_event aragon_civil_war
				set_counter aragon_civil_war_counter 1
			end_if
		end_if
		set_counter aragon_death_leader_counter 0
	end_if

	if I_CompareCounter portugal_death_leader_counter = 0
	;and I_NumberOfSettlements portugal >= 1
	and I_CompareCounter portugal_civil_war_counter = 1
	and I_FactionLeaderTrait portugal FactionUsurper < 1
		set_counter portugal_civil_war_counter 0
		historic_event portugal_civil_war_end
	end_if
	if I_CompareCounter portugal_death_leader_counter = 1
	;and I_NumberOfSettlements portugal >= 1
		if I_FactionLeaderTrait portugal FactionUsurper < 1
		and I_FactionLeaderTrait portugal FactionRegent < 1
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 1
				historic_event portugal_king_event
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 2
				historic_event portugal_king_event2
			end_if
			if I_CompareCounter portugal_civil_war_counter = 1
				historic_event portugal_civil_war_end_king
				set_counter portugal_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait portugal FactionRegent >= 1
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 1
				historic_event portugal_regent_event
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
			and I_CompareCounter portugal_king = 2
				historic_event portugal_regent_event2
			end_if
			if I_CompareCounter portugal_civil_war_counter = 1
				historic_event portugal_civil_war_end_regent
				set_counter portugal_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait portugal FactionUsurper >= 1
			if I_CompareCounter portugal_civil_war_counter = 1
				historic_event portugal_civil_war_continue
			end_if
			if I_CompareCounter portugal_civil_war_counter < 1
				historic_event portugal_civil_war
				set_counter portugal_civil_war_counter 1
			end_if
		end_if
		set_counter portugal_death_leader_counter 0
	end_if

	if I_CompareCounter venice_death_leader_counter = 0
	and I_NumberOfSettlements venice >= 1
		if I_CompareCounter venice_civil_war_counter < 1
		and I_FactionLeaderTrait venice Offensive_To_Nobles >= 1
			set_counter venice_civil_war_counter 1
			historic_event venice_civil_war_start
		end_if
		if I_CompareCounter venice_civil_war_counter = 1
		and I_FactionLeaderTrait venice Offensive_To_Nobles < 1
			set_counter venice_civil_war_counter 0
			historic_event venice_civil_war_end
		end_if
	end_if
	if I_CompareCounter venice_death_leader_counter = 1
	and I_NumberOfSettlements venice >= 1
		if I_FactionLeaderTrait venice Offensive_To_Nobles < 1
			if I_CompareCounter venice_civil_war_counter < 1
				historic_event venice_king_event
			end_if
			if I_CompareCounter venice_civil_war_counter = 1
				historic_event venice_civil_war_end_king
				set_counter venice_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait venice Offensive_To_Nobles >= 1
			if I_CompareCounter venice_civil_war_counter = 1
				historic_event venice_civil_war_continue
			end_if
			if I_CompareCounter venice_civil_war_counter < 1
				historic_event venice_civil_war
				set_counter venice_civil_war_counter 1
			end_if
		end_if
		set_counter venice_death_leader_counter 0
	end_if

	if I_CompareCounter milan_death_leader_counter = 0
	and I_NumberOfSettlements milan >= 1
		if I_CompareCounter milan_civil_war_counter < 1
		and I_FactionLeaderTrait milan Offensive_To_Nobles >= 1
			set_counter milan_civil_war_counter 1
			historic_event milan_civil_war_start
		end_if
		if I_CompareCounter milan_civil_war_counter = 1
		and I_FactionLeaderTrait milan Offensive_To_Nobles < 1
			set_counter milan_civil_war_counter 0
			historic_event milan_civil_war_end
		end_if
	end_if
	if I_CompareCounter milan_death_leader_counter = 1
	and I_NumberOfSettlements milan >= 1
		if I_FactionLeaderTrait milan Offensive_To_Nobles < 1
			if I_CompareCounter milan_civil_war_counter < 1
				historic_event milan_king_event
			end_if
			if I_CompareCounter milan_civil_war_counter = 1
				historic_event milan_civil_war_end_king
				set_counter milan_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait milan Offensive_To_Nobles >= 1
			if I_CompareCounter milan_civil_war_counter = 1
				historic_event milan_civil_war_continue
			end_if
			if I_CompareCounter milan_civil_war_counter < 1
				historic_event milan_civil_war
				set_counter milan_civil_war_counter 1
			end_if
		end_if
		set_counter milan_death_leader_counter 0
	end_if

	if I_CompareCounter sicily_death_leader_counter = 0
	;and I_NumberOfSettlements sicily >= 1
	and I_CompareCounter sicily_civil_war_counter = 1
	and I_FactionLeaderTrait sicily FactionUsurper < 1
		set_counter sicily_civil_war_counter 0
		historic_event sicily_civil_war_end
	end_if
	if I_CompareCounter sicily_death_leader_counter = 1
	;and I_NumberOfSettlements sicily >= 1
		if I_FactionLeaderTrait sicily FactionUsurper < 1
		and I_FactionLeaderTrait sicily FactionRegent < 1
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 1
				historic_event sicily_king_event
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 2
				historic_event sicily_king_event2
			end_if
			if I_CompareCounter sicily_civil_war_counter = 1
				historic_event sicily_civil_war_end_king
				set_counter sicily_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait sicily FactionRegent >= 1
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 1
				historic_event sicily_regent_event
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
			and I_CompareCounter sicily_king = 2
				historic_event sicily_regent_event2
			end_if
			if I_CompareCounter sicily_civil_war_counter = 1
				historic_event sicily_civil_war_end_regent
				set_counter sicily_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait sicily FactionUsurper >= 1
			if I_CompareCounter sicily_civil_war_counter = 1
				historic_event sicily_civil_war_continue
			end_if
			if I_CompareCounter sicily_civil_war_counter < 1
				historic_event sicily_civil_war
				set_counter sicily_civil_war_counter 1
			end_if
		end_if
		set_counter sicily_death_leader_counter 0
	end_if

	if I_CompareCounter byzantium_death_leader_counter = 0
	;and I_NumberOfSettlements byzantium >= 1
	and I_CompareCounter byzantium_civil_war_counter = 1
	and I_FactionLeaderTrait byzantium Offensive_To_Nobles < 1
		set_counter byzantium_civil_war_counter 0
		historic_event byzantium_civil_war_end
	end_if
	if I_CompareCounter byzantium_death_leader_counter = 1
	;and I_NumberOfSettlements byzantium >= 1
		if I_FactionLeaderTrait byzantium Offensive_To_Nobles < 1
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_CompareCounter byzantium_king = 1
				historic_event byzantium_king_event
			end_if
			if I_CompareCounter byzantium_civil_war_counter < 1
			and I_CompareCounter byzantium_king = 2
				historic_event byzantium_king_event2
			end_if
			if I_CompareCounter byzantium_civil_war_counter = 1
				historic_event byzantium_civil_war_end_king
				set_counter byzantium_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait byzantium Offensive_To_Nobles >= 1
			if I_CompareCounter byzantium_civil_war_counter = 1
				historic_event byzantium_civil_war_continue
			end_if
			if I_CompareCounter byzantium_civil_war_counter < 1
				historic_event byzantium_civil_war
				set_counter byzantium_civil_war_counter 1
			end_if
		end_if
		set_counter byzantium_death_leader_counter 0
	end_if

	if I_CompareCounter hre_death_leader_counter = 0
	;and I_NumberOfSettlements hre >= 1
	and I_CompareCounter hre_civil_war_counter = 1
	and I_FactionLeaderTrait hre FactionUsurper < 1
		set_counter hre_civil_war_counter 0
		historic_event hre_civil_war_end
	end_if
	if I_CompareCounter hre_death_leader_counter = 1
	;and I_NumberOfSettlements hre >= 1
		if I_FactionLeaderTrait hre FactionUsurper < 1
			if I_CompareCounter hre_civil_war_counter < 1
			and I_CompareCounter hre_king = 1
				historic_event hre_king_event
			end_if
			if I_CompareCounter hre_civil_war_counter < 1
			and I_CompareCounter hre_king = 2
				historic_event hre_king_event2
			end_if
			if I_CompareCounter hre_civil_war_counter = 1
				historic_event hre_civil_war_end_king
				set_counter hre_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hre FactionUsurper >= 1
			if I_CompareCounter hre_civil_war_counter = 1
				historic_event hre_civil_war_continue
			end_if
			if I_CompareCounter hre_civil_war_counter < 1
				historic_event hre_civil_war
				set_counter hre_civil_war_counter 1
			end_if
		end_if
		set_counter hre_death_leader_counter 0
	end_if

	if I_CompareCounter france_death_leader_counter = 0
	;and I_NumberOfSettlements france >= 1
	and I_CompareCounter france_civil_war_counter = 1
	and I_FactionLeaderTrait france FactionUsurper < 1
		set_counter france_civil_war_counter 0
		historic_event france_civil_war_end
	end_if
	if I_CompareCounter france_death_leader_counter = 1
	;and I_NumberOfSettlements france >= 1
		if I_FactionLeaderTrait france FactionUsurper < 1
		and I_FactionLeaderTrait france FactionRegent < 1
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 1
				historic_event france_king_event
			end_if
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 2
				historic_event france_king_event2
			end_if
			if I_CompareCounter france_civil_war_counter = 1
				historic_event france_civil_war_end_king
				set_counter france_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait france FactionRegent >= 1
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 1
				historic_event france_regent_event
			end_if
			if I_CompareCounter france_civil_war_counter < 1
			and I_CompareCounter france_king = 2
				historic_event france_regent_event2
			end_if
			if I_CompareCounter france_civil_war_counter = 1
				historic_event france_civil_war_end_regent
				set_counter france_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait france FactionUsurper >= 1
			if I_CompareCounter france_civil_war_counter = 1
				historic_event france_civil_war_continue
			end_if
			if I_CompareCounter france_civil_war_counter < 1
				historic_event france_civil_war
				set_counter france_civil_war_counter 1
			end_if
		end_if
		set_counter france_death_leader_counter 0
	end_if

	if I_CompareCounter england_death_leader_counter = 0
	;and I_NumberOfSettlements england >= 1
	and I_CompareCounter england_civil_war_counter = 1
	and I_FactionLeaderTrait england FactionUsurper < 1
		set_counter england_civil_war_counter 0
		historic_event england_civil_war_end
	end_if
	if I_CompareCounter england_death_leader_counter = 1
	;and I_NumberOfSettlements england >= 1
		if I_FactionLeaderTrait england FactionUsurper < 1
		and I_FactionLeaderTrait england FactionRegent < 1
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 1
				historic_event england_king_event
			end_if
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 2
				historic_event england_king_event2
			end_if
			if I_CompareCounter england_civil_war_counter = 1
				historic_event england_civil_war_end_king
				set_counter england_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait england FactionRegent >= 1
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 1
				historic_event england_regent_event
			end_if
			if I_CompareCounter england_civil_war_counter < 1
			and I_CompareCounter england_king = 2
				historic_event england_regent_event2
			end_if
			if I_CompareCounter england_civil_war_counter = 1
				historic_event england_civil_war_end_regent
				set_counter england_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait england FactionUsurper >= 1
			if I_CompareCounter england_civil_war_counter = 1
				historic_event england_civil_war_continue
			end_if
			if I_CompareCounter england_civil_war_counter < 1
				historic_event england_civil_war
				set_counter england_civil_war_counter 1
			end_if
		end_if
		set_counter england_death_leader_counter 0
	end_if

	if I_CompareCounter scotland_death_leader_counter = 0
	;and I_NumberOfSettlements scotland >= 1
	and I_CompareCounter scotland_civil_war_counter = 1
	and I_FactionLeaderTrait scotland FactionUsurper < 1
		set_counter scotland_civil_war_counter 0
		historic_event scotland_civil_war_end
	end_if
	if I_CompareCounter scotland_death_leader_counter = 1
	;and I_NumberOfSettlements scotland >= 1
		if I_FactionLeaderTrait scotland FactionUsurper < 1
		and I_FactionLeaderTrait scotland FactionRegent < 1
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 1
				historic_event scotland_king_event
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 2
				historic_event scotland_king_event2
			end_if
			if I_CompareCounter scotland_civil_war_counter = 1
				historic_event scotland_civil_war_end_king
				set_counter scotland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait scotland FactionRegent >= 1
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 1
				historic_event scotland_regent_event
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
			and I_CompareCounter scotland_king = 2
				historic_event scotland_regent_event2
			end_if
			if I_CompareCounter scotland_civil_war_counter = 1
				historic_event scotland_civil_war_end_regent
				set_counter scotland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait scotland FactionUsurper >= 1
			if I_CompareCounter scotland_civil_war_counter = 1
				historic_event scotland_civil_war_continue
			end_if
			if I_CompareCounter scotland_civil_war_counter < 1
				historic_event scotland_civil_war
				set_counter scotland_civil_war_counter 1
			end_if
		end_if
		set_counter scotland_death_leader_counter 0
	end_if

	if I_CompareCounter denmark_death_leader_counter = 0
	;and I_NumberOfSettlements denmark >= 1
	and I_CompareCounter denmark_civil_war_counter = 1
	and I_FactionLeaderTrait denmark FactionUsurper < 1
		set_counter denmark_civil_war_counter 0
		historic_event denmark_civil_war_end
	end_if
	if I_CompareCounter denmark_death_leader_counter = 1
	;and I_NumberOfSettlements denmark >= 1
		if I_FactionLeaderTrait denmark FactionUsurper < 1
		and I_FactionLeaderTrait denmark FactionRegent < 1
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 1
				historic_event denmark_king_event
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 2
				historic_event denmark_king_event2
			end_if
			if I_CompareCounter denmark_civil_war_counter = 1
				historic_event denmark_civil_war_end_king
				set_counter denmark_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait denmark FactionRegent >= 1
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 1
				historic_event denmark_regent_event
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
			and I_CompareCounter denmark_king = 2
				historic_event denmark_regent_event2
			end_if
			if I_CompareCounter denmark_civil_war_counter = 1
				historic_event denmark_civil_war_end_regent
				set_counter denmark_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait denmark FactionUsurper >= 1
			if I_CompareCounter denmark_civil_war_counter = 1
				historic_event denmark_civil_war_continue
			end_if
			if I_CompareCounter denmark_civil_war_counter < 1
				historic_event denmark_civil_war
				set_counter denmark_civil_war_counter 1
			end_if
		end_if
		set_counter denmark_death_leader_counter 0
	end_if

	if I_CompareCounter norway_death_leader_counter = 0
	;and I_NumberOfSettlements norway >= 1
	and I_CompareCounter norway_civil_war_counter = 1
	and I_FactionLeaderTrait norway FactionUsurper < 1
		set_counter norway_civil_war_counter 0
		historic_event norway_civil_war_end
	end_if
	if I_CompareCounter norway_death_leader_counter = 1
	;and I_NumberOfSettlements norway >= 1
		if I_FactionLeaderTrait norway FactionUsurper < 1
		and I_FactionLeaderTrait norway FactionRegent < 1
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 1
				historic_event norway_king_event
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 2
				historic_event norway_king_event2
			end_if
			if I_CompareCounter norway_civil_war_counter = 1
				historic_event norway_civil_war_end_king
				set_counter norway_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait norway FactionRegent >= 1
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 1
				historic_event norway_regent_event
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
			and I_CompareCounter norway_king = 2
				historic_event norway_regent_event2
			end_if
			if I_CompareCounter norway_civil_war_counter = 1
				historic_event norway_civil_war_end_regent
				set_counter norway_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait norway FactionUsurper >= 1
			if I_CompareCounter norway_civil_war_counter = 1
				historic_event norway_civil_war_continue
			end_if
			if I_CompareCounter norway_civil_war_counter < 1
				historic_event norway_civil_war
				set_counter norway_civil_war_counter 1
			end_if
		end_if
		set_counter norway_death_leader_counter 0
	end_if

	if I_CompareCounter jerusalem_death_leader_counter = 0
	;and I_NumberOfSettlements jerusalem >= 1
	and I_CompareCounter jerusalem_civil_war_counter = 1
	and I_FactionLeaderTrait jerusalem FactionUsurper < 1
		set_counter jerusalem_civil_war_counter 0
		historic_event jerusalem_civil_war_end
	end_if
	if I_CompareCounter jerusalem_death_leader_counter = 1
	;and I_NumberOfSettlements jerusalem >= 1
		if I_FactionLeaderTrait jerusalem FactionUsurper < 1
		and I_FactionLeaderTrait jerusalem FactionRegent < 1
			if I_CompareCounter jerusalem_civil_war_counter < 1
			and I_CompareCounter jerusalem_king = 1
				historic_event jerusalem_king_event
			end_if
			if I_CompareCounter jerusalem_civil_war_counter < 1
			and I_CompareCounter jerusalem_king = 2
				historic_event jerusalem_king_event2
			end_if
			if I_CompareCounter jerusalem_civil_war_counter = 1
				historic_event jerusalem_civil_war_end_king
				set_counter jerusalem_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait jerusalem FactionRegent >= 1
			if I_CompareCounter jerusalem_civil_war_counter < 1
			and I_CompareCounter jerusalem_king = 1
				historic_event jerusalem_regent_event
			end_if
			if I_CompareCounter jerusalem_civil_war_counter < 1
			and I_CompareCounter jerusalem_king = 2
				historic_event jerusalem_regent_event2
			end_if
			if I_CompareCounter jerusalem_civil_war_counter = 1
				historic_event jerusalem_civil_war_end_regent
				set_counter jerusalem_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait jerusalem FactionUsurper >= 1
			if I_CompareCounter jerusalem_civil_war_counter = 1
				historic_event jerusalem_civil_war_continue
			end_if
			if I_CompareCounter jerusalem_civil_war_counter < 1
				historic_event jerusalem_civil_war
				set_counter jerusalem_civil_war_counter 1
			end_if
		end_if
		set_counter jerusalem_death_leader_counter 0
	end_if

	if I_CompareCounter teutonic_order_death_leader_counter = 0
	and I_NumberOfSettlements teutonic_order >= 1
		if I_CompareCounter teutonic_order_civil_war_counter < 1
		and I_FactionLeaderTrait teutonic_order Offensive_To_Nobles >= 1
			set_counter teutonic_order_civil_war_counter 1
			historic_event teutonic_order_civil_war_start
		end_if
		if I_CompareCounter teutonic_order_civil_war_counter = 1
		and I_FactionLeaderTrait teutonic_order Offensive_To_Nobles < 1
			set_counter teutonic_order_civil_war_counter 0
			historic_event teutonic_order_civil_war_end
		end_if
	end_if
	if I_CompareCounter teutonic_order_death_leader_counter = 1
	and I_NumberOfSettlements teutonic_order >= 1
		if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles < 1
			if I_CompareCounter teutonic_order_civil_war_counter < 1
				historic_event teutonic_order_king_event
			end_if
			if I_CompareCounter teutonic_order_civil_war_counter = 1
				historic_event teutonic_order_civil_war_end_king
				set_counter teutonic_order_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait teutonic_order Offensive_To_Nobles >= 1
			if I_CompareCounter teutonic_order_civil_war_counter = 1
				historic_event teutonic_order_civil_war_continue
			end_if
			if I_CompareCounter teutonic_order_civil_war_counter < 1
				historic_event teutonic_order_civil_war
				set_counter teutonic_order_civil_war_counter 1
			end_if
		end_if
		set_counter teutonic_order_death_leader_counter 0
	end_if

	if I_CompareCounter poland_death_leader_counter = 0
	;and I_NumberOfSettlements poland >= 1
	and I_CompareCounter poland_civil_war_counter = 1
	and I_FactionLeaderTrait poland FactionUsurper < 1
		set_counter poland_civil_war_counter 0
		historic_event poland_civil_war_end
	end_if
	if I_CompareCounter poland_death_leader_counter = 1
	;and I_NumberOfSettlements poland >= 1
		if I_FactionLeaderTrait poland FactionUsurper < 1
		and I_FactionLeaderTrait poland FactionRegent < 1
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 1
				historic_event poland_king_event
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 2
				historic_event poland_king_event2
			end_if
			if I_CompareCounter poland_civil_war_counter = 1
				historic_event poland_civil_war_end_king
				set_counter poland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait poland FactionRegent >= 1
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 1
				historic_event poland_regent_event
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
			and I_CompareCounter poland_king = 2
				historic_event poland_regent_event2
			end_if
			if I_CompareCounter poland_civil_war_counter = 1
				historic_event poland_civil_war_end_regent
				set_counter poland_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait poland FactionUsurper >= 1
			if I_CompareCounter poland_civil_war_counter = 1
				historic_event poland_civil_war_continue
			end_if
			if I_CompareCounter poland_civil_war_counter < 1
				historic_event poland_civil_war
				set_counter poland_civil_war_counter 1
			end_if
		end_if
		set_counter poland_death_leader_counter 0
	end_if

	if I_CompareCounter hungary_death_leader_counter = 0
	;and I_NumberOfSettlements hungary >= 1
	and I_CompareCounter hungary_civil_war_counter = 1
	and I_FactionLeaderTrait hungary FactionUsurper < 1
		set_counter hungary_civil_war_counter 0
		historic_event hungary_civil_war_end
	end_if
	if I_CompareCounter hungary_death_leader_counter = 1
	;and I_NumberOfSettlements hungary >= 1
		if I_FactionLeaderTrait hungary FactionUsurper < 1
		and I_FactionLeaderTrait hungary FactionRegent < 1
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 1
				historic_event hungary_king_event
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 2
				historic_event hungary_king_event2
			end_if
			if I_CompareCounter hungary_civil_war_counter = 1
				historic_event hungary_civil_war_end_king
				set_counter hungary_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hungary FactionRegent >= 1
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 1
				historic_event hungary_regent_event
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
			and I_CompareCounter hungary_king = 2
				historic_event hungary_regent_event2
			end_if
			if I_CompareCounter hungary_civil_war_counter = 1
				historic_event hungary_civil_war_end_regent
				set_counter hungary_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait hungary FactionUsurper >= 1
			if I_CompareCounter hungary_civil_war_counter = 1
				historic_event hungary_civil_war_continue
			end_if
			if I_CompareCounter hungary_civil_war_counter < 1
				historic_event hungary_civil_war
				set_counter hungary_civil_war_counter 1
			end_if
		end_if
		set_counter hungary_death_leader_counter 0
	end_if

	if I_CompareCounter russia_death_leader_counter = 0
	;and I_NumberOfSettlements russia >= 1
		if I_CompareCounter russia_civil_war_counter < 1
		and I_FactionLeaderTrait russia Offensive_To_Nobles >= 1
			set_counter russia_civil_war_counter 1
			historic_event russia_civil_war_start
		end_if
		if I_CompareCounter russia_civil_war_counter = 1
		and I_FactionLeaderTrait russia Offensive_To_Nobles < 1
			set_counter russia_civil_war_counter 0
			historic_event russia_civil_war_end
		end_if
	end_if
	if I_CompareCounter russia_death_leader_counter = 1
	;and I_NumberOfSettlements russia >= 1
		if I_FactionLeaderTrait russia Offensive_To_Nobles < 1
			if I_CompareCounter russia_civil_war_counter < 1
				historic_event russia_king_event
			end_if
			if I_CompareCounter russia_civil_war_counter = 1
				historic_event russia_civil_war_end_king
				set_counter russia_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait russia Offensive_To_Nobles >= 1
			if I_CompareCounter russia_civil_war_counter = 1
				historic_event russia_civil_war_continue
			end_if
			if I_CompareCounter russia_civil_war_counter < 1
				historic_event russia_civil_war
				set_counter russia_civil_war_counter 1
			end_if
		end_if
		set_counter russia_death_leader_counter 0
	end_if

	if I_CompareCounter kievan_rus_death_leader_counter = 0
	;and I_NumberOfSettlements kievan_rus >= 1
	and I_CompareCounter kievan_rus_civil_war_counter = 1
	and I_FactionLeaderTrait kievan_rus FactionUsurper < 1
		set_counter kievan_rus_civil_war_counter 0
		historic_event kievan_rus_civil_war_end
	end_if
	if I_CompareCounter kievan_rus_death_leader_counter = 1
	;and I_NumberOfSettlements kievan_rus >= 1
		if I_FactionLeaderTrait kievan_rus FactionUsurper < 1
		and I_FactionLeaderTrait kievan_rus FactionRegent < 1
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 1
				historic_event kievan_rus_king_event
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 2
				historic_event kievan_rus_king_event2
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter = 1
				historic_event kievan_rus_civil_war_end_king
				set_counter kievan_rus_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kievan_rus FactionRegent >= 1
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 1
				historic_event kievan_rus_regent_event
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
			and I_CompareCounter kievan_rus_king = 2
				historic_event kievan_rus_regent_event2
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter = 1
				historic_event kievan_rus_civil_war_end_regent
				set_counter kievan_rus_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait kievan_rus FactionUsurper >= 1
			if I_CompareCounter kievan_rus_civil_war_counter = 1
				historic_event kievan_rus_civil_war_continue
			end_if
			if I_CompareCounter kievan_rus_civil_war_counter < 1
				historic_event kievan_rus_civil_war
				set_counter kievan_rus_civil_war_counter 1
			end_if
		end_if
		set_counter kievan_rus_death_leader_counter 0
	end_if

	if I_CompareCounter lithuania_death_leader_counter = 0
	;and I_NumberOfSettlements lithuania >= 1
	and I_CompareCounter lithuania_civil_war_counter = 1
	and I_FactionLeaderTrait lithuania FactionUsurper < 1
		set_counter lithuania_civil_war_counter 0
		historic_event lithuania_civil_war_end
	end_if
	if I_CompareCounter lithuania_death_leader_counter = 1
	;and I_NumberOfSettlements lithuania >= 1
		if I_FactionLeaderTrait lithuania FactionUsurper < 1
		and I_FactionLeaderTrait lithuania FactionRegent < 1
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 1
				historic_event lithuania_king_event
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 2
				historic_event lithuania_king_event2
			end_if
			if I_CompareCounter lithuania_civil_war_counter = 1
				historic_event lithuania_civil_war_end_king
				set_counter lithuania_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait lithuania FactionRegent >= 1
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 1
				historic_event lithuania_regent_event
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
			and I_CompareCounter lithuania_king = 2
				historic_event lithuania_regent_event2
			end_if
			if I_CompareCounter lithuania_civil_war_counter = 1
				historic_event lithuania_civil_war_end_regent
				set_counter lithuania_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait lithuania FactionUsurper >= 1
			if I_CompareCounter lithuania_civil_war_counter = 1
				historic_event lithuania_civil_war_continue
			end_if
			if I_CompareCounter lithuania_civil_war_counter < 1
				historic_event lithuania_civil_war
				set_counter lithuania_civil_war_counter 1
			end_if
		end_if
		set_counter lithuania_death_leader_counter 0
	end_if

	if I_CompareCounter cumans_death_leader_counter = 0
	;and I_NumberOfSettlements cumans >= 1
	and I_CompareCounter cumans_civil_war_counter = 1
	and I_FactionLeaderTrait cumans FactionUsurper < 1
		set_counter cumans_civil_war_counter 0
		historic_event cumans_civil_war_end
	end_if
	if I_CompareCounter cumans_death_leader_counter = 1
	;and I_NumberOfSettlements cumans >= 1
		if I_FactionLeaderTrait cumans FactionUsurper < 1
		and I_FactionLeaderTrait cumans FactionRegent < 1
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 1
				historic_event cumans_king_event
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 2
				historic_event cumans_king_event2
			end_if
			if I_CompareCounter cumans_civil_war_counter = 1
				historic_event cumans_civil_war_end_king
				set_counter cumans_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait cumans FactionRegent >= 1
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 1
				historic_event cumans_regent_event
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
			and I_CompareCounter cumans_king = 2
				historic_event cumans_regent_event2
			end_if
			if I_CompareCounter cumans_civil_war_counter = 1
				historic_event cumans_civil_war_end_regent
				set_counter cumans_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait cumans FactionUsurper >= 1
			if I_CompareCounter cumans_civil_war_counter = 1
				historic_event cumans_civil_war_continue
			end_if
			if I_CompareCounter cumans_civil_war_counter < 1
				historic_event cumans_civil_war
				set_counter cumans_civil_war_counter 1
			end_if
		end_if
		set_counter cumans_death_leader_counter 0
	end_if

	if I_CompareCounter timurids_death_leader_counter = 0
	and I_CompareCounter timurids_civil_war_counter = 1
	and I_FactionLeaderTrait timurids FactionUsurper < 1
		set_counter timurids_civil_war_counter 0
		historic_event timurids_civil_war_end
	end_if
	if I_CompareCounter timurids_death_leader_counter = 1
		if I_FactionLeaderTrait timurids FactionUsurper < 1
		and I_FactionLeaderTrait timurids FactionRegent < 1
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 1
				historic_event timurids_king_event
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 2
				historic_event timurids_king_event2
			end_if
			if I_CompareCounter timurids_civil_war_counter = 1
				historic_event timurids_civil_war_end_king
				set_counter timurids_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait timurids FactionRegent >= 1
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 1
				historic_event timurids_regent_event
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
			and I_CompareCounter timurids_king = 2
				historic_event timurids_regent_event2
			end_if
			if I_CompareCounter timurids_civil_war_counter = 1
				historic_event timurids_civil_war_end_regent
				set_counter timurids_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait timurids FactionUsurper >= 1
			if I_CompareCounter timurids_civil_war_counter = 1
				historic_event timurids_civil_war_continue
			end_if
			if I_CompareCounter timurids_civil_war_counter < 1
				historic_event timurids_civil_war
				set_counter timurids_civil_war_counter 1
			end_if
		end_if
		set_counter timurids_death_leader_counter 0
	end_if

	if I_CompareCounter mongols_death_leader_counter = 0
	and I_CompareCounter mongols_civil_war_counter = 1
	and I_FactionLeaderTrait mongols FactionUsurper < 1
		set_counter mongols_civil_war_counter 0
		historic_event mongols_civil_war_end
	end_if
	if I_CompareCounter mongols_death_leader_counter = 1
		if I_FactionLeaderTrait mongols FactionUsurper < 1
		and I_FactionLeaderTrait mongols FactionRegent < 1
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 1
				historic_event mongols_king_event
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 2
				historic_event mongols_king_event2
			end_if
			if I_CompareCounter mongols_civil_war_counter = 1
				historic_event mongols_civil_war_end_king
				set_counter mongols_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait mongols FactionRegent >= 1
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 1
				historic_event mongols_regent_event
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
			and I_CompareCounter mongols_king = 2
				historic_event mongols_regent_event2
			end_if
			if I_CompareCounter mongols_civil_war_counter = 1
				historic_event mongols_civil_war_end_regent
				set_counter mongols_civil_war_counter 0
			end_if
		end_if
		if I_FactionLeaderTrait mongols FactionUsurper >= 1
			if I_CompareCounter mongols_civil_war_counter = 1
				historic_event mongols_civil_war_continue
			end_if
			if I_CompareCounter mongols_civil_war_counter < 1
				historic_event mongols_civil_war
				set_counter mongols_civil_war_counter 1
			end_if
		end_if
		set_counter mongols_death_leader_counter 0
	end_if

end_monitor

;========================================================
;================= Interactive Events ===================
;========================================================
; This section is link with the "Reset Counters" section
; No interactive event is available for the slave faction

;=========== Reload-safe Yes/No Events ==========
declare_counter awaiting_answer_ie
declare_counter awaiting_answer_great_fair
declare_counter awaiting_answer_great_tourney
declare_counter awaiting_answer_troubadours
declare_counter awaiting_answer_great_council

monitor_event GameReloaded I_CompareCounter awaiting_answer_ie > 0

		campaign_wait 0.1

 if I_HotseatEnabled
	if I_CompareCounter awaiting_answer_great_fair = 1
		set_event_counter HS_Great_Fair 0
	end_if
	if I_CompareCounter awaiting_answer_great_tourney = 1
		set_event_counter HS_Great_Tourney 0
	end_if
	if I_CompareCounter awaiting_answer_troubadours_event = 1
		set_event_counter HS_Troubadours_Event 0
	end_if
	if I_CompareCounter awaiting_answer_great_council = 1
		set_event_counter HS_Great_Council 0
	end_if
 end_if

 if not I_HotseatEnabled
	if I_CompareCounter awaiting_answer_great_fair = 1
		historic_event great_fair true
	end_if
	if I_CompareCounter awaiting_answer_great_tourney = 1
		historic_event great_tourney true
	end_if
	if I_CompareCounter awaiting_answer_troubadours_event = 1
		historic_event troubadours_event true
	end_if
	if I_CompareCounter awaiting_answer_great_council = 1
		historic_event great_council true
	end_if
 end_if

end_monitor

;============== Great Trade Fairs ===============
monitor_event FactionTurnStart not IsFactionAIControlled
	and RandomPercent < 6
	and FactionBuildingExists > fairground
	and Treasury > 20000

	if I_HotseatEnabled
	 inc_event_counter HS_Great_Fair 1
	end_if

	if not I_HotseatEnabled
	 historic_event great_fair true
	end_if

	set_counter awaiting_answer_great_fair 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Great_Fair

	if not I_HotseatEnabled
	 terminate_monitor
	end_if

;	if I_LocalFaction slave
;  historic_event great_fair true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event great_fair true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event great_fair true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event great_fair true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event great_fair true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event great_fair true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event great_fair true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event great_fair true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event great_fair true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event great_fair true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_fair true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_fair true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_fair true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_fair true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_fair true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_fair true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_fair true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_fair true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_fair true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_fair true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event great_fair true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event great_fair true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_fair true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_fair true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_fair true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_fair true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_fair true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_fair true factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_fair true factions { papal_states, }
	end_if

end_monitor
if not I_HotseatEnabled ; terminate previous monitor
 set_event_counter HS_Great_Fair 1
end_if

; answered "yes"
monitor_event EventCounter EventCounterType great_fair_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_great_fair 0
	inc_counter awaiting_answer_ie -1
end_monitor

; answered "no"
monitor_event EventCounter EventCounterType great_fair_declined
	and EventCounter = 1

	set_counter awaiting_answer_great_fair 0
	inc_counter awaiting_answer_ie -1
end_monitor 

;================ Great Tourney =================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and FactionBuildingExists > jousting_lists
	and RandomPercent < 7
	and Treasury > 15000

	if not I_HotseatEnabled
   historic_event great_tourney true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Great_Tourney 1
	end_if

	set_counter awaiting_answer_great_tourney 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Great_Tourney

	if not I_HotseatEnabled
	 terminate_monitor
	end_if

;	if I_LocalFaction slave
;  historic_event great_tourney true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event great_tourney true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event great_tourney true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event great_tourney true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event great_tourney true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event great_tourney true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event great_tourney true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event great_tourney true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event great_tourney true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event great_tourney true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_tourney true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_tourney true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_tourney true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_tourney true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_tourney true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_tourney true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_tourney true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_tourney true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_tourney true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_tourney true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event great_tourney true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event great_tourney true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_tourney true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_tourney true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_tourney true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_tourney true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_tourney true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_tourney true factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_tourney true factions { papal_states, }
	end_if

end_monitor
if not I_HotseatEnabled
 set_event_counter HS_Great_Tourney 1
end_if

monitor_event EventCounter EventCounterType great_tourney_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_great_tourney 0
	inc_counter awaiting_answer_ie -1
end_monitor

monitor_event EventCounter EventCounterType great_tourney_declined
	and EventCounter = 1

	set_counter awaiting_answer_great_tourney 0
	inc_counter awaiting_answer_ie -1
end_monitor 


;================= Troubadours ==================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and RandomPercent < 3
	and FactionBuildingExists > town_hall
	and Treasury > 10000

	if not I_HotseatEnabled
   historic_event troubadours_event true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Troubadours_Event 1
	end_if

	set_counter awaiting_answer_troubadours_event 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Troubadours_Event

	if not I_HotseatEnabled
	 terminate_monitor
	end_if
;	if I_LocalFaction slave
;  historic_event troubadours_event true factions { slave, }
;	end_if
	if I_LocalFaction egypt
  historic_event troubadours_event true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event troubadours_event true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event troubadours_event true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event troubadours_event true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event troubadours_event true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event troubadours_event true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event troubadours_event true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event troubadours_event true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event troubadours_event true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event troubadours_event true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event troubadours_event true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event troubadours_event true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event troubadours_event true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event troubadours_event true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event troubadours_event true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event troubadours_event true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event troubadours_event true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event troubadours_event true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event troubadours_event true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event troubadours_event true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event troubadours_event true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event troubadours_event true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event troubadours_event true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event troubadours_event true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event troubadours_event true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event troubadours_event true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event troubadours_event true factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event troubadours_event true factions { papal_states, }
	end_if
end_monitor
if not I_HotseatEnabled
 set_event_counter HS_Troubadours_Event 1
end_if

;-- answered "yes"
monitor_event EventCounter EventCounterType troubadours_event_accepted
	and EventCounter = 1

	console_command add_money -2500

	set_counter awaiting_answer_troubadours_event 0
	inc_counter awaiting_answer_ie -1
end_monitor

;-- answered "no"
monitor_event EventCounter EventCounterType troubadours_event_declined
	and EventCounter = 1

	set_counter awaiting_answer_troubadours_event 0
	inc_counter awaiting_answer_ie -1
end_monitor 


;================ Great Councils ================

;--- hotseat game only
monitor_event EventCounter EventCounterType HS_Great_Council

	if I_EventCounter GCouncil = 10
	 terminate_monitor
	end_if

	if I_LocalFaction byzantium
  historic_event great_council true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event great_council true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event great_council true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event great_council true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event great_council true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event great_council true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event great_council true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event great_council true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event great_council true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event great_council true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event great_council true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event great_council true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event great_council true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event great_council true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event great_council true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event great_council true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event great_council true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event great_council true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event great_council true factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event great_council true factions { papal_states, }
	end_if
end_monitor

;--- Great Councils Setup
; no great councils if it's not a hotseat game and the local faction is not christian
if not I_HotseatEnabled

	set_event_counter L_Council 10
	set_event_counter HS_Great_Council 1

	if not I_LocalFaction egypt
	and not I_LocalFaction turks
	and not I_LocalFaction kwarezm
	and not I_LocalFaction moors
	and not I_LocalFaction cumans
	and not I_LocalFaction lithuania
		set_event_counter L_Council 0
	end_if

end_if

; These are the dates that lateran_council events take place
if I_EventCounter L_Council = 0
 add_events
	event    counter    L_Council
	date     24
	event    counter    L_Council
	date     40
	event    counter    L_Council
	date     78
	event    counter    L_Council
	date     116
 end_add_events
end_if

;--- Great Councils main
monitor_event FactionTurnStart I_EventCounter GCouncil > 0

	set_event_counter great_council_accepted 0
	;set_event_counter great_council_declined 0
	set_counter awaiting_answer_great_council 0

	if I_EventCounter L_Council = 10
		set_event_counter great_council_accepted 1
		inc_event_counter great_council_declined 1
	 terminate_monitor
	end_if

	if I_HotseatEnabled
		if I_EventCounter is_the_ai = 0
		and I_CompareCounter turn_fid > 8 ; it has to be a christian faction's turn 
			inc_event_counter HS_Great_Council 1

			set_counter awaiting_answer_great_council 1
			inc_counter awaiting_answer_ie 1
		end_if

		if I_CompareCounter turn_fid = 0 ; slaves' turn
			if I_EventCounter lateran_council4 = 1 ; terminate "Great Councils"
				set_event_counter L_Council 10
				inc_event_counter HS_Great_Council 1
				set_event_counter great_council_accepted 1
				set_event_counter great_council_declined 1
				terminate_monitor
			end_if
			set_event_counter L_Council 0
		end_if
	end_if


	if not I_HotseatEnabled
		if I_EventCounter is_the_ai = 1
	 		set_event_counter L_Council 0
		end_if

		if I_EventCounter is_the_ai = 0
			historic_event great_council true

			set_counter awaiting_answer_great_council 1
			inc_counter awaiting_answer_ie 1
		end_if

		if I_EventCounter lateran_council4 = 1
			set_event_counter L_Council 10 ; in order to terminate great councils next turn
		end_if

	end_if

end_monitor

;--- answered "yes"
monitor_event EventCounter EventCounterType great_council_accepted
	and EventCounter > 0

	if I_EventCounter L_Council = 10
	 set_event_counter great_council_accepted 0
	 terminate_monitor
	end_if

	console_command add_money -1500

	set_counter awaiting_answer_great_council 0
	inc_counter awaiting_answer_ie -1

end_monitor

;--- answered "no"
monitor_event EventCounter EventCounterType great_council_declined
	;and EventCounter > 0

	if I_EventCounter L_Council = 10
	 ;set_event_counter great_council_declined 0
	 terminate_monitor
	end_if

	set_counter awaiting_answer_great_council 0
	inc_counter awaiting_answer_ie -1

end_monitor


;=================== Pirates ====================
; triggers
monitor_event FactionTurnStart not IsFactionAIControlled
	and Treasury > 75000
	and FactionBuildingExists >= port
	and RandomPercent < 5

	if not I_HotseatEnabled
   historic_event pirates true
	end_if

	if I_HotseatEnabled
   inc_event_counter HS_Pirates 1
	end_if

	set_counter awaiting_answer_pirates 1
	inc_counter awaiting_answer_ie 1
end_monitor

monitor_event EventCounter EventCounterType HS_Pirates

	if not I_HotseatEnabled
	 terminate_monitor
	end_if
	if I_LocalFaction egypt
  historic_event pirates true factions { egypt, }
	end_if
	if I_LocalFaction turks
  historic_event pirates true factions { turks, }
	end_if
	if I_LocalFaction timurids
  historic_event pirates true factions { timurids, }
	end_if
	if I_LocalFaction kwarezm
  historic_event pirates true factions { kwarezm, }
	end_if
	if I_LocalFaction moors
  historic_event pirates true factions { moors, }
	end_if
	if I_LocalFaction lithuania
  historic_event pirates true factions { lithuania, }
	end_if
	if I_LocalFaction cumans
  historic_event pirates true factions { cumans, }
	end_if
	if I_LocalFaction mongols
  historic_event pirates true factions { mongols, }
	end_if
	if I_LocalFaction byzantium
  historic_event pirates true factions { byzantium, }
	end_if
	if I_LocalFaction russia
  historic_event pirates true factions { russia, }
	end_if
	if I_LocalFaction kievan_rus
  historic_event pirates true factions { kievan_rus, }
	end_if
	if I_LocalFaction venice
  historic_event pirates true factions { venice, }
	end_if
	if I_LocalFaction sicily
  historic_event pirates true factions { sicily, }
	end_if
	if I_LocalFaction milan
  historic_event pirates true factions { milan, }
	end_if
	if I_LocalFaction denmark
  historic_event pirates true factions { denmark, }
	end_if
	if I_LocalFaction scotland
  historic_event pirates true factions { scotland, }
	end_if
	if I_LocalFaction france
  historic_event pirates true factions { france, }
	end_if
	if I_LocalFaction hre
  historic_event pirates true factions { hre, }
	end_if
	if I_LocalFaction england
  historic_event pirates true factions { england, }
	end_if
	if I_LocalFaction portugal
  historic_event pirates true factions { portugal, }
	end_if
	if I_LocalFaction poland
  historic_event pirates true factions { poland, }
	end_if
	if I_LocalFaction spain
  historic_event pirates true factions { spain, }
	end_if
	if I_LocalFaction hungary
  historic_event pirates true factions { hungary, }
	end_if
	if I_LocalFaction aragon
  historic_event pirates true factions { aragon, }
	end_if
	if I_LocalFaction teutonic_order
  historic_event pirates true factions { teutonic_order, }
	end_if
	if I_LocalFaction norway
  historic_event pirates true factions { norway, }
	end_if
	if I_LocalFaction jerusalem
  historic_event pirates true factions { jerusalem, }
	end_if
	if I_LocalFaction papal_states
  historic_event pirates true factions { papal_states, }
	end_if

end_monitor

if not I_HotseatEnabled
 set_event_counter HS_Pirates 1
end_if

; answered "yes"
monitor_event EventCounter EventCounterType pirates_accepted

	console_command add_money -5000

	set_counter awaiting_answer_pirates 0
	inc_counter awaiting_answer_ie -1
end_monitor

; answered "no"
monitor_event EventCounter EventCounterType pirates_declined

	set_counter awaiting_answer_pirates 0
	inc_counter awaiting_answer_ie -1

	if RandomPercent > 50
	console_command add_money -12000
	end_if
end_monitor 



;========================================================
;********************************************************
;******** EMERGENT FACTIONS/NATIONAL UPRISINGS **********
;********************************************************
;========================================================

;============== William Wallace Uprising ================

declare_counter wallace_spawned
set_counter wallace_spawned 0

monitor_event FactionTurnStart FactionType scotland
	;and I_TurnNumber = 180
	and I_EventCounter Campaign_Year = 180
	and I_NumberOfSettlements scotland < 4
	and I_CompareCounter wallace_spawned = 0

	set_counter wallace_spawned 1
	
terminate_monitor
end_monitor

monitor_event FactionTurnStart FactionType scotland	
	;and I_TurnNumber > 60
	and I_EventCounter Campaign_Year > 60
	and I_NumberOfSettlements scotland < 2
	and I_CompareCounter wallace_spawned = 0

	set_counter wallace_spawned 1

terminate_monitor
end_monitor

monitor_event GeneralCaptureSettlement FactionType england
	and TargetFactionType scotland
	;and I_TurnNumber > 130
	and I_EventCounter Campaign_Year > 130
	and I_CompareCounter wallace_spawned = 0

	set_counter wallace_spawned 1

terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionType scotland
	and I_CompareCounter wallace_spawned = 1

	spawn_army 
		faction scotland
		;OLD;character	William Wallace, named character, age 20, x 55, y 253, direction SE, battle_model Wallace_General, portrait wallace, label scotland4wallace
		character	Uilliam Wallace, named character, age 20, x 56, y 252, direction SE, battle_model Wallace_General, portrait wallace, label scotland4wallace
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , ScotlandHero 1 , LoyaltyStarter 1, BattleChivalry 2 , Loyal 2 , Just 2 , Rabblerouser 3 , Hardened 1 , Upright 2 , Austere 2 
		unit		Highland Nobles	exp 4 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 2 armour 0 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
	end	   

	spawn_army 
		faction scotland
		character	random_name, named character, age 26, x 54, y 254
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 1 , LoyaltyStarter 1, BattleChivalry 2 , Loyal 2 , Just 2 , Rabblerouser 3 , Hardened 1 
		unit		Highland Nobles	exp 4 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 2 armour 0 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highlanders	exp 3 armour 1 weapon_lvl 1
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 4 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Pikemen	exp 3 armour 1 weapon_lvl 0
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Highland Nobles	exp 3 armour 0 weapon_lvl 1
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Noble Highland Archers	exp 1 armour 1 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 3 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Highland Rabble	exp 4 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
		unit		Border Horse	exp 2 armour 0 weapon_lvl 0
	end

	historic_event scotland_wallace event/william_wallace.bik
	set_counter wallace_spawned 2
terminate_monitor
end_monitor

monitor_event CharacterTurnStart CharFactionType scotland
	and Trait ScotlandHero = 1
	and not I_SettlementOwner Edinburgh = scotland
	and I_IsFactionAIControlled scotland
	
	if I_AtSea scotland4wallace ; to avoid the case he lost a battle and retreated at a ship near Edinburg
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Edinburgh;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_edinburgh = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile scotland, named_character, 5, 59, 248 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Edinburgh
	and I_CompareCounter attack_edinburgh = 3
		siege_settlement scotland4wallace, Edinburgh, attack
		set_counter wallace_spawned 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Edinburgh
		siege_settlement scotland4wallace, Edinburgh, maintain
		set_counter wallace_spawned 3
	end_if
	
end_monitor

;============== Teutonic Order Emergent =================

;---- Teutonic Order Faction Destroyed Workaround ----
monitor_event CeasedFactionLeader FactionType teutonic_order
	set_event_counter status_teutonic_order 1
end_monitor

monitor_event BecomesFactionLeader FactionType teutonic_order
	set_event_counter status_teutonic_order 2
end_monitor

monitor_event FactionTurnEnd FactionType slave
	and I_EventCounter status_teutonic_order = 1
	and I_NumberOfSettlements teutonic_order < 1

	set_event_counter status_teutonic_order 0
	console_command kill_faction teutonic_order

 ;terminate_monitor; disabled for re-emerging
end_monitor


monitor_event EventCounter EventCounterType inquisition
	and EventCounter > 0
;monitor_event FactionTurnEnd FactionType slave;	testing
;	and I_TurnNumber = 2;			testing

	add_events
		event emergent_faction teutonic_order
		date	0
	end_add_events

	spawn_army
		faction teutonic_order
;		character Herrmann von_Salza, named character, age 40, x 231, y 244, label teuton4leader, family
;		Spawns right under Palanga
		character Herrmann von_Salza, named character, family, age 40, x 224, y 238, label teuton4leader, direction N
		traits FactionleaderTO 1, MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 3 , ContentGeneral 3 , Prim 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order, 5000

	spawn_army
		faction teutonic_order
;		character Conrad von_Thuringen, named character, age 30, x 232, y 243, label teuton4heir, family
;		Spawns right under Riga
		character Conrad von_Thuringen, named character, family, age 30, x 250, y 254, label teuton4heir, direction N
		traits FactionheirTO 1, MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 1 , GoodCommander 2 , LoyaltyStarter 1 , Drink 1 , PublicFaith 1 , ContentGeneral 3 , ReligionStarter 1
		unit	TO Bodyguard 		exp 3 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 1 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 			exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 2 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order, 5000
	spawn_character teutonic_order random_name, priest, age 27, x 222, y 238 
	spawn_character teutonic_order random_name, priest, age 35, x 224, y 236
		
	historic_event teutonic_order_invasion event/teutonic_faction_intro.bik

	console_command diplomatic_stance teutonic_order lithuania war

	;destroy_buildings hre teutonic_knights_chapter_house false; This is not good

terminate_monitor
end_monitor

declare_counter attack_palanga
set_counter attack_palanga 0

;monitor_event FactionTurnStart FactionType teutonic_order
monitor_event CharacterTurnStart CharFactionType teutonic_order
	and Trait FactionleaderTO = 1
	and not I_SettlementOwner Palanga = teutonic_order
	and I_IsFactionAIControlled teutonic_order
	;and I_CharacterExists teuton4leader
	;and I_CharacterExists teuton4heir
	
	if I_AtSea teuton4leader; to avoid the case he lost a battle and retreated at a ship nearby
		terminate_monitor
	end_if
	;if I_AtSea teuton4heir; to avoid the case he lost a battle and retreated at a ship nearby
	;	terminate_monitor
	;end_if

	if I_SettlementUnderSiege Palanga;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_palanga = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile teutonic_order, named_character, 5, 224, 239 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Palanga
	and I_CompareCounter attack_palanga = 1
		siege_settlement teuton4leader, Palanga, attack
		set_counter attack_palanga 2
		;move teuton4heir, 250, 255;for riga
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Palanga
		siege_settlement teuton4leader, Palanga, maintain
		;siege_settlement teuton4heir, Palanga, maintain
		set_counter attack_palanga 1
	end_if
end_monitor

declare_counter attack_riga
set_counter attack_riga 0

;monitor_event FactionTurnStart FactionType teutonic_order
monitor_event CharacterTurnStart CharFactionType teutonic_order
	and Trait FactionheirTO = 1
	and not I_SettlementOwner Riga = teutonic_order
	and I_IsFactionAIControlled teutonic_order
	;and I_CompareCounter attack_palanga = 2
	;and I_CharacterTypeNearTile teutonic_order, named_character, 5, 250, 255
	;and I_CharacterExists teuton4heir
	
	if I_AtSea teuton4heir ; to avoid the case he lost a battle and retreated at a ship nearby
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Riga;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_riga = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile teutonic_order, named_character, 5, 250, 255 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Riga
	and I_CompareCounter attack_riga = 1
		siege_settlement teuton4heir, Riga, attack
		set_counter attack_riga 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Riga
		siege_settlement teuton4heir, Riga, maintain
		set_counter attack_riga 1
	end_if
end_monitor

monitor_event FactionTurnStart FactionType teutonic_order
	and I_IsFactionAIControlled lithuania
	;and I_TurnNumber < 170
	and I_EventCounter Campaign_Year < 170

	console_command diplomatic_stance teutonic_order lithuania war

end_monitor

monitor_event FactionTurnStart FactionType teutonic_order
	;and I_TurnNumber = 165
	and I_EventCounter Campaign_Year = 165

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 40, x 231, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order 5000
terminate_monitor
end_monitor

monitor_event FactionTurnStart FactionType teutonic_order
	;and I_TurnNumber = 170
	and I_EventCounter Campaign_Year = 170
	and not I_SettlementOwner Palanga = teutonic_order
	and not I_SettlementOwner Riga = teutonic_order

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 40, x 232, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 22, x 233, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction teutonic_order
		character random_name, named character, age 20, x 234, y 248, family, direction E
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 3 , StrategyDread 2 , PublicFaith 2 , Drink 2 , ReligionStarter 1
		unit	TO Bodyguard 		exp 5 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Order Militia 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 2 armour 0 weapon_lvl 0
		unit	Sword Brethren 		exp 3 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 4 armour 0 weapon_lvl 0
		unit	Spear Militia 		exp 3 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	NE Catapult			exp 1 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 3 armour 0 weapon_lvl 0
		unit	Prussian Archers 		exp 4 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 3 armour 0 weapon_lvl 0
		unit	Christ Knights 		exp 1 armour 0 weapon_lvl 0
		unit	Knechten 		exp 2 armour 0 weapon_lvl 0
		unit	Knechten 		exp 1 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 3 armour 0 weapon_lvl 0
		unit	Ritterbruder 		exp 2 armour 0 weapon_lvl 0
	end

	add_money teutonic_order 40000
terminate_monitor
end_monitor

monitor_event SettlementTurnStart SettlementName Palanga
	and FactionType teutonic_order
	and SettlementBuildingExists >= castle

	if I_EventCounter palanga_rename = 0
		change_settlement_name Palanga Konigsberg
		historic_event palanga_rename
	end_if

terminate_monitor
end_monitor

monitor_event SettlementTurnStart SettlementName Palanga
	and FactionType teutonic_order
	and SettlementBuildingExists >= stone_wall

	if I_EventCounter palanga_rename = 0
		change_settlement_name Palanga Konigsberg
		historic_event palanga_rename
	end_if

terminate_monitor
end_monitor

;=============== Golden Horde Emergent ==================
monitor_event EventCounter EventCounterType mongols_invasion_warn
	and EventCounter = 1

	add_events
		event	emergent_faction	mongols
		date	7
		event	counter	mongols_invasion
		date	7
		event	counter	mongols_invasion
		date	11
		event	counter	mongols_invasion
		date	20
		event	counter	mongols_invasion
		date	36
		event	counter	mongols_invasion
		date	56
		event	counter	mongols_invasion
		date	107
	end_add_events
terminate_monitor
end_monitor

;--human part
;--ai part

monitor_event EventCounter EventCounterType mongols_invasion
	and EventCounter = 1
	and I_IsFactionAIControlled mongols

	set_event_counter mongols_emerged 1
	historic_event the_mongols_emerge event/mongols_invade.bik

	;Faction Leader
	spawn_army ;Urgench
		faction mongols
		character	Genghis, named character, age 48, x 500, y 153, label mongols4genghis, family
		traits Factionleader 1 , MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	;Faction Heir
	spawn_army ;Khiva
		faction mongols
		character	Jebe, named character, age 25, x 505, y 146, label mongols4jebe, family
		traits Factionheir 1 , MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	add_money mongols 15000

	spawn_army ;Urgench
		faction mongols
		character	Aradai, named character, age 22, x 501, y 154, label mongols4aradai, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 1 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, general, age 48, x 503, y 152
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, general, age 48, x 498, y 153
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 4 armour 0 weapon_lvl 0
	end

	spawn_army ;Khiva
		faction mongols
		character	Bayan, named character, age 21, x 504, y 147, label mongols4bayan, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , InvasionCharacterCounter 2 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	add_money mongols 15000

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 500, y 143
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 500, y 147
		traits Factionleader 1 , MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	spawn_army ;Konjikala
		faction mongols
		character	Chindu, named character, age 25, x 490, y 125, label mongols4chindu, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Bloodthirsty 2 , BattleDread 4 , StrategyDread 2 , PublicFaith 1 , Loyal 3 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 3 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end

	add_money mongols 5000

	spawn_army ;Konjikala
		faction mongols
		character	Nayuk, named character, age 21, x 491, y 126, label mongols4nayuk, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1 , InvasionCharacterCounter 4 
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	add_money mongols 5000

	spawn_army ;support
		faction mongols
		character	random_name, named character, age 48, x 493, y 126
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 2 , GoodCommander 3 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 23, x 480, y 140 
	spawn_character mongols random_name, priest, age 24, x 500, y 98 
	spawn_character mongols random_name, priest, age 27, x 470, y 120
	spawn_character mongols random_name, spy, age 22, x 500, y 135 
	spawn_character mongols random_name, spy, age 21, x 493, y 178 
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 485, y 189 

	console_command diplomatic_stance mongols kwarezm war
	add_money mongols 20000
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion ;make sure the horde will acquire their first settlement early era
	and I_IsFactionAIControlled mongols
	and EventCounter = 2
	and not I_SettlementOwner Urgench = mongols

	spawn_army
		faction mongols
		character	random_name, named character, age 26, x 500, y 153, label mongols4supportgen1, family
		traits MilitaryInclination 1 , Military_Edu 4 , NaturalMilitarySkill 4 , GoodCommander 5 , Bloodthirsty 3 , BattleDread 5 , StrategyDread 5 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1 , Drink 4 , Genocide 3
		unit	Keshikten Bodyguard		exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 499, y 154, label mongols4supportgen2, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Anger 3 , BattleDread 3 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 24, x 499, y 153, label mongols4supportgen3
		traits MilitaryInclination 1 , Military_Edu 3 , NaturalMilitarySkill 3 , GoodCommander 5 , Bloodthirsty 3 , BattleDread 5 , StrategyDread 5 , PublicFaith 1 , Loyal 2 , GoodCavalryGeneral 2 , ReligionStarter 1 , Drink 2
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut	exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut	exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 501, y 153, label mongols4supportgen4
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers			exp 7 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khorchi Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	if not I_SettlementUnderSiege Urgench
		if I_CharacterTypeNearTile mongols, named_character, 0, 501, 153
			siege_settlement mongols4supportgen4, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 499, 154
			siege_settlement mongols4supportgen2, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 499, 153
			siege_settlement mongols4supportgen3, Urgench, maintain
		end_if

		if I_CharacterTypeNearTile mongols, named_character, 0, 500, 153
			siege_settlement mongols4supportgen1, Urgench, attack
		end_if
	end_if

	terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 440, 194

	historic_event mongols_blue_horde_caucasus

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 430, y 195
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 326, 202

	historic_event mongols_blue_horde_kiev

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 316, y 202
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 10, 280, 184

	historic_event mongols_blue_horde_hungary

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 290, y 190
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 4 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 3 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000
terminate_monitor
end_monitor

monitor_event FactionTurnEnd FactionType mongols
	and not FactionIsLocal
	and I_CharacterTypeNearTile mongols, named_character, 5, 396, 89

	historic_event mongols_horde_baghdad

terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 2

	spawn_army
		faction mongols
		character	Chagatai, named character, age 26, x 505, y 145, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 1 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Subutai, named character, age 25, x 507, y 140, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 3 , BattleDread 3 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Berkei, named character, age 24, x 500, y 150,
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Anger 2 , BattleDread 2 , StrategyDread 2 , PublicFaith 4, TouchedByTheGods 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Hoshiga Horse Archers	exp 6 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 504, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, priest, age 32, x 470, y 120
	spawn_character mongols random_name, priest, age 33, x 490, y 150
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 491, y 144 
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 3

	spawn_army
		faction mongols
		character	Batu, named character, age 26, x 505, y 145, family
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 3 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet		exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	Tsagadai, named character, age 25, x 500, y 191
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 5 armour 0 weapon_lvl 0
	end
	add_money mongols 5000

	spawn_army
		faction mongols
		character	random_name, named character, age 26, x 508, y 92
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 3 , GoodCommander 3 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 1 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, spy, age 29, x 489, y 110 
	spawn_character mongols random_name, assassin, age 31, x 504, y 132 
	spawn_character mongols random_name, assassin, age 33, x 491, y 144 
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 20000
terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 4

	spawn_army
		faction mongols
		character	Menglai, named character, age 25, x 490, y 137
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 3 , PublicFaith 2 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Merguen Archers		exp 5 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 3 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Hoschuchi Lancers		exp 5 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 3 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
		unit	ME Trebuchet			exp 5 armour 0 weapon_lvl 0
	end

	spawn_army
		faction mongols
		character	Jagadai, named character, age 25, x 502, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_army
		faction mongols
		character	random_name, named character, age 25, x 504, y 144
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 2 , Anger 3 , BattleDread 2 , StrategyDread 2 , PublicFaith 1 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 33, x 490, y 150
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, assassin, age 20, x 490, y 135
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 20000
	terminate_monitor
end_monitor

monitor_event EventCounter EventCounterType mongols_invasion
	and I_IsFactionAIControlled mongols
	and EventCounter = 5

	spawn_army 
		faction mongols
		character	Hulegu, named character, age 25, x 498, y 120
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 2 , GoodCommander 2 , Genocide 2 , BattleDread 2 , StrategyDread 3 , PublicFaith 3 , Loyal 2 , ContentGeneral 3 , ReligionStarter 1
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Lubchiten Horse Archers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers		exp 6 armour 0 weapon_lvl 0
	end

	spawn_army 
		faction mongols
		character	Kitbuqa, named character, age 24, x 507, y 92
		traits MilitaryInclination 1 , Military_Edu 2 , NaturalMilitarySkill 1 , GoodCommander 3 , BattleDread 2 , StrategyDread 2 , Loyal 2 , ContentGeneral 3
		unit	Keshikten Bodyguard		exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 6 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Disamounted Turhagut			exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 4 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Khabutu Archers		exp 6 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Nukeri Horse Archers	exp 5 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 4 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
		unit	Turhagut Lancers	exp 6 armour 0 weapon_lvl 0
	end

	spawn_character mongols random_name, priest, age 22, x 480, y 140
	spawn_character mongols random_name, priest, age 27, x 500, y 98
	spawn_character mongols random_name, spy, age 20, x 500, y 135
	spawn_character mongols random_name, spy, age 20, x 490, y 135
	spawn_character mongols random_name, assassin, age 21, x 495, y 135
	add_money mongols 30000
	terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionType mongols
	and not FactionIsLocal

	if I_EventCounter mongols_invasion = 5
		terminate_monitor
	end_if

	if I_SettlementOwner Urgench = mongols
		create_unit Urgench, Khabutu Archers, num 3, exp 3, arm 0, wep 0
		create_unit Urgench, Hoschuchi Lancers, num 1, exp 4, arm 0, wep 0
		create_unit Urgench, Nukeri Horse Archers, num 2, exp 4, arm 0, wep 0
		create_unit Urgench, ME Trebuchet, num 2, exp 5, arm 0, wep 0
		add_money mongols 5000
	end_if

	if I_SettlementOwner Khiva = mongols
		create_unit Khiva, Disamounted Turhagut, num 3, exp 2, arm 0, wep 0
		create_unit Khiva, Hoshiga Horse Archers, num 1, exp 2, arm 0, wep 0
		create_unit Khiva, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
		add_money mongols 5000
	end_if

	if I_SettlementOwner Konjikala = mongols
		create_unit Konjikala, Khabutu Archers, num 3, exp 3, arm 0, wep 0
		create_unit Konjikala, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
		create_unit Konjikala, Turhagut Lancers, num 2, exp 4, arm 0, wep 0
		create_unit Konjikala, ME Catapult, num 1, exp 4, arm 0, wep 0
		add_money mongols 5000
	end_if

	if I_SettlementOwner Embi = mongols
		create_unit Embi, Khabutu Archers, num 1, exp 2, arm 0, wep 0
		create_unit Embi, Disamounted Turhagut, num 1, exp 2, arm 0, wep 0
		create_unit Embi, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
		add_money mongols 3000
	end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Jaiksk = mongols
			create_unit Jaiksk, Disamounted Turhagut, num 1, exp 1, arm 0, wep 0
			create_unit Jaiksk, Hoshiga Horse Archers, num 2, exp 3, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Astrakhan = mongols
			create_unit Astrakhan, Disamounted Turhagut, num 2, exp 4, arm 0, wep 0
			create_unit Astrakhan, Hoshiga Horse Archers, num 2, exp 3, arm 0, wep 0
			create_unit Astrakhan, ME Catapult, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 3
		if I_SettlementOwner Sarkel = mongols
			create_unit Sarkel, Disamounted Turhagut, num 1, exp 3, arm 0, wep 0
			create_unit Sarkel, Nukeri Horse Archers, num 1, exp 4, arm 0, wep 0
			create_unit Sarkel, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
			create_unit Sarkel, ME Trebuchet, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 3
		if I_SettlementOwner Tmutarakan = mongols
			create_unit Tmutarakan, Disamounted Turhagut, num 2, exp 4, arm 0, wep 0
			create_unit Tmutarakan, Hoshiga Horse Archers, num 1, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Kutaisi = mongols
			create_unit Kutaisi, Khabutu Archers, num 2, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Tbilisi = mongols
			create_unit Tbilisi, Nukeri Horse Archers, num 1, exp 4, arm 0, wep 0
			create_unit Tbilisi, ME Trebuchet, num 2, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel = 4
		if I_SettlementOwner Yerevan = mongols
			create_unit Yerevan, Hoshiga Horse Archers, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_SettlementOwner Gorgan = mongols
		create_unit Gorgan, Khabutu Archers, num 1, exp 3, arm 0, wep 0
		create_unit Gorgan, Disamounted Turhagut, num 1, exp 4, arm 0, wep 0
		create_unit Gorgan, Turhagut Lancers, num 1, exp 4, arm 0, wep 0
		add_money mongols 3000
	end_if

	if I_EventCounter DifficultyLevel >= 2
		if I_SettlementOwner Mashhad = mongols
			create_unit Mashhad, Khabutu Archers, num 1, exp 2, arm 0, wep 0
			create_unit Mashhad, Hoshiga Horse Archers, num 2, exp 4, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 3
		if I_SettlementOwner Damghan = mongols
			create_unit Damghan, Turhagut Lancers, num 1, exp 2, arm 0, wep 0
			create_unit Damghan, ME Trebuchet, num 1, exp 5, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

	if I_EventCounter DifficultyLevel >= 4
		if I_SettlementOwner Yazd = mongols
			create_unit Yazd, Disamounted Turhagut, num 2, exp 1, arm 0, wep 0
			add_money mongols 3000
		end_if
	end_if

end_monitor

;mongols weaken and no longer are a superpower
monitor_event PreFactionTurnStart FactionType mongols
	and not FactionIsLocal
	and I_EventCounter mongols_invasion = 6

	set_event_counter is_the_ai 0

end_monitor

declare_counter attack_urgench
set_counter attack_urgench 0

;monitor_event FactionTurnStart FactionType mongols
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 1; Aradai
	and not I_SettlementOwner Urgench = mongols
	and I_IsFactionAIControlled mongols
	and I_CharacterExists mongols4genghis
	;and I_CharacterExists mongols4aradai
	
	if I_SettlementUnderSiege Urgench;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_urgench = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile mongols, named_character, 5, 500, 154 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Urgench
	and I_CompareCounter attack_urgench = 1
		siege_settlement mongols4genghis, Urgench, attack
		siege_settlement mongols4aradai, Urgench, maintain
		set_counter attack_urgench 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Urgench
		if I_CompareCounter attack_urgench = 0
			siege_settlement mongols4genghis, Urgench, maintain
			siege_settlement mongols4aradai, Urgench, maintain
			set_counter attack_urgench 1
		end_if
	end_if
end_monitor

declare_counter attack_khiva
set_counter attack_khiva 0

;monitor_event FactionTurnStart FactionType mongols
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 2; Bayan
	and not I_SettlementOwner Khiva = mongols
	and I_IsFactionAIControlled mongols
	and I_CharacterExists mongols4jebe
	;and I_CharacterExists mongols4bayan
	
	if I_SettlementUnderSiege Khiva;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_khiva = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile mongols, named_character, 5, 505, 147 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Khiva
	and I_CompareCounter attack_khiva = 1
		siege_settlement mongols4jebe, Khiva, attack
		siege_settlement mongols4bayan, Khiva, maintain
		set_counter attack_khiva 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Khiva
		if I_CompareCounter attack_khiva = 0
			siege_settlement mongols4jebe, Khiva, maintain
			siege_settlement mongols4bayan, Khiva, maintain
			set_counter attack_khiva 1
		end_if
	end_if
end_monitor

declare_counter attack_konjikala
set_counter attack_konjikala 0

;monitor_event FactionTurnStart FactionType mongols
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 3; Chindu
	and I_CharacterExists mongols4chindu

	if I_CompareCounter attack_konjikala = 2
		terminate_monitor
	end_if
	set_event_counter is_mongol_character 1
end_monitor
monitor_event CharacterTurnStart CharFactionType mongols
	and Trait InvasionCharacterCounter = 4; Nayuk
	and I_CharacterExists mongols4nayuk

	if I_CompareCounter attack_konjikala = 2
		terminate_monitor
	end_if
	set_event_counter is_mongol_character 2
end_monitor
monitor_event EventCounter EventCounterType is_mongol_character
	and EventCounter = 2
	and not I_SettlementOwner Konjikala = mongols
	and I_IsFactionAIControlled mongols
	
	if I_SettlementUnderSiege Konjikala;if settlement under siege already, avoid ctd.
	and I_CompareCounter attack_konjikala = 0
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile mongols, named_character, 5, 490, 126 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Konjikala
	and I_CompareCounter attack_konjikala = 1
		siege_settlement mongols4chindu, Konjikala, attack
		siege_settlement mongols4nayuk, Konjikala, maintain
		set_counter attack_konjikala 2
		terminate_monitor
	end_if

	if not I_SettlementUnderSiege Konjikala
		if I_CompareCounter attack_konjikala = 0
			siege_settlement mongols4chindu, Konjikala, maintain
			siege_settlement mongols4nayuk, Konjikala, maintain
			set_counter attack_konjikala 1
			set_event_counter is_mongol_character 0
		end_if
	end_if
end_monitor

;================= BULGARIAN UPRISING ===================
declare_counter bulgarian_uprising
monitor_event PreFactionTurnStart FactionType slave
	;and I_TurnNumber = 50
	and I_EventCounter Campaign_Year = 50

	if not I_SettlementOwner Sofia = slave
		spawn_army 
			faction slave
			character Peter, named character, age 30, x 250, y 157, label Peter_of_Bulgaria
			traits GoodCommander 4 , BattleDread 3 , StrategyDread 2 , PublicFaith 1 , NaturalMilitarySkill 2 , ofBulgariaName 1
			unit		EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		set_event_counter bulgarians_rebel1 1
		add_money slave 10000
	end_if

	if not I_SettlementOwner Scopia = slave
		spawn_army 
			faction slave
			character Ivan, named character, age 30, x 236, y 151, label Ivan_Slave
			traits GoodCommander 2 , BattleChivalry 3 , StrategyChivalry 2 , PublicFaith 1 , NaturalMilitarySkill 1 , InvasionCharacterCounter 1 
			unit		EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0  
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		set_event_counter bulgarians_rebel2 1
		add_money slave 10000
	end_if

	if not I_SettlementOwner Adrianople = slave
		spawn_army 
			faction slave
			character Kalman, named character, age 30, x 267, y 147, label Kalman_Slave
			traits GoodCommander 2 , Bloodthirsty 2 , BattleDread 3 , InvasionCharacterCounter 2 
			unit		EE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit		Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0
			unit		Bulgarian Brigands		exp 2 armour 0 weapon_lvl 0  
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Slav Levies		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Balkan Archers		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Croat Axemen		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
			unit		Magyar Cavalry		exp 2 armour 0 weapon_lvl 0
		end
		set_event_counter bulgarians_rebel3 1
		add_money slave 10000
	end_if

	if I_EventCounter bulgarians_rebel = 1
		historic_event bulgarian_uprising
	end_if

	terminate_monitor
end_monitor

declare_counter bulgaria_sofia_siege
set_counter bulgaria_sofia_siege 0
;monitor_event FactionTurnStart FactionType slave
monitor_event CharacterTurnStart Trait ofBulgariaName = 1
	and CharFactionType slave
	and I_EventCounter bulgarians_rebel1 = 1
	and I_IsFactionAIControlled slave
	;and I_CharacterExists Peter_of_Bulgaria

	if I_SettlementOwner Sofia = slave
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Sofia
	and I_CompareCounter bulgaria_sofia_siege < 1 ;if settlement under siege already, avoid ctd.
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile slave, named_character, 1, 250, 157 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Sofia
	and I_CompareCounter bulgaria_sofia_siege = 1
		siege_settlement Peter_of_Bulgaria, Sofia, attack
		terminate_monitor
	end_if

	if I_CompareCounter bulgaria_sofia_siege < 1
		set_counter bulgaria_sofia_siege 1
		siege_settlement Peter_of_Bulgaria, Sofia, maintain
	end_if

end_monitor

declare_counter bulgaria_scopia_siege
set_counter bulgaria_scopia_siege 0
;monitor_event FactionTurnStart FactionType slave
monitor_event CharacterTurnStart Trait InvasionCharacterCounter = 1
	and CharFactionType slave
	and I_EventCounter bulgarians_rebel2 = 1
	and I_IsFactionAIControlled slave
	;and I_CharacterExists Ivan_Slave

	if I_SettlementOwner Scopia = slave
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Scopia
	and I_CompareCounter bulgaria_scopia_siege < 1 ;if settlement under siege already, avoid ctd.
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile slave, named_character, 1, 236, 151 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Scopia
	and I_CompareCounter bulgaria_scopia_siege = 1
		siege_settlement Ivan_Slave, Scopia, attack
		terminate_monitor
	end_if

	if I_CompareCounter bulgaria_scopia_siege < 1
		set_counter bulgaria_scopia_siege 1
		siege_settlement Ivan_Slave, Scopia, maintain
	end_if

end_monitor

declare_counter bulgaria_adrianople_siege
set_counter bulgaria_adrianople_siege 0
;monitor_event FactionTurnStart FactionType slave
monitor_event CharacterTurnStart Trait InvasionCharacterCounter = 2
	and CharFactionType slave
	and I_EventCounter bulgarians_rebel3 = 1
	and I_IsFactionAIControlled slave
	;and I_CharacterExists Kalman_Slave

	if I_SettlementOwner Adrianople = slave
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Adrianople
	and I_CompareCounter bulgaria_adrianople_siege < 1 ;if settlement under siege already, avoid ctd.
		terminate_monitor
	end_if

	if not I_CharacterTypeNearTile slave, named_character, 1, 267, 147 ;if character not standing where it should, avoid ctd
		terminate_monitor
	end_if

	if I_SettlementUnderSiege Adrianople
	and I_CompareCounter bulgaria_adrianople_siege = 1
		siege_settlement Kalman_Slave, Adrianople, attack
		terminate_monitor
	end_if

	if I_CompareCounter bulgaria_adrianople_siege < 1
		set_counter bulgaria_adrianople_siege 1
		siege_settlement Kalman_Slave, Adrianople, maintain
	end_if

end_monitor

;================== TIMURIDS INVASION ===================
;;;;;;;;;;;;;;;;;;;;;;;;DISABLED;;;;;;;;;;;;;;;;;;;;;;;;;
;========================================================
;===================== G5 BAI STUFF =====================
;========================================================

;### Germanicu5 ReallyBadAI Battle System Scrips v5.x
;### This file contains manually programmed AI behaviour eliminating previously unfixable, hardcoded bugs and greatly influences battle performance
;### Support available at http://www.twcenter.net/forums/forumdisplay.php?f=1745 , http://www.twcenter.net/forums/showthread.php?t=257970 and http://www.twcenter.net/forums/showthread.php?t=253132
;### Non-private use of code only by permission,
;### coded by Germanicu5

;;;;;;;Print Info
log always Germanicu5 ReallyBadAI v5.7 Running. Please upload log and savegames when reporting battle CTDs for SS.
monitor_event GameReloaded
log always Germanicu5 ReallyBadAI v5.7 Running. Please upload log and savegames when reporting battle CTDs for SS.
end_monitor

;;;;;;;
declare_counter g5_battle_difficulty_high
;;;;;;;
declare_counter fire_labels
declare_counter panel_check
declare_counter player_unit_count
declare_counter enemy_unit_count
declare_counter open_battle
declare_counter labels_only
declare_counter stakes_lock
;;;;;;;
declare_counter pu1_missile
declare_counter pu2_missile
declare_counter pu3_missile
declare_counter pu4_missile
declare_counter pu5_missile
declare_counter pu6_missile
declare_counter pu7_missile
declare_counter pu8_missile
declare_counter pu9_missile
declare_counter pu10_missile
declare_counter pu11_missile
declare_counter pu12_missile
declare_counter pu13_missile
declare_counter pu14_missile
declare_counter pu15_missile
declare_counter pu16_missile
declare_counter pu17_missile
declare_counter pu18_missile
declare_counter pu19_missile
declare_counter pu20_missile
;;;;;;;Checks
declare_counter check_timer
declare_counter elephant_fix_check
declare_counter elephant_fix_check_sally
declare_counter script_delay
declare_counter reinf_check
declare_counter sally_defense_check
declare_counter sally_check
;;;;;;;Stakes
declare_counter label_ready
declare_counter stakes_on
;;;;;;;Reinforcements
declare_counter army4_ready
declare_counter reinf_late

declare_counter distance_trigger1
declare_counter distance_trigger2
declare_counter distance_trigger3
declare_counter distance_trigger4
declare_counter distance_trigger5

declare_counter kill_labelling_reinf_allied
declare_counter army3_reinf_allied
declare_counter army4_reinf_allied
declare_counter army5_reinf_allied
declare_counter army6_reinf_allied
declare_counter army7_reinf_allied
declare_counter army8_reinf_allied
declare_counter army9_reinf_allied
declare_counter army10_reinf_allied
declare_counter army11_reinf_allied
declare_counter army12_reinf_allied
declare_counter army13_reinf_allied
declare_counter army14_reinf_allied
declare_counter army15_reinf_allied
declare_counter army16_reinf_allied
declare_counter launch_alliance_0
declare_counter launch_alliance_1

declare_counter apply_strategy
declare_counter relaunch_movement

declare_counter att_alliance_ready
declare_counter def_alliance_ready
declare_counter def_alliance_ready_siege

declare_counter army3_moving
declare_counter army3_run
declare_counter army3_reinf_late
declare_counter army4_moving
declare_counter army4_run
declare_counter army4_reinf_late
declare_counter army5_moving
declare_counter army5_run
declare_counter army5_reinf_late
declare_counter army6_moving
declare_counter army6_run
declare_counter army6_reinf_late
declare_counter army7_moving
declare_counter army7_run
declare_counter army7_reinf_late
declare_counter army8_moving
declare_counter army8_run
declare_counter army8_reinf_late
declare_counter army9_moving
declare_counter army9_run
declare_counter army9_reinf_late
declare_counter army10_moving
declare_counter army10_run
declare_counter army10_reinf_late
declare_counter army11_moving
declare_counter army11_run
declare_counter army11_reinf_late
declare_counter army12_moving
declare_counter army12_run
declare_counter army12_reinf_late
declare_counter army13_moving
declare_counter army13_run
declare_counter army13_reinf_late
declare_counter army14_moving
declare_counter army14_run
declare_counter army14_reinf_late
declare_counter army15_moving
declare_counter army15_run
declare_counter army15_reinf_late
declare_counter army16_moving
declare_counter army16_run
declare_counter army16_reinf_late

declare_counter army4_ready_siege ; acts as launching counter
declare_counter army4_moving_siege
declare_counter army4_run_siege
declare_counter reinf_check_interval

;;;;;;;HA Fix
declare_counter ha_fix
;;;;;;;Elephant Fix
declare_counter elephant_fix
declare_counter elephant_gate
declare_counter elephant_gate_s
declare_counter elephant_gate_tier2
declare_counter elephant_gate_tier3
declare_counter elephant_gate_tier2s
declare_counter elephant_gate_tier3s
declare_counter rally_walls
declare_counter rally_walls_s
declare_counter second_ring
declare_counter third_ring
declare_counter second_ring_s
declare_counter third_ring_s
declare_counter del_objective
declare_counter del_objective_s
;;;;;;;Sally-out
declare_counter sally-out_fix
declare_counter sally_defense
declare_counter reform_back
declare_counter reform_multi
declare_counter unit_under_fire
declare_counter kill_sally
declare_counter sally_reinf
declare_counter reset_position
declare_counter defend_location
declare_counter reset_army2
declare_counter assign_labels
;;;;;;;Siege
declare_counter siege_fix
declare_counter army_sieging
declare_counter army_south
declare_counter army_north
declare_counter army_east
declare_counter army_west
declare_counter emergency_stop
declare_counter omfg_cannon_tower
declare_counter army2_sally
declare_counter wall_advance_s
;;;;;;;Protect General
declare_counter protect_general
declare_counter general_wait
declare_counter protect_siege
declare_counter g_stop
;;;;;;;Sally-out, AI defending
declare_counter army4_ready_sally
declare_counter army4_location
declare_counter path_n
declare_counter path_ne
declare_counter path_e
declare_counter path_se
declare_counter path_s
declare_counter path_sw
declare_counter path_w
declare_counter path_nw
declare_counter obstacle_check
declare_counter label_army4
declare_counter army4_moving_s
declare_counter army4_idle_s
declare_counter line_passed
declare_counter army2_idle_s
declare_counter army4_idle_r
declare_counter wall_line_passed
declare_counter reset_position_s
declare_counter repeat_test1
declare_counter repeat_test2
declare_counter repeat_test3
declare_counter repeat_test4
declare_counter repeat_test5
declare_counter repeat_test6
;;;;;;;Open Battles
declare_counter ob_defense_launch
declare_counter ob_defend
declare_counter ob_siege_attack
declare_counter ob_under_fire
declare_counter ob_repeat_test
declare_counter ob_engaged
declare_counter player_units_closing
declare_counter player_enveloping
declare_counter player_engaged_reinf
;;;;;;;AI Stuck Fix
declare_counter ai_stuck_launch
declare_counter a2u1_stuck
declare_counter a2u2_stuck
declare_counter a2u3_stuck
declare_counter a2u4_stuck
declare_counter a2u5_stuck
declare_counter a2u6_stuck
declare_counter a2u7_stuck
declare_counter a2u8_stuck
declare_counter a2u9_stuck
declare_counter a2u10_stuck
declare_counter a2u11_stuck
declare_counter a2u12_stuck
declare_counter a2u13_stuck
declare_counter a2u14_stuck
declare_counter a2u15_stuck
declare_counter a2u16_stuck
declare_counter a2u17_stuck
declare_counter a2u18_stuck
declare_counter a2u19_stuck
declare_counter a2u20_stuck
declare_counter a2u1_status
declare_counter a2u2_status
declare_counter a2u3_status
declare_counter a2u4_status
declare_counter a2u5_status
declare_counter a2u6_status
declare_counter a2u7_status
declare_counter a2u8_status
declare_counter a2u9_status
declare_counter a2u10_status
declare_counter a2u11_status
declare_counter a2u12_status
declare_counter a2u13_status
declare_counter a2u14_status
declare_counter a2u15_status
declare_counter a2u16_status
declare_counter a2u17_status
declare_counter a2u18_status
declare_counter a2u19_status
declare_counter a2u20_status
declare_counter a2u1_distance
declare_counter a2u2_distance
declare_counter a2u3_distance
declare_counter a2u4_distance
declare_counter a2u5_distance
declare_counter a2u6_distance
declare_counter a2u7_distance
declare_counter a2u8_distance
declare_counter a2u9_distance
declare_counter a2u10_distance
declare_counter a2u11_distance
declare_counter a2u12_distance
declare_counter a2u13_distance
declare_counter a2u14_distance
declare_counter a2u15_distance
declare_counter a2u16_distance
declare_counter a2u17_distance
declare_counter a2u18_distance
declare_counter a2u19_distance
declare_counter a2u20_distance
;;;;;;;
set_event_counter no_advice 1

monitor_event PreFactionTurnStart FactionIsLocal
    and BattleDifficulty > medium

    set_counter g5_battle_difficulty_high 1
    terminate_monitor
end_monitor

monitor_event PreFactionTurnStart FactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsGeneral TargetFactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsGeneral ! FactionIsLocal
    and ! TargetFactionIsLocal
    and I_CompareCounter panel_check != 2

    set_counter panel_check 2
end_monitor

monitor_event GeneralAssaultsResidence TargetFactionIsLocal
    and I_CompareCounter panel_check != 1

    set_counter panel_check 1
end_monitor

monitor_event GeneralAssaultsResidence ! FactionIsLocal
    and ! TargetFactionIsLocal
    and I_CompareCounter panel_check != 2

    set_counter panel_check 2
end_monitor

monitor_event ButtonPressed ButtonPressed prebattle_fight_button
    and I_CompareCounter panel_check = 1

;    suspend_unscripted_advice true
    set_counter fire_labels 10
    ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter labels_only 0
    set_counter stakes_lock 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    ;;;;;;;Checks
    set_counter check_timer 0
    set_counter elephant_fix_check 0
    set_counter elephant_fix_check_sally 0
    set_counter reinf_check 0
    set_counter script_delay 0
    set_counter sally_defense_check 0
    set_counter sally_check 0
    ;;;;;;;Stakes
    set_counter label_ready 0
    set_counter stakes_on 0
    ;;;;;;;Reinforcements
    set_counter army4_ready 0
    set_counter reinf_late 0

    set_counter distance_trigger1 0
    set_counter distance_trigger2 0
    set_counter distance_trigger3 0
    set_counter distance_trigger4 0
    set_counter distance_trigger5 0

    set_counter kill_labelling_reinf_allied 0
    set_counter army3_reinf_allied 0
    set_counter army4_reinf_allied 0
    set_counter army5_reinf_allied 0
    set_counter army6_reinf_allied 0
    set_counter army7_reinf_allied 0
    set_counter army8_reinf_allied 0
    set_counter army9_reinf_allied 0
    set_counter army10_reinf_allied 0
    set_counter army11_reinf_allied 0
    set_counter army12_reinf_allied 0
    set_counter army13_reinf_allied 0
    set_counter army14_reinf_allied 0
    set_counter army15_reinf_allied 0
    set_counter army16_reinf_allied 0
    set_counter launch_alliance_0 0
    set_counter launch_alliance_1 0

    set_counter apply_strategy 0
    set_counter relaunch_movement 0

    set_counter att_alliance_ready 0
    set_counter def_alliance_ready 0
    set_counter def_alliance_ready_siege 0

    set_counter army3_moving 0
    set_counter army3_run 0
    set_counter army3_reinf_late 0
    set_counter army4_moving 0
    set_counter army4_run 0
    set_counter army4_reinf_late 0
    set_counter army5_moving 0
    set_counter army5_run 0
    set_counter army5_reinf_late 0
    set_counter army6_moving 0
    set_counter army6_run 0
    set_counter army6_reinf_late 0
    set_counter army7_moving 0
    set_counter army7_run 0
    set_counter army7_reinf_late 0
    set_counter army8_moving 0
    set_counter army8_run 0
    set_counter army8_reinf_late 0
    set_counter army9_moving 0
    set_counter army9_run 0
    set_counter army9_reinf_late 0
    set_counter army10_moving 0
    set_counter army10_run 0
    set_counter army10_reinf_late 0
    set_counter army11_moving 0
    set_counter army11_run 0
    set_counter army11_reinf_late 0
    set_counter army12_moving 0
    set_counter army12_run 0
    set_counter army12_reinf_late 0
    set_counter army13_moving 0
    set_counter army13_run 0
    set_counter army13_reinf_late 0
    set_counter army14_moving 0
    set_counter army14_run 0
    set_counter army14_reinf_late 0
    set_counter army15_moving 0
    set_counter army15_run 0
    set_counter army15_reinf_late 0
    set_counter army16_moving 0
    set_counter army16_run 0
    set_counter army16_reinf_late 0

    set_counter army4_ready_siege 0 ; acts as launching counter
    set_counter army4_moving_siege 0
    set_counter army4_run_siege 0
    set_counter reinf_check_interval 0

    ;;;;;;;HA Fix
    set_counter ha_fix 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    set_counter elephant_gate_s 0
    set_counter elephant_gate_tier2 0
    set_counter elephant_gate_tier3 0
    set_counter elephant_gate_tier2s 0
    set_counter elephant_gate_tier3s 0
    set_counter rally_walls 0
    set_counter rally_walls_s 0
    set_counter second_ring 0
    set_counter third_ring 0
    set_counter second_ring_s 0
    set_counter third_ring_s 0
    set_counter del_objective 0
    set_counter del_objective_s 0
    ;;;;;;;Sally-out
    set_counter sally-out_fix 0
    set_counter sally_defense 0
    set_counter reform_back 0
    set_counter reform_multi 0
    set_counter unit_under_fire 0
    set_counter kill_sally 0
    set_counter sally_reinf 0
    set_counter reset_position 0
    set_counter defend_location 0
    set_counter reset_army2 0
    set_counter assign_labels 0
    ;;;;;;;Siege
    set_counter siege_fix 0
    set_counter army_sieging 0
    set_counter army_south 0
    set_counter army_north 0
    set_counter army_east 0
    set_counter army_west 0
    set_counter emergency_stop 0
    set_counter omfg_cannon_tower 0
    set_counter army2_sally 0
    set_counter wall_advance_s 0
    ;;;;;;;Protect General
    set_counter protect_general 0
    set_counter general_wait 0
    set_counter protect_siege 0
    set_counter g_stop 0
    ;;;;;;;Sally-out, AI defending
    set_counter army4_ready_sally 0
    set_counter army4_location 0
    set_counter path_n 0
    set_counter path_ne 0
    set_counter path_e 0
    set_counter path_se 0
    set_counter path_s 0
    set_counter path_sw 0
    set_counter path_w 0
    set_counter path_nw 0
    set_counter obstacle_check 0
    set_counter label_army4 0
    set_counter army4_moving_s 0
    set_counter army4_idle_s 0
    set_counter line_passed 0
    set_counter army2_idle_s 0
    set_counter army4_idle_r 0
    set_counter wall_line_passed 0
    set_counter reset_position_s 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    ;;;;;;;Open Battles
    set_counter ob_defense_launch 0
    set_counter ob_defend 0
    set_counter ob_siege_attack 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 0
    set_counter ob_engaged 0
    set_counter player_units_closing 0
    set_counter player_enveloping 0
    set_counter player_engaged_reinf 0
    ;;;;;;;AI Stuck Fix
    set_counter ai_stuck_launch 0
    set_counter a2u1_stuck 0
    set_counter a2u2_stuck 0
    set_counter a2u3_stuck 0
    set_counter a2u4_stuck 0
    set_counter a2u5_stuck 0
    set_counter a2u6_stuck 0
    set_counter a2u7_stuck 0
    set_counter a2u8_stuck 0
    set_counter a2u9_stuck 0
    set_counter a2u10_stuck 0
    set_counter a2u11_stuck 0
    set_counter a2u12_stuck 0
    set_counter a2u13_stuck 0
    set_counter a2u14_stuck 0
    set_counter a2u15_stuck 0
    set_counter a2u16_stuck 0
    set_counter a2u17_stuck 0
    set_counter a2u18_stuck 0
    set_counter a2u19_stuck 0
    set_counter a2u20_stuck 0
    set_counter a2u1_status 0
    set_counter a2u2_status 0
    set_counter a2u3_status 0
    set_counter a2u4_status 0
    set_counter a2u5_status 0
    set_counter a2u6_status 0
    set_counter a2u7_status 0
    set_counter a2u8_status 0
    set_counter a2u9_status 0
    set_counter a2u10_status 0
    set_counter a2u11_status 0
    set_counter a2u12_status 0
    set_counter a2u13_status 0
    set_counter a2u14_status 0
    set_counter a2u15_status 0
    set_counter a2u16_status 0
    set_counter a2u17_status 0
    set_counter a2u18_status 0
    set_counter a2u19_status 0
    set_counter a2u20_status 0
    set_counter a2u1_distance 0
    set_counter a2u2_distance 0
    set_counter a2u3_distance 0
    set_counter a2u4_distance 0
    set_counter a2u5_distance 0
    set_counter a2u6_distance 0
    set_counter a2u7_distance 0
    set_counter a2u8_distance 0
    set_counter a2u9_distance 0
    set_counter a2u10_distance 0
    set_counter a2u11_distance 0
    set_counter a2u12_distance 0
    set_counter a2u13_distance 0
    set_counter a2u14_distance 0
    set_counter a2u15_distance 0
    set_counter a2u16_distance 0
    set_counter a2u17_distance 0
    set_counter a2u18_distance 0
    set_counter a2u19_distance 0
    set_counter a2u20_distance 0
    prepare_for_battle
end_monitor

monitor_conditions I_InBattle
    and I_CompareCounter fire_labels = 10

    set_counter fire_labels 0
    battle_wait 0.1

    if ! I_BattleIsSiegeBattle
    set_counter fire_labels 1
    end_if

    if I_BattleIsSiegeBattle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter fire_labels 1
    end_if

if I_BattlePlayerArmyIsAttacker

    ;;;Army 1
    set_counter player_unit_count 0
    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if
if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    ;;;Army 2
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_BattlePlayerArmyIsAttacker

    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
;    and ! I_BattleIsSiegeBattle
    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if
if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 1
    set_counter enemy_unit_count 0
    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 0 0 0 a1u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 0 0 1 a1u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 0 0 2 a1u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 0 0 3 a1u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 0 0 4 a1u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 0 0 5 a1u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 0 0 6 a1u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 0 0 7 a1u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 0 0 8 a1u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 0 0 9 a1u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 0 0 10 a1u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 0 0 11 a1u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 0 0 12 a1u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 0 0 13 a1u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 0 0 14 a1u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 0 0 15 a1u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 0 0 16 a1u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 0 0 17 a1u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 0 0 18 a1u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 0 0 19 a1u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ;;;Army 2
    set_counter player_unit_count 0
    if I_BattlePlayerArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter player_unit_count 1
    if I_BattlePlayerArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter player_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_BattleEnemyArmyNumberOfUnits = 1
    define_unit_group army1 a1u1
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 2
    define_unit_group army1 a1u1 a1u2
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 3
    define_unit_group army1 a1u1 a1u2 a1u3
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 4
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 5
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 6
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 7
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 8
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 9
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 10
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 11
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 12
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 13
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 14
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 15
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 16
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 17
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 18
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 19
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19
    end_if
    if I_BattleEnemyArmyNumberOfUnits = 20
    define_unit_group army1 a1u1 a1u2 a1u3 a1u4 a1u5 a1u6 a1u7 a1u8 a1u9 a1u10 a1u11 a1u12 a1u13 a1u14 a1u15 a1u16 a1u17 a1u18 a1u19 a1u20
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 1
    define_unit_group army2 a2u1
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 2
    define_unit_group army2 a2u1 a2u2
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 3
    define_unit_group army2 a2u1 a2u2 a2u3
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 4
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 5
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 6
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 7
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 8
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 9
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 10
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 11
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 12
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 13
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 14
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 15
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 16
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 17
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 18
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 19
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19
    end_if
    if I_BattlePlayerArmyNumberOfUnits = 20
    define_unit_group army2 a2u1 a2u2 a2u3 a2u4 a2u5 a2u6 a2u7 a2u8 a2u9 a2u10 a2u11 a2u12 a2u13 a2u14 a2u15 a2u16 a2u17 a2u18 a2u19 a2u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a1u1 > 0
    set_counter pu1_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u1 = horde
    set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a1u2 > 0
    set_counter pu2_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u2 = horde
    set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a1u3 > 0
    set_counter pu3_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u3 = horde
    set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a1u4 > 0
    set_counter pu4_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u4 = horde
    set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a1u5 > 0
    set_counter pu5_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u5 = horde
    set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a1u6 > 0
    set_counter pu6_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u6 = horde
    set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a1u7 > 0
    set_counter pu7_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u7 = horde
    set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a1u8 > 0
    set_counter pu8_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u8 = horde
    set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a1u9 > 0
    set_counter pu9_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u9 = horde
    set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a1u10 > 0
    set_counter pu10_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u10 = horde
    set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a1u11 > 0
    set_counter pu11_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u11 = horde
    set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a1u12 > 0
    set_counter pu12_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u12 = horde
    set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a1u13 > 0
    set_counter pu13_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u13 = horde
    set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a1u14 > 0
    set_counter pu14_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u14 = horde
    set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a1u15 > 0
    set_counter pu15_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u15 = horde
    set_counter pu15_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a1u16 > 0
    set_counter pu16_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u16 = horde
    set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a1u17 > 0
    set_counter pu17_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u17 = horde
    set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a1u18 > 0
    set_counter pu18_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u18 = horde
    set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a1u19 > 0
    set_counter pu19_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u19 = horde
    set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a1u20 > 0
    set_counter pu20_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a1u20 = horde
    set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if ! I_BattlePlayerArmyIsAttacker
    if I_CompareCounter player_unit_count >= 1
    if I_UnitPercentageAmmoLeft a2u1 > 0
    set_counter pu1_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u1 = horde
    set_counter pu1_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 2
    if I_UnitPercentageAmmoLeft a2u2 > 0
    set_counter pu2_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u2 = horde
    set_counter pu2_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 3
    if I_UnitPercentageAmmoLeft a2u3 > 0
    set_counter pu3_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u3 = horde
    set_counter pu3_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 4
    if I_UnitPercentageAmmoLeft a2u4 > 0
    set_counter pu4_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u4 = horde
    set_counter pu4_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 5
    if I_UnitPercentageAmmoLeft a2u5 > 0
    set_counter pu5_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u5 = horde
    set_counter pu5_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 6
    if I_UnitPercentageAmmoLeft a2u6 > 0
    set_counter pu6_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u6 = horde
    set_counter pu6_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 7
    if I_UnitPercentageAmmoLeft a2u7 > 0
    set_counter pu7_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u7 = horde
    set_counter pu7_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 8
    if I_UnitPercentageAmmoLeft a2u8 > 0
    set_counter pu8_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u8 = horde
    set_counter pu8_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 9
    if I_UnitPercentageAmmoLeft a2u9 > 0
    set_counter pu9_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u9 = horde
    set_counter pu9_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 10
    if I_UnitPercentageAmmoLeft a2u10 > 0
    set_counter pu10_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u10 = horde
    set_counter pu10_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 11
    if I_UnitPercentageAmmoLeft a2u11 > 0
    set_counter pu11_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u11 = horde
    set_counter pu11_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 12
    if I_UnitPercentageAmmoLeft a2u12 > 0
    set_counter pu12_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u12 = horde
    set_counter pu12_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 13
    if I_UnitPercentageAmmoLeft a2u13 > 0
    set_counter pu13_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u13 = horde
    set_counter pu13_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 14
    if I_UnitPercentageAmmoLeft a2u14 > 0
    set_counter pu14_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u14 = horde
    set_counter pu14_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 15
    if I_UnitPercentageAmmoLeft a2u15 > 0
    set_counter pu15_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u15 = horde
    set_counter pu15_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 16
    if I_UnitPercentageAmmoLeft a2u16 > 0
    set_counter pu16_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u16 = horde
    set_counter pu16_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 17
    if I_UnitPercentageAmmoLeft a2u17 > 0
    set_counter pu17_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u17 = horde
    set_counter pu17_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 18
    if I_UnitPercentageAmmoLeft a2u18 > 0
    set_counter pu18_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u18 = horde
    set_counter pu18_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count >= 19
    if I_UnitPercentageAmmoLeft a2u19 > 0
    set_counter pu19_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u19 = horde
    set_counter pu19_missile 2
    end_if
    end_if

    if I_CompareCounter player_unit_count = 20
    if I_UnitPercentageAmmoLeft a2u20 > 0
    set_counter pu20_missile 1
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_UnitFormation a2u20 = horde
    set_counter pu20_missile 2
    end_if
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if
;    battle_wait 0.1
;    ai_active_set off
    battle_wait 0.1
    ai_active_set on
    set_counter labels_only 1

    if I_BattleIsSiegeBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter ai_stuck_launch 1
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattlePlayerArmyNumberOfAttribute stakes > 0
    set_counter stakes_lock 1
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
    set_counter protect_siege 1
    end_if

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and ! I_BattleIsRiverBattle
    and ! I_ConflictType SuccessfulAmbush
    set_counter open_battle 1
    end_if

if I_CompareCounter fire_labels = 1
    if I_BattleIsSiegeBattle
    label_location 0, -850, south_side
    label_location 0, 850, north_side
    label_location -850, 0, west_side
    label_location 850, 0, east_side
    end_if

    if I_BattleIsSallyOutBattle
    label_location 0, -850, south_side
    label_location 0, 850, north_side
    label_location -850, 0, west_side
    label_location 850, 0, east_side
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    label_location -470, -470, sw
    label_location 470, -470, se
    label_location -470, 470, nw
    label_location 470, 470, ne
    label_location -400, -400, sw_wall
    label_location 400, -400, se_wall
    label_location -400, 400, nw_wall
    label_location 400, 400, ne_wall
    end_if

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 west_side east_side > 200
    set_counter army_south 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 west_side east_side < -200
    set_counter army_north 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 south_side north_side > 200
    set_counter army_east 1
    end_if
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a1u1 south_side north_side < -200
    set_counter army_west 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 west_side east_side > 200
    set_counter army_south 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 west_side east_side < -200
    set_counter army_north 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 south_side north_side > 200
    set_counter army_east 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitDistanceFromLine a2u1 south_side north_side < -200
    set_counter army_west 1
    end_if
    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter sally-out_fix 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter siege_fix 1
    end_if

    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    and I_BattleIsSiegeBattle
    set_counter elephant_fix 1
    end_if

end_if
end_monitor

monitor_event BattleConflictPhaseCommenced FactionIsLocal
    and I_CompareCounter panel_check = 1

    set_counter script_delay 1
    battle_wait 15
    if I_CompareCounter script_delay = 1

    if I_CompareCounter fire_labels = 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_CompareCounter g5_battle_difficulty_high = 1
    and I_BattleIsSiegeBattle
    set_counter label_ready 1
    end_if

    if I_CompareCounter fire_labels = 1
    if I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_CompareCounter g5_battle_difficulty_high = 1
    and ! I_BattleIsSiegeBattle
    set_counter label_ready 1
    end_if

    if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1
    ai_gta_plan_set 1 DEFEND_FEATURE
    battle_wait 1
    ai_active_set on
    set_counter ob_defense_launch 1
    end_if
    end_if

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and ! I_BattleIsRiverBattle
    and ! I_ConflictType SuccessfulAmbush
    and I_BattleEnemyArmyNumberOfUnits > 2
    set_counter g_stop 1
    end_if

    if I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter fire_labels = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter sally_defense 1
    set_counter assign_labels 1
    end_if

    if I_BattleStarted
    and I_CompareCounter fire_labels = 1
    and I_CompareCounter open_battle = 1
    set_counter ha_fix 1
    end_if

    if I_BattleStarted
    and I_CompareCounter fire_labels = 1
    and I_BattleIsRiverBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter ha_fix 1
    end_if
    set_counter script_delay 0
    end_if
end_monitor

monitor_event BattleReinforcementsArrive ! ArmyIsLocal
    and I_CompareCounter panel_check = 1
    and I_CompareCounter fire_labels = 1

    set_counter reinf_check 1
    battle_wait 15
if I_CompareCounter reinf_check = 1
    set_counter reinf_check 2
    battle_wait 15
if I_CompareCounter reinf_check = 2
    set_counter reinf_check 3
    battle_wait 15
if I_CompareCounter reinf_check = 3
 if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 3
    label_unit 0 1 0 a3u1
    define_unit_group army3a a3u1
    if ! I_PercentageUnitGroupKilled army3a = 100
    undefine_unit_group army3a
    ;;;Army 3
    label_unit 0 1 0 a3u1
    label_unit 0 1 1 a3u2
    label_unit 0 1 2 a3u3
    label_unit 0 1 3 a3u4
    label_unit 0 1 4 a3u5
    label_unit 0 1 5 a3u6
    label_unit 0 1 6 a3u7
    label_unit 0 1 7 a3u8
    label_unit 0 1 8 a3u9
    label_unit 0 1 9 a3u10
    label_unit 0 1 10 a3u11
    label_unit 0 1 11 a3u12
    label_unit 0 1 12 a3u13
    label_unit 0 1 13 a3u14
    label_unit 0 1 14 a3u15
    label_unit 0 1 15 a3u16
    label_unit 0 1 16 a3u17
    label_unit 0 1 17 a3u18
    label_unit 0 1 18 a3u19
    label_unit 0 1 19 a3u20

    define_unit_group army3 a3u1 a3u2 a3u3 a3u4 a3u5 a3u6 a3u7 a3u8 a3u9 a3u10 a3u11 a3u12 a3u13 a3u14 a3u15 a3u16 a3u17 a3u18 a3u19 a3u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker

    ;;;Army 4
    label_unit 1 1 0 a4u1
    define_unit_group army4a a4u1
    if ! I_PercentageUnitGroupKilled army4a = 100
    undefine_unit_group army4a
    ;;;Army 4
    label_unit 1 1 0 a4u1
    label_unit 1 1 1 a4u2
    label_unit 1 1 2 a4u3
    label_unit 1 1 3 a4u4
    label_unit 1 1 4 a4u5
    label_unit 1 1 5 a4u6
    label_unit 1 1 6 a4u7
    label_unit 1 1 7 a4u8
    label_unit 1 1 8 a4u9
    label_unit 1 1 9 a4u10
    label_unit 1 1 10 a4u11
    label_unit 1 1 11 a4u12
    label_unit 1 1 12 a4u13
    label_unit 1 1 13 a4u14
    label_unit 1 1 14 a4u15
    label_unit 1 1 15 a4u16
    label_unit 1 1 16 a4u17
    label_unit 1 1 17 a4u18
    label_unit 1 1 18 a4u19
    label_unit 1 1 19 a4u20

    define_unit_group army4 a4u1 a4u2 a4u3 a4u4 a4u5 a4u6 a4u7 a4u8 a4u9 a4u10 a4u11 a4u12 a4u13 a4u14 a4u15 a4u16 a4u17 a4u18 a4u19 a4u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army3 = 100
    set_counter army3_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army4 = 100
    set_counter army4_reinf_allied 1
    end_if

    if I_PercentageUnitGroupKilled army3 = 100
    and I_PercentageUnitGroupKilled army4 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

if ! I_BattleIsSallyOutBattle

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 5
    label_unit 0 2 0 a5u1
    define_unit_group army5a a5u1
    if ! I_PercentageUnitGroupKilled army5a = 100
    undefine_unit_group army5a
    ;;;Army 5
    label_unit 0 2 0 a5u1
    label_unit 0 2 1 a5u2
    label_unit 0 2 2 a5u3
    label_unit 0 2 3 a5u4
    label_unit 0 2 4 a5u5
    label_unit 0 2 5 a5u6
    label_unit 0 2 6 a5u7
    label_unit 0 2 7 a5u8
    label_unit 0 2 8 a5u9
    label_unit 0 2 9 a5u10
    label_unit 0 2 10 a5u11
    label_unit 0 2 11 a5u12
    label_unit 0 2 12 a5u13
    label_unit 0 2 13 a5u14
    label_unit 0 2 14 a5u15
    label_unit 0 2 15 a5u16
    label_unit 0 2 16 a5u17
    label_unit 0 2 17 a5u18
    label_unit 0 2 18 a5u19
    label_unit 0 2 19 a5u20

    define_unit_group army5 a5u1 a5u2 a5u3 a5u4 a5u5 a5u6 a5u7 a5u8 a5u9 a5u10 a5u11 a5u12 a5u13 a5u14 a5u15 a5u16 a5u17 a5u18 a5u19 a5u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker
    ;;;Army 6
    label_unit 1 2 0 a6u1
    define_unit_group army6a a6u1
    if ! I_PercentageUnitGroupKilled army6a = 100
    undefine_unit_group army6a 	
    ;;;Army 6
    label_unit 1 2 0 a6u1
    label_unit 1 2 1 a6u2
    label_unit 1 2 2 a6u3
    label_unit 1 2 3 a6u4
    label_unit 1 2 4 a6u5
    label_unit 1 2 5 a6u6
    label_unit 1 2 6 a6u7
    label_unit 1 2 7 a6u8
    label_unit 1 2 8 a6u9
    label_unit 1 2 9 a6u10
    label_unit 1 2 10 a6u11
    label_unit 1 2 11 a6u12
    label_unit 1 2 12 a6u13
    label_unit 1 2 13 a6u14
    label_unit 1 2 14 a6u15
    label_unit 1 2 15 a6u16
    label_unit 1 2 16 a6u17
    label_unit 1 2 17 a6u18
    label_unit 1 2 18 a6u19
    label_unit 1 2 19 a6u20

    define_unit_group army6 a6u1 a6u2 a6u3 a6u4 a6u5 a6u6 a6u7 a6u8 a6u9 a6u10 a6u11 a6u12 a6u13 a6u14 a6u15 a6u16 a6u17 a6u18 a6u19 a6u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army5 = 100
    set_counter army5_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army6 = 100
    set_counter army6_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army5 = 100
    and I_PercentageUnitGroupKilled army6 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 7
    label_unit 0 3 0 a7u1
    define_unit_group army7a a7u1
    if ! I_PercentageUnitGroupKilled army7a = 100
    undefine_unit_group army7a 	
    ;;;Army 7
    label_unit 0 3 0 a7u1
    label_unit 0 3 1 a7u2
    label_unit 0 3 2 a7u3
    label_unit 0 3 3 a7u4
    label_unit 0 3 4 a7u5
    label_unit 0 3 5 a7u6
    label_unit 0 3 6 a7u7
    label_unit 0 3 7 a7u8
    label_unit 0 3 8 a7u9
    label_unit 0 3 9 a7u10
    label_unit 0 3 10 a7u11
    label_unit 0 3 11 a7u12
    label_unit 0 3 12 a7u13
    label_unit 0 3 13 a7u14
    label_unit 0 3 14 a7u15
    label_unit 0 3 15 a7u16
    label_unit 0 3 16 a7u17
    label_unit 0 3 17 a7u18
    label_unit 0 3 18 a7u19
    label_unit 0 3 19 a7u20

    define_unit_group army7 a7u1 a7u2 a7u3 a7u4 a7u5 a7u6 a7u7 a7u8 a7u9 a7u10 a7u11 a7u12 a7u13 a7u14 a7u15 a7u16 a7u17 a7u18 a7u19 a7u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 8
    label_unit 1 3 0 a8u1
    define_unit_group army8a a8u1
    if ! I_PercentageUnitGroupKilled army8a = 100
    undefine_unit_group army8a 	
    ;;;Army 8
    label_unit 1 3 0 a8u1
    label_unit 1 3 1 a8u2
    label_unit 1 3 2 a8u3
    label_unit 1 3 3 a8u4
    label_unit 1 3 4 a8u5
    label_unit 1 3 5 a8u6
    label_unit 1 3 6 a8u7
    label_unit 1 3 7 a8u8
    label_unit 1 3 8 a8u9
    label_unit 1 3 9 a8u10
    label_unit 1 3 10 a8u11
    label_unit 1 3 11 a8u12
    label_unit 1 3 12 a8u13
    label_unit 1 3 13 a8u14
    label_unit 1 3 14 a8u15
    label_unit 1 3 15 a8u16
    label_unit 1 3 16 a8u17
    label_unit 1 3 17 a8u18
    label_unit 1 3 18 a8u19
    label_unit 1 3 19 a8u20

    define_unit_group army8 a8u1 a8u2 a8u3 a8u4 a8u5 a8u6 a8u7 a8u8 a8u9 a8u10 a8u11 a8u12 a8u13 a8u14 a8u15 a8u16 a8u17 a8u18 a8u19 a8u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army7 = 100
    set_counter army7_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army8 = 100
    set_counter army8_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army7 = 100
    and I_PercentageUnitGroupKilled army8 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 9
    label_unit 0 4 0 a9u1
    define_unit_group army9a a9u1
    if ! I_PercentageUnitGroupKilled army9a = 100
    undefine_unit_group army9a 	
    ;;;Army 9
    label_unit 0 4 0 a9u1
    label_unit 0 4 1 a9u2
    label_unit 0 4 2 a9u3
    label_unit 0 4 3 a9u4
    label_unit 0 4 4 a9u5
    label_unit 0 4 5 a9u6
    label_unit 0 4 6 a9u7
    label_unit 0 4 7 a9u8
    label_unit 0 4 8 a9u9
    label_unit 0 4 9 a9u10
    label_unit 0 4 10 a9u11
    label_unit 0 4 11 a9u12
    label_unit 0 4 12 a9u13
    label_unit 0 4 13 a9u14
    label_unit 0 4 14 a9u15
    label_unit 0 4 15 a9u16
    label_unit 0 4 16 a9u17
    label_unit 0 4 17 a9u18
    label_unit 0 4 18 a9u19
    label_unit 0 4 19 a9u20

    define_unit_group army9 a9u1 a9u2 a9u3 a9u4 a9u5 a9u6 a9u7 a9u8 a9u9 a9u10 a9u11 a9u12 a9u13 a9u14 a9u15 a9u16 a9u17 a9u18 a9u19 a9u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 10
    label_unit 1 4 0 a10u1
    define_unit_group army10a a10u1
    if ! I_PercentageUnitGroupKilled army10a = 100
    undefine_unit_group army10a 	
    ;;;Army 10
    label_unit 1 4 0 a10u1
    label_unit 1 4 1 a10u2
    label_unit 1 4 2 a10u3
    label_unit 1 4 3 a10u4
    label_unit 1 4 4 a10u5
    label_unit 1 4 5 a10u6
    label_unit 1 4 6 a10u7
    label_unit 1 4 7 a10u8
    label_unit 1 4 8 a10u9
    label_unit 1 4 9 a10u10
    label_unit 1 4 10 a10u11
    label_unit 1 4 11 a10u12
    label_unit 1 4 12 a10u13
    label_unit 1 4 13 a10u14
    label_unit 1 4 14 a10u15
    label_unit 1 4 15 a10u16
    label_unit 1 4 16 a10u17
    label_unit 1 4 17 a10u18
    label_unit 1 4 18 a10u19
    label_unit 1 4 19 a10u20

    define_unit_group army10 a10u1 a10u2 a10u3 a10u4 a10u5 a10u6 a10u7 a10u8 a10u9 a10u10 a10u11 a10u12 a10u13 a10u14 a10u15 a10u16 a10u17 a10u18 a10u19 a10u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army9 = 100
    set_counter army9_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army10 = 100
    set_counter army10_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army9 = 100
    and I_PercentageUnitGroupKilled army10 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 11
    label_unit 0 5 0 a11u1
    define_unit_group army11a a11u1
    if ! I_PercentageUnitGroupKilled army11a = 100
    undefine_unit_group army11a 	
    ;;;Army 11
    label_unit 0 5 0 a11u1
    label_unit 0 5 1 a11u2
    label_unit 0 5 2 a11u3
    label_unit 0 5 3 a11u4
    label_unit 0 5 4 a11u5
    label_unit 0 5 5 a11u6
    label_unit 0 5 6 a11u7
    label_unit 0 5 7 a11u8
    label_unit 0 5 8 a11u9
    label_unit 0 5 9 a11u10
    label_unit 0 5 10 a11u11
    label_unit 0 5 11 a11u12
    label_unit 0 5 12 a11u13
    label_unit 0 5 13 a11u14
    label_unit 0 5 14 a11u15
    label_unit 0 5 15 a11u16
    label_unit 0 5 16 a11u17
    label_unit 0 5 17 a11u18
    label_unit 0 5 18 a11u19
    label_unit 0 5 19 a11u20

    define_unit_group army11 a11u1 a11u2 a11u3 a11u4 a11u5 a11u6 a11u7 a11u8 a11u9 a11u10 a11u11 a11u12 a11u13 a11u14 a11u15 a11u16 a11u17 a11u18 a11u19 a11u20
    end_if
end_if
if I_BattlePlayerArmyIsAttacker 	
    ;;;Army 12
    label_unit 1 5 0 a12u1
    define_unit_group army12a a12u1
    if ! I_PercentageUnitGroupKilled army12a = 100
    undefine_unit_group army12a 	
    ;;;Army 12
    label_unit 1 5 0 a12u1
    label_unit 1 5 1 a12u2
    label_unit 1 5 2 a12u3
    label_unit 1 5 3 a12u4
    label_unit 1 5 4 a12u5
    label_unit 1 5 5 a12u6
    label_unit 1 5 6 a12u7
    label_unit 1 5 7 a12u8
    label_unit 1 5 8 a12u9
    label_unit 1 5 9 a12u10
    label_unit 1 5 10 a12u11
    label_unit 1 5 11 a12u12
    label_unit 1 5 12 a12u13
    label_unit 1 5 13 a12u14
    label_unit 1 5 14 a12u15
    label_unit 1 5 15 a12u16
    label_unit 1 5 16 a12u17
    label_unit 1 5 17 a12u18
    label_unit 1 5 18 a12u19
    label_unit 1 5 19 a12u20

    define_unit_group army12 a12u1 a12u2 a12u3 a12u4 a12u5 a12u6 a12u7 a12u8 a12u9 a12u10 a12u11 a12u12 a12u13 a12u14 a12u15 a12u16 a12u17 a12u18 a12u19 a12u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army11 = 100
    set_counter army11_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army12 = 100
    set_counter army12_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army11 = 100
    and I_PercentageUnitGroupKilled army12 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 13
    label_unit 0 6 0 a13u1
    define_unit_group army13a a13u1
    if ! I_PercentageUnitGroupKilled army13a = 100
    undefine_unit_group army13a 	
    ;;;Army 13
    label_unit 0 6 0 a13u1
    label_unit 0 6 1 a13u2
    label_unit 0 6 2 a13u3
    label_unit 0 6 3 a13u4
    label_unit 0 6 4 a13u5
    label_unit 0 6 5 a13u6
    label_unit 0 6 6 a13u7
    label_unit 0 6 7 a13u8
    label_unit 0 6 8 a13u9
    label_unit 0 6 9 a13u10
    label_unit 0 6 10 a13u11
    label_unit 0 6 11 a13u12
    label_unit 0 6 12 a13u13
    label_unit 0 6 13 a13u14
    label_unit 0 6 14 a13u15
    label_unit 0 6 15 a13u16
    label_unit 0 6 16 a13u17
    label_unit 0 6 17 a13u18
    label_unit 0 6 18 a13u19
    label_unit 0 6 19 a13u20

    define_unit_group army13 a13u1 a13u2 a13u3 a13u4 a13u5 a13u6 a13u7 a13u8 a13u9 a13u10 a13u11 a13u12 a13u13 a13u14 a13u15 a13u16 a13u17 a13u18 a13u19 a13u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker	
    ;;;Army 14
    label_unit 1 6 0 a14u1
    define_unit_group army14a a14u1
    if ! I_PercentageUnitGroupKilled army14a = 100
    undefine_unit_group army14a 	
    ;;;Army 14
    label_unit 1 6 0 a14u1
    label_unit 1 6 1 a14u2
    label_unit 1 6 2 a14u3
    label_unit 1 6 3 a14u4
    label_unit 1 6 4 a14u5
    label_unit 1 6 5 a14u6
    label_unit 1 6 6 a14u7
    label_unit 1 6 7 a14u8
    label_unit 1 6 8 a14u9
    label_unit 1 6 9 a14u10
    label_unit 1 6 10 a14u11
    label_unit 1 6 11 a14u12
    label_unit 1 6 12 a14u13
    label_unit 1 6 13 a14u14
    label_unit 1 6 14 a14u15
    label_unit 1 6 15 a14u16
    label_unit 1 6 16 a14u17
    label_unit 1 6 17 a14u18
    label_unit 1 6 18 a14u19
    label_unit 1 6 19 a14u20

    define_unit_group army14 a14u1 a14u2 a14u3 a14u4 a14u5 a14u6 a14u7 a14u8 a14u9 a14u10 a14u11 a14u12 a14u13 a14u14 a14u15 a14u16 a14u17 a14u18 a14u19 a14u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army13 = 100
    set_counter army13_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army14 = 100
    set_counter army14_reinf_allied 1
    end_if
    if I_PercentageUnitGroupKilled army13 = 100
    and I_PercentageUnitGroupKilled army14 = 100
    set_counter kill_labelling_reinf_allied 1
    end_if

end_if

if I_CompareCounter kill_labelling_reinf_allied = 0

if ! I_BattlePlayerArmyIsAttacker
    ;;;Army 15
    label_unit 0 7 0 a15u1
    define_unit_group army15a a15u1
    if ! I_PercentageUnitGroupKilled army15a = 100
    undefine_unit_group army15a 	
    ;;;Army 15
    label_unit 0 7 0 a15u1
    label_unit 0 7 1 a15u2
    label_unit 0 7 2 a15u3
    label_unit 0 7 3 a15u4
    label_unit 0 7 4 a15u5
    label_unit 0 7 5 a15u6
    label_unit 0 7 6 a15u7
    label_unit 0 7 7 a15u8
    label_unit 0 7 8 a15u9
    label_unit 0 7 9 a15u10
    label_unit 0 7 10 a15u11
    label_unit 0 7 11 a15u12
    label_unit 0 7 12 a15u13
    label_unit 0 7 13 a15u14
    label_unit 0 7 14 a15u15
    label_unit 0 7 15 a15u16
    label_unit 0 7 16 a15u17
    label_unit 0 7 17 a15u18
    label_unit 0 7 18 a15u19
    label_unit 0 7 19 a15u20

    define_unit_group army15 a15u1 a15u2 a15u3 a15u4 a15u5 a15u6 a15u7 a15u8 a15u9 a15u10 a15u11 a15u12 a15u13 a15u14 a15u15 a15u16 a15u17 a15u18 a15u19 a15u20
    end_if
end_if

if I_BattlePlayerArmyIsAttacker	
    ;;;Army 16
    label_unit 1 7 0 a16u1
    define_unit_group army16a a16u1
    if ! I_PercentageUnitGroupKilled army16a = 100
    undefine_unit_group army16a 	
    ;;;Army 16
    label_unit 1 7 0 a16u1
    label_unit 1 7 1 a16u2
    label_unit 1 7 2 a16u3
    label_unit 1 7 3 a16u4
    label_unit 1 7 4 a16u5
    label_unit 1 7 5 a16u6
    label_unit 1 7 6 a16u7
    label_unit 1 7 7 a16u8
    label_unit 1 7 8 a16u9
    label_unit 1 7 9 a16u10
    label_unit 1 7 10 a16u11
    label_unit 1 7 11 a16u12
    label_unit 1 7 12 a16u13
    label_unit 1 7 13 a16u14
    label_unit 1 7 14 a16u15
    label_unit 1 7 15 a16u16
    label_unit 1 7 16 a16u17
    label_unit 1 7 17 a16u18
    label_unit 1 7 18 a16u19
    label_unit 1 7 19 a16u20

    define_unit_group army16 a16u1 a16u2 a16u3 a16u4 a16u5 a16u6 a16u7 a16u8 a16u9 a16u10 a16u11 a16u12 a16u13 a16u14 a16u15 a16u16 a16u17 a16u18 a16u19 a16u20
    end_if
end_if

    if ! I_PercentageUnitGroupKilled army15 = 100
    set_counter army15_reinf_allied 1
    end_if

    if ! I_PercentageUnitGroupKilled army16 = 100
    set_counter army16_reinf_allied 1
    end_if
end_if

end_if
battle_wait 0.5
ai_active_set on

;;;;;;;Reinforcements

    ;;;;;;; Attacking
    if ! I_BattlePlayerArmyIsAttacker
    and ! I_ConflictType SuccessfulAmbush
;    and ! I_ConflictType FailedAmbush
    and ! I_BattleIsSiegeBattle
    and I_CompareCounter army3_reinf_allied = 1

    set_counter apply_strategy 1
;    battle_wait 1
;    set_counter att_alliance_ready 1
    end_if

    ;;;;;;; Defending
    if I_BattlePlayerArmyIsAttacker
    and ! I_ConflictType SuccessfulAmbush
;    and ! I_ConflictType FailedAmbush
    and I_CompareCounter army4_reinf_allied = 1

    if ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    set_counter army4_ready 1
    set_counter def_alliance_ready 1
    end_if
    if ! I_BattleIsSiegeBattle
    and I_BattleIsSallyOutBattle
    set_counter army4_ready_sally 1
    set_counter sally_reinf 1
    end_if

    ;;;;;;; Siege
    if I_BattleIsSiegeBattle
    set_counter def_alliance_ready_siege 1
    end_if
    end_if
end_if
end_if
end_if
end_monitor

;Apply Strategy

monitor_conditions I_BattleStarted
    and I_CompareCounter apply_strategy = 1

if ! I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1

;    ai_gta_plan_set 0 ATTACK_ALL
    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
    set_counter launch_alliance_0 1
end_if

if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter open_battle = 1

;    ai_gta_plan_set 1 ATTACK_ALL
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999
    set_counter launch_alliance_1 1
end_if

if I_CompareCounter launch_alliance_0 = 1
    and I_CompareCounter army3_reinf_allied = 1

    ;;;Army 1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a1u20
    ;;;Army 3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a3u20
if I_CompareCounter army5_reinf_allied = 1
    ;;;Army 5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a5u20
if I_CompareCounter army7_reinf_allied = 1
    ;;;Army 7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a7u20
if I_CompareCounter army9_reinf_allied = 1
     ;;;Army 9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a9u20
if I_CompareCounter army11_reinf_allied = 1
    ;;;Army 11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a11u20
if I_CompareCounter army13_reinf_allied = 1
    ;;;Army 13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a13u20
if I_CompareCounter army15_reinf_allied = 1
    ;;;Army 15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u1
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u2
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u3
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u4
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u5
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u6
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u7
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u8
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u9
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u10
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u11
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u12
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u13
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u14
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u15
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u16
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u17
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u18
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u19
    ai_gta_add_unit_label 0 G5_OBJECTIVE a15u20
end_if
end_if
end_if
end_if
end_if
end_if
end_if

if I_CompareCounter launch_alliance_1 = 1
    and I_CompareCounter army4_reinf_allied = 1

    ;;;Army 2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a2u20
    ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20
if I_CompareCounter army6_reinf_allied = 1
    ;;;Army 6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a6u20
if I_CompareCounter army8_reinf_allied = 1
    ;;;Army 8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a8u20
if I_CompareCounter army10_reinf_allied = 1
     ;;;Army 10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a10u20
if I_CompareCounter army12_reinf_allied = 1
    ;;;Army 12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a12u20
if I_CompareCounter army14_reinf_allied = 1
    ;;;Army 14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a14u20
if I_CompareCounter army16_reinf_allied = 1
    ;;;Army 16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a16u20
end_if
end_if
end_if
end_if
end_if
end_if
end_if
battle_wait 0.5
ai_active_set on
set_counter apply_strategy 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter relaunch_movement = 1

    ai_active_set on
    battle_wait 0.5
    set_counter army3_moving 0
    set_counter army4_moving 0
    set_counter army5_moving 0
    set_counter army6_moving 0
    set_counter army7_moving 0
    set_counter army8_moving 0
    set_counter army9_moving 0
    set_counter army10_moving 0
    set_counter army11_moving 0
    set_counter army12_moving 0
    set_counter army13_moving 0
    set_counter army14_moving 0
    set_counter army15_moving 0
    set_counter army16_moving 0

    battle_wait 5
    set_counter relaunch_movement 0
end_monitor

;;;;;;; Attacking

monitor_conditions I_BattleStarted
    and I_CompareCounter att_alliance_ready = 1
    and ! I_BattlePlayerArmyIsAttacker
 ;    inc_counter reinf_check_interval 1
 if I_CompareCounter army3_reinf_allied = 1

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 1
    and I_UnitEnemyUnitInRadius a3u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army3_moving 0
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 1
    and ! I_UnitEnemyUnitInRadius a3u1 160
    and I_UnitDistanceFromUnit a1u1 a3u1 > 150
    and I_IsUnitIdle a3u1

    set_counter army3_reinf_late 1
    battle_wait 1
    set_counter army3_moving 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_moving = 0
    and ! I_UnitEnemyUnitInRadius a3u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    set_counter army3_run 1
    set_counter army3_moving 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 1000

    set_counter army3_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 750

    set_counter army3_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 500

    set_counter army3_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 300

    set_counter army3_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a3u1 a1u1 < 200

    set_counter army3_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a3u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army3

    set_counter army3_run 1
    battle_wait 0.5
    set_counter army3_moving 1
    set_counter army3_reinf_late 0
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 100

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitKilled a3u1 > 60

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitGroupKilled army3 > 50

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a3u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army3 a1u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a3u1 < 250
    and I_IsUnitIdle a3u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a3u1 < 250
    and I_IsUnitUnderFire a3u1

    set_counter army3_reinf_allied 0
    unit_group_order_halt army3
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army3_reinf_allied = 1
    and I_CompareCounter army3_run = 1

;    unit_group_order_halt army3
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army3 a1u1 run
    battle_wait 0.5
    set_counter army3_run 0
    end_if

end_if

if I_CompareCounter army5_reinf_allied = 1

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 1
    and I_UnitEnemyUnitInRadius a5u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army5_moving 0
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 1
    and ! I_UnitEnemyUnitInRadius a5u1 160
    and I_UnitDistanceFromUnit a1u1 a5u1 > 150
    and I_IsUnitIdle a5u1

    set_counter army5_reinf_late 1
    battle_wait 1
    set_counter army5_moving 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_moving = 0
    and ! I_UnitEnemyUnitInRadius a5u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    set_counter army5_run 1
    set_counter army5_moving 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 1000

    set_counter army5_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 750

    set_counter army5_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 500

    set_counter army5_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 300

    set_counter army5_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a5u1 a1u1 < 200

    set_counter army5_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a5u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army5

    set_counter army5_run 1
    battle_wait 0.5
    set_counter army5_moving 1
    set_counter army5_reinf_late 0
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 100

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitKilled a5u1 > 60

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitGroupKilled army5 > 50

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a5u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army5 a1u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a5u1 < 250
    and I_IsUnitIdle a5u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a5u1 < 250
    and I_IsUnitUnderFire a5u1

    set_counter army5_reinf_allied 0
    unit_group_order_halt army5
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army5_reinf_allied = 1
    and I_CompareCounter army5_run = 1

;    unit_group_order_halt army5
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army5 a1u1 run
    battle_wait 0.5
    set_counter army5_run 0
    end_if

end_if

if I_CompareCounter army7_reinf_allied = 1

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 1
    and I_UnitEnemyUnitInRadius a7u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army7_moving 0
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 1
    and ! I_UnitEnemyUnitInRadius a7u1 160
    and I_UnitDistanceFromUnit a1u1 a7u1 > 150
    and I_IsUnitIdle a7u1

    set_counter army7_reinf_late 1
    battle_wait 1
    set_counter army7_moving 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_moving = 0
    and ! I_UnitEnemyUnitInRadius a7u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    set_counter army7_run 1
    set_counter army7_moving 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 1000

    set_counter army7_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 750

    set_counter army7_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 500

    set_counter army7_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 300

    set_counter army7_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a7u1 a1u1 < 200

    set_counter army7_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a7u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army7

    set_counter army7_run 1
    battle_wait 0.5
    set_counter army7_moving 1
    set_counter army7_reinf_late 0
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 100

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitKilled a7u1 > 60

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitGroupKilled army7 > 50

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a7u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army7 a1u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a7u1 < 250
    and I_IsUnitIdle a7u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a7u1 < 250
    and I_IsUnitUnderFire a7u1

    set_counter army7_reinf_allied 0
    unit_group_order_halt army7
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army7_reinf_allied = 1
    and I_CompareCounter army7_run = 1

;    unit_group_order_halt army7
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army7 a1u1 run
    battle_wait 0.5
    set_counter army7_run 0
    end_if

end_if

if I_CompareCounter army9_reinf_allied = 1

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 1
    and I_UnitEnemyUnitInRadius a9u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army9_moving 0
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 1
    and ! I_UnitEnemyUnitInRadius a9u1 160
    and I_UnitDistanceFromUnit a1u1 a9u1 > 150
    and I_IsUnitIdle a9u1

    set_counter army9_reinf_late 1
    battle_wait 1
    set_counter army9_moving 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_moving = 0
    and ! I_UnitEnemyUnitInRadius a9u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    set_counter army9_run 1
    set_counter army9_moving 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 1000

    set_counter army9_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 750

    set_counter army9_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 500

    set_counter army9_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 300

    set_counter army9_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a9u1 a1u1 < 200

    set_counter army9_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a9u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army9

    set_counter army9_run 1
    battle_wait 0.5
    set_counter army9_moving 1
    set_counter army9_reinf_late 0
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 100

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitKilled a9u1 > 60

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitGroupKilled army9 > 50

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a9u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army9 a1u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a9u1 < 250
    and I_IsUnitIdle a9u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a9u1 < 250
    and I_IsUnitUnderFire a9u1

    set_counter army9_reinf_allied 0
    unit_group_order_halt army9
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army9_reinf_allied = 1
    and I_CompareCounter army9_run = 1

;    unit_group_order_halt army9
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army9 a1u1 run
    battle_wait 0.5
    set_counter army9_run 0
    end_if

end_if

if I_CompareCounter army11_reinf_allied = 1

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 1
    and I_UnitEnemyUnitInRadius a11u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army11_moving 0
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 1
    and ! I_UnitEnemyUnitInRadius a11u1 160
    and I_UnitDistanceFromUnit a1u1 a11u1 > 150
    and I_IsUnitIdle a11u1

    set_counter army11_reinf_late 1
    battle_wait 1
    set_counter army11_moving 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_moving = 0
    and ! I_UnitEnemyUnitInRadius a11u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    set_counter army11_run 1
    set_counter army11_moving 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 1000

    set_counter army11_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 750

    set_counter army11_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 500

    set_counter army11_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 300

    set_counter army11_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a11u1 a1u1 < 200

    set_counter army11_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a11u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army11

    set_counter army11_run 1
    battle_wait 0.5
    set_counter army11_moving 1
    set_counter army11_reinf_late 0
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 100

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitKilled a11u1 > 60

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitGroupKilled army11 > 50

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a11u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army11 a1u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a11u1 < 250
    and I_IsUnitIdle a11u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a11u1 < 250
    and I_IsUnitUnderFire a11u1

    set_counter army11_reinf_allied 0
    unit_group_order_halt army11
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army11_reinf_allied = 1
    and I_CompareCounter army11_run = 1

;    unit_group_order_halt army11
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army11 a1u1 run
    battle_wait 0.5
    set_counter army11_run 0
    end_if

end_if

if I_CompareCounter army13_reinf_allied = 1

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 1
    and I_UnitEnemyUnitInRadius a13u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army13_moving 0
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 1
    and ! I_UnitEnemyUnitInRadius a13u1 160
    and I_UnitDistanceFromUnit a1u1 a13u1 > 150
    and I_IsUnitIdle a13u1

    set_counter army13_reinf_late 1
    battle_wait 1
    set_counter army13_moving 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_moving = 0
    and ! I_UnitEnemyUnitInRadius a13u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    set_counter army13_run 1
    set_counter army13_moving 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 1000

    set_counter army13_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 750

    set_counter army13_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 500

    set_counter army13_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 300

    set_counter army13_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a13u1 a1u1 < 200

    set_counter army13_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a13u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army13

    set_counter army13_run 1
    battle_wait 0.5
    set_counter army13_moving 1
    set_counter army13_reinf_late 0
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 100

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitKilled a13u1 > 60

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitGroupKilled army13 > 50

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a13u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army13 a1u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a13u1 < 250
    and I_IsUnitIdle a13u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a13u1 < 250
    and I_IsUnitUnderFire a13u1

    set_counter army13_reinf_allied 0
    unit_group_order_halt army13
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army13_reinf_allied = 1
    and I_CompareCounter army13_run = 1

;    unit_group_order_halt army13
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army13 a1u1 run
    battle_wait 0.5
    set_counter army13_run 0
    end_if

end_if

if I_CompareCounter army15_reinf_allied = 1

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 1
    and I_UnitEnemyUnitInRadius a15u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army15_moving 0
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 1
    and ! I_UnitEnemyUnitInRadius a15u1 160
    and I_UnitDistanceFromUnit a1u1 a15u1 > 150
    and I_IsUnitIdle a15u1

    set_counter army15_reinf_late 1
    battle_wait 1
    set_counter army15_moving 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_moving = 0
    and ! I_UnitEnemyUnitInRadius a15u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    set_counter army15_run 1
    set_counter army15_moving 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 1000

    set_counter army15_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 750

    set_counter army15_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 500

    set_counter army15_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 300

    set_counter army15_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a15u1 a1u1 < 200

    set_counter army15_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a15u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army1 army15

    set_counter army15_run 1
    battle_wait 0.5
    set_counter army15_moving 1
    set_counter army15_reinf_late 0
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 150
    and I_UnitEnemyUnitInRadius a1u1 100

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 100

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitKilled a15u1 > 60

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a2u1 < 200
    and I_UnitDistanceFromUnit a1u1 a2u1 < 200

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitGroupKilled army15 > 50

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a15u1 a1u1 < 250
    and I_UnitGroupInRangeOfUnit army15 a1u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a15u1 < 250
    and I_IsUnitIdle a15u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_IsUnitRouting a1u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_PercentageUnitKilled a1u1 > 80

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_UnitDistanceFromUnit a1u1 a15u1 < 250
    and I_IsUnitUnderFire a15u1

    set_counter army15_reinf_allied 0
    unit_group_order_halt army15
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army15_reinf_allied = 1
    and I_CompareCounter army15_run = 1

;    unit_group_order_halt army15
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army15 a1u1 run
    battle_wait 0.5
    set_counter army15_run 0
    end_if

end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;; Defending

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_BattlePlayerArmyIsAttacker

;    inc_counter reinf_check_interval 1

if I_CompareCounter army4_reinf_allied = 1

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 1
    and I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army4_moving 0
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and I_UnitDistanceFromUnit a2u1 a4u1 > 150
    and I_IsUnitIdle a4u1

    set_counter army4_reinf_late 1
    battle_wait 1
    set_counter army4_moving 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_moving = 0
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run 1
    set_counter army4_moving 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 1000

    set_counter army4_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 750

    set_counter army4_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 500

    set_counter army4_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300

    set_counter army4_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200

    set_counter army4_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run 1
    battle_wait 0.5
    set_counter army4_moving 1
    set_counter army4_reinf_late 0
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 100

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitKilled a4u1 > 60

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitGroupKilled army4 > 50

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army4 a2u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitIdle a4u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitUnderFire a4u1

    set_counter army4_reinf_allied 0
    unit_group_order_halt army4
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army4_reinf_allied = 1
    and I_CompareCounter army4_run = 1

;    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army4 a2u1 run
    battle_wait 0.5
    set_counter army4_run 0
    end_if

end_if

if I_CompareCounter army6_reinf_allied = 1

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 1
    and I_UnitEnemyUnitInRadius a6u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army6_moving 0
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 1
    and ! I_UnitEnemyUnitInRadius a6u1 160
    and I_UnitDistanceFromUnit a2u1 a6u1 > 150
    and I_IsUnitIdle a6u1

    set_counter army6_reinf_late 1
    battle_wait 1
    set_counter army6_moving 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_moving = 0
    and ! I_UnitEnemyUnitInRadius a6u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    set_counter army6_run 1
    set_counter army6_moving 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 1000

    set_counter army6_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 750

    set_counter army6_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 500

    set_counter army6_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 300

    set_counter army6_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a6u1 a2u1 < 200

    set_counter army6_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a6u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army6

    set_counter army6_run 1
    battle_wait 0.5
    set_counter army6_moving 1
    set_counter army6_reinf_late 0
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 100

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitKilled a6u1 > 60

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitGroupKilled army6 > 50

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a6u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army6 a2u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a6u1 < 250
    and I_IsUnitIdle a6u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a6u1 < 250
    and I_IsUnitUnderFire a6u1

    set_counter army6_reinf_allied 0
    unit_group_order_halt army6
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army6_reinf_allied = 1
    and I_CompareCounter army6_run = 1

;    unit_group_order_halt army6
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army6 a2u1 run
    battle_wait 0.5
    set_counter army6_run 0
    end_if

end_if

if I_CompareCounter army8_reinf_allied = 1

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 1
    and I_UnitEnemyUnitInRadius a8u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army8_moving 0
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 1
    and ! I_UnitEnemyUnitInRadius a8u1 160
    and I_UnitDistanceFromUnit a2u1 a8u1 > 150
    and I_IsUnitIdle a8u1

    set_counter army8_reinf_late 1
    battle_wait 1
    set_counter army8_moving 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_moving = 0
    and ! I_UnitEnemyUnitInRadius a8u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    set_counter army8_run 1
    set_counter army8_moving 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 1000

    set_counter army8_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 750

    set_counter army8_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 500

    set_counter army8_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 300

    set_counter army8_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a8u1 a2u1 < 200

    set_counter army8_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a8u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army8

    set_counter army8_run 1
    battle_wait 0.5
    set_counter army8_moving 1
    set_counter army8_reinf_late 0
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 100

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitKilled a8u1 > 60

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitGroupKilled army8 > 50

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a8u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army8 a2u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a8u1 < 250
    and I_IsUnitIdle a8u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a8u1 < 250
    and I_IsUnitUnderFire a8u1

    set_counter army8_reinf_allied 0
    unit_group_order_halt army8
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army8_reinf_allied = 1
    and I_CompareCounter army8_run = 1

;    unit_group_order_halt army8
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army8 a2u1 run
    battle_wait 0.5
    set_counter army8_run 0
    end_if

end_if

if I_CompareCounter army10_reinf_allied = 1

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 1
    and I_UnitEnemyUnitInRadius a10u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army10_moving 0
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 1
    and ! I_UnitEnemyUnitInRadius a10u1 160
    and I_UnitDistanceFromUnit a2u1 a10u1 > 150
    and I_IsUnitIdle a10u1

    set_counter army10_reinf_late 1
    battle_wait 1
    set_counter army10_moving 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_moving = 0
    and ! I_UnitEnemyUnitInRadius a10u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    set_counter army10_run 1
    set_counter army10_moving 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 1000

    set_counter army10_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 750

    set_counter army10_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 500

    set_counter army10_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 300

    set_counter army10_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a10u1 a2u1 < 200

    set_counter army10_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a10u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army10

    set_counter army10_run 1
    battle_wait 0.5
    set_counter army10_moving 1
    set_counter army10_reinf_late 0
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 100

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitKilled a10u1 > 60

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitGroupKilled army10 > 50

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a10u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army10 a2u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a10u1 < 250
    and I_IsUnitIdle a10u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a10u1 < 250
    and I_IsUnitUnderFire a10u1

    set_counter army10_reinf_allied 0
    unit_group_order_halt army10
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army10_reinf_allied = 1
    and I_CompareCounter army10_run = 1

;    unit_group_order_halt army10
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army10 a2u1 run
    battle_wait 0.5
    set_counter army10_run 0
    end_if

end_if

if I_CompareCounter army12_reinf_allied = 1

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 1
    and I_UnitEnemyUnitInRadius a12u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army12_moving 0
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 1
    and ! I_UnitEnemyUnitInRadius a12u1 160
    and I_UnitDistanceFromUnit a2u1 a12u1 > 150
    and I_IsUnitIdle a12u1

    set_counter army12_reinf_late 1
    battle_wait 1
    set_counter army12_moving 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_moving = 0
    and ! I_UnitEnemyUnitInRadius a12u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    set_counter army12_run 1
    set_counter army12_moving 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 1000

    set_counter army12_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 750

    set_counter army12_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 500

    set_counter army12_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 300

    set_counter army12_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a12u1 a2u1 < 200

    set_counter army12_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a12u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army12

    set_counter army12_run 1
    battle_wait 0.5
    set_counter army12_moving 1
    set_counter army12_reinf_late 0
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 100

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitKilled a12u1 > 60

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitGroupKilled army12 > 50

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a12u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army12 a2u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a12u1 < 250
    and I_IsUnitIdle a12u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a12u1 < 250
    and I_IsUnitUnderFire a12u1

    set_counter army12_reinf_allied 0
    unit_group_order_halt army12
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army12_reinf_allied = 1
    and I_CompareCounter army12_run = 1

;    unit_group_order_halt army12
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army12 a2u1 run
    battle_wait 0.5
    set_counter army12_run 0
    end_if

end_if

if I_CompareCounter army14_reinf_allied = 1

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 1
    and I_UnitEnemyUnitInRadius a14u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army14_moving 0
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 1
    and ! I_UnitEnemyUnitInRadius a14u1 160
    and I_UnitDistanceFromUnit a2u1 a14u1 > 150
    and I_IsUnitIdle a14u1

    set_counter army14_reinf_late 1
    battle_wait 1
    set_counter army14_moving 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_moving = 0
    and ! I_UnitEnemyUnitInRadius a14u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    set_counter army14_run 1
    set_counter army14_moving 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 1000

    set_counter army14_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 750

    set_counter army14_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 500

    set_counter army14_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 300

    set_counter army14_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a14u1 a2u1 < 200

    set_counter army14_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a14u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army14

    set_counter army14_run 1
    battle_wait 0.5
    set_counter army14_moving 1
    set_counter army14_reinf_late 0
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 100

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitKilled a14u1 > 60

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitGroupKilled army14 > 50

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a14u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army14 a2u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a14u1 < 250
    and I_IsUnitIdle a14u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a14u1 < 250
    and I_IsUnitUnderFire a14u1

    set_counter army14_reinf_allied 0
    unit_group_order_halt army14
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army14_reinf_allied = 1
    and I_CompareCounter army14_run = 1

;    unit_group_order_halt army14
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army14 a2u1 run
    battle_wait 0.5
    set_counter army14_run 0
    end_if

end_if

if I_CompareCounter army16_reinf_allied = 1

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 1
    and I_UnitEnemyUnitInRadius a16u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    set_counter army16_moving 0
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 1
    and ! I_UnitEnemyUnitInRadius a16u1 160
    and I_UnitDistanceFromUnit a2u1 a16u1 > 150
    and I_IsUnitIdle a16u1

    set_counter army16_reinf_late 1
    battle_wait 1
    set_counter army16_moving 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_moving = 0
    and ! I_UnitEnemyUnitInRadius a16u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    set_counter army16_run 1
    set_counter army16_moving 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger1 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 1000

    set_counter army16_reinf_late 1
    set_counter distance_trigger1 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger2 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 750

    set_counter army16_reinf_late 1
    set_counter distance_trigger2 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger3 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 500

    set_counter army16_reinf_late 1
    set_counter distance_trigger3 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger4 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 300

    set_counter army16_reinf_late 1
    set_counter distance_trigger4 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter distance_trigger5 = 0
    and I_UnitDistanceFromUnit a16u1 a2u1 < 200

    set_counter army16_reinf_late 1
    set_counter distance_trigger5 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_reinf_late = 1
    and ! I_UnitEnemyUnitInRadius a16u1 160
;    and ! I_UnitGroupInRangeOfUnitGroup army2 army16

    set_counter army16_run 1
    battle_wait 0.5
    set_counter army16_moving 1
    set_counter army16_reinf_late 0
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 150
    and I_UnitEnemyUnitInRadius a2u1 100

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 100

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitKilled a16u1 > 60

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 200
    and I_UnitDistanceFromUnit a2u1 a2u1 < 200

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitGroupKilled army16 > 50

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a16u1 a2u1 < 250
    and I_UnitGroupInRangeOfUnit army16 a2u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a16u1 < 250
    and I_IsUnitIdle a16u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_IsUnitRouting a2u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_PercentageUnitKilled a2u1 > 80

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_UnitDistanceFromUnit a2u1 a16u1 < 250
    and I_IsUnitUnderFire a16u1

    set_counter army16_reinf_allied 0
    unit_group_order_halt army16
    battle_wait 0.5
    set_counter relaunch_movement 1
    end_if

    if I_CompareCounter army16_reinf_allied = 1
    and I_CompareCounter army16_run = 1

;    unit_group_order_halt army16
    battle_wait 0.5
    unit_group_move_to_missile_range_of_unit army16 a2u1 run
    battle_wait 0.5
    set_counter army16_run 0
    end_if

end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;; Defending Siege

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready_siege = 1
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter army4_ready_siege = 1

;    inc_counter reinf_check_interval 1

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 1
    and I_UnitEnemyUnitInRadius a4u1 160

    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    set_counter army4_moving_siege 0
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 1
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and I_UnitDistanceFromUnit a2u1 a4u1 > 150
    and I_IsUnitIdle a4u1

    set_counter army4_run_siege 1
    battle_wait 2
    set_counter army4_moving_siege 1
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_moving_siege = 0
    and ! I_UnitEnemyUnitInRadius a4u1 160
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    set_counter army4_run_siege 1
    set_counter army4_moving_siege 1
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a4u1 a2u1 < 200

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromPosition a4u1 1 1 < 150

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitIdle a4u1

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_UnitDistanceFromUnit a2u1 a4u1 < 250
    and I_IsUnitUnderFire a4u1

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_PercentageUnitGroupKilled army4 > 50

    set_counter army4_ready_siege 0
    unit_group_order_halt army4
    battle_wait 0.5
    ai_active_set on
    end_if

    if I_CompareCounter army4_ready_siege = 1
    and I_CompareCounter army4_run_siege = 1

    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_order_move_formed army4 1 1 run
    set_counter army4_run_siege 0
    end_if

;    if I_CompareCounter reinf_check_interval = 2
;    set_counter reinf_check_interval 0
;    end_if
    battle_wait 5
end_monitor

;;;;;;;;;;;Sally-out, AI defending

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 1

    if I_UnitDistanceFromPosition a4u1 0 850 < 200
    set_counter army4_location 1 ;north
    end_if
    if I_UnitDistanceFromPosition a4u1 0 -850 < 200
    set_counter army4_location 2 ;south
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 0 < 200
    set_counter army4_location 3 ;west
    end_if
    if I_UnitDistanceFromPosition a4u1 850 0 < 200
    set_counter army4_location 4 ;east
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 850 < 200
    set_counter army4_location 5 ;nw
    end_if
    if I_UnitDistanceFromPosition a4u1 850 850 < 200
    set_counter army4_location 6 ;ne
    end_if
    if I_UnitDistanceFromPosition a4u1 -850 850 < 200
    set_counter army4_location 7 ;sw
    end_if
    if I_UnitDistanceFromPosition a4u1 850 -850 < 200
    set_counter army4_location 8 ;se
    end_if

    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    set_counter	path_s 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    set_counter	path_sw 4
    set_counter	path_s 5
    end_if
    end_if
    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_ne 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    set_counter	path_n 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    set_counter	path_nw 4
    set_counter	path_n 5
    end_if
    end_if

    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_se 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    set_counter	path_e 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    set_counter	path_ne 4
    set_counter	path_e 5
    end_if
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_sw 2
    set_counter	path_s 3
    end_if
    end_if

    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    set_counter	path_w 3
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    set_counter	path_sw 4
    set_counter	path_w 5
    end_if
    end_if
    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_ne 2
    set_counter	path_n 3
    end_if
    end_if

    if I_CompareCounter army4_location = 5 ;nw
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    end_if
    end_if

    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    end_if
    end_if
    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_sw 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 5
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_ne 2
    set_counter	path_e 3
    end_if
    end_if

    if I_CompareCounter army4_location = 6 ;ne
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    set_counter	path_nw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_n 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_n 1
    end_if
    end_if

    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    end_if
    end_if
    if I_CompareCounter army4_location = 6
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_s 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_se 2
    set_counter	path_s 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7 ;sw
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    set_counter	path_nw 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_e 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_se 2
    set_counter	path_e 3
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    end_if
    end_if
    if I_CompareCounter army4_location = 7
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_w 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_w 1
    end_if
    end_if

    if I_CompareCounter army4_location = 8 ;se
    and I_CompareCounter army_south = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_west = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_s 1
    set_counter	path_w 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_s 1
    set_counter	path_sw 2
    set_counter	path_w 3
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_north = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    set_counter	path_n 2
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    set_counter	path_ne 2
    set_counter	path_n 3
    end_if
    end_if
    if I_CompareCounter army4_location = 8
    and I_CompareCounter army_east = 1
    if I_BattleSettlementFortificationLevel < 2
    set_counter	path_e 1
    end_if
    if I_BattleSettlementFortificationLevel > 1
    set_counter	path_e 1
    end_if
    end_if

    if I_CompareCounter army4_location = 1
    and I_CompareCounter army_north = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_location = 2
    and I_CompareCounter army_south = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_location = 3
    and I_CompareCounter army_west = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if

    if I_CompareCounter army4_location = 4
    and I_CompareCounter army_east = 1
    set_counter	army4_ready_sally 3
    set_counter	army4_ready 0
    end_if
    if I_CompareCounter army4_ready_sally = 1
    unit_group_order_halt army4
    battle_wait 0.5
    unit_group_order_change_group_formation army4 ai_infantry_protecting
;	battle_wait 45
    battle_wait 20
    if I_CompareCounter army4_ready_sally = 1
    and I_BattleIsSallyOutBattle
    battle_wait 25
    end_if
    if I_CompareCounter army4_ready_sally = 1
    and I_BattleIsSallyOutBattle
    set_counter army4_ready_sally 2
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter label_army4 = 1

    label_unit 1 1 0 a4u1
    label_unit 1 1 1 a4u2
    label_unit 1 1 2 a4u3
    label_unit 1 1 3 a4u4
    label_unit 1 1 4 a4u5
    label_unit 1 1 5 a4u6
    label_unit 1 1 6 a4u7
    label_unit 1 1 7 a4u8
    label_unit 1 1 8 a4u9
    label_unit 1 1 9 a4u10
    label_unit 1 1 10 a4u11
    label_unit 1 1 11 a4u12
    label_unit 1 1 12 a4u13
    label_unit 1 1 13 a4u14
    label_unit 1 1 14 a4u15
    label_unit 1 1 15 a4u16
    label_unit 1 1 16 a4u17
    label_unit 1 1 17 a4u18
    label_unit 1 1 18 a4u19
    label_unit 1 1 19 a4u20

;    unit_group_order_halt army4
    set_counter label_army4 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter army4_moving_s = 1
    and I_UnitEnemyUnitInRadius a4u1 130
    and ! I_UnitGroupInRangeOfUnitGroup army2 army4

    unit_group_order_halt army4
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on

    set_counter army4_moving_s 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_n = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 0 700 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 500 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 500 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 700 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 700 < 100
    set_counter path_n 0
    if I_CompareCounter path_nw > 1
    set_counter path_nw 1
    end_if
    if I_CompareCounter path_ne > 1
    set_counter path_ne 1
    end_if
    if I_CompareCounter path_nw = 0
    and I_CompareCounter path_ne = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 500 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 500 < 100
    set_counter path_n 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 30
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_s = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 0 -700 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -500 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 0 -500 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -700 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 -700 < 100
    set_counter path_s 0
    if I_CompareCounter path_sw > 1
    set_counter path_sw 1
    end_if
    if I_CompareCounter path_se > 1
    set_counter path_se 1
    end_if
    if I_CompareCounter path_sw = 0
    and I_CompareCounter path_se = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 0 -500 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 0 -500 < 100
    set_counter path_s 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_w = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 0 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -500 0 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -500 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 0 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 0 < 100
    set_counter path_w 0
    if I_CompareCounter path_nw > 1
    set_counter path_nw 1
    end_if
    if I_CompareCounter path_sw > 1
    set_counter path_sw 1
    end_if
    if I_CompareCounter path_nw = 0
    and I_CompareCounter path_sw = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 -500 0 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -500 0 < 100
    set_counter path_w 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_e = 1
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 0 > 100
    and I_BattleSettlementFortificationLevel > 2
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 500 0 > 100
    and I_BattleSettlementFortificationLevel < 3
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 500 0 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 0 < 100
    and I_BattleSettlementFortificationLevel > 2
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 0 < 100
    set_counter path_e 0
    if I_CompareCounter path_ne > 1
    set_counter path_ne 1
    end_if
    if I_CompareCounter path_se > 1
    set_counter path_se 1
    end_if
    if I_CompareCounter path_ne = 0
    and I_CompareCounter path_se = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    if I_UnitGroupDistanceFromPosition army4 500 0 < 100
    and I_BattleSettlementFortificationLevel < 3
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 500 0 < 100
    set_counter path_e 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_nw = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 700 < 100
    set_counter path_nw 0
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_n = 0
    and I_CompareCounter path_w = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_ne = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 700 < 100
    set_counter path_ne 0
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_n > 1
    set_counter path_n 1
    end_if
    if I_CompareCounter path_e = 0
    and I_CompareCounter path_n = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_sw = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 -700 -700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 -700 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 -700 -700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 -700 -700 < 100
    set_counter path_sw 0
    if I_CompareCounter path_w > 1
    set_counter path_w 1
    end_if
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_w = 0
    and I_CompareCounter path_s = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter path_se = 1
    and I_BattleSettlementFortificationLevel > 2
    and ! I_UnitEnemyUnitInRadius a4u1 130

    if I_UnitGroupDistanceFromPosition army4 700 -700 > 100
    set_counter label_army4 1
    battle_wait 0.5
    unit_group_order_move_formed army4 700 -700 run
    set_counter army4_moving_s 1
    end_if

    if I_UnitGroupDistanceFromPosition army4 700 -700 < 100
    unit_group_order_halt army4
    battle_wait 0.5
    if I_UnitGroupDistanceFromPosition army4 700 -700 < 100
    set_counter path_se 0
    if I_CompareCounter path_s > 1
    set_counter path_s 1
    end_if
    if I_CompareCounter path_e > 1
    set_counter path_e 1
    end_if
    if I_CompareCounter path_s = 0
    and I_CompareCounter path_e = 0
    set_counter army4_ready_sally 3
    set_counter army4_ready 0
    end_if
    end_if
    end_if

    battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 3

    set_counter army4_ready_sally 0
    unit_group_order_halt army4
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_IsUnitRouting a4u1

    set_counter army4_ready_sally 3
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and I_PercentageUnitKilled a4u1 > 80

    set_counter army4_ready_sally 3
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2

    if I_IsUnitGroupIdle army4
    inc_counter army4_idle_r 1
    end_if

    if ! I_IsUnitGroupIdle army4
    set_counter army4_idle_r 0
    end_if

    if I_CompareCounter army4_idle_r > 12
    set_counter army4_ready_sally 0
    end_if
    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_n = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_n = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_n 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_s = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_s = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_s 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_w = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_w = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_w 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_e = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_e = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_e 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_nw = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_nw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_nw 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_ne = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_ne = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_ne 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_sw = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_sw = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_sw 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter army4_ready_sally = 2
    and ! I_UnitEnemyUnitInRadius a4u1 130
    and I_CompareCounter path_se = 1

    set_counter check_timer 1
;	battle_wait 600
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 1
    set_counter check_timer 2
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 2
    set_counter check_timer 3
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 3
    set_counter check_timer 4
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 4
    set_counter check_timer 5
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 5
    set_counter check_timer 6
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 6
    set_counter check_timer 7
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 7
    set_counter check_timer 8
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 8
    set_counter check_timer 9
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 9
    set_counter check_timer 10
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 10
    set_counter check_timer 11
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 11
    set_counter check_timer 12
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 12
    set_counter check_timer 13
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 13
    set_counter check_timer 14
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 14
    set_counter check_timer 15
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 15
    set_counter check_timer 16
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 16
    set_counter check_timer 17
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 17
    set_counter check_timer 18
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 18
    set_counter check_timer 19
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 19
    set_counter check_timer 20
    battle_wait 30
    if I_CompareCounter path_se = 1
    and I_CompareCounter army4_ready_sally = 2
    and I_CompareCounter check_timer = 20
    set_counter path_se 0
    set_counter sally_reinf 0
    set_counter army4_ready_sally 0
    set_counter label_army4 1
;    battle_wait 0.5
 ;   ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

;################## Germanicu5 Integrated Stakes script ###########################

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAttacking
    and ! I_ConflictType SuccessfulAmbush
    and ! I_BattleIsSiegeBattle
    and ! I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel < 3
    and I_IsBattleSettlementCastle
    and I_BattlePlayerAllianceOddsAgainst < 2.0
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel > 2
    and I_IsBattleSettlementCastle
    and I_BattlePlayerAllianceOddsAgainst < 2.5
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 4
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel < 3
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerAllianceOddsAgainst < 1.7
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
    and I_BattleIsSallyOutBattle
    and I_BattleSettlementFortificationLevel > 2
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines < 3
    and I_BattlePlayerAllianceOddsAgainst < 2.2
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_UnitEnemyUnitInRadius a2u1 150

    set_counter stakes_on 1
    set_counter label_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter stakes_on = 1
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    and I_UnitEnemyUnitInRadius a2u1 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    and I_UnitEnemyUnitInRadius a2u2 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    and I_UnitEnemyUnitInRadius a2u3 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    and I_UnitEnemyUnitInRadius a2u4 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    and I_UnitEnemyUnitInRadius a2u5 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    and I_UnitEnemyUnitInRadius a2u6 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    and I_UnitEnemyUnitInRadius a2u7 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    and I_UnitEnemyUnitInRadius a2u8 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    and I_UnitEnemyUnitInRadius a2u9 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    and I_UnitEnemyUnitInRadius a2u10 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    and I_UnitEnemyUnitInRadius a2u11 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    and I_UnitEnemyUnitInRadius a2u12 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    and I_UnitEnemyUnitInRadius a2u13 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    and I_UnitEnemyUnitInRadius a2u14 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    and I_UnitEnemyUnitInRadius a2u15 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    and I_UnitEnemyUnitInRadius a2u16 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    and I_UnitEnemyUnitInRadius a2u17 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    and I_UnitEnemyUnitInRadius a2u18 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    and I_UnitEnemyUnitInRadius a2u19 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    and I_UnitEnemyUnitInRadius a2u20 60
    and I_CompareCounter stakes_on != 2
    set_counter stakes_on 2
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

if I_CompareCounter stakes_on = 2
;    ai_active_set off
    unit_group_order_halt army2

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    unit_deploy_stakes a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    unit_deploy_stakes a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    unit_deploy_stakes a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    unit_deploy_stakes a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    unit_deploy_stakes a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    unit_deploy_stakes a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    unit_deploy_stakes a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    unit_deploy_stakes a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    unit_deploy_stakes a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    unit_deploy_stakes a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    unit_deploy_stakes a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    unit_deploy_stakes a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    unit_deploy_stakes a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    unit_deploy_stakes a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    unit_deploy_stakes a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    unit_deploy_stakes a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    unit_deploy_stakes a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    unit_deploy_stakes a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    unit_deploy_stakes a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    unit_deploy_stakes a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter stakes_on 0
end_if
    battle_wait 1.5
end_monitor

monitor_event BattleDeploymentPhaseCommenced FactionIsLocal
    and I_BattlePlayerArmyIsAttacker
    and I_BattleIsSiegeBattle
    and I_CompareCounter panel_check = 1
    and I_CompareCounter label_ready = 1
    and I_BattlePlayerArmyNumberOfUnitCategory cavalry > 0
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry = 0
    and I_BattleEnemyArmyNumberOfAttribute stakes > 0

    if I_CompareCounter enemy_unit_count > 0
    unit_deploy_stakes a2u1

    if I_CompareCounter enemy_unit_count > 1
    unit_deploy_stakes a2u2

    if I_CompareCounter enemy_unit_count > 2
    unit_deploy_stakes a2u3

    if I_CompareCounter enemy_unit_count > 3
    unit_deploy_stakes a2u4

    if I_CompareCounter enemy_unit_count > 4
    unit_deploy_stakes a2u5

    if I_CompareCounter enemy_unit_count > 5
    unit_deploy_stakes a2u6

    if I_CompareCounter enemy_unit_count > 6
    unit_deploy_stakes a2u7

    if I_CompareCounter enemy_unit_count > 7
    unit_deploy_stakes a2u8

    if I_CompareCounter enemy_unit_count > 8
    unit_deploy_stakes a2u9

    if I_CompareCounter enemy_unit_count > 9
    unit_deploy_stakes a2u10

    if I_CompareCounter enemy_unit_count > 10
    unit_deploy_stakes a2u11

    if I_CompareCounter enemy_unit_count > 11
    unit_deploy_stakes a2u12

    if I_CompareCounter enemy_unit_count > 12
    unit_deploy_stakes a2u13

    if I_CompareCounter enemy_unit_count > 13
    unit_deploy_stakes a2u14

    if I_CompareCounter enemy_unit_count > 14
    unit_deploy_stakes a2u15

    if I_CompareCounter enemy_unit_count > 15
    unit_deploy_stakes a2u16

    if I_CompareCounter enemy_unit_count > 16
    unit_deploy_stakes a2u17

    if I_CompareCounter enemy_unit_count > 17
    unit_deploy_stakes a2u18

    if I_CompareCounter enemy_unit_count > 18
    unit_deploy_stakes a2u19

    if I_CompareCounter enemy_unit_count = 20
    unit_deploy_stakes a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter label_ready 0
end_monitor

;;;;;;;;HA fix;;;;;;;;;;;;

;monitor_conditions I_BattleStarted
;    and I_CompareCounter ha_fix = 1
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    and ! I_BattleAiAttacking
;    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
;    and I_UnitEnemyUnitInRadius a2u1 250
;    ai_gta_plan_set 1 ATTACK_ALL
;    set_counter ha_fix 0
;    set_counter ob_defense_launch 0
;    set_counter ob_defend 4
;end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_CompareCounter open_battle = 1
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAttacking
;	and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60

    ai_gta_plan_set 0 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ha_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ha_fix = 1
    and I_BattleIsRiverBattle
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_BattleAiAssaultingCrossing
;	and I_BattleEnemyArmyPercentageOfUnitCategory cavalry >= 60

    ai_gta_add_objective 0 ASSAULT_CROSSING 999

;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 0 0 a1u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 0 0 a1u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 0 0 a1u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 0 0 a1u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 0 0 a1u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 0 0 a1u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 0 0 a1u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 0 0 a1u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 0 0 a1u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 0 0 a1u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 0 0 a1u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 0 0 a1u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 0 0 a1u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 0 0 a1u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 0 0 a1u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 0 0 a1u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 0 0 a1u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 0 0 a1u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 0 0 a1u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    battle_wait 0.5
    ai_active_set on

    set_counter ha_fix 0
end_monitor

;;;;;;;;Elephant;;;;;;;;;;;;

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and ! I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and ! I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off
    unit_group_order_halt army1

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    unit_group_order_halt army1
    battle_wait 0.5
    unit_group_order_change_group_formation army1 ai_wall_assault
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSiegeBattle
    and I_BattleIsFortBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999
;    ai_active_set off

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 1
    set_counter elephant_fix 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 1
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 1
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate != 2
    set_counter elephant_gate 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 3
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier2 1
    set_counter rally_walls 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter del_objective = 1
    and I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    set_counter del_objective 2
    battle_wait 15
    if I_CompareCounter del_objective = 2
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter del_objective 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier2 = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSiegeBattle
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 1
    set_counter elephant_gate_tier2 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 2
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls = 2
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring != 2
    set_counter second_ring 0
    set_counter del_objective 1
    end_if
    set_counter elephant_fix_check 1
    set_counter rally_walls 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 1
    set_counter elephant_fix_check 2
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 2
    set_counter elephant_fix_check 3
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 3
    set_counter elephant_fix_check 4
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 4
    set_counter elephant_fix_check 5
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 5
    set_counter elephant_fix_check 6
    battle_wait 30
    if I_CompareCounter rally_walls = 4
    and I_CompareCounter elephant_fix_check = 6
    set_counter elephant_gate_tier3 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier3 = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2

    ai_gta_add_objective 0 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a1u1 = horde
    and ! I_UnitStatus a1u1 running_amok
    and ! I_UnitDestroyed a1u1
    and ! I_UnitStatus a1u1 left_battle
    and ! I_IsUnitRouting a1u1
    ai_gta_add_unit_label 0 0 a1u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a1u2 = horde
    and ! I_UnitStatus a1u2 running_amok
    and ! I_UnitDestroyed a1u2
    and ! I_UnitStatus a1u2 left_battle
    and ! I_IsUnitRouting a1u2
    ai_gta_add_unit_label 0 0 a1u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a1u3 = horde
    and ! I_UnitStatus a1u3 running_amok
    and ! I_UnitDestroyed a1u3
    and ! I_UnitStatus a1u3 left_battle
    and ! I_IsUnitRouting a1u3
    ai_gta_add_unit_label 0 0 a1u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a1u4 = horde
    and ! I_UnitStatus a1u4 running_amok
    and ! I_UnitDestroyed a1u4
    and ! I_UnitStatus a1u4 left_battle
    and ! I_IsUnitRouting a1u4
    ai_gta_add_unit_label 0 0 a1u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a1u5 = horde
    and ! I_UnitStatus a1u5 running_amok
    and ! I_UnitDestroyed a1u5
    and ! I_UnitStatus a1u5 left_battle
    and ! I_IsUnitRouting a1u5
    ai_gta_add_unit_label 0 0 a1u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a1u6 = horde
    and ! I_UnitStatus a1u6 running_amok
    and ! I_UnitDestroyed a1u6
    and ! I_UnitStatus a1u6 left_battle
    and ! I_IsUnitRouting a1u6
    ai_gta_add_unit_label 0 0 a1u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a1u7 = horde
    and ! I_UnitStatus a1u7 running_amok
    and ! I_UnitDestroyed a1u7
    and ! I_UnitStatus a1u7 left_battle
    and ! I_IsUnitRouting a1u7
    ai_gta_add_unit_label 0 0 a1u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a1u8 = horde
    and ! I_UnitStatus a1u8 running_amok
    and ! I_UnitDestroyed a1u8
    and ! I_UnitStatus a1u8 left_battle
    and ! I_IsUnitRouting a1u8
    ai_gta_add_unit_label 0 0 a1u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a1u9 = horde
    and ! I_UnitStatus a1u9 running_amok
    and ! I_UnitDestroyed a1u9
    and ! I_UnitStatus a1u9 left_battle
    and ! I_IsUnitRouting a1u9
    ai_gta_add_unit_label 0 0 a1u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a1u10 = horde
    and ! I_UnitStatus a1u10 running_amok
    and ! I_UnitDestroyed a1u10
    and ! I_UnitStatus a1u10 left_battle
    and ! I_IsUnitRouting a1u10
    ai_gta_add_unit_label 0 0 a1u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a1u11 = horde
    and ! I_UnitStatus a1u11 running_amok
    and ! I_UnitDestroyed a1u11
    and ! I_UnitStatus a1u11 left_battle
    and ! I_IsUnitRouting a1u11
    ai_gta_add_unit_label 0 0 a1u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a1u12 = horde
    and ! I_UnitStatus a1u12 running_amok
    and ! I_UnitDestroyed a1u12
    and ! I_UnitStatus a1u12 left_battle
    and ! I_IsUnitRouting a1u12
    ai_gta_add_unit_label 0 0 a1u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a1u13 = horde
    and ! I_UnitStatus a1u13 running_amok
    and ! I_UnitDestroyed a1u13
    and ! I_UnitStatus a1u13 left_battle
    and ! I_IsUnitRouting a1u13
    ai_gta_add_unit_label 0 0 a1u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a1u14 = horde
    and ! I_UnitStatus a1u14 running_amok
    and ! I_UnitDestroyed a1u14
    and ! I_UnitStatus a1u14 left_battle
    and ! I_IsUnitRouting a1u14
    ai_gta_add_unit_label 0 0 a1u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a1u15 = horde
    and ! I_UnitStatus a1u15 running_amok
    and ! I_UnitDestroyed a1u15
    and ! I_UnitStatus a1u15 left_battle
    and ! I_IsUnitRouting a1u15
    ai_gta_add_unit_label 0 0 a1u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a1u16 = horde
    and ! I_UnitStatus a1u16 running_amok
    and ! I_UnitDestroyed a1u16
    and ! I_UnitStatus a1u16 left_battle
    and ! I_IsUnitRouting a1u16
    ai_gta_add_unit_label 0 0 a1u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a1u17 = horde
    and ! I_UnitStatus a1u17 running_amok
    and ! I_UnitDestroyed a1u17
    and ! I_UnitStatus a1u17 left_battle
    and ! I_IsUnitRouting a1u17
    ai_gta_add_unit_label 0 0 a1u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a1u18 = horde
    and ! I_UnitStatus a1u18 running_amok
    and ! I_UnitDestroyed a1u18
    and ! I_UnitStatus a1u18 left_battle
    and ! I_IsUnitRouting a1u18
    ai_gta_add_unit_label 0 0 a1u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a1u19 = horde
    and ! I_UnitStatus a1u19 running_amok
    and ! I_UnitDestroyed a1u19
    and ! I_UnitStatus a1u19 left_battle
    and ! I_IsUnitRouting a1u19
    ai_gta_add_unit_label 0 0 a1u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a1u20 = horde
    and ! I_UnitStatus a1u20 running_amok
    and ! I_UnitDestroyed a1u20
    and ! I_UnitStatus a1u20 left_battle
    and ! I_IsUnitRouting a1u20
    ai_gta_add_unit_label 0 0 a1u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter third_ring 1
    set_counter elephant_gate_tier3 0
end_monitor

;;;;;;;;Sally-Out Elephant;;;;;;;;;;;;

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

;	set_counter sally-out_fix 1
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter elephant_gate_s 1
    set_counter elephant_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_fix = 1
    and I_BattleIsSallyOutBattle
    and I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

;	set_counter sally-out_fix 1
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter elephant_gate_s 1
    set_counter elephant_fix 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 1
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate_s != 2
    set_counter elephant_gate_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier2s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 1
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter elephant_gate_s != 2
    set_counter elephant_gate_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 3
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 3
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier2s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter del_objective_s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    set_counter del_objective_s 2
    battle_wait 15
    if I_CompareCounter del_objective_s = 2
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter del_objective_s 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier2s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter second_ring_s 1
    set_counter elephant_gate_tier2s 0
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 2
    and BattleIsMeleeAttack
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring_s != 2
    set_counter second_ring_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier3s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter rally_walls_s = 2
    and ! BattlePlayerUnitOnWalls
    and ! BattleEnemyUnitOnWalls

    if I_CompareCounter second_ring_s != 2
    set_counter second_ring_s 0
    set_counter del_objective_s 1
    end_if
    set_counter elephant_fix_check_sally 1
    set_counter rally_walls_s 4
;	battle_wait 180
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 1
    set_counter elephant_fix_check_sally 2
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 2
    set_counter elephant_fix_check_sally 3
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 3
    set_counter elephant_fix_check_sally 4
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 4
    set_counter elephant_fix_check_sally 5
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 5
    set_counter elephant_fix_check_sally 6
    battle_wait 30
    if I_CompareCounter rally_walls_s = 4
    and I_CompareCounter elephant_fix_check_sally = 6
    set_counter elephant_gate_tier3s 1
    set_counter rally_walls_s 0
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter elephant_gate_tier3s = 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitFormation a2u1 = horde
    and ! I_UnitStatus a2u1 running_amok
    and ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    and ! I_IsUnitRouting a2u1
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitFormation a2u2 = horde
    and ! I_UnitStatus a2u2 running_amok
    and ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    and ! I_IsUnitRouting a2u2
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitFormation a2u3 = horde
    and ! I_UnitStatus a2u3 running_amok
    and ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    and ! I_IsUnitRouting a2u3
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitFormation a2u4 = horde
    and ! I_UnitStatus a2u4 running_amok
    and ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    and ! I_IsUnitRouting a2u4
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitFormation a2u5 = horde
    and ! I_UnitStatus a2u5 running_amok
    and ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    and ! I_IsUnitRouting a2u5
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitFormation a2u6 = horde
    and ! I_UnitStatus a2u6 running_amok
    and ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    and ! I_IsUnitRouting a2u6
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitFormation a2u7 = horde
    and ! I_UnitStatus a2u7 running_amok
    and ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    and ! I_IsUnitRouting a2u7
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitFormation a2u8 = horde
    and ! I_UnitStatus a2u8 running_amok
    and ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    and ! I_IsUnitRouting a2u8
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitFormation a2u9 = horde
    and ! I_UnitStatus a2u9 running_amok
    and ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    and ! I_IsUnitRouting a2u9
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitFormation a2u10 = horde
    and ! I_UnitStatus a2u10 running_amok
    and ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    and ! I_IsUnitRouting a2u10
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitFormation a2u11 = horde
    and ! I_UnitStatus a2u11 running_amok
    and ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    and ! I_IsUnitRouting a2u11
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitFormation a2u12 = horde
    and ! I_UnitStatus a2u12 running_amok
    and ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    and ! I_IsUnitRouting a2u12
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitFormation a2u13 = horde
    and ! I_UnitStatus a2u13 running_amok
    and ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    and ! I_IsUnitRouting a2u13
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitFormation a2u14 = horde
    and ! I_UnitStatus a2u14 running_amok
    and ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    and ! I_IsUnitRouting a2u14
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitFormation a2u15 = horde
    and ! I_UnitStatus a2u15 running_amok
    and ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    and ! I_IsUnitRouting a2u15
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitFormation a2u16 = horde
    and ! I_UnitStatus a2u16 running_amok
    and ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    and ! I_IsUnitRouting a2u16
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitFormation a2u17 = horde
    and ! I_UnitStatus a2u17 running_amok
    and ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    and ! I_IsUnitRouting a2u17
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitFormation a2u18 = horde
    and ! I_UnitStatus a2u18 running_amok
    and ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    and ! I_IsUnitRouting a2u18
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitFormation a2u19 = horde
    and ! I_UnitStatus a2u19 running_amok
    and ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    and ! I_IsUnitRouting a2u19
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitFormation a2u20 = horde
    and ! I_UnitStatus a2u20 running_amok
    and ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    and ! I_IsUnitRouting a2u20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    ai_active_set on
    set_counter third_ring_s 1
    set_counter elephant_gate_tier3s 0
end_monitor

;;;;;;;Elephants Gate and Walls
monitor_event BattleBattleGatesDestroyedByEngine TrueCondition ;wtf
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    set_counter elephant_gate_s 0
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring_s 0
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

monitor_event BattleWallsCaptured TrueCondition
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    set_counter elephant_gate 0
    set_counter rally_walls 1
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring 0
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    set_counter elephant_gate_s 0
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter second_ring_s 0
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

monitor_event BattleWallsBreachedByEngine TrueCondition
    and I_CompareCounter panel_check = 1

if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate = 1
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate 2
    set_counter rally_walls 0
    end_if

    if I_CompareCounter second_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 0
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter second_ring 2
    set_counter rally_walls 2
    end_if

    if I_CompareCounter third_ring = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring 0
    set_counter del_objective 1
    end_if

end_if
if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfMountClass elephant > 0

    if I_CompareCounter elephant_gate_s = 1
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter elephant_gate_s 2
    set_counter rally_walls_s 1
    end_if

    if I_CompareCounter second_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter second_ring_s 2
    set_counter rally_walls_s 2
    end_if

    if I_CompareCounter third_ring_s = 1
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel > 2
    set_counter third_ring_s 0
    set_counter del_objective_s 1
    end_if

end_if
end_monitor

;;;;;;;Sally Out Assault
monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel < 3
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 2.0

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel > 2
    and I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 3
    and I_BattlePlayerAllianceOddsAgainst > 2.5

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel < 3
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 1.7

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleSettlementFortificationLevel > 2
    and ! I_IsBattleSettlementCastle
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 2.2

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally-out_fix = 1
    and I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_BattleEnemyArmyNumberOfSpecialAbility drop_engines > 2
    and I_BattlePlayerAllianceOddsAgainst > 1.8

    set_counter kill_sally 1
    ai_gta_plan_set 1 ATTACK_SETTLEMENT
    ai_active_set on
    if I_BattleEnemyArmyNumberOfMountClass elephant > 0
    set_counter elephant_fix 1
    battle_wait 1
    end_if
    set_counter army2_sally 1
    if I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
    set_counter sally-out_fix 0
end_monitor

;;;;;;;Sally Out Defense

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 1
    and I_CompareCounter kill_sally = 0
;	and ! I_BattleIsFortBattle
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if

    if I_CompareCounter enemy_unit_count > 0
    ai_gta_add_unit_label 1 0 a2u1

    if I_CompareCounter enemy_unit_count > 1
    ai_gta_add_unit_label 1 0 a2u2

    if I_CompareCounter enemy_unit_count > 2
    ai_gta_add_unit_label 1 0 a2u3

    if I_CompareCounter enemy_unit_count > 3
    ai_gta_add_unit_label 1 0 a2u4

    if I_CompareCounter enemy_unit_count > 4
    ai_gta_add_unit_label 1 0 a2u5

    if I_CompareCounter enemy_unit_count > 5
    ai_gta_add_unit_label 1 0 a2u6

    if I_CompareCounter enemy_unit_count > 6
    ai_gta_add_unit_label 1 0 a2u7

    if I_CompareCounter enemy_unit_count > 7
    ai_gta_add_unit_label 1 0 a2u8

    if I_CompareCounter enemy_unit_count > 8
    ai_gta_add_unit_label 1 0 a2u9

    if I_CompareCounter enemy_unit_count > 9
    ai_gta_add_unit_label 1 0 a2u10

    if I_CompareCounter enemy_unit_count > 10
    ai_gta_add_unit_label 1 0 a2u11

    if I_CompareCounter enemy_unit_count > 11
    ai_gta_add_unit_label 1 0 a2u12

    if I_CompareCounter enemy_unit_count > 12
    ai_gta_add_unit_label 1 0 a2u13

    if I_CompareCounter enemy_unit_count > 13
    ai_gta_add_unit_label 1 0 a2u14

    if I_CompareCounter enemy_unit_count > 14
    ai_gta_add_unit_label 1 0 a2u15

    if I_CompareCounter enemy_unit_count > 15
    ai_gta_add_unit_label 1 0 a2u16

    if I_CompareCounter enemy_unit_count > 16
    ai_gta_add_unit_label 1 0 a2u17

    if I_CompareCounter enemy_unit_count > 17
    ai_gta_add_unit_label 1 0 a2u18

    if I_CompareCounter enemy_unit_count > 18
    ai_gta_add_unit_label 1 0 a2u19

    if I_CompareCounter enemy_unit_count = 20
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    set_counter sally_defense 2
    set_counter defend_location 1
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 2
;	and I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
    and I_UnitDistanceFromPosition a2u1 1 1 > 630
    and ! I_UnitEnemyUnitInRadius a2u1 160
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_IsUnitUnderFire a4u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter unit_under_fire 0
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_if

    if I_CompareCounter sally_defense = 0
    set_counter sally_defense 2
    end_if
    set_counter reform_back 0
    battle_wait 7
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 2
;	and I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
    and I_UnitDistanceFromPosition a2u1 1 1 > 560
    and I_UnitDistanceFromPosition a2u1 1 1 < 630
    and ! I_UnitEnemyUnitInRadius a2u1 160
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter unit_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_IsUnitUnderFire a4u1
    inc_counter unit_under_fire 2
    end_if
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

if I_CompareCounter repeat_test1 = 1
set_counter repeat_test1 2
end_if
if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1
and I_CompareCounter repeat_test1 = 0

set_counter unit_under_fire 0
set_counter repeat_test1 1
;battle_wait 10
end_if

if I_CompareCounter unit_under_fire > 0
and I_CompareCounter reform_back < 1
and I_CompareCounter repeat_test1 = 2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter unit_under_fire 0
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_if

    if I_CompareCounter sally_defense = 0
    set_counter sally_defense 2
    end_if
    set_counter reform_back 0
    battle_wait 7
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 2
    and I_BattleIsSallyOutBattle
    and I_UnitDistanceFromPosition a2u1 1 1 > 630
    and I_UnitEnemyUnitInRadius a2u1 160

    set_counter sally_defense 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_defense = 2
    and I_UnitDistanceFromPosition a2u1 1 1 > 560
    and I_UnitDistanceFromPosition a2u1 1 1 < 630
    and I_UnitEnemyUnitInRadius a2u1 160

    set_counter sally_defense 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    ai_gta_add_objective 1 ATTACK_ENEMY_BATTLEGROUP 999

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    inc_counter reform_multi 1
    set_counter defend_location 2
    set_counter sally_defense_check 1
    battle_wait 30
    if I_CompareCounter sally_defense_check = 1
    set_counter sally_defense 3
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi < 2
;	and I_UnitDistanceFromPosition a2u1 1 1 < 660
    and I_UnitGroupDistanceFromPosition army2 1 1 < 630
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter repeat_test2 = 1
    set_counter repeat_test2 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test2 = 0

    set_counter repeat_test2 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test2 = 2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reform_multi 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if
set_counter reform_back 0
if I_CompareCounter repeat_test2 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi = 2
;	and I_UnitDistanceFromPosition a2u1 1 1 < 620
    and I_UnitGroupDistanceFromPosition army2 1 1 < 600
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter repeat_test3 = 1
    set_counter repeat_test3 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test3 = 0

    set_counter repeat_test3 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test3 = 2

    if ! I_UnitEnemyUnitInRadius a2u1 150
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -750, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 750, -100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 750, 0, -100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -750, 0, 100
    end_if
    set_counter reform_multi 1

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    end_if

    if I_UnitEnemyUnitInRadius a2u1 150
    set_counter sally_defense 3
    battle_wait 7
    end_if
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test3 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi = 3
;	and I_UnitDistanceFromPosition a2u1 1 1 < 580
    and I_UnitGroupDistanceFromPosition army2 1 1 < 560
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

    if I_CompareCounter repeat_test4 = 1
    set_counter repeat_test4 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test4 = 0

    set_counter repeat_test4 1
    set_counter sally_defense 3
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test4 = 2

    if I_UnitEnemyUnitInRadius a2u1 180
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -700, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 700, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 700, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -700, 0, 100
    end_if
    set_counter reform_multi 2
    end_if
    if ! I_UnitEnemyUnitInRadius a2u1 180
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5

    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    end_if
    set_counter reform_multi 1
    end_if
    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test4 = 1
battle_wait 20
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense = 3
    and I_CompareCounter reform_multi > 3
    and ! I_IsUnitGroupEngaged army2

    set_counter sally_defense 6
    if I_CompareCounter army_south = 1
    and I_UnitDistanceFromLine a2u1 sw se < 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_north = 1
    and I_UnitDistanceFromLine a2u1 nw ne > 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_west = 1
    and I_UnitDistanceFromLine a2u1 sw nw > 0
    set_counter line_passed 1
    end_if
    if I_CompareCounter army_east = 1
    and I_UnitDistanceFromLine a2u1 se ne < 0
    set_counter line_passed 1
    end_if

if I_CompareCounter line_passed = 1

    set_counter line_passed 0

    if I_CompareCounter enemy_unit_count > 0
    if I_UnitStatus a2u1 fighting
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reform_back 3
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reform_back 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_UnitStatus a2u2 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_UnitStatus a2u3 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_UnitStatus a2u4 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_UnitStatus a2u5 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_UnitStatus a2u6 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_UnitStatus a2u7 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_UnitStatus a2u8 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_UnitStatus a2u9 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_UnitStatus a2u10 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_UnitStatus a2u11 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_UnitStatus a2u12 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_UnitStatus a2u13 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_UnitStatus a2u14 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_UnitStatus a2u15 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_UnitStatus a2u16 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_UnitStatus a2u17 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_UnitStatus a2u18 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_UnitStatus a2u19 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reform_back 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_UnitStatus a2u20 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reform_back 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_UnitDistanceFromUnit a4u1 a2u1 < 300
    if I_UnitStatus a4u1 fighting
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 pursuing
    inc_counter reform_back 1
    end_if
    if I_UnitStatus a4u1 charging
    inc_counter reform_back 1
    end_if
    end_if

    if I_CompareCounter repeat_test5 = 1
    set_counter repeat_test5 2
    end_if
    if I_CompareCounter reform_back = 0
    and I_CompareCounter repeat_test5 = 0

    set_counter repeat_test5 1
    end_if

if I_CompareCounter reform_back = 0
and I_CompareCounter repeat_test5 = 2

if ! I_UnitEnemyUnitInRadius a2u1 20

    if ! I_UnitEnemyUnitInRadius a2u1 20
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if ! I_UnitEnemyUnitInRadius a2u1 150
    and I_BattleSettlementFortificationLevel < 3
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter reset_position 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
end_if
if I_UnitEnemyUnitInRadius a2u1 20
set_counter sally_defense 3
battle_wait 20
end_if
end_if

if I_CompareCounter reform_back > 0
and I_CompareCounter reform_back < 3

set_counter reform_back 0
set_counter sally_defense 3
battle_wait 20
end_if

if I_CompareCounter reform_back > 2

set_counter reform_back 0
set_counter sally_defense 3
;battle_wait 60
battle_wait 30
if I_CompareCounter sally_defense > 2
battle_wait 30
end_if
end_if

set_counter reform_back 0
if I_CompareCounter repeat_test5 = 1
battle_wait 10
end_if
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 0  ;check
    and I_CompareCounter reform_multi > 2
    and ! I_IsUnitGroupEngaged army2
    and I_UnitEnemyUnitInRadius a2u1 160
;	and I_UnitDistanceFromPosition a2u1 1 1 < 560
    and I_UnitGroupDistanceFromPosition army2 1 1 < 560
;	and I_BattleSettlementFortificationLevel > 2

    if I_CompareCounter enemy_unit_count > 0
    and I_IsUnitUnderFire a2u1
    and ! I_IsUnitEngaged a2u1
    and ! I_UnitStatus a2u1 pursuing
    and ! I_UnitStatus a2u1 charging
    and ! I_UnitStatus a2u1 moving
    inc_counter reset_position 2
    end_if

    if I_CompareCounter enemy_unit_count > 1
    and I_IsUnitUnderFire a2u2
    and ! I_IsUnitEngaged a2u2
    and ! I_UnitStatus a2u2 pursuing
    and ! I_UnitStatus a2u2 charging
    and ! I_UnitStatus a2u2 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    and I_IsUnitUnderFire a2u3
    and ! I_IsUnitEngaged a2u3
    and ! I_UnitStatus a2u3 pursuing
    and ! I_UnitStatus a2u3 charging
    and ! I_UnitStatus a2u3 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    and I_IsUnitUnderFire a2u4
    and ! I_IsUnitEngaged a2u4
    and ! I_UnitStatus a2u4 pursuing
    and ! I_UnitStatus a2u4 charging
    and ! I_UnitStatus a2u4 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    and I_IsUnitUnderFire a2u5
    and ! I_IsUnitEngaged a2u5
    and ! I_UnitStatus a2u5 pursuing
    and ! I_UnitStatus a2u5 charging
    and ! I_UnitStatus a2u5 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    and I_IsUnitUnderFire a2u6
    and ! I_IsUnitEngaged a2u6
    and ! I_UnitStatus a2u6 pursuing
    and ! I_UnitStatus a2u6 charging
    and ! I_UnitStatus a2u6 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    and I_IsUnitUnderFire a2u7
    and ! I_IsUnitEngaged a2u7
    and ! I_UnitStatus a2u7 pursuing
    and ! I_UnitStatus a2u7 charging
    and ! I_UnitStatus a2u7 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    and I_IsUnitUnderFire a2u8
    and ! I_IsUnitEngaged a2u8
    and ! I_UnitStatus a2u8 pursuing
    and ! I_UnitStatus a2u8 charging
    and ! I_UnitStatus a2u8 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    and I_IsUnitUnderFire a2u9
    and ! I_IsUnitEngaged a2u9
    and ! I_UnitStatus a2u9 pursuing
    and ! I_UnitStatus a2u9 charging
    and ! I_UnitStatus a2u9 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    and I_IsUnitUnderFire a2u10
    and ! I_IsUnitEngaged a2u10
    and ! I_UnitStatus a2u10 pursuing
    and ! I_UnitStatus a2u10 charging
    and ! I_UnitStatus a2u10 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    and I_IsUnitUnderFire a2u11
    and ! I_IsUnitEngaged a2u11
    and ! I_UnitStatus a2u11 pursuing
    and ! I_UnitStatus a2u11 charging
    and ! I_UnitStatus a2u11 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    and I_IsUnitUnderFire a2u12
    and ! I_IsUnitEngaged a2u12
    and ! I_UnitStatus a2u12 pursuing
    and ! I_UnitStatus a2u12 charging
    and ! I_UnitStatus a2u12 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    and I_IsUnitUnderFire a2u13
    and ! I_IsUnitEngaged a2u13
    and ! I_UnitStatus a2u13 pursuing
    and ! I_UnitStatus a2u13 charging
    and ! I_UnitStatus a2u13 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    and I_IsUnitUnderFire a2u14
    and ! I_IsUnitEngaged a2u14
    and ! I_UnitStatus a2u14 pursuing
    and ! I_UnitStatus a2u14 charging
    and ! I_UnitStatus a2u14 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    and I_IsUnitUnderFire a2u15
    and ! I_IsUnitEngaged a2u15
    and ! I_UnitStatus a2u15 pursuing
    and ! I_UnitStatus a2u15 charging
    and ! I_UnitStatus a2u15 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    and I_IsUnitUnderFire a2u16
    and ! I_IsUnitEngaged a2u16
    and ! I_UnitStatus a2u16 pursuing
    and ! I_UnitStatus a2u16 charging
    and ! I_UnitStatus a2u16 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    and I_IsUnitUnderFire a2u17
    and ! I_IsUnitEngaged a2u17
    and ! I_UnitStatus a2u17 pursuing
    and ! I_UnitStatus a2u17 charging
    and ! I_UnitStatus a2u17 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    and I_IsUnitUnderFire a2u18
    and ! I_IsUnitEngaged a2u18
    and ! I_UnitStatus a2u18 pursuing
    and ! I_UnitStatus a2u18 charging
    and ! I_UnitStatus a2u18 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    and I_IsUnitUnderFire a2u19
    and ! I_IsUnitEngaged a2u19
    and ! I_UnitStatus a2u19 pursuing
    and ! I_UnitStatus a2u19 charging
    and ! I_UnitStatus a2u19 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    and I_IsUnitUnderFire a2u20
    and ! I_IsUnitEngaged a2u20
    and ! I_UnitStatus a2u20 pursuing
    and ! I_UnitStatus a2u20 charging
    and ! I_UnitStatus a2u20 moving
    inc_counter reset_position 1
    end_if

    if I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready = 0
    and I_IsUnitUnderFire a4u1
    and ! I_IsUnitEngaged a4u1
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging
    and ! I_UnitStatus a4u1 moving
    inc_counter reset_position 2
    end_if

if I_CompareCounter reset_position > 3

    if ! I_UnitEnemyUnitInRadius a2u1 20
    and I_BattleSettlementFortificationLevel > 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 1
    end_if

    if ! I_UnitEnemyUnitInRadius a2u1 150
    and I_BattleSettlementFortificationLevel < 3
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    end_if
    set_counter reform_multi 2
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    battle_wait 0.5
;	unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position 0
    set_counter sally_defense 2
    set_counter defend_location 1
end_if

if I_CompareCounter sally_defense != 2
set_counter sally_defense 3
battle_wait 15
end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_defense > 0
    and I_UnitEnemyUnitInRadius a2u1 200

    if ! I_IsUnitGroupEngaged army2
    and ! I_IsUnitGroupMoving army2
    and ! I_UnitStatus a2u1 pursuing
    and ! I_UnitStatus a2u1 charging

    inc_counter army2_idle_s 1
    end_if

    if I_CompareCounter army2_idle_s > 5
    set_counter army2_idle_s 0
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    battle_wait 0.5
;	 unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position 0
    set_counter sally_defense 2
    set_counter defend_location 1
    end_if

    if I_IsUnitGroupEngaged army2
    set_counter army2_idle_s 0
    end_if
    if I_IsUnitGroupMoving army2
    set_counter army2_idle_s 0
    end_if
    if I_UnitStatus a2u1 pursuing
    set_counter army2_idle_s 0
    end_if
    if I_UnitStatus a2u1 charging
    set_counter army2_idle_s 0
    end_if
    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 2
    and I_BattleSettlementFortificationLevel > 2
;	and I_CompareCounter reform_multi > 3
    and ! I_IsUnitGroupEngaged army2
    and ! I_UnitEnemyUnitInRadius a2u1 80

    set_counter sally_defense 6
    set_counter wall_line_passed 0
    set_counter reset_position_s 0

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitEngaged a2u1
    inc_counter reset_position_s 2
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter reset_position_s 2
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter reset_position_s 2
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitEngaged a2u2
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitEngaged a2u3
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitEngaged a2u4
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitEngaged a2u5
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitEngaged a2u6
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitEngaged a2u7
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitEngaged a2u8
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitEngaged a2u9
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitEngaged a2u10
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitEngaged a2u11
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitEngaged a2u12
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitEngaged a2u13
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitEngaged a2u14
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitEngaged a2u15
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitEngaged a2u16
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitEngaged a2u17
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitEngaged a2u18
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitEngaged a2u19
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter reset_position_s 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitEngaged a2u20
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter reset_position_s 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter reset_position_s 1
    end_if
    end_if

if I_CompareCounter reset_position_s = 0
    if I_CompareCounter army_south = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 sw_wall se_wall > 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 nw_wall ne_wall < 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 sw_wall nw_wall < 0
    inc_counter wall_line_passed 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromLine a1u1 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromLine a1u2 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromLine a1u3 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromLine a1u4 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromLine a1u5 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromLine a1u6 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromLine a1u7 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromLine a1u8 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromLine a1u9 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromLine a1u10 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromLine a1u11 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromLine a1u12 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromLine a1u13 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromLine a1u14 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromLine a1u15 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromLine a1u16 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromLine a1u17 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromLine a1u18 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromLine a1u19 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromLine a1u20 se_wall ne_wall > 0
    inc_counter wall_line_passed 1
    end_if
    end_if
end_if

    if I_CompareCounter repeat_test6 = 1
    set_counter repeat_test6 2
    end_if
    if I_CompareCounter wall_line_passed = 0
    and I_CompareCounter reset_position_s = 0
    and I_CompareCounter repeat_test6 = 0

    set_counter repeat_test6 1
    end_if
    if I_CompareCounter wall_line_passed = 0
    and I_CompareCounter reset_position_s = 0
    and I_CompareCounter repeat_test6 = 2
    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_north = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 675, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_east = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if
    if I_CompareCounter army_west = 1
    if I_CompareCounter reform_multi > 2
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -675, 0, 100
    set_counter reform_multi 2
    end_if
    if I_CompareCounter reform_multi < 3
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    set_counter reform_multi 1
    end_if
    end_if

    if I_CompareCounter enemy_unit_count > 0
    if ! I_UnitDestroyed a2u1
    and ! I_UnitStatus a2u1 left_battle
    ai_gta_add_unit_label 1 0 a2u1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if ! I_UnitDestroyed a2u2
    and ! I_UnitStatus a2u2 left_battle
    ai_gta_add_unit_label 1 0 a2u2
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if ! I_UnitDestroyed a2u3
    and ! I_UnitStatus a2u3 left_battle
    ai_gta_add_unit_label 1 0 a2u3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if ! I_UnitDestroyed a2u4
    and ! I_UnitStatus a2u4 left_battle
    ai_gta_add_unit_label 1 0 a2u4
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if ! I_UnitDestroyed a2u5
    and ! I_UnitStatus a2u5 left_battle
    ai_gta_add_unit_label 1 0 a2u5
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if ! I_UnitDestroyed a2u6
    and ! I_UnitStatus a2u6 left_battle
    ai_gta_add_unit_label 1 0 a2u6
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if ! I_UnitDestroyed a2u7
    and ! I_UnitStatus a2u7 left_battle
    ai_gta_add_unit_label 1 0 a2u7
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if ! I_UnitDestroyed a2u8
    and ! I_UnitStatus a2u8 left_battle
    ai_gta_add_unit_label 1 0 a2u8
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if ! I_UnitDestroyed a2u9
    and ! I_UnitStatus a2u9 left_battle
    ai_gta_add_unit_label 1 0 a2u9
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if ! I_UnitDestroyed a2u10
    and ! I_UnitStatus a2u10 left_battle
    ai_gta_add_unit_label 1 0 a2u10
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if ! I_UnitDestroyed a2u11
    and ! I_UnitStatus a2u11 left_battle
    ai_gta_add_unit_label 1 0 a2u11
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if ! I_UnitDestroyed a2u12
    and ! I_UnitStatus a2u12 left_battle
    ai_gta_add_unit_label 1 0 a2u12
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if ! I_UnitDestroyed a2u13
    and ! I_UnitStatus a2u13 left_battle
    ai_gta_add_unit_label 1 0 a2u13
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if ! I_UnitDestroyed a2u14
    and ! I_UnitStatus a2u14 left_battle
    ai_gta_add_unit_label 1 0 a2u14
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if ! I_UnitDestroyed a2u15
    and ! I_UnitStatus a2u15 left_battle
    ai_gta_add_unit_label 1 0 a2u15
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if ! I_UnitDestroyed a2u16
    and ! I_UnitStatus a2u16 left_battle
    ai_gta_add_unit_label 1 0 a2u16
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if ! I_UnitDestroyed a2u17
    and ! I_UnitStatus a2u17 left_battle
    ai_gta_add_unit_label 1 0 a2u17
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if ! I_UnitDestroyed a2u18
    and ! I_UnitStatus a2u18 left_battle
    ai_gta_add_unit_label 1 0 a2u18
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if ! I_UnitDestroyed a2u19
    and ! I_UnitStatus a2u19 left_battle
    ai_gta_add_unit_label 1 0 a2u19
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if ! I_UnitDestroyed a2u20
    and ! I_UnitStatus a2u20 left_battle
    ai_gta_add_unit_label 1 0 a2u20
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

;    battle_wait 0.5
;	 unit_group_order_halt army2
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter reset_position_s 0
    set_counter sally_defense 2
    set_counter defend_location 1
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    end_if

    if I_CompareCounter sally_defense != 2
    set_counter sally_defense 3
    end_if
    if I_CompareCounter wall_line_passed > 0
    battle_wait 15
    end_if
    if I_CompareCounter reset_position_s > 0
    battle_wait 15
    end_if
    if I_CompareCounter repeat_test6 = 1
    battle_wait 20
    end_if
end_monitor

;;;;;Termination
monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_defense > 0
    and I_CompareCounter kill_sally = 0
    and I_IsUnitRouting a2u1
    and ! I_IsUnitGroupEngaged army2
    and ! I_IsUnitGroupDestroyed army2

    ai_gta_del_objective 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    if I_CompareCounter army_south = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, -725, 100
    end_if
    if I_CompareCounter army_north = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 0, 725, 100
    end_if
    if I_CompareCounter army_east = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 725, 0, 100
    end_if
    if I_CompareCounter army_west = 1
    ai_gta_add_objective 1 DEFEND_TERRAIN_AREA 999 -725, 0, 100
    end_if

    set_counter sally_defense 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter assign_labels = 1
    and I_UnitDestroyed a2u1
    and ! I_IsUnitGroupDestroyed army2

    set_counter reset_army2 1
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter assign_labels 2
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter kill_sally = 0
    and I_CompareCounter assign_labels = 2
    and I_UnitDestroyed a2u1
    and ! I_IsUnitGroupDestroyed army2

    set_counter assign_labels 1
end_monitor

;;;Sally Reinforcements

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter sally_reinf = 1
    and I_CompareCounter kill_sally = 0
;	and ! I_BattleIsFortBattle
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsUnitEngaged a4u1

    if I_CompareCounter sally_defense < 3
    set_counter defend_location 1
    set_counter sally_reinf 2
    end_if

    if I_CompareCounter sally_defense > 2

    set_counter defend_location 2
    set_counter sally_reinf 2
    end_if

end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
    and I_CompareCounter sally_defense < 3
    and I_CompareCounter sally_defense != 1
    and I_CompareCounter defend_location = 1
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and ! I_IsUnitGroupEngaged army4
    and ! I_IsUnitGroupEngaged army2
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging
    and ! I_UnitEnemyUnitInRadius a4u1 20

     ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20

    battle_wait 0.5
    ai_active_set on

    set_counter defend_location 0
;	set_counter army4_idle_s 0
battle_wait 20
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
    and I_CompareCounter sally_defense > 2
    and I_CompareCounter defend_location = 2
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0

    ;;;Army 4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u1
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u2
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u3
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u4
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u5
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u6
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u7
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u8
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u9
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u10
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u11
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u12
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u13
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u14
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u15
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u16
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u17
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u18
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u19
    ai_gta_add_unit_label 1 G5_OBJECTIVE a4u20

;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter defend_location 0
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter sally_reinf = 2
;	and I_CompareCounter sally_defense > 2
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_CompareCounter defend_location = 0
;    and I_UnitEnemyUnitInRadius a4u1 200

    if ! I_IsUnitGroupEngaged army4
    and ! I_IsUnitGroupMoving army4
    and ! I_UnitStatus a4u1 pursuing
    and ! I_UnitStatus a4u1 charging

    inc_counter army4_idle_s 1
    end_if
    if I_CompareCounter army4_idle_s > 5
    set_counter defend_location 1
    set_counter sally_defense 2
    end_if

    if I_IsUnitGroupEngaged army4
    set_counter army4_idle_s 0
    end_if
    if I_IsUnitGroupMoving army4
    set_counter army4_idle_s 0
    end_if
    if I_UnitStatus a4u1 pursuing
    set_counter army4_idle_s 0
    end_if
    if I_UnitStatus a4u1 charging
    set_counter army4_idle_s 0
    end_if
    battle_wait 10
end_monitor

;;;;;Termination
monitor_conditions I_BattleStarted
    and I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_IsUnitGroupDestroyed army4
    and I_BattleIsSallyOutBattle

    set_counter sally_reinf 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter sally_reinf > 0
    and I_CompareCounter army4_ready_sally = 0
    and I_CompareCounter army4_ready = 0
    and I_UnitDestroyed a4u1
    and I_BattleIsSallyOutBattle

    set_counter label_army4 1
;    battle_wait 0.5
;    unit_group_enable_automation army4 false
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    set_counter sally_reinf 0
end_monitor

;################## Germanicu5 Integrated Protect General script ###########################

monitor_event BattleConflictPhaseCommenced FactionIsLocal
    and I_CompareCounter panel_check = 1
    and I_BattleEnemyArmyNumberOfMountClass elephant = 0
    and I_CompareCounter enemy_unit_count > 4

    battle_wait 10

    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
    and I_CompareCounter protect_siege = 1
    set_counter protect_general 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
;    and I_BattleEnemyArmyNumberOfSpecialAbility rally > 0
;    and I_CompareCounter labels_only = 1
    and I_CompareCounter kill_sally = 1
    set_counter protect_general 1
    end_if
end_monitor

monitor_event BattleBattleGatesDestroyedByEngine TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter kill_sally = 1
    set_counter general_wait 1
    end_if
end_monitor

monitor_event BattleWallsCaptured TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if
end_monitor

monitor_event BattleWallsBreachedByEngine TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter protect_general = 1

    set_counter protect_general 0
    if I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    set_counter general_wait 1
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 1
    and I_IsUnitMoveFastSet a1u1
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0

    battle_wait 0.5
    unit_order_halt a1u1
    if I_CompareCounter enemy_unit_count < 7
    set_counter general_wait 2
    battle_wait 20
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 20
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
    set_counter general_wait 2
    battle_wait 25
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 25
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
    set_counter general_wait 2
    battle_wait 30
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 30
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
    set_counter general_wait 2
    battle_wait 35
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 35
    end_if
    end_if
    if I_BattleIsSiegeBattle
    and I_CompareCounter general_wait = 3
    release_unit a1u1
    set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 1
    and I_IsUnitMoveFastSet a2u1
    and I_BattleEnemyArmyNumberOfUnitCategory cavalry > 0

    battle_wait 0.5
    unit_order_halt a2u1

    if I_CompareCounter enemy_unit_count < 7
    set_counter general_wait 2
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 20
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter enemy_unit_count < 12
    set_counter general_wait 2
    battle_wait 25
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 25
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter enemy_unit_count < 16
    set_counter general_wait 2
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 30
    end_if
    end_if
    if I_CompareCounter enemy_unit_count > 15
    set_counter general_wait 2
    battle_wait 35
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 2
    set_counter general_wait 3
    battle_wait 35
    end_if
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter general_wait = 3
    release_unit a2u1
    set_counter general_wait 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter general_wait > 1
    and I_BattleIsSiegeBattle
    and ! I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a1u1 60

    set_counter general_wait 0
    release_unit a1u1
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter general_wait > 1
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 60

    set_counter general_wait 0
    release_unit a2u1
end_monitor

;################## Germanicu5 Integrated Siege script ###########################

monitor_conditions I_BattleStarted
    and ! I_BattleIsFortBattle
    and I_BattleEnemyArmyNumberOfMountClass elephant = 0
    and I_BattleSettlementFortificationLevel > 0
    and I_CompareCounter siege_fix = 1

    set_counter siege_fix 0

    if I_BattleIsSallyOutBattle
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    set_counter army_sieging 1
    end_if

    if I_BattleIsSallyOutBattle
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege = 0
    set_counter wall_advance_s 1
    end_if
end_monitor

;;;;;;;Sally Out

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_BattlePlayerArmyIsAttacker
    and I_CompareCounter reset_army2 = 1

    set_counter reset_army2 0
    set_counter enemy_unit_count 0

    if I_BattleEnemyArmyNumberOfUnits > 0
    label_unit 1 0 0 a2u1
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 1
    label_unit 1 0 1 a2u2
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 2
    label_unit 1 0 2 a2u3
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 3
    label_unit 1 0 3 a2u4
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 4
    label_unit 1 0 4 a2u5
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 5
    label_unit 1 0 5 a2u6
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 6
    label_unit 1 0 6 a2u7
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 7
    label_unit 1 0 7 a2u8
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 8
    label_unit 1 0 8 a2u9
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 9
    label_unit 1 0 9 a2u10
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 10
    label_unit 1 0 10 a2u11
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 11
    label_unit 1 0 11 a2u12
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 12
    label_unit 1 0 12 a2u13
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 13
    label_unit 1 0 13 a2u14
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 14
    label_unit 1 0 14 a2u15
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 15
    label_unit 1 0 15 a2u16
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 16
    label_unit 1 0 16 a2u17
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 17
    label_unit 1 0 17 a2u18
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits > 18
    label_unit 1 0 18 a2u19
    inc_counter enemy_unit_count 1
    if I_BattleEnemyArmyNumberOfUnits = 20
    label_unit 1 0 19 a2u20
    inc_counter enemy_unit_count 1
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_monitor

;;;;;;;Huge City

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 4

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 35

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
    set_counter sally_check 10
    battle_wait 30

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 10
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 14
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 14
    set_counter sally_check 15
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 15
    set_counter sally_check 16
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 16
    set_counter sally_check 17
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 17
    set_counter sally_check 18
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 18
    set_counter sally_check 19
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 19
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 4

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 80

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 60
    set_counter sally_check 20
    battle_wait 30
if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 20
    set_counter sally_check 21
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 21
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 24
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 24
    set_counter sally_check 25
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 25
    set_counter sally_check 26
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 26
    set_counter sally_check 27
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 27
    set_counter sally_check 28
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 28
    set_counter sally_check 29
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 29
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_if
end_monitor

;;;;;;;Large City

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 45

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
    set_counter sally_check 30
    battle_wait 37

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 30
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 34
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 34
    set_counter sally_check 35
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 35
    set_counter sally_check 36
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 36
    set_counter sally_check 37
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 37
    set_counter sally_check 38
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 38
    set_counter sally_check 39
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 39
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and ! I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 90

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 70
    set_counter sally_check 40
    battle_wait 35
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 40
    set_counter sally_check 41
    battle_wait 35
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 41
    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    if I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 44
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 44
    set_counter sally_check 45
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 45
    set_counter sally_check 46
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 46
    set_counter sally_check 47
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 47
    set_counter sally_check 48
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 48
    set_counter sally_check 49
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 49
    set_counter emergency_stop 0
    if I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

;;;;;;;Castle, Citadel and Fortress

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range > 0
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 100

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 75
    set_counter sally_check 50
    battle_wait 15
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 50
    set_counter sally_check 51
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 51
    set_counter sally_check 52
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 52
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 54
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 54
    set_counter sally_check 55
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 55
    set_counter sally_check 56
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 56
    set_counter sally_check 57
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 57
    set_counter sally_check 58
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 58
    set_counter sally_check 59
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 59
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and ! I_BattleIsFortBattle
     and I_CompareCounter army_sieging = 1
     and I_CompareCounter army2_sally = 1
    and I_BattleEnemyArmyNumberOfClassAndCategory missile siege > 0
    and I_BattlePlayerArmyNumberOfAttribute extreme_range = 0
    and I_BattlePlayerArmyIsAttacker
    and I_IsBattleSettlementCastle
    and I_BattleSettlementFortificationLevel 3

    battle_wait 2
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_formed army2 0 170

    set_counter emergency_stop 1
    set_counter omfg_cannon_tower 1
    battle_wait 2
    ai_active_set on
;	battle_wait 125
    set_counter sally_check 60
    battle_wait 30
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 60
    set_counter sally_check 61
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 61
    set_counter sally_check 62
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 62
    set_counter sally_check 63
    battle_wait 35
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 63
    if I_BattleStarted
    and I_CompareCounter omfg_cannon_tower > 0
    set_counter omfg_cannon_tower 0
    end_if

    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1
    if ! I_IsUnitGroupMoving army2
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    if I_IsUnitGroupMoving army2
;	battle_wait 170
    set_counter sally_check 64
    battle_wait 20
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 64
    set_counter sally_check 65
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 65
    set_counter sally_check 66
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 66
    set_counter sally_check 67
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 67
    set_counter sally_check 68
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 68
    set_counter sally_check 69
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 69
    set_counter emergency_stop 0
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    end_if
    end_if
    end_if

    set_counter army_sieging 0
    set_counter army2_sally 0
    end_if
end_monitor

;;;;;;;Wall Advance

monitor_conditions I_BattleStarted
    and I_CompareCounter wall_advance_s = 1
    and I_CompareCounter kill_sally = 1
    and I_BattleIsSallyOutBattle

    battle_wait 2
    if I_BattleSettlementFortificationLevel < 3
     and I_CompareCounter wall_advance_s = 1
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_unformed army2 0 95
    end_if

    if I_BattleSettlementFortificationLevel > 2
     and I_CompareCounter wall_advance_s = 1
    set_counter reset_army2 1
    battle_wait 0.5
    unit_group_order_halt army2
    battle_wait 0.5
    unit_group_order_relative_move_unformed army2 0 200
    end_if

    set_counter emergency_stop 1
    if I_BattleSettlementFortificationLevel < 3
;	battle_wait 72
    set_counter sally_check 113
    battle_wait 36
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 113
    set_counter sally_check 114
    battle_wait 36
    end_if
    end_if
    if I_BattleSettlementFortificationLevel > 2
;	battle_wait 145
    set_counter sally_check 110
    battle_wait 25
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 110
    set_counter sally_check 111
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 111
    set_counter sally_check 112
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 112
    set_counter sally_check 113
    battle_wait 30
    end_if
    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 113
    set_counter sally_check 114
    battle_wait 30
    end_if
    end_if

    if I_BattleIsSallyOutBattle
    and I_CompareCounter sally_check = 114
    if I_BattleStarted
    and I_CompareCounter emergency_stop = 1

    set_counter emergency_stop 0
    unit_group_order_halt army2
;    battle_wait 0.5
;    ai_active_set off
    battle_wait 0.5
    ai_active_set on
    end_if
    set_counter wall_advance_s 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_BattleIsSallyOutBattle
    and I_CompareCounter omfg_cannon_tower > 0

    set_counter omfg_cannon_tower 2
if I_CompareCounter player_unit_count > 0
    if I_UnitStatus a1u1 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u1 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u2 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u2 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u3 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u3 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u4 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u4 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u5 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u5 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u6 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u6 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u7 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u7 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u8 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u8 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u9 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u9 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u10 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u10 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u11 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u11 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u12 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u12 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u13 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u13 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u14 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u14 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u15 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u15 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u16 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u16 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u17 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u17 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u18 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u18 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u19 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u19 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    if I_CompareCounter player_unit_count > 19
    and I_CompareCounter omfg_cannon_tower != 1
    if I_UnitStatus a1u20 missiles_firing
    set_counter omfg_cannon_tower 1
    end_if
    if I_UnitStatus a1u20 missiles_reloading
    set_counter omfg_cannon_tower 1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
end_if

if I_CompareCounter omfg_cannon_tower = 2

    if I_CompareCounter enemy_unit_count > 0
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u1
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 1
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u2
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 2
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u3
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 3
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u4
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 4
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u5
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 5
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u6
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 6
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u7
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 7
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u8
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 8
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u9
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 9
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u10
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 10
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u11
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 11
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u12
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 12
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u13
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 13
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u14
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 14
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u15
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 15
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u16
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 16
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u17
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 17
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u18
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count > 18
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u19
    set_counter omfg_cannon_tower 3
    end_if

    if I_CompareCounter enemy_unit_count = 20
    and I_CompareCounter omfg_cannon_tower = 2
    and I_IsUnitUnderFire a2u20
    set_counter omfg_cannon_tower 3
    end_if
end_if

    if I_CompareCounter omfg_cannon_tower = 3
    set_counter omfg_cannon_tower 0
    set_counter emergency_stop 0
;    ai_active_set off
;    battle_wait 0.5
    ai_active_set on
    end_if
    battle_wait 7
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter panel_check = 1
    and I_CompareCounter emergency_stop = 1
;    and I_CompareCounter labels_only = 1
    and I_CompareCounter kill_sally = 1

    if I_BattleIsSiegeBattle
    unit_group_order_halt army1
    battle_wait 0.5
    ai_active_set on
    set_counter emergency_stop 0
    end_if
    if I_BattleIsSallyOutBattle
    unit_group_order_halt army2
    battle_wait 0.5
    ai_active_set on
    set_counter emergency_stop 0
    end_if
end_monitor

;################## Open Battles #################

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter ob_defend = 0
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    set_counter ob_defend 2

    if I_UnitDistanceFromUnit a1u1 a2u1 < 220
    and I_BattleEnemyArmyNumberOfUnitClass missile = 0
    and I_BattleEnemyArmyNumberOfUnitClass skirmish = 0
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    and I_UnitDistanceFromUnit a1u1 a2u1 < 270
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattlePlayerAllianceOddsInFavour > 1.7
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_defend = 2
    and I_BattleEnemyArmyNumberOfUnitClass missile = 0
    and I_BattleEnemyArmyNumberOfUnitClass skirmish = 0
    set_counter ob_repeat_test 1
    end_if
;    if I_BattlePlayerArmyNumberOfClassAndCategory missile siege > 0
;    end_if
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 200
    and BattleEnemyUnitClass != missile
    and BattleEnemyUnitClass != skirmish
    and BattleDirectionOfAttack != front
    and BattleRangeOfAttack < 200

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_event BattlePlayerUnitAttacksEnemyUnit BattleIsMeleeAttack
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker
    and BattleDirectionOfAttack != rear
    and I_UnitEnemyUnitInRadius a2u1 200
    and BattleRangeOfAttack < 200
    and BattlePlayerUnitCategory infantry

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_UnitEnemyUnitInRadius a2u1 100
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattleEnemyArmyPercentageOfUnitCategory cavalry > 60
    and I_UnitEnemyUnitInRadius a2u1 250
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4

    set_counter player_units_closing 0

    if I_CompareCounter player_unit_count > 0
    and I_UnitDistanceFromUnit a1u1 a2u1 < 180
    and ! I_UnitStatus a1u1 missiles_firing
    and ! I_UnitStatus a1u1 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 1
    and I_UnitDistanceFromUnit a1u2 a2u1 < 180
    and ! I_UnitStatus a1u2 missiles_firing
    and ! I_UnitStatus a1u2 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 2
    and I_UnitDistanceFromUnit a1u3 a2u1 < 180
    and ! I_UnitStatus a1u3 missiles_firing
    and ! I_UnitStatus a1u3 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 3
    and I_UnitDistanceFromUnit a1u4 a2u1 < 180
    and ! I_UnitStatus a1u4 missiles_firing
    and ! I_UnitStatus a1u4 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 4
    and I_UnitDistanceFromUnit a1u5 a2u1 < 180
    and ! I_UnitStatus a1u5 missiles_firing
    and ! I_UnitStatus a1u5 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 5
    and I_UnitDistanceFromUnit a1u6 a2u1 < 180
    and ! I_UnitStatus a1u6 missiles_firing
    and ! I_UnitStatus a1u6 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 6
    and I_UnitDistanceFromUnit a1u7 a2u1 < 180
    and ! I_UnitStatus a1u7 missiles_firing
    and ! I_UnitStatus a1u7 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 7
    and I_UnitDistanceFromUnit a1u8 a2u1 < 180
    and ! I_UnitStatus a1u8 missiles_firing
    and ! I_UnitStatus a1u8 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 8
    and I_UnitDistanceFromUnit a1u9 a2u1 < 180
    and ! I_UnitStatus a1u9 missiles_firing
    and ! I_UnitStatus a1u9 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 9
    and I_UnitDistanceFromUnit a1u10 a2u1 < 180
    and ! I_UnitStatus a1u10 missiles_firing
    and ! I_UnitStatus a1u10 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 10
    and I_UnitDistanceFromUnit a1u11 a2u1 < 180
    and ! I_UnitStatus a1u11 missiles_firing
    and ! I_UnitStatus a1u11 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 11
    and I_UnitDistanceFromUnit a1u12 a2u1 < 180
    and ! I_UnitStatus a1u12 missiles_firing
    and ! I_UnitStatus a1u12 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 12
    and I_UnitDistanceFromUnit a1u13 a2u1 < 180
    and ! I_UnitStatus a1u13 missiles_firing
    and ! I_UnitStatus a1u13 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 13
    and I_UnitDistanceFromUnit a1u14 a2u1 < 180
    and ! I_UnitStatus a1u14 missiles_firing
    and ! I_UnitStatus a1u14 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 14
    and I_UnitDistanceFromUnit a1u15 a2u1 < 180
    and ! I_UnitStatus a1u15 missiles_firing
    and ! I_UnitStatus a1u15 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 15
    and I_UnitDistanceFromUnit a1u16 a2u1 < 180
    and ! I_UnitStatus a1u16 missiles_firing
    and ! I_UnitStatus a1u16 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 16
    and I_UnitDistanceFromUnit a1u17 a2u1 < 180
    and ! I_UnitStatus a1u17 missiles_firing
    and ! I_UnitStatus a1u17 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 17
    and I_UnitDistanceFromUnit a1u18 a2u1 < 180
    and ! I_UnitStatus a1u18 missiles_firing
    and ! I_UnitStatus a1u18 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count > 18
    and I_UnitDistanceFromUnit a1u19 a2u1 < 180
    and ! I_UnitStatus a1u19 missiles_firing
    and ! I_UnitStatus a1u19 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_unit_count = 20
    and I_UnitDistanceFromUnit a1u20 a2u1 < 180
    and ! I_UnitStatus a1u20 missiles_firing
    and ! I_UnitStatus a1u20 missiles_reloading
    inc_counter player_units_closing 1
    end_if

    if I_CompareCounter player_units_closing > 1
    inc_counter player_enveloping 1
    end_if
    if I_CompareCounter player_units_closing < 1
    set_counter player_enveloping 0
    end_if
    if I_CompareCounter player_enveloping > 5
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    end_if

    battle_wait 10
end_monitor

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter panel_check = 1
    and I_CompareCounter ob_defend > 1
    and I_CompareCounter ob_defend != 4
    and BattleIsMeleeAttack
    and BattleEnemyUnitClass heavy
    and BattleEnemyUnitCategory cavalry
    and ! BattlePlayerUnitClass heavy
    and ! BattlePlayerUnitClass heavy
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    inc_counter ob_engaged -1
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defend > 1
    and I_CompareCounter ob_defend != 4
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    if I_PercentageOfArmyKilled 0 0 < 5
    and I_PercentageOfArmyKilled 1 0 > 10
    set_counter ob_repeat_test 4
    end_if

    if I_PercentageOfArmyKilled 0 0 < 10
    and I_PercentageOfArmyKilled 1 0 > 20
    set_counter ob_repeat_test 4
    end_if

    if I_PercentageOfArmyKilled 0 0 < 15
    and I_PercentageOfArmyKilled 1 0 > 25
    set_counter ob_repeat_test 4
    end_if
    battle_wait 30
end_monitor

;monitor_event BattlePlayerUnitAttacksEnemyUnit TrueCondition
;    and I_CompareCounter panel_check = 1
;    and I_CompareCounter ob_defense_launch = 1
;    and ! I_CompareCounter ob_defend > 1
;    and BattlePlayerUnitCategory siege
;    and BattlePlayerUnitClass missile
;    and BattleRangeOfAttack < 400
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    set_counter ob_siege_attack 1
;end_monitor

;monitor_conditions I_BattleStarted
;    and I_CompareCounter ob_defense_launch = 1
;    and I_CompareCounter ob_siege_attack = 1
;    and I_CompareCounter open_battle = 1
;    and I_BattlePlayerArmyIsAttacker
;    if I_PercentageOfArmyKilled 0 0 < 3
;    and I_PercentageOfArmyKilled 1 0 > 5
;    set_counter ob_defend 2
;    set_counter ob_siege_attack 0
;    end_if
;    if I_PercentageOfArmyKilled 0 0 < 5
;    and I_PercentageOfArmyKilled 1 0 > 10
;    if I_CompareCounter ob_repeat_test < 2
;    set_counter ob_repeat_test 2
;    end_if
;    set_counter ob_defend 2
;    set_counter ob_siege_attack 0
;    end_if
;    battle_wait 30
;end_monitor

;;;;;; Reinf triggers

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_BattlePlayerArmyIsAttacker

    if I_CompareCounter player_engaged_reinf = 4
    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
    end_if

    if I_IsUnitGroupEngaged army1
    inc_counter player_engaged_reinf 1
    end_if

    if I_CompareCounter player_engaged_reinf > 0
    and ! I_IsUnitGroupEngaged army1
    set_counter player_engaged_reinf 0
    end_if

    battle_wait 10
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_PercentageUnitGroupKilled army4 > 10
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter def_alliance_ready = 1
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter open_battle = 1
    and I_CompareCounter ob_defend != 4
    and I_UnitEnemyUnitInRadius a4u1 100
    and I_BattlePlayerArmyIsAttacker

    ai_gta_plan_set 1 ATTACK_ALL
    set_counter apply_strategy 1
    set_counter ob_defend 4
    set_counter ob_defense_launch 0
    set_counter def_alliance_ready 0
end_monitor

;;;;;; Main monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter ob_defense_launch = 1
    and I_CompareCounter ob_defend = 2
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker

    set_counter ob_defend 3

    if I_CompareCounter enemy_unit_count > 0
    if I_IsUnitUnderFire a2u1
    inc_counter ob_under_fire 2
    end_if
    if I_UnitStatus a2u1 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u1 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u1 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 1
    if I_IsUnitUnderFire a2u2
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u2 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u2 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u2 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 2
    if I_IsUnitUnderFire a2u3
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u3 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u3 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u3 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 3
    if I_IsUnitUnderFire a2u4
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u4 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u4 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u4 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 4
    if I_IsUnitUnderFire a2u5
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u5 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u5 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u5 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 5
    if I_IsUnitUnderFire a2u6
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u6 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u6 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u6 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 6
    if I_IsUnitUnderFire a2u7
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u7 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u7 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u7 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 7
    if I_IsUnitUnderFire a2u8
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u8 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u8 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u8 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 8
    if I_IsUnitUnderFire a2u9
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u9 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u9 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u9 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 9
    if I_IsUnitUnderFire a2u10
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u10 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u10 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u10 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 10
    if I_IsUnitUnderFire a2u11
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u11 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u11 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u11 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 11
    if I_IsUnitUnderFire a2u12
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u12 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u12 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u12 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 12
    if I_IsUnitUnderFire a2u13
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u13 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u13 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u13 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 13
    if I_IsUnitUnderFire a2u14
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u14 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u14 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u14 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 14
    if I_IsUnitUnderFire a2u15
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u15 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u15 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u15 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 15
    if I_IsUnitUnderFire a2u16
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u16 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u16 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u16 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 16
    if I_IsUnitUnderFire a2u17
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u17 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u17 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u17 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 17
    if I_IsUnitUnderFire a2u18
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u18 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u18 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u18 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count > 18
    if I_IsUnitUnderFire a2u19
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u19 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u19 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u19 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    if I_CompareCounter enemy_unit_count = 20
    if I_IsUnitUnderFire a2u20
    inc_counter ob_under_fire 1
    end_if
    if I_UnitStatus a2u20 fighting
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 pursuing
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 charging
    inc_counter ob_engaged 1
    end_if
    if I_UnitStatus a2u20 missiles_firing
    inc_counter ob_under_fire -1
    end_if
    if I_UnitStatus a2u20 missiles_reloading
    inc_counter ob_under_fire -1
    end_if

    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if
    end_if

    if I_CompareCounter ob_under_fire < 1
    if I_CompareCounter ob_engaged > 0

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if

    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_engaged 0
    set_counter ob_repeat_test 3
    end_if

    if I_CompareCounter ob_repeat_test = 1
    set_counter ob_engaged 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 2
    end_if

    if I_CompareCounter ob_repeat_test = 0
    set_counter ob_engaged 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 1
    end_if
    end_if

    if I_CompareCounter ob_engaged < 1

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 2
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    end_if

    if I_CompareCounter ob_repeat_test < 3
    set_counter ob_repeat_test 1
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    end_if
    end_if

    end_if

    if I_CompareCounter ob_under_fire > 0
    if I_CompareCounter ob_engaged > 0

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if
    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_engaged 0
    set_counter ob_repeat_test 3
    end_if
    if I_CompareCounter ob_repeat_test < 2
    set_counter ob_under_fire 0
    set_counter ob_engaged 0
    set_counter ob_repeat_test 2
    end_if
    end_if

    if I_CompareCounter ob_engaged < 1

    if I_CompareCounter ob_repeat_test = 3
    set_counter ob_repeat_test 4
    end_if

    if I_CompareCounter ob_repeat_test = 2
    set_counter ob_repeat_test 3
    end_if
    if I_CompareCounter ob_repeat_test = 1
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 2
    end_if

    if I_CompareCounter ob_repeat_test = 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 1
    end_if
    end_if

    end_if
    if I_CompareCounter ob_repeat_test = 4
    if I_CompareCounter ob_under_fire < 1
    and I_CompareCounter ob_engaged < 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 3
        set_counter ob_repeat_test 2
    end_if
    if I_CompareCounter ob_under_fire > 0

        ai_gta_plan_set 1 ATTACK_ALL
        set_counter apply_strategy 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 4
        set_counter ob_repeat_test 0
        set_counter ob_defense_launch 0
    end_if
    if I_CompareCounter ob_engaged > 0

        ai_gta_plan_set 1 ATTACK_ALL
        set_counter apply_strategy 1
        set_counter ob_under_fire 0
        set_counter ob_engaged 0
        set_counter ob_defend 4
        set_counter ob_repeat_test 0
        set_counter ob_defense_launch 0
    end_if

    end_if

        if I_CompareCounter ob_defend = 3
        set_counter ob_defend 2
        end_if
        battle_wait 15
end_monitor

;;;;;;;General Stop

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 1
    and I_CompareCounter open_battle = 1
    and I_BattleEnemyArmyNumberOfUnits > 2
    and I_BattlePlayerArmyIsAttacker
    and I_BattleAiAttacking
    and I_UnitEnemyUnitInRadius a2u1 120

    set_counter g_stop 2
    label_unit 1 0 0 a2u1
    battle_wait 0.1
    unit_order_halt a2u1
    if I_BattleEnemyArmyNumberOfUnits > 5
    battle_wait 30
    end_if
    if I_BattleEnemyArmyNumberOfUnits < 6
    battle_wait 15
    end_if
    if I_BattlePlayerArmyIsAttacker
    and I_CompareCounter g_stop = 2
    and I_BattleAiAttacking
    release_unit a2u1
    set_counter g_stop 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 1
    and I_CompareCounter open_battle = 1
    and ! I_BattlePlayerArmyIsAttacker
    and I_BattleAiAttacking
    and I_UnitEnemyUnitInRadius a1u1 120

    set_counter g_stop 3
    label_unit 0 0 0 a1u1
    battle_wait 0.1
    unit_order_halt a1u1
    battle_wait 30
    if ! I_BattlePlayerArmyIsAttacker
    and I_CompareCounter g_stop = 3
    and I_BattleAiAttacking
    release_unit a1u1
    set_counter g_stop 0
    end_if
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 2
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a2u1 60

    release_unit a2u1
    set_counter g_stop 0
end_monitor

monitor_conditions I_BattleStarted
    and I_CompareCounter g_stop = 3
    and I_CompareCounter open_battle = 1
    and I_BattlePlayerArmyIsAttacker
    and I_UnitEnemyUnitInRadius a1u1 60

    release_unit a1u1
    set_counter g_stop 0
end_monitor

;;;;;;;AI Stuck Fix

monitor_event BattleEnemyUnitAttacksPlayerUnit TrueCondition
    and I_CompareCounter ai_stuck_launch = 1
    and BattleIsMeleeAttack
    and I_BattleIsSiegeBattle
    set_counter ai_stuck_launch 2
end_monitor

monitor_conditions I_CompareCounter ai_stuck_launch = 2
    and I_BattleIsSiegeBattle

if I_CompareCounter enemy_unit_count > 0
and ! I_UnitDestroyed a2u1

    if I_UnitStatus a2u1 moving
    if I_CompareCounter a2u1_status = 0
    set_counter a2u1_status 1
    end_if
    if I_CompareCounter a2u1_status != 1
    set_counter a2u1_status 0
    end_if
    end_if

    if I_UnitStatus a2u1 routing
    if I_CompareCounter a2u1_status = 0
    set_counter a2u1_status 2
    end_if
    if I_CompareCounter a2u1_status != 2
    set_counter a2u1_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u1 moving
    and ! I_UnitStatus a2u1 routing
    set_counter a2u1_status 0
    end_if

    if I_CompareCounter a2u1_status > 0

    if I_UnitDistanceFromPosition a2u1 0,0 >= 150
    and I_UnitDistanceFromPosition a2u1 0,0 < 175
    if I_CompareCounter a2u1_distance != 1
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 1
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 175
    and I_UnitDistanceFromPosition a2u1 0,0 < 200
    if I_CompareCounter a2u1_distance != 2
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 2
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 200
    and I_UnitDistanceFromPosition a2u1 0,0 < 225
    if I_CompareCounter a2u1_distance != 3
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 3
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 225
    and I_UnitDistanceFromPosition a2u1 0,0 < 250
    if I_CompareCounter a2u1_distance != 4
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 4
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 250
    and I_UnitDistanceFromPosition a2u1 0,0 < 275
    if I_CompareCounter a2u1_distance != 5
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 5
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 275
    and I_UnitDistanceFromPosition a2u1 0,0 < 300
    if I_CompareCounter a2u1_distance != 6
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 6
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 300
    and I_UnitDistanceFromPosition a2u1 0,0 < 325
    if I_CompareCounter a2u1_distance != 7
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 7
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 325
    and I_UnitDistanceFromPosition a2u1 0,0 < 350
    if I_CompareCounter a2u1_distance != 8
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 8
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 350
    and I_UnitDistanceFromPosition a2u1 0,0 < 375
    if I_CompareCounter a2u1_distance != 9
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 9
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 375
    and I_UnitDistanceFromPosition a2u1 0,0 < 400
    if I_CompareCounter a2u1_distance != 10
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 10
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 400
    and I_UnitDistanceFromPosition a2u1 0,0 < 425
    if I_CompareCounter a2u1_distance != 11
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 11
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 425
    and I_UnitDistanceFromPosition a2u1 0,0 < 450
    if I_CompareCounter a2u1_distance != 12
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 12
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 450
    and I_UnitDistanceFromPosition a2u1 0,0 < 500
    if I_CompareCounter a2u1_distance != 13
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 13
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 500
    and I_UnitDistanceFromPosition a2u1 0,0 < 550
    if I_CompareCounter a2u1_distance != 14
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 14
    inc_counter a2u1_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u1 0,0 >= 550
    and I_UnitDistanceFromPosition a2u1 0,0 < 600
    if I_CompareCounter a2u1_distance != 15
    set_counter a2u1_stuck 0
    end_if
    set_counter a2u1_distance 15
    inc_counter a2u1_stuck 1
    end_if

    if I_CompareCounter a2u1_stuck = 4
    unit_order_halt a2u1
    unit_set_morale a2u1 wavering
    battle_wait 0.1
    unit_unset_morale a2u1
    release_unit a2u1
    set_counter a2u1_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 1
and ! I_UnitDestroyed a2u2

    if I_UnitStatus a2u2 moving
    if I_CompareCounter a2u2_status = 0
    set_counter a2u2_status 1
    end_if
    if I_CompareCounter a2u2_status != 1
    set_counter a2u2_status 0
    end_if
    end_if

    if I_UnitStatus a2u2 routing
    if I_CompareCounter a2u2_status = 0
    set_counter a2u2_status 2
    end_if
    if I_CompareCounter a2u2_status != 2
    set_counter a2u2_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u2 moving
    and ! I_UnitStatus a2u2 routing
    set_counter a2u2_status 0
    end_if

    if I_CompareCounter a2u2_status > 0

    if I_UnitDistanceFromPosition a2u2 0,0 >= 150
    and I_UnitDistanceFromPosition a2u2 0,0 < 175
    if I_CompareCounter a2u2_distance != 1
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 1
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 175
    and I_UnitDistanceFromPosition a2u2 0,0 < 200
    if I_CompareCounter a2u2_distance != 2
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 2
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 200
    and I_UnitDistanceFromPosition a2u2 0,0 < 225
    if I_CompareCounter a2u2_distance != 3
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 3
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 225
    and I_UnitDistanceFromPosition a2u2 0,0 < 250
    if I_CompareCounter a2u2_distance != 4
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 4
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 250
    and I_UnitDistanceFromPosition a2u2 0,0 < 275
    if I_CompareCounter a2u2_distance != 5
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 5
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 275
    and I_UnitDistanceFromPosition a2u2 0,0 < 300
    if I_CompareCounter a2u2_distance != 6
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 6
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 300
    and I_UnitDistanceFromPosition a2u2 0,0 < 325
    if I_CompareCounter a2u2_distance != 7
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 7
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 325
    and I_UnitDistanceFromPosition a2u2 0,0 < 350
    if I_CompareCounter a2u2_distance != 8
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 8
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 350
    and I_UnitDistanceFromPosition a2u2 0,0 < 375
    if I_CompareCounter a2u2_distance != 9
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 9
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 375
    and I_UnitDistanceFromPosition a2u2 0,0 < 400
    if I_CompareCounter a2u2_distance != 10
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 10
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 400
    and I_UnitDistanceFromPosition a2u2 0,0 < 425
    if I_CompareCounter a2u2_distance != 11
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 11
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 425
    and I_UnitDistanceFromPosition a2u2 0,0 < 450
    if I_CompareCounter a2u2_distance != 12
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 12
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 450
    and I_UnitDistanceFromPosition a2u2 0,0 < 500
    if I_CompareCounter a2u2_distance != 13
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 13
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 500
    and I_UnitDistanceFromPosition a2u2 0,0 < 550
    if I_CompareCounter a2u2_distance != 14
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 14
    inc_counter a2u2_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u2 0,0 >= 550
    and I_UnitDistanceFromPosition a2u2 0,0 < 600
    if I_CompareCounter a2u2_distance != 15
    set_counter a2u2_stuck 0
    end_if
    set_counter a2u2_distance 15
    inc_counter a2u2_stuck 1
    end_if

    if I_CompareCounter a2u2_stuck = 4
    unit_order_halt a2u2
    unit_set_morale a2u2 wavering
    battle_wait 0.1
    unit_unset_morale a2u2
    release_unit a2u2
    set_counter a2u2_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 2
and ! I_UnitDestroyed a2u3

    if I_UnitStatus a2u3 moving
    if I_CompareCounter a2u3_status = 0
    set_counter a2u3_status 1
    end_if
    if I_CompareCounter a2u3_status != 1
    set_counter a2u3_status 0
    end_if
    end_if

    if I_UnitStatus a2u3 routing
    if I_CompareCounter a2u3_status = 0
    set_counter a2u3_status 2
    end_if
    if I_CompareCounter a2u3_status != 2
    set_counter a2u3_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u3 moving
    and ! I_UnitStatus a2u3 routing
    set_counter a2u3_status 0
    end_if

    if I_CompareCounter a2u3_status > 0

    if I_UnitDistanceFromPosition a2u3 0,0 >= 150
    and I_UnitDistanceFromPosition a2u3 0,0 < 175
    if I_CompareCounter a2u3_distance != 1
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 1
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 175
    and I_UnitDistanceFromPosition a2u3 0,0 < 200
    if I_CompareCounter a2u3_distance != 2
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 2
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 200
    and I_UnitDistanceFromPosition a2u3 0,0 < 225
    if I_CompareCounter a2u3_distance != 3
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 3
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 225
    and I_UnitDistanceFromPosition a2u3 0,0 < 250
    if I_CompareCounter a2u3_distance != 4
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 4
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 250
    and I_UnitDistanceFromPosition a2u3 0,0 < 275
    if I_CompareCounter a2u3_distance != 5
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 5
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 275
    and I_UnitDistanceFromPosition a2u3 0,0 < 300
    if I_CompareCounter a2u3_distance != 6
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 6
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 300
    and I_UnitDistanceFromPosition a2u3 0,0 < 325
    if I_CompareCounter a2u3_distance != 7
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 7
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 325
    and I_UnitDistanceFromPosition a2u3 0,0 < 350
    if I_CompareCounter a2u3_distance != 8
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 8
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 350
    and I_UnitDistanceFromPosition a2u3 0,0 < 375
    if I_CompareCounter a2u3_distance != 9
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 9
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 375
    and I_UnitDistanceFromPosition a2u3 0,0 < 400
    if I_CompareCounter a2u3_distance != 10
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 10
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 400
    and I_UnitDistanceFromPosition a2u3 0,0 < 425
    if I_CompareCounter a2u3_distance != 11
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 11
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 425
    and I_UnitDistanceFromPosition a2u3 0,0 < 450
    if I_CompareCounter a2u3_distance != 12
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 12
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 450
    and I_UnitDistanceFromPosition a2u3 0,0 < 500
    if I_CompareCounter a2u3_distance != 13
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 13
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 500
    and I_UnitDistanceFromPosition a2u3 0,0 < 550
    if I_CompareCounter a2u3_distance != 14
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 14
    inc_counter a2u3_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u3 0,0 >= 550
    and I_UnitDistanceFromPosition a2u3 0,0 < 600
    if I_CompareCounter a2u3_distance != 15
    set_counter a2u3_stuck 0
    end_if
    set_counter a2u3_distance 15
    inc_counter a2u3_stuck 1
    end_if

    if I_CompareCounter a2u3_stuck = 4
    unit_order_halt a2u3
    unit_set_morale a2u3 wavering
    battle_wait 0.1
    unit_unset_morale a2u3
    release_unit a2u3
    set_counter a2u3_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 3
and ! I_UnitDestroyed a2u4

    if I_UnitStatus a2u4 moving
    if I_CompareCounter a2u4_status = 0
    set_counter a2u4_status 1
    end_if
    if I_CompareCounter a2u4_status != 1
    set_counter a2u4_status 0
    end_if
    end_if

    if I_UnitStatus a2u4 routing
    if I_CompareCounter a2u4_status = 0
    set_counter a2u4_status 2
    end_if
    if I_CompareCounter a2u4_status != 2
    set_counter a2u4_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u4 moving
    and ! I_UnitStatus a2u4 routing
    set_counter a2u4_status 0
    end_if

    if I_CompareCounter a2u4_status > 0

    if I_UnitDistanceFromPosition a2u4 0,0 >= 150
    and I_UnitDistanceFromPosition a2u4 0,0 < 175
    if I_CompareCounter a2u4_distance != 1
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 1
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 175
    and I_UnitDistanceFromPosition a2u4 0,0 < 200
    if I_CompareCounter a2u4_distance != 2
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 2
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 200
    and I_UnitDistanceFromPosition a2u4 0,0 < 225
    if I_CompareCounter a2u4_distance != 3
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 3
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 225
    and I_UnitDistanceFromPosition a2u4 0,0 < 250
    if I_CompareCounter a2u4_distance != 4
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 4
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 250
    and I_UnitDistanceFromPosition a2u4 0,0 < 275
    if I_CompareCounter a2u4_distance != 5
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 5
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 275
    and I_UnitDistanceFromPosition a2u4 0,0 < 300
    if I_CompareCounter a2u4_distance != 6
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 6
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 300
    and I_UnitDistanceFromPosition a2u4 0,0 < 325
    if I_CompareCounter a2u4_distance != 7
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 7
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 325
    and I_UnitDistanceFromPosition a2u4 0,0 < 350
    if I_CompareCounter a2u4_distance != 8
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 8
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 350
    and I_UnitDistanceFromPosition a2u4 0,0 < 375
    if I_CompareCounter a2u4_distance != 9
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 9
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 375
    and I_UnitDistanceFromPosition a2u4 0,0 < 400
    if I_CompareCounter a2u4_distance != 10
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 10
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 400
    and I_UnitDistanceFromPosition a2u4 0,0 < 425
    if I_CompareCounter a2u4_distance != 11
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 11
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 425
    and I_UnitDistanceFromPosition a2u4 0,0 < 450
    if I_CompareCounter a2u4_distance != 12
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 12
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 450
    and I_UnitDistanceFromPosition a2u4 0,0 < 500
    if I_CompareCounter a2u4_distance != 13
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 13
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 500
    and I_UnitDistanceFromPosition a2u4 0,0 < 550
    if I_CompareCounter a2u4_distance != 14
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 14
    inc_counter a2u4_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u4 0,0 >= 550
    and I_UnitDistanceFromPosition a2u4 0,0 < 600
    if I_CompareCounter a2u4_distance != 15
    set_counter a2u4_stuck 0
    end_if
    set_counter a2u4_distance 15
    inc_counter a2u4_stuck 1
    end_if

    if I_CompareCounter a2u4_stuck = 4
    unit_order_halt a2u4
    unit_set_morale a2u4 wavering
    battle_wait 0.1
    unit_unset_morale a2u4
    release_unit a2u4
    set_counter a2u4_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 4
and ! I_UnitDestroyed a2u5

    if I_UnitStatus a2u5 moving
    if I_CompareCounter a2u5_status = 0
    set_counter a2u5_status 1
    end_if
    if I_CompareCounter a2u5_status != 1
    set_counter a2u5_status 0
    end_if
    end_if

    if I_UnitStatus a2u5 routing
    if I_CompareCounter a2u5_status = 0
    set_counter a2u5_status 2
    end_if
    if I_CompareCounter a2u5_status != 2
    set_counter a2u5_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u5 moving
    and ! I_UnitStatus a2u5 routing
    set_counter a2u5_status 0
    end_if

    if I_CompareCounter a2u5_status > 0

    if I_UnitDistanceFromPosition a2u5 0,0 >= 150
    and I_UnitDistanceFromPosition a2u5 0,0 < 175
    if I_CompareCounter a2u5_distance != 1
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 1
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 175
    and I_UnitDistanceFromPosition a2u5 0,0 < 200
    if I_CompareCounter a2u5_distance != 2
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 2
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 200
    and I_UnitDistanceFromPosition a2u5 0,0 < 225
    if I_CompareCounter a2u5_distance != 3
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 3
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 225
    and I_UnitDistanceFromPosition a2u5 0,0 < 250
    if I_CompareCounter a2u5_distance != 4
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 4
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 250
    and I_UnitDistanceFromPosition a2u5 0,0 < 275
    if I_CompareCounter a2u5_distance != 5
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 5
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 275
    and I_UnitDistanceFromPosition a2u5 0,0 < 300
    if I_CompareCounter a2u5_distance != 6
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 6
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 300
    and I_UnitDistanceFromPosition a2u5 0,0 < 325
    if I_CompareCounter a2u5_distance != 7
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 7
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 325
    and I_UnitDistanceFromPosition a2u5 0,0 < 350
    if I_CompareCounter a2u5_distance != 8
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 8
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 350
    and I_UnitDistanceFromPosition a2u5 0,0 < 375
    if I_CompareCounter a2u5_distance != 9
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 9
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 375
    and I_UnitDistanceFromPosition a2u5 0,0 < 400
    if I_CompareCounter a2u5_distance != 10
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 10
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 400
    and I_UnitDistanceFromPosition a2u5 0,0 < 425
    if I_CompareCounter a2u5_distance != 11
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 11
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 425
    and I_UnitDistanceFromPosition a2u5 0,0 < 450
    if I_CompareCounter a2u5_distance != 12
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 12
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 450
    and I_UnitDistanceFromPosition a2u5 0,0 < 500
    if I_CompareCounter a2u5_distance != 13
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 13
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 500
    and I_UnitDistanceFromPosition a2u5 0,0 < 550
    if I_CompareCounter a2u5_distance != 14
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 14
    inc_counter a2u5_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u5 0,0 >= 550
    and I_UnitDistanceFromPosition a2u5 0,0 < 600
    if I_CompareCounter a2u5_distance != 15
    set_counter a2u5_stuck 0
    end_if
    set_counter a2u5_distance 15
    inc_counter a2u5_stuck 1
    end_if

    if I_CompareCounter a2u5_stuck = 4
    unit_order_halt a2u5
    unit_set_morale a2u5 wavering
    battle_wait 0.1
    unit_unset_morale a2u5
    release_unit a2u5
    set_counter a2u5_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 5
and ! I_UnitDestroyed a2u6

    if I_UnitStatus a2u6 moving
    if I_CompareCounter a2u6_status = 0
    set_counter a2u6_status 1
    end_if
    if I_CompareCounter a2u6_status != 1
    set_counter a2u6_status 0
    end_if
    end_if

    if I_UnitStatus a2u6 routing
    if I_CompareCounter a2u6_status = 0
    set_counter a2u6_status 2
    end_if
    if I_CompareCounter a2u6_status != 2
    set_counter a2u6_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u6 moving
    and ! I_UnitStatus a2u6 routing
    set_counter a2u6_status 0
    end_if

    if I_CompareCounter a2u6_status > 0

    if I_UnitDistanceFromPosition a2u6 0,0 >= 150
    and I_UnitDistanceFromPosition a2u6 0,0 < 175
    if I_CompareCounter a2u6_distance != 1
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 1
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 175
    and I_UnitDistanceFromPosition a2u6 0,0 < 200
    if I_CompareCounter a2u6_distance != 2
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 2
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 200
    and I_UnitDistanceFromPosition a2u6 0,0 < 225
    if I_CompareCounter a2u6_distance != 3
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 3
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 225
    and I_UnitDistanceFromPosition a2u6 0,0 < 250
    if I_CompareCounter a2u6_distance != 4
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 4
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 250
    and I_UnitDistanceFromPosition a2u6 0,0 < 275
    if I_CompareCounter a2u6_distance != 5
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 5
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 275
    and I_UnitDistanceFromPosition a2u6 0,0 < 300
    if I_CompareCounter a2u6_distance != 6
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 6
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 300
    and I_UnitDistanceFromPosition a2u6 0,0 < 325
    if I_CompareCounter a2u6_distance != 7
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 7
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 325
    and I_UnitDistanceFromPosition a2u6 0,0 < 350
    if I_CompareCounter a2u6_distance != 8
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 8
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 350
    and I_UnitDistanceFromPosition a2u6 0,0 < 375
    if I_CompareCounter a2u6_distance != 9
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 9
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 375
    and I_UnitDistanceFromPosition a2u6 0,0 < 400
    if I_CompareCounter a2u6_distance != 10
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 10
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 400
    and I_UnitDistanceFromPosition a2u6 0,0 < 425
    if I_CompareCounter a2u6_distance != 11
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 11
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 425
    and I_UnitDistanceFromPosition a2u6 0,0 < 450
    if I_CompareCounter a2u6_distance != 12
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 12
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 450
    and I_UnitDistanceFromPosition a2u6 0,0 < 500
    if I_CompareCounter a2u6_distance != 13
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 13
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 500
    and I_UnitDistanceFromPosition a2u6 0,0 < 550
    if I_CompareCounter a2u6_distance != 14
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 14
    inc_counter a2u6_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u6 0,0 >= 550
    and I_UnitDistanceFromPosition a2u6 0,0 < 600
    if I_CompareCounter a2u6_distance != 15
    set_counter a2u6_stuck 0
    end_if
    set_counter a2u6_distance 15
    inc_counter a2u6_stuck 1
    end_if

    if I_CompareCounter a2u6_stuck = 4
    unit_order_halt a2u6
    unit_set_morale a2u6 wavering
    battle_wait 0.1
    unit_unset_morale a2u6
    release_unit a2u6
    set_counter a2u6_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 6
and ! I_UnitDestroyed a2u7

    if I_UnitStatus a2u7 moving
    if I_CompareCounter a2u7_status = 0
    set_counter a2u7_status 1
    end_if
    if I_CompareCounter a2u7_status != 1
    set_counter a2u7_status 0
    end_if
    end_if

    if I_UnitStatus a2u7 routing
    if I_CompareCounter a2u7_status = 0
    set_counter a2u7_status 2
    end_if
    if I_CompareCounter a2u7_status != 2
    set_counter a2u7_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u7 moving
    and ! I_UnitStatus a2u7 routing
    set_counter a2u7_status 0
    end_if

    if I_CompareCounter a2u7_status > 0

    if I_UnitDistanceFromPosition a2u7 0,0 >= 150
    and I_UnitDistanceFromPosition a2u7 0,0 < 175
    if I_CompareCounter a2u7_distance != 1
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 1
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 175
    and I_UnitDistanceFromPosition a2u7 0,0 < 200
    if I_CompareCounter a2u7_distance != 2
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 2
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 200
    and I_UnitDistanceFromPosition a2u7 0,0 < 225
    if I_CompareCounter a2u7_distance != 3
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 3
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 225
    and I_UnitDistanceFromPosition a2u7 0,0 < 250
    if I_CompareCounter a2u7_distance != 4
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 4
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 250
    and I_UnitDistanceFromPosition a2u7 0,0 < 275
    if I_CompareCounter a2u7_distance != 5
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 5
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 275
    and I_UnitDistanceFromPosition a2u7 0,0 < 300
    if I_CompareCounter a2u7_distance != 6
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 6
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 300
    and I_UnitDistanceFromPosition a2u7 0,0 < 325
    if I_CompareCounter a2u7_distance != 7
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 7
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 325
    and I_UnitDistanceFromPosition a2u7 0,0 < 350
    if I_CompareCounter a2u7_distance != 8
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 8
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 350
    and I_UnitDistanceFromPosition a2u7 0,0 < 375
    if I_CompareCounter a2u7_distance != 9
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 9
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 375
    and I_UnitDistanceFromPosition a2u7 0,0 < 400
    if I_CompareCounter a2u7_distance != 10
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 10
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 400
    and I_UnitDistanceFromPosition a2u7 0,0 < 425
    if I_CompareCounter a2u7_distance != 11
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 11
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 425
    and I_UnitDistanceFromPosition a2u7 0,0 < 450
    if I_CompareCounter a2u7_distance != 12
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 12
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 450
    and I_UnitDistanceFromPosition a2u7 0,0 < 500
    if I_CompareCounter a2u7_distance != 13
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 13
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 500
    and I_UnitDistanceFromPosition a2u7 0,0 < 550
    if I_CompareCounter a2u7_distance != 14
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 14
    inc_counter a2u7_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u7 0,0 >= 550
    and I_UnitDistanceFromPosition a2u7 0,0 < 600
    if I_CompareCounter a2u7_distance != 15
    set_counter a2u7_stuck 0
    end_if
    set_counter a2u7_distance 15
    inc_counter a2u7_stuck 1
    end_if

    if I_CompareCounter a2u7_stuck = 4
    unit_order_halt a2u7
    unit_set_morale a2u7 wavering
    battle_wait 0.1
    unit_unset_morale a2u7
    release_unit a2u7
    set_counter a2u7_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 7
and ! I_UnitDestroyed a2u8

    if I_UnitStatus a2u8 moving
    if I_CompareCounter a2u8_status = 0
    set_counter a2u8_status 1
    end_if
    if I_CompareCounter a2u8_status != 1
    set_counter a2u8_status 0
    end_if
    end_if

    if I_UnitStatus a2u8 routing
    if I_CompareCounter a2u8_status = 0
    set_counter a2u8_status 2
    end_if
    if I_CompareCounter a2u8_status != 2
    set_counter a2u8_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u8 moving
    and ! I_UnitStatus a2u8 routing
    set_counter a2u8_status 0
    end_if

    if I_CompareCounter a2u8_status > 0

    if I_UnitDistanceFromPosition a2u8 0,0 >= 150
    and I_UnitDistanceFromPosition a2u8 0,0 < 175
    if I_CompareCounter a2u8_distance != 1
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 1
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 175
    and I_UnitDistanceFromPosition a2u8 0,0 < 200
    if I_CompareCounter a2u8_distance != 2
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 2
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 200
    and I_UnitDistanceFromPosition a2u8 0,0 < 225
    if I_CompareCounter a2u8_distance != 3
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 3
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 225
    and I_UnitDistanceFromPosition a2u8 0,0 < 250
    if I_CompareCounter a2u8_distance != 4
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 4
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 250
    and I_UnitDistanceFromPosition a2u8 0,0 < 275
    if I_CompareCounter a2u8_distance != 5
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 5
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 275
    and I_UnitDistanceFromPosition a2u8 0,0 < 300
    if I_CompareCounter a2u8_distance != 6
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 6
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 300
    and I_UnitDistanceFromPosition a2u8 0,0 < 325
    if I_CompareCounter a2u8_distance != 7
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 7
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 325
    and I_UnitDistanceFromPosition a2u8 0,0 < 350
    if I_CompareCounter a2u8_distance != 8
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 8
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 350
    and I_UnitDistanceFromPosition a2u8 0,0 < 375
    if I_CompareCounter a2u8_distance != 9
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 9
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 375
    and I_UnitDistanceFromPosition a2u8 0,0 < 400
    if I_CompareCounter a2u8_distance != 10
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 10
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 400
    and I_UnitDistanceFromPosition a2u8 0,0 < 425
    if I_CompareCounter a2u8_distance != 11
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 11
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 425
    and I_UnitDistanceFromPosition a2u8 0,0 < 450
    if I_CompareCounter a2u8_distance != 12
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 12
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 450
    and I_UnitDistanceFromPosition a2u8 0,0 < 500
    if I_CompareCounter a2u8_distance != 13
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 13
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 500
    and I_UnitDistanceFromPosition a2u8 0,0 < 550
    if I_CompareCounter a2u8_distance != 14
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 14
    inc_counter a2u8_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u8 0,0 >= 550
    and I_UnitDistanceFromPosition a2u8 0,0 < 600
    if I_CompareCounter a2u8_distance != 15
    set_counter a2u8_stuck 0
    end_if
    set_counter a2u8_distance 15
    inc_counter a2u8_stuck 1
    end_if

    if I_CompareCounter a2u8_stuck = 4
    unit_order_halt a2u8
    unit_set_morale a2u8 wavering
    battle_wait 0.1
    unit_unset_morale a2u8
    release_unit a2u8
    set_counter a2u8_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 8
and ! I_UnitDestroyed a2u9

    if I_UnitStatus a2u9 moving
    if I_CompareCounter a2u9_status = 0
    set_counter a2u9_status 1
    end_if
    if I_CompareCounter a2u9_status != 1
    set_counter a2u9_status 0
    end_if
    end_if

    if I_UnitStatus a2u9 routing
    if I_CompareCounter a2u9_status = 0
    set_counter a2u9_status 2
    end_if
    if I_CompareCounter a2u9_status != 2
    set_counter a2u9_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u9 moving
    and ! I_UnitStatus a2u9 routing
    set_counter a2u9_status 0
    end_if

    if I_CompareCounter a2u9_status > 0

    if I_UnitDistanceFromPosition a2u9 0,0 >= 150
    and I_UnitDistanceFromPosition a2u9 0,0 < 175
    if I_CompareCounter a2u9_distance != 1
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 1
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 175
    and I_UnitDistanceFromPosition a2u9 0,0 < 200
    if I_CompareCounter a2u9_distance != 2
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 2
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 200
    and I_UnitDistanceFromPosition a2u9 0,0 < 225
    if I_CompareCounter a2u9_distance != 3
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 3
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 225
    and I_UnitDistanceFromPosition a2u9 0,0 < 250
    if I_CompareCounter a2u9_distance != 4
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 4
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 250
    and I_UnitDistanceFromPosition a2u9 0,0 < 275
    if I_CompareCounter a2u9_distance != 5
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 5
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 275
    and I_UnitDistanceFromPosition a2u9 0,0 < 300
    if I_CompareCounter a2u9_distance != 6
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 6
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 300
    and I_UnitDistanceFromPosition a2u9 0,0 < 325
    if I_CompareCounter a2u9_distance != 7
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 7
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 325
    and I_UnitDistanceFromPosition a2u9 0,0 < 350
    if I_CompareCounter a2u9_distance != 8
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 8
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 350
    and I_UnitDistanceFromPosition a2u9 0,0 < 375
    if I_CompareCounter a2u9_distance != 9
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 9
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 375
    and I_UnitDistanceFromPosition a2u9 0,0 < 400
    if I_CompareCounter a2u9_distance != 10
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 10
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 400
    and I_UnitDistanceFromPosition a2u9 0,0 < 425
    if I_CompareCounter a2u9_distance != 11
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 11
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 425
    and I_UnitDistanceFromPosition a2u9 0,0 < 450
    if I_CompareCounter a2u9_distance != 12
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 12
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 450
    and I_UnitDistanceFromPosition a2u9 0,0 < 500
    if I_CompareCounter a2u9_distance != 13
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 13
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 500
    and I_UnitDistanceFromPosition a2u9 0,0 < 550
    if I_CompareCounter a2u9_distance != 14
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 14
    inc_counter a2u9_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u9 0,0 >= 550
    and I_UnitDistanceFromPosition a2u9 0,0 < 600
    if I_CompareCounter a2u9_distance != 15
    set_counter a2u9_stuck 0
    end_if
    set_counter a2u9_distance 15
    inc_counter a2u9_stuck 1
    end_if

    if I_CompareCounter a2u9_stuck = 4
    unit_order_halt a2u9
    unit_set_morale a2u9 wavering
    battle_wait 0.1
    unit_unset_morale a2u9
    release_unit a2u9
    set_counter a2u9_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 9
and ! I_UnitDestroyed a2u10

    if I_UnitStatus a2u10 moving
    if I_CompareCounter a2u10_status = 0
    set_counter a2u10_status 1
    end_if
    if I_CompareCounter a2u10_status != 1
    set_counter a2u10_status 0
    end_if
    end_if

    if I_UnitStatus a2u10 routing
    if I_CompareCounter a2u10_status = 0
    set_counter a2u10_status 2
    end_if
    if I_CompareCounter a2u10_status != 2
    set_counter a2u10_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u10 moving
    and ! I_UnitStatus a2u10 routing
    set_counter a2u10_status 0
    end_if

    if I_CompareCounter a2u10_status > 0

    if I_UnitDistanceFromPosition a2u10 0,0 >= 150
    and I_UnitDistanceFromPosition a2u10 0,0 < 175
    if I_CompareCounter a2u10_distance != 1
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 1
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 175
    and I_UnitDistanceFromPosition a2u10 0,0 < 200
    if I_CompareCounter a2u10_distance != 2
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 2
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 200
    and I_UnitDistanceFromPosition a2u10 0,0 < 225
    if I_CompareCounter a2u10_distance != 3
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 3
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 225
    and I_UnitDistanceFromPosition a2u10 0,0 < 250
    if I_CompareCounter a2u10_distance != 4
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 4
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 250
    and I_UnitDistanceFromPosition a2u10 0,0 < 275
    if I_CompareCounter a2u10_distance != 5
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 5
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 275
    and I_UnitDistanceFromPosition a2u10 0,0 < 300
    if I_CompareCounter a2u10_distance != 6
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 6
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 300
    and I_UnitDistanceFromPosition a2u10 0,0 < 325
    if I_CompareCounter a2u10_distance != 7
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 7
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 325
    and I_UnitDistanceFromPosition a2u10 0,0 < 350
    if I_CompareCounter a2u10_distance != 8
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 8
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 350
    and I_UnitDistanceFromPosition a2u10 0,0 < 375
    if I_CompareCounter a2u10_distance != 9
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 9
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 375
    and I_UnitDistanceFromPosition a2u10 0,0 < 400
    if I_CompareCounter a2u10_distance != 10
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 10
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 400
    and I_UnitDistanceFromPosition a2u10 0,0 < 425
    if I_CompareCounter a2u10_distance != 11
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 11
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 425
    and I_UnitDistanceFromPosition a2u10 0,0 < 450
    if I_CompareCounter a2u10_distance != 12
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 12
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 450
    and I_UnitDistanceFromPosition a2u10 0,0 < 500
    if I_CompareCounter a2u10_distance != 13
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 13
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 500
    and I_UnitDistanceFromPosition a2u10 0,0 < 550
    if I_CompareCounter a2u10_distance != 14
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 14
    inc_counter a2u10_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u10 0,0 >= 550
    and I_UnitDistanceFromPosition a2u10 0,0 < 600
    if I_CompareCounter a2u10_distance != 15
    set_counter a2u10_stuck 0
    end_if
    set_counter a2u10_distance 15
    inc_counter a2u10_stuck 1
    end_if

    if I_CompareCounter a2u10_stuck = 4
    unit_order_halt a2u10
    unit_set_morale a2u10 wavering
    battle_wait 0.1
    unit_unset_morale a2u10
    release_unit a2u10
    set_counter a2u10_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 10
and ! I_UnitDestroyed a2u11

    if I_UnitStatus a2u11 moving
    if I_CompareCounter a2u11_status = 0
    set_counter a2u11_status 1
    end_if
    if I_CompareCounter a2u11_status != 1
    set_counter a2u11_status 0
    end_if
    end_if

    if I_UnitStatus a2u11 routing
    if I_CompareCounter a2u11_status = 0
    set_counter a2u11_status 2
    end_if
    if I_CompareCounter a2u11_status != 2
    set_counter a2u11_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u11 moving
    and ! I_UnitStatus a2u11 routing
    set_counter a2u11_status 0
    end_if

    if I_CompareCounter a2u11_status > 0

    if I_UnitDistanceFromPosition a2u11 0,0 >= 150
    and I_UnitDistanceFromPosition a2u11 0,0 < 175
    if I_CompareCounter a2u11_distance != 1
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 1
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 175
    and I_UnitDistanceFromPosition a2u11 0,0 < 200
    if I_CompareCounter a2u11_distance != 2
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 2
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 200
    and I_UnitDistanceFromPosition a2u11 0,0 < 225
    if I_CompareCounter a2u11_distance != 3
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 3
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 225
    and I_UnitDistanceFromPosition a2u11 0,0 < 250
    if I_CompareCounter a2u11_distance != 4
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 4
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 250
    and I_UnitDistanceFromPosition a2u11 0,0 < 275
    if I_CompareCounter a2u11_distance != 5
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 5
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 275
    and I_UnitDistanceFromPosition a2u11 0,0 < 300
    if I_CompareCounter a2u11_distance != 6
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 6
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 300
    and I_UnitDistanceFromPosition a2u11 0,0 < 325
    if I_CompareCounter a2u11_distance != 7
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 7
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 325
    and I_UnitDistanceFromPosition a2u11 0,0 < 350
    if I_CompareCounter a2u11_distance != 8
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 8
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 350
    and I_UnitDistanceFromPosition a2u11 0,0 < 375
    if I_CompareCounter a2u11_distance != 9
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 9
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 375
    and I_UnitDistanceFromPosition a2u11 0,0 < 400
    if I_CompareCounter a2u11_distance != 10
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 10
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 400
    and I_UnitDistanceFromPosition a2u11 0,0 < 425
    if I_CompareCounter a2u11_distance != 11
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 11
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 425
    and I_UnitDistanceFromPosition a2u11 0,0 < 450
    if I_CompareCounter a2u11_distance != 12
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 12
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 450
    and I_UnitDistanceFromPosition a2u11 0,0 < 500
    if I_CompareCounter a2u11_distance != 13
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 13
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 500
    and I_UnitDistanceFromPosition a2u11 0,0 < 550
    if I_CompareCounter a2u11_distance != 14
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 14
    inc_counter a2u11_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u11 0,0 >= 550
    and I_UnitDistanceFromPosition a2u11 0,0 < 600
    if I_CompareCounter a2u11_distance != 15
    set_counter a2u11_stuck 0
    end_if
    set_counter a2u11_distance 15
    inc_counter a2u11_stuck 1
    end_if

    if I_CompareCounter a2u11_stuck = 4
    unit_order_halt a2u11
    unit_set_morale a2u11 wavering
    battle_wait 0.1
    unit_unset_morale a2u11
    release_unit a2u11
    set_counter a2u11_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 11
and ! I_UnitDestroyed a2u12

    if I_UnitStatus a2u12 moving
    if I_CompareCounter a2u12_status = 0
    set_counter a2u12_status 1
    end_if
    if I_CompareCounter a2u12_status != 1
    set_counter a2u12_status 0
    end_if
    end_if

    if I_UnitStatus a2u12 routing
    if I_CompareCounter a2u12_status = 0
    set_counter a2u12_status 2
    end_if
    if I_CompareCounter a2u12_status != 2
    set_counter a2u12_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u12 moving
    and ! I_UnitStatus a2u12 routing
    set_counter a2u12_status 0
    end_if

    if I_CompareCounter a2u12_status > 0

    if I_UnitDistanceFromPosition a2u12 0,0 >= 150
    and I_UnitDistanceFromPosition a2u12 0,0 < 175
    if I_CompareCounter a2u12_distance != 1
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 1
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 175
    and I_UnitDistanceFromPosition a2u12 0,0 < 200
    if I_CompareCounter a2u12_distance != 2
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 2
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 200
    and I_UnitDistanceFromPosition a2u12 0,0 < 225
    if I_CompareCounter a2u12_distance != 3
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 3
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 225
    and I_UnitDistanceFromPosition a2u12 0,0 < 250
    if I_CompareCounter a2u12_distance != 4
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 4
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 250
    and I_UnitDistanceFromPosition a2u12 0,0 < 275
    if I_CompareCounter a2u12_distance != 5
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 5
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 275
    and I_UnitDistanceFromPosition a2u12 0,0 < 300
    if I_CompareCounter a2u12_distance != 6
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 6
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 300
    and I_UnitDistanceFromPosition a2u12 0,0 < 325
    if I_CompareCounter a2u12_distance != 7
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 7
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 325
    and I_UnitDistanceFromPosition a2u12 0,0 < 350
    if I_CompareCounter a2u12_distance != 8
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 8
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 350
    and I_UnitDistanceFromPosition a2u12 0,0 < 375
    if I_CompareCounter a2u12_distance != 9
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 9
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 375
    and I_UnitDistanceFromPosition a2u12 0,0 < 400
    if I_CompareCounter a2u12_distance != 10
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 10
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 400
    and I_UnitDistanceFromPosition a2u12 0,0 < 425
    if I_CompareCounter a2u12_distance != 11
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 11
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 425
    and I_UnitDistanceFromPosition a2u12 0,0 < 450
    if I_CompareCounter a2u12_distance != 12
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 12
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 450
    and I_UnitDistanceFromPosition a2u12 0,0 < 500
    if I_CompareCounter a2u12_distance != 13
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 13
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 500
    and I_UnitDistanceFromPosition a2u12 0,0 < 550
    if I_CompareCounter a2u12_distance != 14
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 14
    inc_counter a2u12_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u12 0,0 >= 550
    and I_UnitDistanceFromPosition a2u12 0,0 < 600
    if I_CompareCounter a2u12_distance != 15
    set_counter a2u12_stuck 0
    end_if
    set_counter a2u12_distance 15
    inc_counter a2u12_stuck 1
    end_if

    if I_CompareCounter a2u12_stuck = 4
    unit_order_halt a2u12
    unit_set_morale a2u12 wavering
    battle_wait 0.1
    unit_unset_morale a2u12
    release_unit a2u12
    set_counter a2u12_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 12
and ! I_UnitDestroyed a2u13

    if I_UnitStatus a2u13 moving
    if I_CompareCounter a2u13_status = 0
    set_counter a2u13_status 1
    end_if
    if I_CompareCounter a2u13_status != 1
    set_counter a2u13_status 0
    end_if
    end_if

    if I_UnitStatus a2u13 routing
    if I_CompareCounter a2u13_status = 0
    set_counter a2u13_status 2
    end_if
    if I_CompareCounter a2u13_status != 2
    set_counter a2u13_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u13 moving
    and ! I_UnitStatus a2u13 routing
    set_counter a2u13_status 0
    end_if

    if I_CompareCounter a2u13_status > 0

    if I_UnitDistanceFromPosition a2u13 0,0 >= 150
    and I_UnitDistanceFromPosition a2u13 0,0 < 175
    if I_CompareCounter a2u13_distance != 1
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 1
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 175
    and I_UnitDistanceFromPosition a2u13 0,0 < 200
    if I_CompareCounter a2u13_distance != 2
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 2
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 200
    and I_UnitDistanceFromPosition a2u13 0,0 < 225
    if I_CompareCounter a2u13_distance != 3
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 3
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 225
    and I_UnitDistanceFromPosition a2u13 0,0 < 250
    if I_CompareCounter a2u13_distance != 4
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 4
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 250
    and I_UnitDistanceFromPosition a2u13 0,0 < 275
    if I_CompareCounter a2u13_distance != 5
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 5
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 275
    and I_UnitDistanceFromPosition a2u13 0,0 < 300
    if I_CompareCounter a2u13_distance != 6
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 6
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 300
    and I_UnitDistanceFromPosition a2u13 0,0 < 325
    if I_CompareCounter a2u13_distance != 7
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 7
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 325
    and I_UnitDistanceFromPosition a2u13 0,0 < 350
    if I_CompareCounter a2u13_distance != 8
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 8
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 350
    and I_UnitDistanceFromPosition a2u13 0,0 < 375
    if I_CompareCounter a2u13_distance != 9
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 9
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 375
    and I_UnitDistanceFromPosition a2u13 0,0 < 400
    if I_CompareCounter a2u13_distance != 10
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 10
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 400
    and I_UnitDistanceFromPosition a2u13 0,0 < 425
    if I_CompareCounter a2u13_distance != 11
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 11
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 425
    and I_UnitDistanceFromPosition a2u13 0,0 < 450
    if I_CompareCounter a2u13_distance != 12
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 12
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 450
    and I_UnitDistanceFromPosition a2u13 0,0 < 500
    if I_CompareCounter a2u13_distance != 13
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 13
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 500
    and I_UnitDistanceFromPosition a2u13 0,0 < 550
    if I_CompareCounter a2u13_distance != 14
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 14
    inc_counter a2u13_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u13 0,0 >= 550
    and I_UnitDistanceFromPosition a2u13 0,0 < 600
    if I_CompareCounter a2u13_distance != 15
    set_counter a2u13_stuck 0
    end_if
    set_counter a2u13_distance 15
    inc_counter a2u13_stuck 1
    end_if

    if I_CompareCounter a2u13_stuck = 4
    unit_order_halt a2u13
    unit_set_morale a2u13 wavering
    battle_wait 0.1
    unit_unset_morale a2u13
    release_unit a2u13
    set_counter a2u13_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 13
and ! I_UnitDestroyed a2u14

    if I_UnitStatus a2u14 moving
    if I_CompareCounter a2u14_status = 0
    set_counter a2u14_status 1
    end_if
    if I_CompareCounter a2u14_status != 1
    set_counter a2u14_status 0
    end_if
    end_if

    if I_UnitStatus a2u14 routing
    if I_CompareCounter a2u14_status = 0
    set_counter a2u14_status 2
    end_if
    if I_CompareCounter a2u14_status != 2
    set_counter a2u14_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u14 moving
    and ! I_UnitStatus a2u14 routing
    set_counter a2u14_status 0
    end_if

    if I_CompareCounter a2u14_status > 0

    if I_UnitDistanceFromPosition a2u14 0,0 >= 150
    and I_UnitDistanceFromPosition a2u14 0,0 < 175
    if I_CompareCounter a2u14_distance != 1
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 1
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 175
    and I_UnitDistanceFromPosition a2u14 0,0 < 200
    if I_CompareCounter a2u14_distance != 2
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 2
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 200
    and I_UnitDistanceFromPosition a2u14 0,0 < 225
    if I_CompareCounter a2u14_distance != 3
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 3
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 225
    and I_UnitDistanceFromPosition a2u14 0,0 < 250
    if I_CompareCounter a2u14_distance != 4
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 4
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 250
    and I_UnitDistanceFromPosition a2u14 0,0 < 275
    if I_CompareCounter a2u14_distance != 5
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 5
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 275
    and I_UnitDistanceFromPosition a2u14 0,0 < 300
    if I_CompareCounter a2u14_distance != 6
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 6
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 300
    and I_UnitDistanceFromPosition a2u14 0,0 < 325
    if I_CompareCounter a2u14_distance != 7
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 7
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 325
    and I_UnitDistanceFromPosition a2u14 0,0 < 350
    if I_CompareCounter a2u14_distance != 8
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 8
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 350
    and I_UnitDistanceFromPosition a2u14 0,0 < 375
    if I_CompareCounter a2u14_distance != 9
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 9
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 375
    and I_UnitDistanceFromPosition a2u14 0,0 < 400
    if I_CompareCounter a2u14_distance != 10
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 10
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 400
    and I_UnitDistanceFromPosition a2u14 0,0 < 425
    if I_CompareCounter a2u14_distance != 11
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 11
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 425
    and I_UnitDistanceFromPosition a2u14 0,0 < 450
    if I_CompareCounter a2u14_distance != 12
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 12
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 450
    and I_UnitDistanceFromPosition a2u14 0,0 < 500
    if I_CompareCounter a2u14_distance != 13
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 13
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 500
    and I_UnitDistanceFromPosition a2u14 0,0 < 550
    if I_CompareCounter a2u14_distance != 14
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 14
    inc_counter a2u14_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u14 0,0 >= 550
    and I_UnitDistanceFromPosition a2u14 0,0 < 600
    if I_CompareCounter a2u14_distance != 15
    set_counter a2u14_stuck 0
    end_if
    set_counter a2u14_distance 15
    inc_counter a2u14_stuck 1
    end_if

    if I_CompareCounter a2u14_stuck = 4
    unit_order_halt a2u14
    unit_set_morale a2u14 wavering
    battle_wait 0.1
    unit_unset_morale a2u14
    release_unit a2u14
    set_counter a2u14_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 14
and ! I_UnitDestroyed a2u15

    if I_UnitStatus a2u15 moving
    if I_CompareCounter a2u15_status = 0
    set_counter a2u15_status 1
    end_if
    if I_CompareCounter a2u15_status != 1
    set_counter a2u15_status 0
    end_if
    end_if

    if I_UnitStatus a2u15 routing
    if I_CompareCounter a2u15_status = 0
    set_counter a2u15_status 2
    end_if
    if I_CompareCounter a2u15_status != 2
    set_counter a2u15_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u15 moving
    and ! I_UnitStatus a2u15 routing
    set_counter a2u15_status 0
    end_if

    if I_CompareCounter a2u15_status > 0

    if I_UnitDistanceFromPosition a2u15 0,0 >= 150
    and I_UnitDistanceFromPosition a2u15 0,0 < 175
    if I_CompareCounter a2u15_distance != 1
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 1
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 175
    and I_UnitDistanceFromPosition a2u15 0,0 < 200
    if I_CompareCounter a2u15_distance != 2
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 2
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 200
    and I_UnitDistanceFromPosition a2u15 0,0 < 225
    if I_CompareCounter a2u15_distance != 3
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 3
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 225
    and I_UnitDistanceFromPosition a2u15 0,0 < 250
    if I_CompareCounter a2u15_distance != 4
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 4
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 250
    and I_UnitDistanceFromPosition a2u15 0,0 < 275
    if I_CompareCounter a2u15_distance != 5
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 5
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 275
    and I_UnitDistanceFromPosition a2u15 0,0 < 300
    if I_CompareCounter a2u15_distance != 6
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 6
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 300
    and I_UnitDistanceFromPosition a2u15 0,0 < 325
    if I_CompareCounter a2u15_distance != 7
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 7
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 325
    and I_UnitDistanceFromPosition a2u15 0,0 < 350
    if I_CompareCounter a2u15_distance != 8
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 8
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 350
    and I_UnitDistanceFromPosition a2u15 0,0 < 375
    if I_CompareCounter a2u15_distance != 9
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 9
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 375
    and I_UnitDistanceFromPosition a2u15 0,0 < 400
    if I_CompareCounter a2u15_distance != 10
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 10
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 400
    and I_UnitDistanceFromPosition a2u15 0,0 < 425
    if I_CompareCounter a2u15_distance != 11
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 11
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 425
    and I_UnitDistanceFromPosition a2u15 0,0 < 450
    if I_CompareCounter a2u15_distance != 12
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 12
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 450
    and I_UnitDistanceFromPosition a2u15 0,0 < 500
    if I_CompareCounter a2u15_distance != 13
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 13
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 500
    and I_UnitDistanceFromPosition a2u15 0,0 < 550
    if I_CompareCounter a2u15_distance != 14
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 14
    inc_counter a2u15_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u15 0,0 >= 550
    and I_UnitDistanceFromPosition a2u15 0,0 < 600
    if I_CompareCounter a2u15_distance != 15
    set_counter a2u15_stuck 0
    end_if
    set_counter a2u15_distance 15
    inc_counter a2u15_stuck 1
    end_if

    if I_CompareCounter a2u15_stuck = 4
    unit_order_halt a2u15
    unit_set_morale a2u15 wavering
    battle_wait 0.1
    unit_unset_morale a2u15
    release_unit a2u15
    set_counter a2u15_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 15
and ! I_UnitDestroyed a2u16

    if I_UnitStatus a2u16 moving
    if I_CompareCounter a2u16_status = 0
    set_counter a2u16_status 1
    end_if
    if I_CompareCounter a2u16_status != 1
    set_counter a2u16_status 0
    end_if
    end_if

    if I_UnitStatus a2u16 routing
    if I_CompareCounter a2u16_status = 0
    set_counter a2u16_status 2
    end_if
    if I_CompareCounter a2u16_status != 2
    set_counter a2u16_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u16 moving
    and ! I_UnitStatus a2u16 routing
    set_counter a2u16_status 0
    end_if

    if I_CompareCounter a2u16_status > 0

    if I_UnitDistanceFromPosition a2u16 0,0 >= 150
    and I_UnitDistanceFromPosition a2u16 0,0 < 175
    if I_CompareCounter a2u16_distance != 1
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 1
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 175
    and I_UnitDistanceFromPosition a2u16 0,0 < 200
    if I_CompareCounter a2u16_distance != 2
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 2
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 200
    and I_UnitDistanceFromPosition a2u16 0,0 < 225
    if I_CompareCounter a2u16_distance != 3
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 3
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 225
    and I_UnitDistanceFromPosition a2u16 0,0 < 250
    if I_CompareCounter a2u16_distance != 4
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 4
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 250
    and I_UnitDistanceFromPosition a2u16 0,0 < 275
    if I_CompareCounter a2u16_distance != 5
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 5
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 275
    and I_UnitDistanceFromPosition a2u16 0,0 < 300
    if I_CompareCounter a2u16_distance != 6
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 6
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 300
    and I_UnitDistanceFromPosition a2u16 0,0 < 325
    if I_CompareCounter a2u16_distance != 7
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 7
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 325
    and I_UnitDistanceFromPosition a2u16 0,0 < 350
    if I_CompareCounter a2u16_distance != 8
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 8
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 350
    and I_UnitDistanceFromPosition a2u16 0,0 < 375
    if I_CompareCounter a2u16_distance != 9
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 9
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 375
    and I_UnitDistanceFromPosition a2u16 0,0 < 400
    if I_CompareCounter a2u16_distance != 10
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 10
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 400
    and I_UnitDistanceFromPosition a2u16 0,0 < 425
    if I_CompareCounter a2u16_distance != 11
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 11
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 425
    and I_UnitDistanceFromPosition a2u16 0,0 < 450
    if I_CompareCounter a2u16_distance != 12
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 12
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 450
    and I_UnitDistanceFromPosition a2u16 0,0 < 500
    if I_CompareCounter a2u16_distance != 13
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 13
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 500
    and I_UnitDistanceFromPosition a2u16 0,0 < 550
    if I_CompareCounter a2u16_distance != 14
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 14
    inc_counter a2u16_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u16 0,0 >= 550
    and I_UnitDistanceFromPosition a2u16 0,0 < 600
    if I_CompareCounter a2u16_distance != 15
    set_counter a2u16_stuck 0
    end_if
    set_counter a2u16_distance 15
    inc_counter a2u16_stuck 1
    end_if

    if I_CompareCounter a2u16_stuck = 4
    unit_order_halt a2u16
    unit_set_morale a2u16 wavering
    battle_wait 0.1
    unit_unset_morale a2u16
    release_unit a2u16
    set_counter a2u16_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 16
and ! I_UnitDestroyed a2u17

    if I_UnitStatus a2u17 moving
    if I_CompareCounter a2u17_status = 0
    set_counter a2u17_status 1
    end_if
    if I_CompareCounter a2u17_status != 1
    set_counter a2u17_status 0
    end_if
    end_if

    if I_UnitStatus a2u17 routing
    if I_CompareCounter a2u17_status = 0
    set_counter a2u17_status 2
    end_if
    if I_CompareCounter a2u17_status != 2
    set_counter a2u17_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u17 moving
    and ! I_UnitStatus a2u17 routing
    set_counter a2u17_status 0
    end_if

    if I_CompareCounter a2u17_status > 0

    if I_UnitDistanceFromPosition a2u17 0,0 >= 150
    and I_UnitDistanceFromPosition a2u17 0,0 < 175
    if I_CompareCounter a2u17_distance != 1
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 1
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 175
    and I_UnitDistanceFromPosition a2u17 0,0 < 200
    if I_CompareCounter a2u17_distance != 2
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 2
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 200
    and I_UnitDistanceFromPosition a2u17 0,0 < 225
    if I_CompareCounter a2u17_distance != 3
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 3
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 225
    and I_UnitDistanceFromPosition a2u17 0,0 < 250
    if I_CompareCounter a2u17_distance != 4
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 4
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 250
    and I_UnitDistanceFromPosition a2u17 0,0 < 275
    if I_CompareCounter a2u17_distance != 5
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 5
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 275
    and I_UnitDistanceFromPosition a2u17 0,0 < 300
    if I_CompareCounter a2u17_distance != 6
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 6
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 300
    and I_UnitDistanceFromPosition a2u17 0,0 < 325
    if I_CompareCounter a2u17_distance != 7
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 7
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 325
    and I_UnitDistanceFromPosition a2u17 0,0 < 350
    if I_CompareCounter a2u17_distance != 8
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 8
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 350
    and I_UnitDistanceFromPosition a2u17 0,0 < 375
    if I_CompareCounter a2u17_distance != 9
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 9
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 375
    and I_UnitDistanceFromPosition a2u17 0,0 < 400
    if I_CompareCounter a2u17_distance != 10
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 10
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 400
    and I_UnitDistanceFromPosition a2u17 0,0 < 425
    if I_CompareCounter a2u17_distance != 11
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 11
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 425
    and I_UnitDistanceFromPosition a2u17 0,0 < 450
    if I_CompareCounter a2u17_distance != 12
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 12
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 450
    and I_UnitDistanceFromPosition a2u17 0,0 < 500
    if I_CompareCounter a2u17_distance != 13
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 13
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 500
    and I_UnitDistanceFromPosition a2u17 0,0 < 550
    if I_CompareCounter a2u17_distance != 14
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 14
    inc_counter a2u17_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u17 0,0 >= 550
    and I_UnitDistanceFromPosition a2u17 0,0 < 600
    if I_CompareCounter a2u17_distance != 15
    set_counter a2u17_stuck 0
    end_if
    set_counter a2u17_distance 15
    inc_counter a2u17_stuck 1
    end_if

    if I_CompareCounter a2u17_stuck = 4
    unit_order_halt a2u17
    unit_set_morale a2u17 wavering
    battle_wait 0.1
    unit_unset_morale a2u17
    release_unit a2u17
    set_counter a2u17_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 17
and ! I_UnitDestroyed a2u18

    if I_UnitStatus a2u18 moving
    if I_CompareCounter a2u18_status = 0
    set_counter a2u18_status 1
    end_if
    if I_CompareCounter a2u18_status != 1
    set_counter a2u18_status 0
    end_if
    end_if

    if I_UnitStatus a2u18 routing
    if I_CompareCounter a2u18_status = 0
    set_counter a2u18_status 2
    end_if
    if I_CompareCounter a2u18_status != 2
    set_counter a2u18_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u18 moving
    and ! I_UnitStatus a2u18 routing
    set_counter a2u18_status 0
    end_if

    if I_CompareCounter a2u18_status > 0

    if I_UnitDistanceFromPosition a2u18 0,0 >= 150
    and I_UnitDistanceFromPosition a2u18 0,0 < 175
    if I_CompareCounter a2u18_distance != 1
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 1
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 175
    and I_UnitDistanceFromPosition a2u18 0,0 < 200
    if I_CompareCounter a2u18_distance != 2
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 2
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 200
    and I_UnitDistanceFromPosition a2u18 0,0 < 225
    if I_CompareCounter a2u18_distance != 3
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 3
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 225
    and I_UnitDistanceFromPosition a2u18 0,0 < 250
    if I_CompareCounter a2u18_distance != 4
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 4
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 250
    and I_UnitDistanceFromPosition a2u18 0,0 < 275
    if I_CompareCounter a2u18_distance != 5
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 5
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 275
    and I_UnitDistanceFromPosition a2u18 0,0 < 300
    if I_CompareCounter a2u18_distance != 6
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 6
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 300
    and I_UnitDistanceFromPosition a2u18 0,0 < 325
    if I_CompareCounter a2u18_distance != 7
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 7
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 325
    and I_UnitDistanceFromPosition a2u18 0,0 < 350
    if I_CompareCounter a2u18_distance != 8
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 8
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 350
    and I_UnitDistanceFromPosition a2u18 0,0 < 375
    if I_CompareCounter a2u18_distance != 9
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 9
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 375
    and I_UnitDistanceFromPosition a2u18 0,0 < 400
    if I_CompareCounter a2u18_distance != 10
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 10
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 400
    and I_UnitDistanceFromPosition a2u18 0,0 < 425
    if I_CompareCounter a2u18_distance != 11
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 11
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 425
    and I_UnitDistanceFromPosition a2u18 0,0 < 450
    if I_CompareCounter a2u18_distance != 12
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 12
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 450
    and I_UnitDistanceFromPosition a2u18 0,0 < 500
    if I_CompareCounter a2u18_distance != 13
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 13
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 500
    and I_UnitDistanceFromPosition a2u18 0,0 < 550
    if I_CompareCounter a2u18_distance != 14
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 14
    inc_counter a2u18_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u18 0,0 >= 550
    and I_UnitDistanceFromPosition a2u18 0,0 < 600
    if I_CompareCounter a2u18_distance != 15
    set_counter a2u18_stuck 0
    end_if
    set_counter a2u18_distance 15
    inc_counter a2u18_stuck 1
    end_if

    if I_CompareCounter a2u18_stuck = 4
    unit_order_halt a2u18
    unit_set_morale a2u18 wavering
    battle_wait 0.1
    unit_unset_morale a2u18
    release_unit a2u18
    set_counter a2u18_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count > 18
and ! I_UnitDestroyed a2u19

    if I_UnitStatus a2u19 moving
    if I_CompareCounter a2u19_status = 0
    set_counter a2u19_status 1
    end_if
    if I_CompareCounter a2u19_status != 1
    set_counter a2u19_status 0
    end_if
    end_if

    if I_UnitStatus a2u19 routing
    if I_CompareCounter a2u19_status = 0
    set_counter a2u19_status 2
    end_if
    if I_CompareCounter a2u19_status != 2
    set_counter a2u19_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u19 moving
    and ! I_UnitStatus a2u19 routing
    set_counter a2u19_status 0
    end_if

    if I_CompareCounter a2u19_status > 0

    if I_UnitDistanceFromPosition a2u19 0,0 >= 150
    and I_UnitDistanceFromPosition a2u19 0,0 < 175
    if I_CompareCounter a2u19_distance != 1
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 1
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 175
    and I_UnitDistanceFromPosition a2u19 0,0 < 200
    if I_CompareCounter a2u19_distance != 2
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 2
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 200
    and I_UnitDistanceFromPosition a2u19 0,0 < 225
    if I_CompareCounter a2u19_distance != 3
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 3
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 225
    and I_UnitDistanceFromPosition a2u19 0,0 < 250
    if I_CompareCounter a2u19_distance != 4
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 4
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 250
    and I_UnitDistanceFromPosition a2u19 0,0 < 275
    if I_CompareCounter a2u19_distance != 5
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 5
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 275
    and I_UnitDistanceFromPosition a2u19 0,0 < 300
    if I_CompareCounter a2u19_distance != 6
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 6
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 300
    and I_UnitDistanceFromPosition a2u19 0,0 < 325
    if I_CompareCounter a2u19_distance != 7
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 7
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 325
    and I_UnitDistanceFromPosition a2u19 0,0 < 350
    if I_CompareCounter a2u19_distance != 8
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 8
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 350
    and I_UnitDistanceFromPosition a2u19 0,0 < 375
    if I_CompareCounter a2u19_distance != 9
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 9
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 375
    and I_UnitDistanceFromPosition a2u19 0,0 < 400
    if I_CompareCounter a2u19_distance != 10
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 10
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 400
    and I_UnitDistanceFromPosition a2u19 0,0 < 425
    if I_CompareCounter a2u19_distance != 11
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 11
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 425
    and I_UnitDistanceFromPosition a2u19 0,0 < 450
    if I_CompareCounter a2u19_distance != 12
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 12
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 450
    and I_UnitDistanceFromPosition a2u19 0,0 < 500
    if I_CompareCounter a2u19_distance != 13
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 13
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 500
    and I_UnitDistanceFromPosition a2u19 0,0 < 550
    if I_CompareCounter a2u19_distance != 14
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 14
    inc_counter a2u19_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u19 0,0 >= 550
    and I_UnitDistanceFromPosition a2u19 0,0 < 600
    if I_CompareCounter a2u19_distance != 15
    set_counter a2u19_stuck 0
    end_if
    set_counter a2u19_distance 15
    inc_counter a2u19_stuck 1
    end_if

    if I_CompareCounter a2u19_stuck = 4
    unit_order_halt a2u19
    unit_set_morale a2u19 wavering
    battle_wait 0.1
    unit_unset_morale a2u19
    release_unit a2u19
    set_counter a2u19_stuck 0
    end_if

    end_if
end_if

if I_CompareCounter enemy_unit_count = 20
and ! I_UnitDestroyed a2u20

    if I_UnitStatus a2u20 moving
    if I_CompareCounter a2u20_status = 0
    set_counter a2u20_status 1
    end_if
    if I_CompareCounter a2u20_status != 1
    set_counter a2u20_status 0
    end_if
    end_if

    if I_UnitStatus a2u20 routing
    if I_CompareCounter a2u20_status = 0
    set_counter a2u20_status 2
    end_if
    if I_CompareCounter a2u20_status != 2
    set_counter a2u20_status 0
    end_if
    end_if

    if ! I_UnitStatus a2u20 moving
    and ! I_UnitStatus a2u20 routing
    set_counter a2u20_status 0
    end_if

    if I_CompareCounter a2u20_status > 0

    if I_UnitDistanceFromPosition a2u20 0,0 >= 150
    and I_UnitDistanceFromPosition a2u20 0,0 < 175
    if I_CompareCounter a2u20_distance != 1
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 1
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 175
    and I_UnitDistanceFromPosition a2u20 0,0 < 200
    if I_CompareCounter a2u20_distance != 2
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 2
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 200
    and I_UnitDistanceFromPosition a2u20 0,0 < 225
    if I_CompareCounter a2u20_distance != 3
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 3
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 225
    and I_UnitDistanceFromPosition a2u20 0,0 < 250
    if I_CompareCounter a2u20_distance != 4
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 4
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 250
    and I_UnitDistanceFromPosition a2u20 0,0 < 275
    if I_CompareCounter a2u20_distance != 5
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 5
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 275
    and I_UnitDistanceFromPosition a2u20 0,0 < 300
    if I_CompareCounter a2u20_distance != 6
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 6
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 300
    and I_UnitDistanceFromPosition a2u20 0,0 < 325
    if I_CompareCounter a2u20_distance != 7
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 7
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 325
    and I_UnitDistanceFromPosition a2u20 0,0 < 350
    if I_CompareCounter a2u20_distance != 8
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 8
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 350
    and I_UnitDistanceFromPosition a2u20 0,0 < 375
    if I_CompareCounter a2u20_distance != 9
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 9
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 375
    and I_UnitDistanceFromPosition a2u20 0,0 < 400
    if I_CompareCounter a2u20_distance != 10
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 10
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 400
    and I_UnitDistanceFromPosition a2u20 0,0 < 425
    if I_CompareCounter a2u20_distance != 11
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 11
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 425
    and I_UnitDistanceFromPosition a2u20 0,0 < 450
    if I_CompareCounter a2u20_distance != 12
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 12
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 450
    and I_UnitDistanceFromPosition a2u20 0,0 < 500
    if I_CompareCounter a2u20_distance != 13
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 13
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 500
    and I_UnitDistanceFromPosition a2u20 0,0 < 550
    if I_CompareCounter a2u20_distance != 14
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 14
    inc_counter a2u20_stuck 1
    end_if

    if I_UnitDistanceFromPosition a2u20 0,0 >= 550
    and I_UnitDistanceFromPosition a2u20 0,0 < 600
    if I_CompareCounter a2u20_distance != 15
    set_counter a2u20_stuck 0
    end_if
    set_counter a2u20_distance 15
    inc_counter a2u20_stuck 1
    end_if

    if I_CompareCounter a2u20_stuck = 4
    unit_order_halt a2u20
    unit_set_morale a2u20 wavering
    battle_wait 0.1
    unit_unset_morale a2u20
    release_unit a2u20
    set_counter a2u20_stuck 0
    end_if

    end_if
end_if

    battle_wait 10
end_monitor

;;;;;;;Anti-CTD
monitor_event BattleDeploymentPhaseCommenced FactionIsLocal
    wait 0.5
    simulate_mouse_click lclick_down
    simulate_mouse_click lclick_up
end_monitor

;################## Cleaning up ##################

monitor_event ScrollOpened ScrollOpened post_battle_scroll

    ;;;;;;;
    set_counter fire_labels 0
;    set_counter panel_check 0
    set_counter player_unit_count 0
    set_counter enemy_unit_count 0
    set_counter open_battle 0
    set_counter labels_only 0
    set_counter stakes_lock 0
    ;;;;;;;
    set_counter pu1_missile 0
    set_counter pu2_missile 0
    set_counter pu3_missile 0
    set_counter pu4_missile 0
    set_counter pu5_missile 0
    set_counter pu6_missile 0
    set_counter pu7_missile 0
    set_counter pu8_missile 0
    set_counter pu9_missile 0
    set_counter pu10_missile 0
    set_counter pu11_missile 0
    set_counter pu12_missile 0
    set_counter pu13_missile 0
    set_counter pu14_missile 0
    set_counter pu15_missile 0
    set_counter pu16_missile 0
    set_counter pu17_missile 0
    set_counter pu18_missile 0
    set_counter pu19_missile 0
    set_counter pu20_missile 0
    ;;;;;;;Checks
    set_counter check_timer 0
    set_counter elephant_fix_check 0
    set_counter elephant_fix_check_sally 0
    set_counter reinf_check 0
    set_counter script_delay 0
    set_counter sally_defense_check 0
    set_counter sally_check 0
    ;;;;;;;Stakes
    set_counter label_ready 0
    set_counter stakes_on 0
    ;;;;;;;Reinforcements
    set_counter army4_ready 0
    set_counter reinf_late 0

    set_counter distance_trigger1 0
    set_counter distance_trigger2 0
    set_counter distance_trigger3 0
    set_counter distance_trigger4 0
    set_counter distance_trigger5 0

    set_counter kill_labelling_reinf_allied 0
    set_counter army3_reinf_allied 0
    set_counter army4_reinf_allied 0
    set_counter army5_reinf_allied 0
    set_counter army6_reinf_allied 0
    set_counter army7_reinf_allied 0
    set_counter army8_reinf_allied 0
    set_counter army9_reinf_allied 0
    set_counter army10_reinf_allied 0
    set_counter army11_reinf_allied 0
    set_counter army12_reinf_allied 0
    set_counter army13_reinf_allied 0
    set_counter army14_reinf_allied 0
    set_counter army15_reinf_allied 0
    set_counter army16_reinf_allied 0
    set_counter launch_alliance_0 0
    set_counter launch_alliance_1 0

    set_counter apply_strategy 0
    set_counter relaunch_movement 0

    set_counter att_alliance_ready 0
    set_counter def_alliance_ready 0
    set_counter def_alliance_ready_siege 0

    set_counter army3_moving 0
    set_counter army3_run 0
    set_counter army3_reinf_late 0
    set_counter army4_moving 0
    set_counter army4_run 0
    set_counter army4_reinf_late 0
    set_counter army5_moving 0
    set_counter army5_run 0
    set_counter army5_reinf_late 0
    set_counter army6_moving 0
    set_counter army6_run 0
    set_counter army6_reinf_late 0
    set_counter army7_moving 0
    set_counter army7_run 0
    set_counter army7_reinf_late 0
    set_counter army8_moving 0
    set_counter army8_run 0
    set_counter army8_reinf_late 0
    set_counter army9_moving 0
    set_counter army9_run 0
    set_counter army9_reinf_late 0
    set_counter army10_moving 0
    set_counter army10_run 0
    set_counter army10_reinf_late 0
    set_counter army11_moving 0
    set_counter army11_run 0
    set_counter army11_reinf_late 0
    set_counter army12_moving 0
    set_counter army12_run 0
    set_counter army12_reinf_late 0
    set_counter army13_moving 0
    set_counter army13_run 0
    set_counter army13_reinf_late 0
    set_counter army14_moving 0
    set_counter army14_run 0
    set_counter army14_reinf_late 0
    set_counter army15_moving 0
    set_counter army15_run 0
    set_counter army15_reinf_late 0
    set_counter army16_moving 0
    set_counter army16_run 0
    set_counter army16_reinf_late 0

    set_counter army4_ready_siege 0 ; acts as launching counter
    set_counter army4_moving_siege 0
    set_counter army4_run_siege 0
    set_counter reinf_check_interval 0

    ;;;;;;;HA Fix
    set_counter ha_fix 0
    ;;;;;;;Elephant Fix
    set_counter elephant_fix 0
    set_counter elephant_gate 0
    set_counter elephant_gate_s 0
    set_counter elephant_gate_tier2 0
    set_counter elephant_gate_tier3 0
    set_counter elephant_gate_tier2s 0
    set_counter elephant_gate_tier3s 0
    set_counter rally_walls 0
    set_counter rally_walls_s 0
    set_counter second_ring 0
    set_counter third_ring 0
    set_counter second_ring_s 0
    set_counter third_ring_s 0
    set_counter del_objective 0
    set_counter del_objective_s 0
    ;;;;;;;Sally-out
    set_counter sally-out_fix 0
    set_counter sally_defense 0
    set_counter reform_back 0
    set_counter reform_multi 0
    set_counter unit_under_fire 0
    set_counter kill_sally 0
    set_counter sally_reinf 0
    set_counter reset_position 0
    set_counter defend_location 0
    set_counter reset_army2 0
    set_counter assign_labels 0
    ;;;;;;;Siege
    set_counter siege_fix 0
    set_counter army_sieging 0
    set_counter army_south 0
    set_counter army_north 0
    set_counter army_east 0
    set_counter army_west 0
    set_counter emergency_stop 0
    set_counter omfg_cannon_tower 0
    set_counter army2_sally 0
    set_counter wall_advance_s 0
    ;;;;;;;Protect General
    set_counter protect_general 0
    set_counter general_wait 0
    set_counter protect_siege 0
    set_counter g_stop 0
    ;;;;;;;Sally-out, AI defending
    set_counter army4_ready_sally 0
    set_counter army4_location 0
    set_counter path_n 0
    set_counter path_ne 0
    set_counter path_e 0
    set_counter path_se 0
    set_counter path_s 0
    set_counter path_sw 0
    set_counter path_w 0
    set_counter path_nw 0
    set_counter obstacle_check 0
    set_counter label_army4 0
    set_counter army4_moving_s 0
    set_counter army4_idle_s 0
    set_counter line_passed 0
    set_counter army2_idle_s 0
    set_counter army4_idle_r 0
    set_counter wall_line_passed 0
    set_counter reset_position_s 0
    set_counter repeat_test1 0
    set_counter repeat_test2 0
    set_counter repeat_test3 0
    set_counter repeat_test4 0
    set_counter repeat_test5 0
    set_counter repeat_test6 0
    ;;;;;;;Open Battles
    set_counter ob_defense_launch 0
    set_counter ob_defend 0
    set_counter ob_siege_attack 0
    set_counter ob_under_fire 0
    set_counter ob_repeat_test 0
    set_counter ob_engaged 0
    set_counter player_units_closing 0
    set_counter player_enveloping 0
    set_counter player_engaged_reinf 0
    ;;;;;;;AI Stuck Fix
    set_counter ai_stuck_launch 0
    set_counter a2u1_stuck 0
    set_counter a2u2_stuck 0
    set_counter a2u3_stuck 0
    set_counter a2u4_stuck 0
    set_counter a2u5_stuck 0
    set_counter a2u6_stuck 0
    set_counter a2u7_stuck 0
    set_counter a2u8_stuck 0
    set_counter a2u9_stuck 0
    set_counter a2u10_stuck 0
    set_counter a2u11_stuck 0
    set_counter a2u12_stuck 0
    set_counter a2u13_stuck 0
    set_counter a2u14_stuck 0
    set_counter a2u15_stuck 0
    set_counter a2u16_stuck 0
    set_counter a2u17_stuck 0
    set_counter a2u18_stuck 0
    set_counter a2u19_stuck 0
    set_counter a2u20_stuck 0
    set_counter a2u1_status 0
    set_counter a2u2_status 0
    set_counter a2u3_status 0
    set_counter a2u4_status 0
    set_counter a2u5_status 0
    set_counter a2u6_status 0
    set_counter a2u7_status 0
    set_counter a2u8_status 0
    set_counter a2u9_status 0
    set_counter a2u10_status 0
    set_counter a2u11_status 0
    set_counter a2u12_status 0
    set_counter a2u13_status 0
    set_counter a2u14_status 0
    set_counter a2u15_status 0
    set_counter a2u16_status 0
    set_counter a2u17_status 0
    set_counter a2u18_status 0
    set_counter a2u19_status 0
    set_counter a2u20_status 0
    set_counter a2u1_distance 0
    set_counter a2u2_distance 0
    set_counter a2u3_distance 0
    set_counter a2u4_distance 0
    set_counter a2u5_distance 0
    set_counter a2u6_distance 0
    set_counter a2u7_distance 0
    set_counter a2u8_distance 0
    set_counter a2u9_distance 0
    set_counter a2u10_distance 0
    set_counter a2u11_distance 0
    set_counter a2u12_distance 0
    set_counter a2u13_distance 0
    set_counter a2u14_distance 0
    set_counter a2u15_distance 0
    set_counter a2u16_distance 0
    set_counter a2u17_distance 0
    set_counter a2u18_distance 0
    set_counter a2u19_distance 0
    set_counter a2u20_distance 0
;    suspend_unscripted_advice false
end_monitor


;=======================================================;
;============ TITANIUM ADDITIONAL SCRIPTS ==============;
;=======================================================;
;==================================================================================;
;-------------------------------- Loan Script -------------------------------------;
;==================================================================================;
;Counters
	declare_counter italian_bankers
	declare_counter loan_refund_amount
	declare_counter finances_panel_open
	declare_counter finances_panel_open2
	declare_counter loan_dread_counter
	;
	declare_counter loan_refund_amount_venice
	declare_counter loan_refund_amount_milan
	declare_counter loan_refund_amount_sicily
	declare_counter loan_refund_amount_spain
	declare_counter loan_refund_amount_aragon
	declare_counter loan_refund_amount_portugal
	declare_counter loan_refund_amount_france
	declare_counter loan_refund_amount_hre
	declare_counter loan_refund_amount_england
	declare_counter loan_refund_amount_scotland
	declare_counter loan_refund_amount_denmark
	declare_counter loan_refund_amount_norway
	declare_counter loan_refund_amount_jerusalem
	declare_counter loan_refund_amount_teutonic_order
	declare_counter loan_refund_amount_hungary
	declare_counter loan_refund_amount_poland
	declare_counter loan_refund_amount_lithuania
	declare_counter loan_refund_amount_byzantium
	declare_counter loan_refund_amount_russia
	declare_counter loan_refund_amount_kievan_rus
	declare_counter loan_refund_amount_cumans
	declare_counter loan_refund_amount_mongols
	declare_counter loan_refund_amount_turks
	declare_counter loan_refund_amount_kwarezm
	declare_counter loan_refund_amount_egypt
	declare_counter loan_refund_amount_moors

;Italian Bankers Historical Event, allow larger loans
monitor_event EventCounter EventCounterType the_book_of_sentences
	and EventCounter > 1; 1157AD
	historic_event italian_bankers_event
	set_counter italian_bankers 1
	terminate_monitor
end_monitor

;Interests payment included in this monitor
monitor_event FactionTurnEnd FactionIsLocal
	;reset to allow loan panel for next turn
		set_counter finances_panel_open 0
		set_counter finances_panel_open2 0
	;Interests
	if I_CompareCounter loan_refund_amount = 1
		console_command add_money -500
	end_if
	if I_CompareCounter loan_refund_amount = 2
		console_command add_money -1000
	end_if
	if I_CompareCounter loan_refund_amount = 3
		console_command add_money -1500
	end_if
	if I_CompareCounter loan_refund_amount = 4
		console_command add_money -2000
	end_if
	if I_CompareCounter loan_refund_amount = 5
		console_command add_money -2500
	end_if
;Hotseat Compatibility
	if I_HotseatEnabled
	;Venice
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction venice
			set_counter loan_refund_amount_venice 5
			set_counter loan_refund_amount 0
		end_if
	;Genoa/Milan
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction milan
			set_counter loan_refund_amount_milan 5
			set_counter loan_refund_amount 0
		end_if
	;Sicily
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction sicily
			set_counter loan_refund_amount_sicily 5
			set_counter loan_refund_amount 0
		end_if
	;Spain
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction spain
			set_counter loan_refund_amount_spain 5
			set_counter loan_refund_amount 0
		end_if
	;Aragon
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction aragon
			set_counter loan_refund_amount_aragon 5
			set_counter loan_refund_amount 0
		end_if
	;Portugal
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction portugal
			set_counter loan_refund_amount_portugal 5
			set_counter loan_refund_amount 0
		end_if
	;Byzantium
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction byzantium
			set_counter loan_refund_amount_byzantium 5
			set_counter loan_refund_amount 0
		end_if
	;France
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction france
			set_counter loan_refund_amount_france 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction france
			set_counter loan_refund_amount_france 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction france
			set_counter loan_refund_amount_france 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction france
			set_counter loan_refund_amount_france 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction france
			set_counter loan_refund_amount_france 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction france
			set_counter loan_refund_amount_france 5
			set_counter loan_refund_amount 0
		end_if
	;Jerusalem
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount_jerusalem 5
			set_counter loan_refund_amount 0
		end_if
	;HRE
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction hre
			set_counter loan_refund_amount_hre 5
			set_counter loan_refund_amount 0
		end_if
	;Teutonic Order
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount_teutonic_order 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount_teutonic_order 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount_teutonic_order 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount_teutonic_order 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount_teutonic_order 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
			set_counter loan_refund_amount_teutonic_order 5
			set_counter loan_refund_amount 0
		end_if
	;England
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction england
			set_counter loan_refund_amount_england 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction england
			set_counter loan_refund_amount_england 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction england
			set_counter loan_refund_amount_england 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction england
			set_counter loan_refund_amount_england 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction england
			set_counter loan_refund_amount_england 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction england
			set_counter loan_refund_amount_england 5
			set_counter loan_refund_amount 0
		end_if
	;Scotland
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction scotland
			set_counter loan_refund_amount_scotland 5
			set_counter loan_refund_amount 0
		end_if
	;Denmark
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction denmark
			set_counter loan_refund_amount_denmark 5
			set_counter loan_refund_amount 0
		end_if
	;Norway
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction norway
			set_counter loan_refund_amount_norway 5
			set_counter loan_refund_amount 0
		end_if
	;Hungary
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction hungary
			set_counter loan_refund_amount_hungary 5
			set_counter loan_refund_amount 0
		end_if
	;Poland
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction poland
			set_counter loan_refund_amount_poland 5
			set_counter loan_refund_amount 0
		end_if
	;Lithuania
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction lithuania
			set_counter loan_refund_amount_lithuania 5
			set_counter loan_refund_amount 0
		end_if
	;Cumans
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction cumans
			set_counter loan_refund_amount_cumans 5
			set_counter loan_refund_amount 0
		end_if
	;Novgorod/Russia
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction russia
			set_counter loan_refund_amount_russia 5
			set_counter loan_refund_amount 0
		end_if
	;Kievan Rus
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount_kievan_rus 5
			set_counter loan_refund_amount 0
		end_if
	;Mongols
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction mongols
			set_counter loan_refund_amount_mongols 5
			set_counter loan_refund_amount 0
		end_if
	;Turks
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction turks
			set_counter loan_refund_amount_turks 5
			set_counter loan_refund_amount 0
		end_if
	;Egypt
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction egypt
			set_counter loan_refund_amount_egypt 5
			set_counter loan_refund_amount 0
		end_if
	;Kwarezm
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount_kwarezm 5
			set_counter loan_refund_amount 0
		end_if
	;Moors
		if I_CompareCounter loan_refund_amount = 0
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 0
		end_if
		if I_CompareCounter loan_refund_amount = 1
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 1
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 2
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 2
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 3
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 3
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 4
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 4
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount = 5
		and I_LocalFaction moors
			set_counter loan_refund_amount_moors 5
			set_counter loan_refund_amount 0
		end_if
	end_if
	end_monitor
;End of Hotseat Compatibility
	
monitor_event PreFactionTurnStart FactionIsLocal
	and I_TurnNumber >= 1
	;reset dreadful faction leader event for traits
		set_event_counter loan_dread 0
;Hotseat Compatibility
	if I_HotseatEnabled
	;Venice
		if I_CompareCounter loan_refund_amount_venice = 0
		and I_LocalFaction venice
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_venice = 1
		and I_LocalFaction venice
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_venice = 2
		and I_LocalFaction venice
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_venice = 3
		and I_LocalFaction venice
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_venice = 4
		and I_LocalFaction venice
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_venice = 5
		and I_LocalFaction venice
			set_counter loan_refund_amount 5
		end_if
	;Genoa/Milan
		if I_CompareCounter loan_refund_amount_milan = 0
		and I_LocalFaction milan
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_milan = 1
		and I_LocalFaction milan
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_milan = 2
		and I_LocalFaction milan
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_milan = 3
		and I_LocalFaction milan
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_milan = 4
		and I_LocalFaction milan
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_milan = 5
		and I_LocalFaction milan
			set_counter loan_refund_amount 5
		end_if
	;Sicily
		if I_CompareCounter loan_refund_amount_sicily = 0
		and I_LocalFaction sicily
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 1
		and I_LocalFaction sicily
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 2
		and I_LocalFaction sicily
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 3
		and I_LocalFaction sicily
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 4
		and I_LocalFaction sicily
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_sicily = 5
		and I_LocalFaction sicily
			set_counter loan_refund_amount 5
		end_if
	;Spain
		if I_CompareCounter loan_refund_amount_spain = 0
		and I_LocalFaction spain
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_spain = 1
		and I_LocalFaction spain
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_spain = 2
		and I_LocalFaction spain
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_spain = 3
		and I_LocalFaction spain
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_spain = 4
		and I_LocalFaction spain
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_spain = 5
		and I_LocalFaction spain
			set_counter loan_refund_amount 5
		end_if
	;Aragon
		if I_CompareCounter loan_refund_amount_aragon = 0
		and I_LocalFaction aragon
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 1
		and I_LocalFaction aragon
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 2
		and I_LocalFaction aragon
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 3
		and I_LocalFaction aragon
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 4
		and I_LocalFaction aragon
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_aragon = 5
		and I_LocalFaction aragon
			set_counter loan_refund_amount 5
		end_if
	;Portugal
		if I_CompareCounter loan_refund_amount_portugal = 0
		and I_LocalFaction portugal
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 1
		and I_LocalFaction portugal
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 2
		and I_LocalFaction portugal
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 3
		and I_LocalFaction portugal
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 4
		and I_LocalFaction portugal
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_portugal = 5
		and I_LocalFaction portugal
			set_counter loan_refund_amount 5
		end_if
	;Byzantium
		if I_CompareCounter loan_refund_amount_byzantium = 0
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 1
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 2
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 3
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 4
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_byzantium = 5
		and I_LocalFaction byzantium
			set_counter loan_refund_amount 5
		end_if
	;France
		if I_CompareCounter loan_refund_amount_france = 0
		and I_LocalFaction france
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_france = 1
		and I_LocalFaction france
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_france = 2
		and I_LocalFaction france
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_france = 3
		and I_LocalFaction france
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_france = 4
		and I_LocalFaction france
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_france = 5
		and I_LocalFaction france
			set_counter loan_refund_amount 5
		end_if
	;Jerusalem
		if I_CompareCounter loan_refund_amount_jerusalem = 0
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 1
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 2
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 3
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 4
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_jerusalem = 5
		and I_LocalFaction jerusalem
			set_counter loan_refund_amount 5
		end_if
	;HRE
		if I_CompareCounter loan_refund_amount_hre = 0
		and I_LocalFaction hre
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_hre = 1
		and I_LocalFaction hre
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_hre = 2
		and I_LocalFaction hre
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_hre = 3
		and I_LocalFaction hre
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_hre = 4
		and I_LocalFaction hre
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_hre = 5
		and I_LocalFaction hre
			set_counter loan_refund_amount 5
		end_if
	;Teutonic Order
		if I_CompareCounter loan_refund_amount_teutonic_order = 0
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 1
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 2
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 3
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 4
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_teutonic_order = 5
		and I_LocalFaction teutonic_order
			set_counter loan_refund_amount 5
		end_if
	;England
		if I_CompareCounter loan_refund_amount_england = 0
		and I_LocalFaction england
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_england = 1
		and I_LocalFaction england
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_england = 2
		and I_LocalFaction england
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_england = 3
		and I_LocalFaction england
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_england = 4
		and I_LocalFaction england
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_england = 5
		and I_LocalFaction england
			set_counter loan_refund_amount 5
		end_if
	;Scotland
		if I_CompareCounter loan_refund_amount_scotland = 0
		and I_LocalFaction scotland
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 1
		and I_LocalFaction scotland
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 2
		and I_LocalFaction scotland
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 3
		and I_LocalFaction scotland
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 4
		and I_LocalFaction scotland
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_scotland = 5
		and I_LocalFaction scotland
			set_counter loan_refund_amount 5
		end_if
	;Denmark
		if I_CompareCounter loan_refund_amount_denmark = 0
		and I_LocalFaction denmark
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 1
		and I_LocalFaction denmark
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 2
		and I_LocalFaction denmark
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 3
		and I_LocalFaction denmark
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 4
		and I_LocalFaction denmark
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_denmark = 5
		and I_LocalFaction denmark
			set_counter loan_refund_amount 5
		end_if
	;Norway
		if I_CompareCounter loan_refund_amount_norway = 0
		and I_LocalFaction norway
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_norway = 1
		and I_LocalFaction norway
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_norway = 2
		and I_LocalFaction norway
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_norway = 3
		and I_LocalFaction norway
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_norway = 4
		and I_LocalFaction norway
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_norway = 5
		and I_LocalFaction norway
			set_counter loan_refund_amount 5
		end_if
	;Hungary
		if I_CompareCounter loan_refund_amount_hungary = 0
		and I_LocalFaction hungary
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 1
		and I_LocalFaction hungary
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 2
		and I_LocalFaction hungary
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 3
		and I_LocalFaction hungary
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 4
		and I_LocalFaction hungary
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_hungary = 5
		and I_LocalFaction hungary
			set_counter loan_refund_amount 5
		end_if
	;Poland
		if I_CompareCounter loan_refund_amount_poland = 0
		and I_LocalFaction poland
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_poland = 1
		and I_LocalFaction poland
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_poland = 2
		and I_LocalFaction poland
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_poland = 3
		and I_LocalFaction poland
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_poland = 4
		and I_LocalFaction poland
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_poland = 5
		and I_LocalFaction poland
			set_counter loan_refund_amount 5
		end_if
	;Lithuania
		if I_CompareCounter loan_refund_amount_lithuania = 0
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 1
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 2
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 3
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 4
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_lithuania = 5
		and I_LocalFaction lithuania
			set_counter loan_refund_amount 5
		end_if
	;Cumans
		if I_CompareCounter loan_refund_amount_cumans = 0
		and I_LocalFaction cumans
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 1
		and I_LocalFaction cumans
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 2
		and I_LocalFaction cumans
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 3
		and I_LocalFaction cumans
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 4
		and I_LocalFaction cumans
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_cumans = 5
		and I_LocalFaction cumans
			set_counter loan_refund_amount 5
		end_if
	;Novgorod/Russia
		if I_CompareCounter loan_refund_amount_russia = 0
		and I_LocalFaction russia
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_russia = 1
		and I_LocalFaction russia
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_russia = 2
		and I_LocalFaction russia
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_russia = 3
		and I_LocalFaction russia
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_russia = 4
		and I_LocalFaction russia
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_russia = 5
		and I_LocalFaction russia
			set_counter loan_refund_amount 5
		end_if
	;Kievan Rus
		if I_CompareCounter loan_refund_amount_kievan_rus = 0
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 1
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 2
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 3
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 4
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_kievan_rus = 5
		and I_LocalFaction kievan_rus
			set_counter loan_refund_amount 5
		end_if
	;Mongols
		if I_CompareCounter loan_refund_amount_mongols = 0
		and I_LocalFaction mongols
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 1
		and I_LocalFaction mongols
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 2
		and I_LocalFaction mongols
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 3
		and I_LocalFaction mongols
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 4
		and I_LocalFaction mongols
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_mongols = 5
		and I_LocalFaction mongols
			set_counter loan_refund_amount 5
		end_if
	;Turks
		if I_CompareCounter loan_refund_amount_turks = 0
		and I_LocalFaction turks
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_turks = 1
		and I_LocalFaction turks
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_turks = 2
		and I_LocalFaction turks
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_turks = 3
		and I_LocalFaction turks
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_turks = 4
		and I_LocalFaction turks
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_turks = 5
		and I_LocalFaction turks
			set_counter loan_refund_amount 5
		end_if
	;Egypt
		if I_CompareCounter loan_refund_amount_egypt = 0
		and I_LocalFaction egypt
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 1
		and I_LocalFaction egypt
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 2
		and I_LocalFaction egypt
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 3
		and I_LocalFaction egypt
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 4
		and I_LocalFaction egypt
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_egypt = 5
		and I_LocalFaction egypt
			set_counter loan_refund_amount 5
		end_if
	;Kwarezm
		if I_CompareCounter loan_refund_amount_kwarezm = 0
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 1
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 2
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 3
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 4
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_kwarezm = 5
		and I_LocalFaction kwarezm
			set_counter loan_refund_amount 5
		end_if
	;Moors
		if I_CompareCounter loan_refund_amount_moors = 0
		and I_LocalFaction moors
			set_counter loan_refund_amount 0
		end_if
		if I_CompareCounter loan_refund_amount_moors = 1
		and I_LocalFaction moors
			set_counter loan_refund_amount 1
		end_if
		if I_CompareCounter loan_refund_amount_moors = 2
		and I_LocalFaction moors
			set_counter loan_refund_amount 2
		end_if
		if I_CompareCounter loan_refund_amount_moors = 3
		and I_LocalFaction moors
			set_counter loan_refund_amount 3
		end_if
		if I_CompareCounter loan_refund_amount_moors = 4
		and I_LocalFaction moors
			set_counter loan_refund_amount 4
		end_if
		if I_CompareCounter loan_refund_amount_moors = 5
		and I_LocalFaction moors
			set_counter loan_refund_amount 5
		end_if
	end_if
;End of Hotseat Compatibility

;Event Counters for Traits
	if I_CompareCounter loan_refund_amount = 0
		set_event_counter loan_refund 0
	end_if
	if I_CompareCounter loan_refund_amount = 1
		set_event_counter loan_refund 1
	end_if
	if I_CompareCounter loan_refund_amount = 2
		set_event_counter loan_refund 2
	end_if
	if I_CompareCounter loan_refund_amount = 3
		set_event_counter loan_refund 3
	end_if
	if I_CompareCounter loan_refund_amount = 4
		set_event_counter loan_refund 4
	end_if
	if I_CompareCounter loan_refund_amount = 5
		set_event_counter loan_refund 5
	end_if
end_monitor

;Dreadful Faction Leader?
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry < -5; Yes, definitively he is
		generate_random_counter bankers_afraid 1 10
		if I_EventCounter bankers_afraid > 7; No loans available for you this turn
			set_counter loan_dread_counter 2
		end_if
		if I_EventCounter bankers_afraid < 8
			set_counter loan_dread_counter 1
		end_if
	end_monitor
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry > -6
	and Attribute Chivalry < 4; Not yet but just needs a little 'push'
		set_counter loan_dread_counter 1
	end_monitor
	monitor_event CharacterTurnStart IsFactionLeader
	and FactionIsLocal
	and Attribute Chivalry > 3; No
		set_counter loan_dread_counter 0
	end_monitor

;----------------- "Take Loan?" ----------------------
declare_counter has_repay_money;?
monitor_event FinancesPanelOpen FactionIsLocal; YES
	and Treasury > 9999
	set_counter has_repay_money 1
	if I_CompareCounter finances_panel_open = 0
	and I_CompareCounter finances_panel_open2 < 1
		set_counter finances_panel_open 1
		campaign_wait 0.5
		set_counter finances_panel_open 0
	end_if
end_monitor
monitor_event FinancesPanelOpen FactionIsLocal; NO
	and Treasury < 10000
	set_counter has_repay_money 0
	if I_CompareCounter finances_panel_open = 0
	and I_CompareCounter finances_panel_open2 < 1
		set_counter finances_panel_open 1
		campaign_wait 0.5
		if I_CompareCounter finances_panel_open = 1
			set_counter finances_panel_open 0
		end_if
	end_if
end_monitor

monitor_event ButtonPressed TrueCondition
	and I_CompareCounter finances_panel_open = 1
	set_counter finances_panel_open2 1
	;Basic loan available from 1100 till 1157
	if I_CompareCounter italian_bankers < 1
	and I_CompareCounter loan_dread_counter < 2
		if I_CompareCounter loan_refund_amount < 3;	cannot exceed the max of 30,000f in debt
			historic_event loan_offer true
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money >= 1
			historic_event loan_repay true
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 0
			historic_event loan_all_fail
			play_sound_event loan_failure
			campaign_wait 0.5
			set_counter finances_panel_open2 0
		end_if
		if I_CompareCounter loan_refund_amount > 2
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 1
			historic_event loan_denied true
			play_sound_event loan_failure
			set_counter finances_panel_open 2
		end_if
	end_if
	;Italian Bankers event allow larger loans
	if I_CompareCounter italian_bankers >= 1
	and I_CompareCounter loan_dread_counter < 2
		if I_CompareCounter loan_refund_amount < 5;	cannot exceed the max of 50,000f in debt
			historic_event loan_offer true
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money >= 1
			historic_event loan_repay true
			set_counter finances_panel_open 2
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 0
			historic_event loan_all_fail
			play_sound_event loan_failure
			campaign_wait 0.5
			set_counter finances_panel_open2 0
		end_if
		if I_CompareCounter loan_refund_amount > 4
			and I_CompareCounter has_repay_money < 1
			and I_CompareCounter loan_dread_counter = 1
			historic_event loan_denied true
			play_sound_event loan_failure
			set_counter finances_panel_open 2
		end_if
	end_if
	if I_CompareCounter loan_dread_counter = 2
		historic_event loan_bankers_afraid
		play_sound_event loan_failure
		set_counter finances_panel_open 3
	end_if
end_monitor

monitor_event EventCounter EventCounterType loan_offer_accepted
	and I_EventCounter loan_offer_accepted = 1
	set_event_counter loan_offer_accepted 0
		set_counter finances_panel_open 0
	;Basic loan available from 1100 till 1157
		if I_CompareCounter italian_bankers < 1
			campaign_wait 0.5
			historic_event loan_offer1 true
			play_sound_event loan_popup
		end_if
	;Italian Bankers event allow larger loans
		if I_CompareCounter italian_bankers >= 1
		and I_CompareCounter loan_refund_amount < 4
			campaign_wait 0.5
			historic_event loan_offer2 true
			play_sound_event loan_popup
		end_if
		if I_CompareCounter italian_bankers >= 1
		and I_CompareCounter loan_refund_amount = 4
			campaign_wait 0.5
			historic_event loan_offer1 true
			play_sound_event loan_popup
		end_if
end_monitor
monitor_event EventCounter EventCounterType loan_offer_declined
	and I_EventCounter loan_offer_declined = 1
	set_event_counter loan_offer_declined 0
		set_counter finances_panel_open 0
	if I_CompareCounter loan_refund_amount >= 1
	and I_CompareCounter has_repay_money >= 1
		campaign_wait 0.5
		historic_event loan_repay true
	end_if
	if I_CompareCounter loan_refund_amount >= 1
	and I_CompareCounter has_repay_money < 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
	end_if
	if I_CompareCounter loan_refund_amount < 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
	end_if
end_monitor

monitor_event EventCounter EventCounterType loan_offer1_accepted
	and I_EventCounter loan_offer1_accepted = 1
	set_event_counter loan_offer1_accepted 0
		console_command add_money 10000
		inc_counter loan_refund_amount 1
		play_sound_event loan_success
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_offer1_declined
	and I_EventCounter loan_offer1_declined = 1
	set_event_counter loan_offer1_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

monitor_event EventCounter EventCounterType loan_offer2_accepted
	and I_EventCounter loan_offer2_accepted = 1
	set_event_counter loan_offer2_accepted 0
		console_command add_money 20000
		inc_counter loan_refund_amount 2
		play_sound_event loan_success2
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_offer2_declined
	and I_EventCounter loan_offer2_declined = 1
	set_event_counter loan_offer2_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;------------------ "repay debt?" -------------------------

;Voluntary Repay
monitor_event EventCounter EventCounterType loan_repay_accepted
	and I_EventCounter loan_repay_accepted = 1
	set_event_counter loan_repay_accepted 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		historic_event loan_repay1b true
end_monitor
monitor_event EventCounter EventCounterType loan_repay_declined
	and I_EventCounter loan_repay_declined = 1
	set_event_counter loan_repay_declined 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;Turn Start Repay Request
monitor_event FactionTurnStart FactionIsLocal
	and I_CompareCounter loan_refund_amount >= 1
	and not LosingMoney
	and Treasury > 25000
	;and RandomPercent >= 50
	historic_event loan_repay1b true
end_monitor

monitor_event EventCounter EventCounterType loan_repay1b_accepted
	and I_EventCounter loan_repay1b_accepted = 1
	set_event_counter loan_repay1b_accepted 0
		console_command add_money -10000
		inc_counter loan_refund_amount -1
		play_sound_event loan_repaid
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_repay1b_declined
	and I_EventCounter loan_repay1b_declined = 1
	set_event_counter loan_repay1b_declined 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

;I will not pay, you banker scum!
monitor_event EventCounter EventCounterType loan_denied_accepted
	and I_EventCounter loan_denied_accepted = 1
	set_event_counter loan_denied_accepted 0
		set_counter finances_panel_open 3
		generate_random_counter kill_bankers 0 100
		if I_EventCounter kill_bankers > 66
		and I_CompareCounter loan_refund_amount >= 1
			campaign_wait 0.5
			historic_event loan_denied2
			inc_counter loan_refund_amount -1
			play_sound_event loan_dread_sfx
			if I_EventCounter kill_bankers > 80
			and I_CompareCounter loan_refund_amount >= 2
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 92
			and I_CompareCounter loan_refund_amount >= 3
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 74
			and I_CompareCounter loan_refund_amount >= 4
				inc_counter loan_refund_amount -1
			end_if
			if I_EventCounter kill_bankers > 86
			and I_CompareCounter loan_refund_amount >= 5
				inc_counter loan_refund_amount -1
			end_if
		end_if
		if I_EventCounter kill_bankers < 67
			campaign_wait 0.5
			historic_event loan_denied1
			play_sound_event loan_dread_fail_sfx
		end_if
		set_event_counter loan_dread 1
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor
monitor_event EventCounter EventCounterType loan_denied_declined
	and I_EventCounter loan_denied_declined = 1
	set_event_counter loan_denied_declined 0
		set_counter finances_panel_open 0
		campaign_wait 0.5
		set_counter finances_panel_open2 0
end_monitor

monitor_event CeasedFactionLeader FactionIsLocal
	set_event_counter loan_dread 0; reseted if FL dies
	set_counter loan_dread_counter 1; set neutral
	if I_CompareCounter finances_panel_open = 3
		set_counter finances_panel_open 0
	end_if
end_monitor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==========================KINGDOM EMPIRE AND REPUBLICS SCRIPTS=============================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;==============================================================;
;============== REPUBLICS DEATH SCRIPT WORKAROUND =============;
;==============================================================;

	monitor_event FactionTurnEnd FactionType slave
;---- Venice ----
		if I_NumberOfSettlements venice < 1
			console_command kill_faction venice
		end_if
;---- Genoa ----
		if I_NumberOfSettlements milan < 1
			console_command kill_faction milan
		end_if
;---- Novgorod ----
		if I_NumberOfSettlements russia < 1
			console_command kill_faction russia
		end_if
	
	end_monitor

;==============================================================;
;==============================================================;
;==============================================================;
declare_counter Anarchy
set_counter Anarchy 0

;-------------start medium authority section-----------

	monitor_event CharacterTurnStart IsFactionLeader
		and FactionLeaderTrait Civil_Unrest = 1
		and FactionIsLocal
		and not I_HotseatEnabled
		set_counter Anarchy 1
	end_monitor

;---------start low authority section---------

	monitor_event CharacterTurnStart IsFactionLeader
		and FactionLeaderTrait Civil_Unrest = 2
		and FactionIsLocal
		and not I_HotseatEnabled
		set_counter Anarchy 2
	end_monitor

;---------start no authority section-----------

	monitor_event CharacterTurnStart IsFactionLeader
		and FactionLeaderTrait Civil_Unrest = 3
		and FactionIsLocal
		and not I_HotseatEnabled
		set_counter Anarchy 3
	end_monitor

;---------reset civil unrest counter section-----------

	monitor_event CharacterTurnEnd IsFactionLeader
		and not FactionLeaderTrait Civil_Unrest >= 1
		and FactionIsLocal
		and not I_HotseatEnabled
		set_counter Anarchy 0
	end_monitor

;-----------events section------------

	monitor_event BecomesFactionLeader FactionIsLocal
		and not I_HotseatEnabled
		and not FactionType byzantium
		and not FactionType venice
		and not FactionType milan
		and not FactionType russia
		and not FactionType teutonic_order
		and not Trait FactionUsurper > 0
		and not Trait FactionFutureUsurper > 0
		and Attribute Authority < 7
		and SettlementsTaken >= 2
		historic_event civil_unrest
	end_monitor

	monitor_event BecomesFactionLeader FactionIsLocal
		and not I_HotseatEnabled
		and FactionType byzantium
		and Attribute Authority < 7
		and SettlementsTaken >= 2
		historic_event civil_unrest
	end_monitor

	monitor_event FactionTurnStart FactionIsLocal
		and not I_HotseatEnabled
		and I_CompareCounter Anarchy > 0

		if I_CompareCounter Anarchy = 1
			historic_event civil_unrest1
		end_if

		if I_CompareCounter Anarchy = 2
			historic_event civil_unrest2
		end_if

		if I_CompareCounter Anarchy = 3
			historic_event civil_unrest3
		end_if

	end_monitor

;==========================================================================================
;================================= MAJOR CITIES UNREST ====================================
;==========================================================================================

;COUNTERS
       ;WEST EUROPE
	declare_counter paris_occupied
	declare_counter bordeaux_occupied
	declare_counter toulouse_occupied
	declare_counter orleans_exists
	declare_counter orleans_occupied
       ;BRITISH ISLES
	declare_counter london_occupied
	declare_counter edinburgh_occupied
       ;CENTRAL EUROPE
	declare_counter frankfurt_occupied
	declare_counter bern_occupied
	declare_counter antwerp_occupied
	declare_counter vienna_occupied
       ;ITALY
	declare_counter milan_occupied
	declare_counter genoa_occupied
	declare_counter venice_occupied
	declare_counter rome_occupied
	declare_counter palermo_occupied
       ;IBERIA
	declare_counter toledo_occupied
	declare_counter oporto_occupied
	declare_counter zaragoza_occupied
	declare_counter granada_occupied
       ;EASTERN EUROPE
	declare_counter prague_occupied
	declare_counter esztergom_occupied
	declare_counter krakow_occupied
	declare_counter vilnius_occupied
       ;SCANDINAVIA
	declare_counter arhus_occupied
	declare_counter bergen_occupied
	declare_counter kalmar_occupied
       ;RUSLAND
	declare_counter novgorod_occupied
	declare_counter kiev_occupied
       ;BALKANS
	declare_counter constantinople_occupied
	declare_counter ras_occupied
	declare_counter sofia_occupied
	declare_counter zagreb_occupied
	declare_counter arta_occupied
       ;ANATOLIA-CAUCASUS
	declare_counter ankara_occupied
	declare_counter iconium_occupied
	declare_counter trebizond_occupied
	declare_counter kutaisi_occupied
       ;LEVANT
	declare_counter jerusalem_occupied
	declare_counter damascus_occupied
       ;MESOPOTAMIA
	declare_counter baghdad_occupied
	declare_counter mosul_occupied
       ;PERSIA-IRANIA
	declare_counter ray_occupied
	declare_counter urgench_occupied
	declare_counter isfahan_occupied
       ;ARABIA
	declare_counter mecca_occupied
       ;NORTH AFRICA
	declare_counter marrakesh_occupied
	declare_counter cairo_occupied
	declare_counter tunis_occupied


;------- Start Rebellions -------

;WEST EUROPE

	monitor_event GeneralCaptureSettlement SettlementName Paris
		set_counter paris_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Paris
	  and not FactionType france
	  ;and not FactionType slave
		if I_CompareCounter paris_occupied = 0
				set_counter paris_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Paris 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Paris 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Bordeaux
		set_counter bordeaux_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Bordeaux
	  and not FactionType slave
		if I_CompareCounter bordeaux_occupied = 0
				set_counter bordeaux_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Bordeaux 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Bordeaux 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Toulouse
		set_counter toulouse_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Toulouse
	  and not FactionType slave
		if I_CompareCounter toulouse_occupied = 0
				set_counter toulouse_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Toulouse 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Toulouse 3
			end_if
		end_if
	end_monitor

	monitor_event PreFactionTurnStart I_TurnNumber < 1
	  and I_SettlementOwner Khlynov = france
		set_counter orleans_exists 1
		terminate_monitor
	end_monitor
	monitor_event GeneralCaptureSettlement SettlementName Khlynov
	  and I_CompareCounter orleans_exists = 1
		set_counter orleans_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Khlynov
	  and I_CompareCounter orleans_exists = 1
	  and not FactionType france
	  and not FactionType slave
		if I_CompareCounter orleans_occupied = 0
				set_counter orleans_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Khlynov 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Khlynov 3
			end_if
		end_if
	end_monitor

;BRITISH ISLES

	monitor_event GeneralCaptureSettlement SettlementName London
		set_counter london_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName London
	  and not FactionType england
	  ;and not FactionType slave
		if I_CompareCounter london_occupied = 0
				set_counter london_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil London 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil London 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Edinburgh
		set_counter edinburgh_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Edinburgh
	  and not FactionType scotland
	  and not FactionType slave
		if I_CompareCounter edinburgh_occupied = 0
				set_counter edinburgh_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Edinburgh 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Edinburgh 6
			end_if
		end_if
	end_monitor

;CENTRAL EUROPE

	monitor_event GeneralCaptureSettlement SettlementName Frankfurt
		set_counter frankfurt_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Frankfurt
	  and not FactionType hre
	  ;and not FactionType slave
		if I_CompareCounter frankfurt_occupied = 0
				set_counter frankfurt_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Frankfurt 6
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Frankfurt 4
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Bern
		set_counter bern_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Bern
	  and not FactionType slave
		if I_CompareCounter bern_occupied = 0
				set_counter bern_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Bern 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Bern 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Antwerp
		set_counter antwerp_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Antwerp
	  and not FactionType slave
		if I_CompareCounter antwerp_occupied = 0
				set_counter antwerp_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Antwerp 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Antwerp 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Vienna
		set_counter vienna_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Vienna
	  and not FactionType hre
	  ;and not FactionType slave
		if I_CompareCounter vienna_occupied = 0
				set_counter vienna_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Vienna 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Vienna 3
			end_if
		end_if
	end_monitor

;ITALY

	monitor_event GeneralCaptureSettlement SettlementName Milan
		set_counter milan_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Milan
	  and not FactionType slave
		if I_CompareCounter milan_occupied = 0
				set_counter milan_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Milan 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Milan 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Genoa
		set_counter genoa_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Genoa
	  and not FactionType milan
	  ;and not FactionType slave
		if I_CompareCounter genoa_occupied = 0
				set_counter genoa_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Genoa 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Genoa 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Venice
		set_counter venice_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Venice
	  and not FactionType venice
	  ;and not FactionType slave
		if I_CompareCounter venice_occupied = 0
				set_counter venice_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Venice 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Venice 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Rome
		set_counter rome_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Rome
	  and not FactionType papal_states
	  ;and not FactionType slave
		if I_CompareCounter rome_occupied = 0
				set_counter rome_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Rome 6
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Rome 4
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Palermo
		set_counter palermo_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Palermo
	  and not FactionType sicily
	  ;and not FactionType slave
		if I_CompareCounter palermo_occupied = 0
				set_counter palermo_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Palermo 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Palermo 6
			end_if
		end_if
	end_monitor

;IBERIA

	monitor_event GeneralCaptureSettlement SettlementName Toledo
		set_counter toledo_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Toledo
	  and not FactionType spain
	  ;and not FactionType slave
		if I_CompareCounter toledo_occupied = 0
				set_counter toledo_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Toledo 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Toledo 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Oporto
		set_counter oporto_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Oporto
	  and not FactionType portugal
	  ;and not FactionType slave
		if I_CompareCounter oporto_occupied = 0
				set_counter oporto_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Oporto 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Oporto 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Zaragoza
		set_counter zaragoza_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Zaragoza
	  and not FactionType aragon
	  ;and not FactionType slave
		if I_CompareCounter zaragoza_occupied = 0
				set_counter zaragoza_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Zaragoza 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Zaragoza 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Granada
		set_counter granada_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Granada
	  and not FactionType moors
	  ;and not FactionType slave
		if I_CompareCounter granada_occupied = 0
				set_counter granada_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Granada 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Granada 6
			end_if
		end_if
	end_monitor

;EASTERN EUROPE

	monitor_event GeneralCaptureSettlement SettlementName Prague
		set_counter prague_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Prague
	  and not FactionType slave
		if I_CompareCounter prague_occupied = 0
				set_counter prague_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Prague 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Prague 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Esztergom
		set_counter esztergom_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Esztergom
	  and not FactionType hungary
	  ;and not FactionType slave
		if I_CompareCounter esztergom_occupied = 0
				set_counter esztergom_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Esztergom 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Esztergom 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Krakow
		set_counter krakow_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Krakow
	  and not FactionType poland
	  ;and not FactionType slave
		if I_CompareCounter krakow_occupied = 0
				set_counter krakow_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Krakow 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Krakow 6
			end_if
		end_if
	end_monitor

;SCANDINAVIA

	monitor_event GeneralCaptureSettlement SettlementName Arhus
		set_counter arhus_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Arhus
	  and not FactionType denmark
	  ;and not FactionType slave
		if I_CompareCounter arhus_occupied = 0
				set_counter arhus_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Arhus 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Arhus 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Bergen
		set_counter bergen_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Bergen
	  and not FactionType norway
	  ;and not FactionType slave
		if I_CompareCounter bergen_occupied = 0
				set_counter bergen_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Bergen 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Bergen 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Kalmar
		set_counter kalmar_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Kalmar
	  and not FactionType slave
		if I_CompareCounter kalmar_occupied = 0
				set_counter kalmar_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Kalmar 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Kalmar 3
			end_if
		end_if
	end_monitor

;RUSLAND

	monitor_event GeneralCaptureSettlement SettlementName Novgorod
		set_counter novgorod_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Novgorod
	  and not FactionType russia
	  ;and not FactionType slave
		if I_CompareCounter novgorod_occupied = 0
				set_counter novgorod_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Novgorod 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Novgorod 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Kiev
		set_counter kiev_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Kiev
	  and not FactionType kievan_rus
	  ;and not FactionType slave
		if I_CompareCounter kiev_occupied = 0
				set_counter kiev_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Kiev 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Kiev 6
			end_if
		end_if
	end_monitor

;BALKANS

	monitor_event GeneralCaptureSettlement SettlementName Constantinople
		set_counter constantinople_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Constantinople
	  and not FactionType byzantium
	  ;and not FactionType slave
		if I_CompareCounter constantinople_occupied = 0
				set_counter constantinople_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Constantinople 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Constantinople 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Ryazan
	  and I_CompareCounter orleans_exists = 1; if Orleans exists so does Ras
		set_counter ras_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Ryazan
	  and I_CompareCounter orleans_exists = 1; if Orleans exists so does Ras
	  and not FactionType slave
		if I_CompareCounter ras_occupied = 0
				set_counter ras_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Ryazan 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Ryazan 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Zagreb
		set_counter zagreb_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Zagreb
	  and not FactionType slave
		if I_CompareCounter zagreb_occupied = 0
				set_counter zagreb_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Zagreb 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Zagreb 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Arta
		set_counter arta_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Arta
	  and not FactionType byzantium
	  ;and not FactionType slave
		if I_CompareCounter arta_occupied = 0
				set_counter arta_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Arta 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Arta 3
			end_if
		end_if
	end_monitor

;ANATOLIA-CAUCASUS

	monitor_event GeneralCaptureSettlement SettlementName Ankara
		set_counter ankara_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Ankara
	  and not FactionType turks
	  ;and not FactionType slave
		if I_CompareCounter ankara_occupied = 0
				set_counter ankara_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Ankara 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Ankara 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Iconium
		set_counter iconium_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Iconium
	  and not FactionType turks
	  ;and not FactionType slave
		if I_CompareCounter iconium_occupied = 0
				set_counter iconium_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Iconium 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Iconium 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Trebizond
		set_counter trebizond_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Trebizond
	  and not FactionType byzantium
	  ;and not FactionType slave
		if I_CompareCounter trebizond_occupied = 0
				set_counter trebizond_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Trebizond 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Trebizond 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Kutaisi
		set_counter kutaisi_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Kutaisi
	  and not FactionType slave
		if I_CompareCounter kutaisi_occupied = 0
				set_counter kutaisi_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Kutaisi 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Kutaisi 3
			end_if
		end_if
	end_monitor

;LEVANT

	monitor_event GeneralCaptureSettlement SettlementName Jerusalem
		set_counter jerusalem_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Jerusalem
	  and not FactionType jerusalem
	  ;and not FactionType slave
		if I_CompareCounter jerusalem_occupied = 0
				set_counter jerusalem_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Jerusalem 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Jerusalem 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Damascus
		set_counter damascus_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Damascus
	  and not FactionType slave
		if I_CompareCounter damascus_occupied = 0
				set_counter damascus_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Damascus 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Damascus 3
			end_if
		end_if
	end_monitor

;MESOPOTAMIA

	monitor_event GeneralCaptureSettlement SettlementName Baghdad
		set_counter baghdad_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Baghdad
	  and not FactionType slave
		if I_CompareCounter baghdad_occupied = 0
				set_counter baghdad_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Baghdad 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Baghdad 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Mosul
		set_counter mosul_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Mosul
	  and not FactionType turks
	  ;and not FactionType slave
		if I_CompareCounter mosul_occupied = 0
				set_counter mosul_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Mosul 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Mosul 3
			end_if
		end_if
	end_monitor

;PERSIA-IRANIA

	monitor_event GeneralCaptureSettlement SettlementName Ray
		set_counter ray_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Ray
	  and not FactionType kwarezm
	  ;and not FactionType slave
		if I_CompareCounter ray_occupied = 0
				set_counter ray_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Ray 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Ray 3
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Urgench
		set_counter urgench_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Urgench
	  and not FactionType kwarezm
	  ;and not FactionType slave
		if I_CompareCounter urgench_occupied = 0
				set_counter urgench_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Urgench 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Urgench 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Isfahan
		set_counter isfahan_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Isfahan
	  and not FactionType slave
		if I_CompareCounter isfahan_occupied = 0
				set_counter isfahan_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Isfahan 6
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Isfahan 4
			end_if
		end_if
	end_monitor

;ARABIA

	monitor_event GeneralCaptureSettlement SettlementName Mecca
		set_counter mecca_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Mecca
	  and not FactionType slave
		if I_CompareCounter mecca_occupied = 0
				set_counter mecca_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Mecca 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Mecca 3
			end_if
		end_if
	end_monitor

;NORTH AFRICA

	monitor_event GeneralCaptureSettlement SettlementName Marrakesh
		set_counter marrakesh_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Marrakesh
	  and not FactionType moors
	  ;and not FactionType slave
		if I_CompareCounter marrakesh_occupied = 0
				set_counter marrakesh_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Marrakesh 6
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Marrakesh 4
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Cairo
		set_counter cairo_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Cairo
	  and not FactionType egypt
	  ;and not FactionType slave
		if I_CompareCounter cairo_occupied = 0
				set_counter cairo_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Cairo 8
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Cairo 6
			end_if
		end_if
	end_monitor

	monitor_event GeneralCaptureSettlement SettlementName Tunis
		set_counter tunis_occupied 0
	end_monitor
	monitor_event SettlementTurnStart SettlementName Tunis
	  and not FactionType slave
		if I_CompareCounter tunis_occupied = 0
				set_counter tunis_occupied 1
			if I_EventCounter is_the_ai = 0
				add_settlement_turmoil Tunis 5
			end_if
			if I_EventCounter is_the_ai = 1
				add_settlement_turmoil Tunis 3
			end_if
		end_if
	end_monitor

;=======================Weak Leader Counter Reset======================

;VENICE
	monitor_event BecomesFactionLeader FactionType venice
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements venice >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = venice
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = venice
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = venice
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = venice
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = venice
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = venice
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = venice
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = venice
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = venice
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = venice
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = venice
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = venice
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = venice
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = venice
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = venice
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = venice
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = venice
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = venice
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = venice
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = venice
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = venice
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = venice
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = venice
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = venice
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = venice
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = venice
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = venice
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = venice
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = venice
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = venice
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = venice
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = venice
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = venice
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = venice
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = venice
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = venice
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = venice
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = venice
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = venice
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = venice
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = venice
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = venice
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = venice
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = venice
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = venice
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = venice
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = venice
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = venice
			set_counter tunis_occupied 0
			end_if
	end_monitor

;SICILY
	monitor_event BecomesFactionLeader FactionType sicily
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements sicily >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = sicily
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = sicily
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = sicily
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = sicily
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = sicily
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = sicily
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = sicily
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = sicily
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = sicily
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = sicily
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = sicily
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = sicily
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = sicily
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = sicily
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = sicily
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = sicily
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = sicily
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = sicily
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = sicily
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = sicily
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = sicily
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = sicily
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = sicily
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = sicily
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = sicily
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = sicily
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = sicily
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = sicily
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = sicily
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = sicily
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = sicily
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = sicily
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = sicily
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = sicily
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = sicily
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = sicily
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = sicily
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = sicily
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = sicily
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = sicily
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = sicily
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = sicily
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = sicily
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = sicily
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = sicily
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = sicily
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = sicily
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = sicily
			set_counter tunis_occupied 0
			end_if
	end_monitor

;GENOA/MILAN
	monitor_event BecomesFactionLeader FactionType milan
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements milan >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = milan
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = milan
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = milan
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = milan
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = milan
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = milan
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = milan
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = milan
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = milan
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = milan
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = milan
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = milan
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = milan
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = milan
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = milan
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = milan
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = milan
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = milan
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = milan
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = milan
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = milan
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = milan
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = milan
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = milan
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = milan
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = milan
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = milan
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = milan
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = milan
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = milan
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = milan
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = milan
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = milan
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = milan
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = milan
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = milan
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = milan
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = milan
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = milan
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = milan
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = milan
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = milan
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = milan
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = milan
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = milan
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = milan
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = milan
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = milan
			set_counter tunis_occupied 0
			end_if
	end_monitor

;SPAIN
	monitor_event BecomesFactionLeader FactionType spain
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements spain >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = spain
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = spain
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = spain
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = spain
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = spain
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = spain
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = spain
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = spain
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = spain
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = spain
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = spain
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = spain
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = spain
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = spain
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = spain
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = spain
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = spain
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = spain
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = spain
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = spain
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = spain
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = spain
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = spain
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = spain
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = spain
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = spain
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = spain
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = spain
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = spain
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = spain
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = spain
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = spain
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = spain
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = spain
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = spain
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = spain
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = spain
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = spain
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = spain
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = spain
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = spain
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = spain
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = spain
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = spain
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = spain
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = spain
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = spain
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = spain
			set_counter tunis_occupied 0
			end_if
	end_monitor

;ARAGON
	monitor_event BecomesFactionLeader FactionType aragon
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements aragon >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = aragon
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = aragon
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = aragon
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = aragon
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = aragon
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = aragon
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = aragon
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = aragon
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = aragon
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = aragon
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = aragon
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = aragon
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = aragon
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = aragon
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = aragon
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = aragon
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = aragon
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = aragon
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = aragon
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = aragon
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = aragon
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = aragon
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = aragon
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = aragon
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = aragon
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = aragon
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = aragon
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = aragon
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = aragon
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = aragon
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = aragon
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = aragon
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = aragon
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = aragon
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = aragon
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = aragon
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = aragon
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = aragon
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = aragon
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = aragon
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = aragon
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = aragon
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = aragon
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = aragon
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = aragon
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = aragon
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = aragon
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = aragon
			set_counter tunis_occupied 0
			end_if
	end_monitor

;PORTUGAL
	monitor_event BecomesFactionLeader FactionType portugal
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements portugal >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = portugal
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = portugal
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = portugal
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = portugal
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = portugal
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = portugal
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = portugal
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = portugal
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = portugal
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = portugal
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = portugal
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = portugal
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = portugal
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = portugal
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = portugal
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = portugal
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = portugal
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = portugal
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = portugal
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = portugal
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = portugal
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = portugal
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = portugal
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = portugal
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = portugal
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = portugal
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = portugal
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = portugal
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = portugal
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = portugal
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = portugal
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = portugal
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = portugal
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = portugal
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = portugal
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = portugal
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = portugal
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = portugal
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = portugal
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = portugal
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = portugal
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = portugal
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = portugal
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = portugal
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = portugal
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = portugal
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = portugal
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = portugal
			set_counter tunis_occupied 0
			end_if
	end_monitor

;BYZANTIUM
	monitor_event BecomesFactionLeader FactionType byzantium
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements byzantium >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = byzantium
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = byzantium
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = byzantium
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = byzantium
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = byzantium
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = byzantium
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = byzantium
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = byzantium
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = byzantium
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = byzantium
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = byzantium
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = byzantium
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = byzantium
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = byzantium
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = byzantium
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = byzantium
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = byzantium
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = byzantium
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = byzantium
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = byzantium
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = byzantium
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = byzantium
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = byzantium
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = byzantium
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = byzantium
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = byzantium
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = byzantium
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = byzantium
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = byzantium
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = byzantium
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = byzantium
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = byzantium
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = byzantium
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = byzantium
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = byzantium
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = byzantium
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = byzantium
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = byzantium
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = byzantium
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = byzantium
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = byzantium
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = byzantium
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = byzantium
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = byzantium
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = byzantium
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = byzantium
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = byzantium
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = byzantium
			set_counter tunis_occupied 0
			end_if
	end_monitor

;TURKS
	monitor_event BecomesFactionLeader FactionType turks
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements turks >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = turks
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = turks
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = turks
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = turks
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = turks
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = turks
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = turks
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = turks
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = turks
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = turks
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = turks
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = turks
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = turks
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = turks
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = turks
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = turks
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = turks
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = turks
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = turks
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = turks
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = turks
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = turks
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = turks
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = turks
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = turks
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = turks
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = turks
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = turks
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = turks
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = turks
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = turks
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = turks
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = turks
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = turks
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = turks
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = turks
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = turks
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = turks
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = turks
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = turks
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = turks
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = turks
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = turks
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = turks
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = turks
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = turks
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = turks
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = turks
			set_counter tunis_occupied 0
			end_if
	end_monitor

;EGYPT
	monitor_event BecomesFactionLeader FactionType egypt
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements egypt >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = egypt
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = egypt
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = egypt
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = egypt
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = egypt
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = egypt
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = egypt
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = egypt
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = egypt
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = egypt
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = egypt
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = egypt
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = egypt
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = egypt
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = egypt
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = egypt
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = egypt
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = egypt
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = egypt
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = egypt
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = egypt
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = egypt
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = egypt
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = egypt
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = egypt
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = egypt
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = egypt
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = egypt
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = egypt
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = egypt
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = egypt
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = egypt
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = egypt
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = egypt
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = egypt
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = egypt
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = egypt
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = egypt
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = egypt
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = egypt
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = egypt
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = egypt
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = egypt
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = egypt
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = egypt
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = egypt
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = egypt
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = egypt
			set_counter tunis_occupied 0
			end_if
	end_monitor

;CRUSADER STATES
	monitor_event BecomesFactionLeader FactionType jerusalem
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements jerusalem >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = jerusalem
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = jerusalem
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = jerusalem
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = jerusalem
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = jerusalem
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = jerusalem
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = jerusalem
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = jerusalem
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = jerusalem
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = jerusalem
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = jerusalem
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = jerusalem
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = jerusalem
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = jerusalem
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = jerusalem
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = jerusalem
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = jerusalem
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = jerusalem
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = jerusalem
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = jerusalem
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = jerusalem
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = jerusalem
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = jerusalem
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = jerusalem
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = jerusalem
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = jerusalem
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = jerusalem
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = jerusalem
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = jerusalem
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = jerusalem
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = jerusalem
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = jerusalem
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = jerusalem
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = jerusalem
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = jerusalem
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = jerusalem
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = jerusalem
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = jerusalem
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = jerusalem
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = jerusalem
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = jerusalem
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = jerusalem
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = jerusalem
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = jerusalem
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = jerusalem
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = jerusalem
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = jerusalem
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = jerusalem
			set_counter tunis_occupied 0
			end_if
	end_monitor

;MOORS
	monitor_event BecomesFactionLeader FactionType moors
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements moors >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = moors
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = moors
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = moors
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = moors
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = moors
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = moors
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = moors
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = moors
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = moors
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = moors
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = moors
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = moors
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = moors
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = moors
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = moors
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = moors
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = moors
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = moors
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = moors
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = moors
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = moors
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = moors
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = moors
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = moors
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = moors
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = moors
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = moors
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = moors
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = moors
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = moors
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = moors
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = moors
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = moors
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = moors
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = moors
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = moors
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = moors
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = moors
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = moors
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = moors
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = moors
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = moors
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = moors
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = moors
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = moors
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = moors
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = moors
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = moors
			set_counter tunis_occupied 0
			end_if
	end_monitor

;FRANCE
	monitor_event BecomesFactionLeader FactionType france
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements france >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = france
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = france
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = france
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = france
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = france
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = france
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = france
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = france
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = france
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = france
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = france
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = france
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = france
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = france
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = france
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = france
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = france
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = france
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = france
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = france
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = france
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = france
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = france
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = france
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = france
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = france
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = france
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = france
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = france
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = france
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = france
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = france
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = france
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = france
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = france
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = france
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = france
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = france
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = france
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = france
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = france
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = france
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = france
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = france
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = france
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = france
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = france
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = france
			set_counter tunis_occupied 0
			end_if
	end_monitor

;ENGLAND
	monitor_event BecomesFactionLeader FactionType england
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements england >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = england
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = england
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = england
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = england
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = england
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = england
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = england
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = england
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = england
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = england
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = england
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = england
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = england
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = england
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = england
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = england
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = england
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = england
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = england
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = england
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = england
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = england
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = england
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = england
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = england
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = england
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = england
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = england
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = england
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = england
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = england
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = england
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = england
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = england
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = england
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = england
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = england
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = england
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = england
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = england
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = england
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = england
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = england
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = england
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = england
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = england
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = england
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = england
			set_counter tunis_occupied 0
			end_if
	end_monitor

;SCOTLAND
	monitor_event BecomesFactionLeader FactionType scotland
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements scotland >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = scotland
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = scotland
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = scotland
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = scotland
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = scotland
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = scotland
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = scotland
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = scotland
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = scotland
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = scotland
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = scotland
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = scotland
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = scotland
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = scotland
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = scotland
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = scotland
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = scotland
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = scotland
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = scotland
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = scotland
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = scotland
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = scotland
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = scotland
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = scotland
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = scotland
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = scotland
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = scotland
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = scotland
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = scotland
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = scotland
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = scotland
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = scotland
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = scotland
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = scotland
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = scotland
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = scotland
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = scotland
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = scotland
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = scotland
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = scotland
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = scotland
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = scotland
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = scotland
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = scotland
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = scotland
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = scotland
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = scotland
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = scotland
			set_counter tunis_occupied 0
			end_if
	end_monitor

;HRE
	monitor_event BecomesFactionLeader FactionType hre
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements hre >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = hre
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = hre
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = hre
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = hre
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = hre
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = hre
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = hre
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = hre
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = hre
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = hre
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = hre
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = hre
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = hre
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = hre
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = hre
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = hre
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = hre
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = hre
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = hre
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = hre
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = hre
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = hre
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = hre
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = hre
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = hre
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = hre
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = hre
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = hre
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = hre
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = hre
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = hre
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = hre
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = hre
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = hre
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = hre
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = hre
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = hre
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = hre
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = hre
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = hre
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = hre
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = hre
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = hre
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = hre
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = hre
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = hre
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = hre
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = hre
			set_counter tunis_occupied 0
			end_if
	end_monitor

;DENMARK
	monitor_event BecomesFactionLeader FactionType denmark
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements denmark >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = denmark
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = denmark
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = denmark
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = denmark
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = denmark
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = denmark
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = denmark
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = denmark
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = denmark
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = denmark
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = denmark
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = denmark
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = denmark
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = denmark
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = denmark
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = denmark
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = denmark
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = denmark
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = denmark
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = denmark
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = denmark
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = denmark
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = denmark
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = denmark
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = denmark
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = denmark
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = denmark
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = denmark
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = denmark
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = denmark
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = denmark
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = denmark
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = denmark
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = denmark
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = denmark
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = denmark
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = denmark
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = denmark
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = denmark
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = denmark
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = denmark
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = denmark
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = denmark
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = denmark
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = denmark
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = denmark
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = denmark
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = denmark
			set_counter tunis_occupied 0
			end_if
	end_monitor

;NORWAY
	monitor_event BecomesFactionLeader FactionType norway
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements norway >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = norway
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = norway
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = norway
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = norway
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = norway
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = norway
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = norway
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = norway
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = norway
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = norway
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = norway
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = norway
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = norway
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = norway
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = norway
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = norway
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = norway
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = norway
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = norway
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = norway
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = norway
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = norway
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = norway
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = norway
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = norway
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = norway
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = norway
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = norway
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = norway
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = norway
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = norway
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = norway
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = norway
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = norway
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = norway
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = norway
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = norway
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = norway
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = norway
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = norway
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = norway
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = norway
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = norway
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = norway
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = norway
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = norway
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = norway
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = norway
			set_counter tunis_occupied 0
			end_if
	end_monitor

;HUNGARY
	monitor_event BecomesFactionLeader FactionType hungary
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements hungary >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = hungary
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = hungary
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = hungary
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = hungary
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = hungary
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = hungary
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = hungary
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = hungary
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = hungary
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = hungary
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = hungary
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = hungary
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = hungary
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = hungary
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = hungary
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = hungary
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = hungary
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = hungary
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = hungary
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = hungary
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = hungary
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = hungary
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = hungary
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = hungary
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = hungary
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = hungary
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = hungary
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = hungary
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = hungary
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = hungary
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = hungary
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = hungary
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = hungary
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = hungary
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = hungary
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = hungary
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = hungary
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = hungary
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = hungary
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = hungary
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = hungary
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = hungary
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = hungary
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = hungary
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = hungary
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = hungary
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = hungary
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = hungary
			set_counter tunis_occupied 0
			end_if
	end_monitor

;POLAND
	monitor_event BecomesFactionLeader FactionType poland
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements poland >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = poland
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = poland
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = poland
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = poland
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = poland
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = poland
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = poland
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = poland
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = poland
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = poland
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = poland
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = poland
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = poland
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = poland
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = poland
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = poland
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = poland
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = poland
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = poland
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = poland
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = poland
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = poland
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = poland
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = poland
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = poland
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = poland
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = poland
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = poland
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = poland
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = poland
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = poland
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = poland
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = poland
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = poland
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = poland
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = poland
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = poland
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = poland
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = poland
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = poland
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = poland
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = poland
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = poland
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = poland
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = poland
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = poland
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = poland
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = poland
			set_counter tunis_occupied 0
			end_if
	end_monitor

;LITHUANIA
	monitor_event BecomesFactionLeader FactionType lithuania
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements lithuania >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = lithuania
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = lithuania
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = lithuania
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = lithuania
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = lithuania
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = lithuania
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = lithuania
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = lithuania
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = lithuania
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = lithuania
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = lithuania
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = lithuania
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = lithuania
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = lithuania
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = lithuania
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = lithuania
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = lithuania
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = lithuania
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = lithuania
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = lithuania
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = lithuania
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = lithuania
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = lithuania
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = lithuania
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = lithuania
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = lithuania
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = lithuania
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = lithuania
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = lithuania
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = lithuania
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = lithuania
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = lithuania
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = lithuania
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = lithuania
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = lithuania
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = lithuania
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = lithuania
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = lithuania
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = lithuania
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = lithuania
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = lithuania
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = lithuania
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = lithuania
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = lithuania
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = lithuania
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = lithuania
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = lithuania
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = lithuania
			set_counter tunis_occupied 0
			end_if
	end_monitor

;TEUTONIC ORDER
	monitor_event BecomesFactionLeader FactionType teutonic_order
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements teutonic_order >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = teutonic_order
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = teutonic_order
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = teutonic_order
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = teutonic_order
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = teutonic_order
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = teutonic_order
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = teutonic_order
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = teutonic_order
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = teutonic_order
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = teutonic_order
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = teutonic_order
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = teutonic_order
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = teutonic_order
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = teutonic_order
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = teutonic_order
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = teutonic_order
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = teutonic_order
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = teutonic_order
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = teutonic_order
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = teutonic_order
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = teutonic_order
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = teutonic_order
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = teutonic_order
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = teutonic_order
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = teutonic_order
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = teutonic_order
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = teutonic_order
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = teutonic_order
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = teutonic_order
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = teutonic_order
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = teutonic_order
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = teutonic_order
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = teutonic_order
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = teutonic_order
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = teutonic_order
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = teutonic_order
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = teutonic_order
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = teutonic_order
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = teutonic_order
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = teutonic_order
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = teutonic_order
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = teutonic_order
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = teutonic_order
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = teutonic_order
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = teutonic_order
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = teutonic_order
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = teutonic_order
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = teutonic_order
			set_counter tunis_occupied 0
			end_if
	end_monitor

;KIEVAN RUS
	monitor_event BecomesFactionLeader FactionType kievan_rus
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements kievan_rus >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = kievan_rus
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = kievan_rus
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = kievan_rus
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = kievan_rus
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = kievan_rus
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = kievan_rus
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = kievan_rus
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = kievan_rus
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = kievan_rus
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = kievan_rus
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = kievan_rus
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = kievan_rus
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = kievan_rus
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = kievan_rus
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = kievan_rus
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = kievan_rus
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = kievan_rus
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = kievan_rus
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = kievan_rus
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = kievan_rus
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = kievan_rus
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = kievan_rus
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = kievan_rus
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = kievan_rus
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = kievan_rus
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = kievan_rus
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = kievan_rus
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = kievan_rus
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = kievan_rus
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = kievan_rus
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = kievan_rus
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = kievan_rus
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = kievan_rus
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = kievan_rus
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = kievan_rus
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = kievan_rus
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = kievan_rus
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = kievan_rus
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = kievan_rus
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = kievan_rus
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = kievan_rus
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = kievan_rus
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = kievan_rus
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = kievan_rus
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = kievan_rus
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = kievan_rus
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = kievan_rus
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = kievan_rus
			set_counter tunis_occupied 0
			end_if
	end_monitor

;NOVGOROD/RUSSIA
	monitor_event BecomesFactionLeader FactionType russia
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements russia >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = russia
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = russia
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = russia
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = russia
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = russia
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = russia
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = russia
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = russia
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = russia
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = russia
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = russia
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = russia
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = russia
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = russia
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = russia
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = russia
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = russia
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = russia
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = russia
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = russia
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = russia
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = russia
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = russia
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = russia
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = russia
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = russia
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = russia
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = russia
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = russia
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = russia
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = russia
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = russia
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = russia
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = russia
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = russia
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = russia
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = russia
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = russia
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = russia
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = russia
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = russia
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = russia
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = russia
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = russia
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = russia
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = russia
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = russia
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = russia
			set_counter tunis_occupied 0
			end_if
	end_monitor

;CUMANS
	monitor_event BecomesFactionLeader FactionType cumans
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements cumans >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = cumans
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = cumans
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = cumans
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = cumans
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = cumans
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = cumans
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = cumans
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = cumans
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = cumans
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = cumans
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = cumans
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = cumans
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = cumans
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = cumans
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = cumans
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = cumans
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = cumans
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = cumans
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = cumans
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = cumans
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = cumans
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = cumans
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = cumans
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = cumans
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = cumans
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = cumans
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = cumans
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = cumans
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = cumans
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = cumans
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = cumans
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = cumans
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = cumans
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = cumans
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = cumans
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = cumans
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = cumans
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = cumans
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = cumans
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = cumans
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = cumans
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = cumans
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = cumans
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = cumans
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = cumans
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = cumans
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = cumans
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = cumans
			set_counter tunis_occupied 0
			end_if
	end_monitor

;KWAREZM
	monitor_event BecomesFactionLeader FactionType kwarezm
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements kwarezm >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = kwarezm
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = kwarezm
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = kwarezm
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = kwarezm
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = kwarezm
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = kwarezm
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = kwarezm
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = kwarezm
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = kwarezm
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = kwarezm
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = kwarezm
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = kwarezm
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = kwarezm
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = kwarezm
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = kwarezm
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = kwarezm
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = kwarezm
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = kwarezm
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = kwarezm
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = kwarezm
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = kwarezm
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = kwarezm
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = kwarezm
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = kwarezm
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = kwarezm
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = kwarezm
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = kwarezm
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = kwarezm
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = kwarezm
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = kwarezm
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = kwarezm
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = kwarezm
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = kwarezm
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = kwarezm
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = kwarezm
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = kwarezm
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = kwarezm
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = kwarezm
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = kwarezm
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = kwarezm
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = kwarezm
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = kwarezm
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = kwarezm
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = kwarezm
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = kwarezm
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = kwarezm
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = kwarezm
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = kwarezm
			set_counter tunis_occupied 0
			end_if
	end_monitor

;MONGOLS
	monitor_event BecomesFactionLeader FactionType mongols
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements mongols >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = mongols
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = mongols
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = mongols
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = mongols
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = mongols
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = mongols
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = mongols
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = mongols
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = mongols
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = mongols
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = mongols
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = mongols
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = mongols
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = mongols
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = mongols
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = mongols
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = mongols
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = mongols
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = mongols
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = mongols
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = mongols
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = mongols
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = mongols
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = mongols
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = mongols
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = mongols
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = mongols
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = mongols
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = mongols
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = mongols
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = mongols
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = mongols
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = mongols
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = mongols
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = mongols
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = mongols
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = mongols
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = mongols
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = mongols
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = mongols
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = mongols
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = mongols
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = mongols
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = mongols
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = mongols
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = mongols
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = mongols
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = mongols
			set_counter tunis_occupied 0
			end_if
	end_monitor

;TIMURIDS
	monitor_event BecomesFactionLeader FactionType timurids
		and Attribute Authority < 5
		and Attribute Command < 5
		and I_NumberOfSettlements timurids >= 4
		;WEST EUROPE
			if I_SettlementOwner Paris = timurids
			set_counter paris_occupied 0
			end_if
			if I_SettlementOwner Bordeaux = timurids
			set_counter bordeaux_occupied 0
			end_if
			if I_SettlementOwner Toulouse = timurids
			set_counter toulouse_occupied 0
			end_if
			if I_SettlementOwner Khlynov = timurids
			and I_CompareCounter orleans_exists = 1
			set_counter orleans_occupied 0
			end_if
		;BRITISH ISLES
			if I_SettlementOwner London = timurids
			set_counter london_occupied 0
			end_if
			if I_SettlementOwner Edinburgh = timurids
			set_counter edinburgh_occupied 0
			end_if
		;CENTRAL EUROPE
			if I_SettlementOwner Frankfurt = timurids
			set_counter frankfurt_occupied 0
			end_if
			if I_SettlementOwner Bern = timurids
			set_counter bern_occupied 0
			end_if
			if I_SettlementOwner Antwerp = timurids
			set_counter antwerp_occupied 0
			end_if
			if I_SettlementOwner Vienna = timurids
			set_counter vienna_occupied 0
			end_if
		;ITALY
			if I_SettlementOwner Milan = timurids
			set_counter milan_occupied 0
			end_if
			if I_SettlementOwner Genoa = timurids
			set_counter genoa_occupied 0
			end_if
			if I_SettlementOwner Venice = timurids
			set_counter venice_occupied 0
			end_if
			if I_SettlementOwner Toulouse = timurids
			set_counter rome_occupied 0
			end_if
			if I_SettlementOwner Palermo = timurids
			set_counter palermo_occupied 0
			end_if
		;IBERIA
			if I_SettlementOwner Toledo = timurids
			set_counter toledo_occupied 0
			end_if
			if I_SettlementOwner Oporto = timurids
			set_counter oporto_occupied 0
			end_if
			if I_SettlementOwner Zaragoza = timurids
			set_counter zaragoza_occupied 0
			end_if
			if I_SettlementOwner Granada = timurids
			set_counter granada_occupied 0
			end_if
		;EASTERN EUROPE
			if I_SettlementOwner Prague = timurids
			set_counter prague_occupied 0
			end_if
			if I_SettlementOwner Esztergom = timurids
			set_counter esztergom_occupied 0
			end_if
			if I_SettlementOwner Krakow = timurids
			set_counter krakow_occupied 0
			end_if
			if I_SettlementOwner Vilnius = timurids
			set_counter vilnius_occupied 0
			end_if
		;SCANDINAVIA
			if I_SettlementOwner Arhus = timurids
			set_counter arhus_occupied 0
			end_if
			if I_SettlementOwner Bergen = timurids
			set_counter bergen_occupied 0
			end_if
			if I_SettlementOwner Kalmar = timurids
			set_counter kalmar_occupied 0
			end_if
		;RUSLAND
			if I_SettlementOwner Novgorod = timurids
			set_counter novgorod_occupied 0
			end_if
			if I_SettlementOwner Kiev = timurids
			set_counter kiev_occupied 0
			end_if
		;BALKANS
			if I_SettlementOwner Constantinople = timurids
			set_counter constantinople_occupied 0
			end_if
			if I_SettlementOwner Ryazan = timurids
			and I_CompareCounter orleans_exists = 1
			set_counter ras_occupied 0
			end_if
			if I_SettlementOwner Sofia = timurids
			set_counter sofia_occupied 0
			end_if
			if I_SettlementOwner Zagreb = timurids
			set_counter zagreb_occupied 0
			end_if
			if I_SettlementOwner Arta = timurids
			set_counter arta_occupied 0
			end_if
		;ANATOLIA-CAUCASUS
			if I_SettlementOwner Ankara = timurids
			set_counter ankara_occupied 0
			end_if
			if I_SettlementOwner Iconium = timurids
			set_counter iconium_occupied 0
			end_if
			if I_SettlementOwner Trebizond = timurids
			set_counter trebizond_occupied 0
			end_if
			if I_SettlementOwner Kutaisi = timurids
			set_counter kutaisi_occupied 0
			end_if
		;LEVANT
			if I_SettlementOwner Jerusalem = timurids
			set_counter jerusalem_occupied 0
			end_if
			if I_SettlementOwner Damascus = timurids
			set_counter damascus_occupied 0
			end_if
		;MESOPOTAMIA
			if I_SettlementOwner Baghdad = timurids
			set_counter baghdad_occupied 0
			end_if
			if I_SettlementOwner Mosul = timurids
			set_counter mosul_occupied 0
			end_if
		;PERSIA-IRANIA
			if I_SettlementOwner Ray = timurids
			set_counter ray_occupied 0
			end_if
			if I_SettlementOwner Urgench = timurids
			set_counter urgench_occupied 0
			end_if
			if I_SettlementOwner Isfahan = timurids
			set_counter isfahan_occupied 0
			end_if
		;ARABIA
			if I_SettlementOwner Mecca = timurids
			set_counter mecca_occupied 0
			end_if
		;NORTH AFRICA
			if I_SettlementOwner Marrakesh = timurids
			set_counter marrakesh_occupied 0
			end_if
			if I_SettlementOwner Cairo = timurids
			set_counter cairo_occupied 0
			end_if
			if I_SettlementOwner Tunis = timurids
			set_counter tunis_occupied 0
			end_if
	end_monitor

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;======================END OF KINGDOM EMPIRE AND REPUBLICS SCRIPTS==========================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

;========================= Istanople ==========================
declare_counter istanople

monitor_event GeneralCaptureSettlement SettlementName Constantinople
	and CharFactionType turks
	and I_CompareCounter istanople = 0

	set_counter istanople 1
	change_settlement_name Constantinople Istanbul
end_monitor

monitor_event GeneralCaptureSettlement SettlementName Constantinople
	and not FactionReligion islam
	and not FactionReligion pagan
	and I_CompareCounter istanople = 1

	set_counter istanople 0
	change_settlement_name Constantinople Constantinople
end_monitor


;==============================================================
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;RE-EMERGING FACTIONS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;-------------Counters--------------

;Global
	declare_counter ros_po_building
	set_counter ros_po_building 0

	declare_counter faction_emerge_id
	set_counter faction_emerge_id 0

	declare_counter military_era
	set_counter military_era 0
	monitor_event EventCounter EventCounterType HEAVY_MAIL_ARMOR
		and EventCounter > 0
			set_counter military_era 1
	terminate_monitor
	end_monitor
	monitor_event EventCounter EventCounterType HALF_PLATE_ARMOR
		and EventCounter > 0
			set_counter military_era 2
	terminate_monitor
	end_monitor

;Scotland
	declare_counter edinburgh_riot
	set_counter edinburgh_riot 0
	declare_counter aberdeen_riot
	set_counter aberdeen_riot 0
	declare_counter inverness_riot
	set_counter inverness_riot 0
	declare_counter scotland_emerge
	set_counter scotland_emerge 0

;Venice
	declare_counter venice_riot
	set_counter venice_riot 0
	declare_counter venice_emerge
	set_counter venice_emerge 0

;Sicily
	declare_counter palermo_riot
	set_counter palermo_riot 0
	declare_counter syracuse_riot
	set_counter syracuse_riot 0
	declare_counter naples_riot
	set_counter naples_riot 0
	declare_counter sicily_emerge
	set_counter sicily_emerge 0

;Milan/Genoa
	declare_counter genoa_riot
	set_counter genoa_riot 0
	declare_counter milan_emerge
	set_counter milan_emerge 0

;Denmark
	declare_counter arhus_riot
	set_counter arhus_riot 0
	declare_counter roskilde_riot
	set_counter roskilde_riot 0
	declare_counter denmark_emerge
	set_counter denmark_emerge 0

;Cumans
	declare_counter jaiksk_riot
	set_counter jaiksk_riot 0
	declare_counter azaq_riot
	set_counter azaq_riot 0
	declare_counter baia_riot
	set_counter baia_riot 0
	declare_counter cumans_emerge
	set_counter cumans_emerge 0

;Turks/Seljuks
	declare_counter caesarea_riot
	set_counter caesarea_riot 0
	declare_counter ankara_riot
	set_counter ankara_riot 0
	declare_counter iconium_riot
	set_counter iconium_riot 0
	declare_counter diyarbakir_riot
	set_counter diyarbakir_riot 0
	declare_counter turks_emerge
	set_counter turks_emerge 0

;France
	declare_counter paris_riot
	set_counter paris_riot 0
	declare_counter rheims_riot
	set_counter rheims_riot 0
	declare_counter clermont_riot
	set_counter clermont_riot 0
	declare_counter angers_riot
	set_counter angers_riot 0
	declare_counter france_emerge
	set_counter france_emerge 0

;HRE
	declare_counter frankfurt_riot
	set_counter frankfurt_riot 0
	declare_counter vienna_riot
	set_counter vienna_riot 0
	declare_counter prague_riot
	set_counter prague_riot 0
	declare_counter staufen_riot
	set_counter staufen_riot 0
	declare_counter nuremburg_riot
	set_counter nuremburg_riot 0
	declare_counter hre_emerge
	set_counter hre_emerge 0

;England
	declare_counter london_riot
	set_counter london_riot 0
	declare_counter nottingham_riot
	set_counter nottingham_riot 0
	declare_counter winchester_riot
	set_counter winchester_riot 0
	declare_counter england_emerge
	set_counter england_emerge 0

;Portugal
	declare_counter oporto_riot
	set_counter oporto_riot 0
	declare_counter lisbon_riot
	set_counter lisbon_riot 0
	declare_counter portugal_emerge
	set_counter portugal_emerge 0

;Poland
	declare_counter krakow_riot
	set_counter krakow_riot 0
	declare_counter halych_riot
	set_counter halych_riot 0
	declare_counter plock_riot
	set_counter plock_riot 0
	declare_counter poland_emerge
	set_counter poland_emerge 0

;Byzantium
	declare_counter constantinople_riot
	set_counter constantinople_riot 0
	declare_counter nicaea_riot
	set_counter nicaea_riot 0
	declare_counter athens_riot
	set_counter athens_riot 0
	declare_counter arta_riot
	set_counter arta_riot 0
	declare_counter trebizond_riot
	set_counter trebizond_riot 0
	declare_counter byzantium_emerge
	set_counter byzantium_emerge 0

;Moors
	declare_counter marrakesh_riot
	set_counter marrakesh_riot 0
	declare_counter fes_riot
	set_counter fes_riot 0
	declare_counter melilla_riot
	set_counter melilla_riot 0
	declare_counter moors_emerge
	set_counter moors_emerge 0

;Russia/Novgorod
	declare_counter novgorod_riot
	set_counter novgorod_riot 0
	declare_counter russia_emerge
	set_counter russia_emerge 0

;Spain/Leon
	declare_counter leon_riot
	set_counter leon_riot 0
	declare_counter toledo_riot
	set_counter toledo_riot 0
	declare_counter salamanca_riot
	set_counter salamanca_riot 0
	declare_counter burgos_riot
	set_counter burgos_riot 0
	declare_counter spain_emerge
	set_counter spain_emerge 0

;Hungary
	declare_counter varad_riot
	set_counter varad_riot 0
	declare_counter esztergom_riot
	set_counter esztergom_riot 0
	declare_counter kassa_riot
	set_counter kassa_riot 0
	declare_counter hungary_emerge
	set_counter hungary_emerge 0

;Aragon
	declare_counter zaragoza_riot
	set_counter zaragoza_riot 0
	declare_counter pamplona_riot
	set_counter pamplona_riot 0
	declare_counter barcelona_riot
	set_counter barcelona_riot 0
	declare_counter aragon_emerge
	set_counter aragon_emerge 0

;Lithuania
	declare_counter vilnius_riot
	set_counter vilnius_riot 0
	declare_counter lithuania_emerge
	set_counter lithuania_emerge 0

;Kievan Rus
	declare_counter kiev_riot
	set_counter kiev_riot 0
	declare_counter kievan_rus_emerge
	set_counter kievan_rus_emerge 0

;Norway
	declare_counter bergen_riot
	set_counter bergen_riot 0
	declare_counter eikundarsund_riot
	set_counter eikundarsund_riot 0
	declare_counter norway_emerge
	set_counter norway_emerge 0

;Kwarezm
	declare_counter urgench_riot
	set_counter urgench_riot 0
	declare_counter khiva_riot
	set_counter khiva_riot 0
	declare_counter konjikala_riot
	set_counter konjikala_riot 0
	declare_counter kwarezm_emerge
	set_counter kwarezm_emerge 0

;Egypt/Fatimids
	declare_counter cairo_riot
	set_counter cairo_riot 0
	declare_counter alexandria_riot
	set_counter alexandria_riot 0
	declare_counter damietta_riot
	set_counter damietta_riot 0
	declare_counter egypt_emerge
	set_counter egypt_emerge 0

;Jerusalem/Crusader States
	declare_counter rhodes_riot
	set_counter rhodes_riot 0
	declare_counter nicosia_riot
	set_counter nicosia_riot 0
	declare_counter me_crusader
	set_counter me_crusader 0
	declare_counter jerusalem_emerge
	set_counter jerusalem_emerge 0
	
;Teutonic Order
	declare_counter thorn_riot
	set_counter thorn_riot 0
	declare_counter palanga_riot
	set_counter palanga_riot 0
	declare_counter riga_riot
	set_counter riga_riot 0
	declare_counter eu_crusader
	set_counter eu_crusader 0
	declare_counter teutonic_order_emerge
	set_counter teutonic_order_emerge 0

;
;---------------------------------------------------------------------------------------
;-------Check if settlements are rioting and factions meet conditions to re-emerge--------
;--------------------------------------------------------------------------------------
;Only 1 faction can re-emerge per turn
;a same faction cannot re-emerge twice consecutively
;giving more chance to the other factions.

;Scotland
	monitor_event CityRiots SettlementName Edinburgh
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Edinburgh = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter edinburgh_riot 1
	    set_counter faction_emerge_id 1
	end_monitor
	monitor_event CityRiots SettlementName Aberdeen
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Aberdeen = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter aberdeen_riot 1
	    set_counter faction_emerge_id 1
	end_monitor
	monitor_event CityRiots SettlementName Inverness
	  and I_NumberOfSettlements scotland = 0
	  and I_IsFactionAIControlled scotland
	  and not I_SettlementOwner Inverness = scotland
	  and I_CompareCounter scotland_emerge = 0
	    set_counter inverness_riot 1
	    set_counter faction_emerge_id 1
	end_monitor

;Venice
	monitor_event CityRiots SettlementName Venice
	  and I_NumberOfSettlements venice = 0
	  and I_IsFactionAIControlled venice
	  and not I_SettlementOwner Venice = venice
	  and I_CompareCounter venice_emerge = 0
	    set_counter venice_riot 1
	    set_counter faction_emerge_id 2
	end_monitor

;Sicily
	monitor_event CityRiots SettlementName Palermo
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Palermo = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter palermo_riot 1
	    set_counter faction_emerge_id 3
	end_monitor
	monitor_event CityRiots SettlementName Syracuse
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Syracuse = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter syracuse_riot 1
	    set_counter faction_emerge_id 3
	end_monitor
	monitor_event CityRiots SettlementName Naples
	  and I_NumberOfSettlements sicily = 0
	  and I_IsFactionAIControlled sicily
	  and not I_SettlementOwner Naples = sicily
	  and I_CompareCounter sicily_emerge = 0
	    set_counter naples_riot 1
	    set_counter faction_emerge_id 3
	end_monitor

;Milan/Genoa
	monitor_event CityRiots SettlementName Genoa
	  and I_NumberOfSettlements milan = 0
	  and I_IsFactionAIControlled milan
	  and not I_SettlementOwner Genoa = milan
	  and I_CompareCounter milan_emerge = 0
	    set_counter genoa_riot 1
	    set_counter faction_emerge_id 4
	end_monitor

;Denmark
	monitor_event CityRiots SettlementName Arhus
	  and I_NumberOfSettlements denmark = 0
	  and I_IsFactionAIControlled denmark
	  and not I_SettlementOwner Arhus = denmark
	  and I_CompareCounter denmark_emerge = 0
	    set_counter arhus_riot 1
	    set_counter faction_emerge_id 5
	end_monitor
	monitor_event CityRiots SettlementName Roskilde
	  and I_NumberOfSettlements denmark = 0
	  and I_IsFactionAIControlled denmark
	  and not I_SettlementOwner Roskilde = denmark
	  and I_CompareCounter denmark_emerge = 0
	    set_counter roskilde_riot 1
	    set_counter faction_emerge_id 5
	end_monitor

;Cumans
	monitor_event CityRiots SettlementName Jaiksk
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Jaiksk = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter jaiksk_riot 1
	    set_counter faction_emerge_id 6
	end_monitor
	monitor_event CityRiots SettlementName Azaq
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Azaq = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter azaq_riot 1
	    set_counter faction_emerge_id 6
	end_monitor
	monitor_event CityRiots SettlementName Baia
	  and I_NumberOfSettlements cumans = 0
	  and I_IsFactionAIControlled cumans
	  and not I_SettlementOwner Baia = cumans
	  and I_CompareCounter cumans_emerge = 0
	    set_counter baia_riot 1
	    set_counter faction_emerge_id 6
	end_monitor

;Turks/Seljuks
	monitor_event CityRiots SettlementName Caesarea
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Caesarea = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter caesarea_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Ankara
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Ankara = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter ankara_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Iconium
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Iconium = turks
	  and I_CompareCounter turks_emerge = 0
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter iconium_riot 1
	    set_counter faction_emerge_id 7
	end_monitor
	monitor_event CityRiots SettlementName Diyarbakir
	  and I_NumberOfSettlements turks = 0
	  and I_IsFactionAIControlled turks
	  and not I_SettlementOwner Diyarbakir = turks
	  and I_CompareCounter turks_emerge = 0
	    set_counter diyarbakir_riot 1
	    set_counter faction_emerge_id 7
	end_monitor

;France
	monitor_event CityRiots SettlementName Paris
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Paris = france
	  and I_CompareCounter france_emerge = 0
	    set_counter paris_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Rheims
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Rheims = france
	  and I_CompareCounter france_emerge = 0
	    set_counter rheims_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Clermont
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Clermont = france
	  and I_CompareCounter france_emerge = 0
	    set_counter clermont_riot 1
	    set_counter faction_emerge_id 8
	end_monitor
	monitor_event CityRiots SettlementName Angers
	  and I_NumberOfSettlements france = 0
	  and I_IsFactionAIControlled france
	  and not I_SettlementOwner Angers = france
	  and I_CompareCounter france_emerge = 0
	    set_counter angers_riot 1
	    set_counter faction_emerge_id 8
	end_monitor

;HRE
	monitor_event CityRiots SettlementName Frankfurt
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Frankfurt = hre
	  and I_CompareCounter hre_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter frankfurt_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Vienna
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Vienna = hre
	  and I_CompareCounter hre_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter vienna_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Prague
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Prague = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter prague_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Staufen
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Staufen = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter staufen_riot 1
	    set_counter faction_emerge_id 9
	end_monitor
	monitor_event CityRiots SettlementName Nuremburg
	  and I_NumberOfSettlements hre = 0
	  and I_IsFactionAIControlled hre
	  and not I_SettlementOwner Nuremburg = hre
	  and I_CompareCounter hre_emerge = 0
	    set_counter nuremburg_riot 1
	    set_counter faction_emerge_id 9
	end_monitor

;England
	monitor_event CityRiots SettlementName London
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner London = england
	  and I_CompareCounter england_emerge = 0
	    set_counter london_riot 1
	    set_counter faction_emerge_id 10
	end_monitor
	monitor_event CityRiots SettlementName Nottingham
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner Nottingham = england
	  and I_CompareCounter england_emerge = 0
	    set_counter nottingham_riot 1
	    set_counter faction_emerge_id 10
	end_monitor
	monitor_event CityRiots SettlementName Winchester
	  and I_NumberOfSettlements england = 0
	  and I_IsFactionAIControlled england
	  and not I_SettlementOwner Winchester = england
	  and I_CompareCounter england_emerge = 0
	    set_counter winchester_riot 1
	    set_counter faction_emerge_id 10
	end_monitor

;Portugal
	monitor_event CityRiots SettlementName Oporto
	  and I_NumberOfSettlements portugal = 0
	  and I_IsFactionAIControlled portugal
	  and not I_SettlementOwner Oporto = portugal
	  and I_CompareCounter portugal_emerge = 0
	    set_counter oporto_riot 1
	    set_counter faction_emerge_id 11
	end_monitor
	monitor_event CityRiots SettlementName Lisbon
	  and I_NumberOfSettlements portugal = 0
	  and I_IsFactionAIControlled portugal
	  and not I_SettlementOwner Lisbon = portugal
	  and I_CompareCounter portugal_emerge = 0
	    set_counter lisbon_riot 1
	    set_counter faction_emerge_id 11
	end_monitor

;Poland
	monitor_event CityRiots SettlementName Krakow
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Krakow = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter krakow_riot 1
	    set_counter faction_emerge_id 12
	end_monitor
	monitor_event CityRiots SettlementName Halych
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Halych = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter halych_riot 1
	    set_counter faction_emerge_id 12
	end_monitor
	monitor_event CityRiots SettlementName Plock
	  and I_NumberOfSettlements poland = 0
	  and I_IsFactionAIControlled poland
	  and not I_SettlementOwner Plock = poland
	  and I_CompareCounter poland_emerge = 0
	    set_counter plock_riot 1
	    set_counter faction_emerge_id 12
	end_monitor

;Byzantium
	monitor_event CityRiots SettlementName Constantinople
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Constantinople = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter constantinople_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Nicaea
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Nicaea = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter nicaea_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Athens
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Athens = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter athens_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Arta
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Arta = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter arta_riot 1
	    set_counter faction_emerge_id 13
	end_monitor
	monitor_event CityRiots SettlementName Trebizond
	  and I_NumberOfSettlements byzantium = 0
	  and I_IsFactionAIControlled byzantium
	  and not I_SettlementOwner Trebizond = byzantium
	  and I_CompareCounter byzantium_emerge = 0
	    set_counter trebizond_riot 1
	    set_counter faction_emerge_id 13
	end_monitor

;Moors
	monitor_event CityRiots SettlementName Marrakesh
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Marrakesh = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter marrakesh_riot 1
	    set_counter faction_emerge_id 14
	end_monitor
	monitor_event CityRiots SettlementName Fes
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Fes = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter fes_riot 1
	    set_counter faction_emerge_id 14
	end_monitor
	monitor_event CityRiots SettlementName Melilla
	  and I_NumberOfSettlements moors = 0
	  and I_IsFactionAIControlled moors
	  and not I_SettlementOwner Melilla = moors
	  and I_CompareCounter moors_emerge = 0
	    set_counter melilla_riot 1
	    set_counter faction_emerge_id 14
	end_monitor

;Russia/Novgorod
	monitor_event CityRiots SettlementName Novgorod
	  and I_NumberOfSettlements russia = 0
	  and I_IsFactionAIControlled russia
	  and not I_SettlementOwner Novgorod = russia
	  and I_CompareCounter russia_emerge = 0
	    set_counter novgorod_riot 1
	    set_counter faction_emerge_id 15
	end_monitor

;Spain/Leon
	monitor_event CityRiots SettlementName Leon
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Leon = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter leon_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Toledo
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Toledo = spain
	  and I_CompareCounter spain_emerge = 0
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter toledo_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Salamanca
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Salamanca = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter salamanca_riot 1
	    set_counter faction_emerge_id 16
	end_monitor
	monitor_event CityRiots SettlementName Burgos
	  and I_NumberOfSettlements spain = 0
	  and I_IsFactionAIControlled spain
	  and not I_SettlementOwner Burgos = spain
	  and I_CompareCounter spain_emerge = 0
	    set_counter burgos_riot 1
	    set_counter faction_emerge_id 16
	end_monitor

;Hungary
	monitor_event CityRiots SettlementName Varad
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Varad = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter varad_riot 1
	    set_counter faction_emerge_id 17
	end_monitor
	monitor_event CityRiots SettlementName Esztergom
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Esztergom = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter esztergom_riot 1
	    set_counter faction_emerge_id 17
	end_monitor
	monitor_event CityRiots SettlementName Kassa
	  and I_NumberOfSettlements hungary = 0
	  and I_IsFactionAIControlled hungary
	  and not I_SettlementOwner Kassa = hungary
	  and I_CompareCounter hungary_emerge = 0
	    set_counter kassa_riot 1
	    set_counter faction_emerge_id 17
	end_monitor

;Aragon
	monitor_event CityRiots SettlementName Zaragoza
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Zaragoza = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter zaragoza_riot 1
	    set_counter faction_emerge_id 18
	end_monitor
	monitor_event CityRiots SettlementName Pamplona
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Pamplona = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter pamplona_riot 1
	    set_counter faction_emerge_id 18
	end_monitor
	monitor_event CityRiots SettlementName Barcelona
	  and I_NumberOfSettlements aragon = 0
	  and I_IsFactionAIControlled aragon
	  and not I_SettlementOwner Barcelona = aragon
	  and I_CompareCounter aragon_emerge = 0
	    set_counter barcelona_riot 1
	    set_counter faction_emerge_id 18
	end_monitor

;Lithuania
	monitor_event CityRiots SettlementName Vilnius
	  and I_NumberOfSettlements lithuania = 0
	  and I_IsFactionAIControlled lithuania
	  and not I_SettlementOwner Vilnius = lithuania
	  and I_CompareCounter lithuania_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter vilnius_riot 1
	    set_counter faction_emerge_id 19
	end_monitor

;Kievan Rus
	monitor_event CityRiots SettlementName Kiev
	  and I_NumberOfSettlements kievan_rus = 0
	  and I_IsFactionAIControlled kievan_rus
	  and not I_SettlementOwner Kiev = kievan_rus
	  and I_CompareCounter kievan_rus_emerge = 0
	    set_counter kiev_riot 1
	    set_counter faction_emerge_id 20
	end_monitor

;Norway
	monitor_event CityRiots SettlementName Bergen
	  and I_NumberOfSettlements norway = 0
	  and I_IsFactionAIControlled norway
	  and not I_SettlementOwner Bergen = norway
	  and I_CompareCounter norway_emerge = 0
	    set_counter bergen_riot 1
	    set_counter faction_emerge_id 21
	end_monitor
	monitor_event CityRiots SettlementName Eikundarsund
	  and I_NumberOfSettlements norway = 0
	  and I_IsFactionAIControlled norway
	  and not I_SettlementOwner Eikundarsund = norway
	  and I_CompareCounter norway_emerge = 0
	    set_counter eikundarsund_riot 1
	    set_counter faction_emerge_id 21
	end_monitor

;Kwarezm
	monitor_event CityRiots SettlementName Urgench
	  and I_NumberOfSettlements kwarezm = 0
	  and I_IsFactionAIControlled kwarezm
	  and not I_SettlementOwner Urgench = kwarezm
	  and I_CompareCounter kwarezm_emerge = 0
	    set_counter urgench_riot 1
	    set_counter faction_emerge_id 22
	end_monitor
	monitor_event CityRiots SettlementName Khiva
	  and I_NumberOfSettlements kwarezm = 0
	  and I_IsFactionAIControlled kwarezm
	  and not I_SettlementOwner Khiva = kwarezm
	  and I_CompareCounter kwarezm_emerge = 0
	    set_counter khiva_riot 1
	    set_counter faction_emerge_id 22
	end_monitor
	monitor_event CityRiots SettlementName Konjikala
	  and I_NumberOfSettlements kwarezm = 0
	  and I_IsFactionAIControlled kwarezm
	  and not I_SettlementOwner Konjikala = kwarezm
	  and I_CompareCounter kwarezm_emerge = 0
	    set_counter konjikala_riot 1
	    set_counter faction_emerge_id 22
	end_monitor

;Egypt/Fatimids
	monitor_event CityRiots SettlementName Cairo
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Cairo = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter cairo_riot 1
	    set_counter faction_emerge_id 23
	end_monitor
	monitor_event CityRiots SettlementName Alexandria
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Alexandria = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter alexandria_riot 1
	    set_counter faction_emerge_id 23
	end_monitor
	monitor_event CityRiots SettlementName Damietta
	  and I_NumberOfSettlements egypt = 0
	  and I_IsFactionAIControlled egypt
	  and not I_SettlementOwner Damietta = egypt
	  and I_CompareCounter egypt_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	  and not IsJihadTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter damietta_riot 1
	    set_counter faction_emerge_id 23
	end_monitor

;Jerusalem/Crusader States
	;Check for Middle East Crusades in Progress
	monitor_event CrusadeCalled TargetSettlementName Jerusalem
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Antioch
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Acre
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Gaza
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Medina
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Baghdad
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Alexandria
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Cairo
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Demietta
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Constantinople
	    set_event_counter me_crusader 1
	end_monitor
	monitor_event CrusadeEnds TrueCondition
	    and I_CompareCounter me_crusader = 1
	    set_event_counter me_crusader 0
	end_monitor
	monitor_event CityRiots SettlementName Rhodes
	  and I_NumberOfSettlements jerusalem = 0
	  and I_IsFactionAIControlled jerusalem
	  and not I_SettlementOwner Rhodes = jerusalem
	  and I_CrusadeInProgress
	  and I_CompareCounter me_crusader = 1
	  and I_CompareCounter jerusalem_emerge = 0
	    set_counter rhodes_riot 1
	    set_counter faction_emerge_id 24
	end_monitor
	monitor_event CityRiots SettlementName Nicosia
	  and I_NumberOfSettlements jerusalem = 0
	  and I_IsFactionAIControlled jerusalem
	  and not I_SettlementOwner Nicosia = jerusalem
	  and I_CrusadeInProgress
	  and I_CompareCounter me_crusader = 1
	  and I_CompareCounter jerusalem_emerge = 0
	    set_counter nicosia_riot 1
	    set_counter faction_emerge_id 24
	end_monitor

;Teutonic Order

	;Check 1st if Teutonic Order is really destroyed
		;these monitors can be removed if have the bugfix compilation 1.25 or newer
		monitor_event CeasedFactionLeader FactionType teutonic_order
			set_event_counter status_teutonic_order 1
		end_monitor
		monitor_event BecomesFactionLeader FactionType teutonic_order
			set_event_counter status_teutonic_order 2
		end_monitor
	;Check for Northern Europe Crusades in Progress
	monitor_event CrusadeCalled TargetSettlementName Riga
	    set_event_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Vilnius
	    set_event_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Frankfurt
	    set_event_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeCalled TargetSettlementName Vienna
	    set_event_counter eu_crusader 1
	end_monitor
	monitor_event CrusadeEnds TrueCondition
	    and I_CompareCounter eu_crusader = 1
	    set_event_counter eu_crusader 0
	end_monitor
	monitor_event CityRiots SettlementName Thorn
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 1
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Thorn = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	    set_counter thorn_riot 1
	    set_counter faction_emerge_id 25
	end_monitor
	monitor_event CityRiots SettlementName Palanga
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 1
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Palanga = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	    set_counter palanga_riot 1
	    set_counter faction_emerge_id 25
	end_monitor
	monitor_event CityRiots SettlementName Riga
	  and I_NumberOfSettlements teutonic_order = 0
	  and I_EventCounter status_teutonic_order = 1
	  and I_IsFactionAIControlled teutonic_order
	  and not I_SettlementOwner Riga = teutonic_order
	  and I_CrusadeInProgress
	  and I_CompareCounter eu_crusader = 1
	  and I_CompareCounter teutonic_order_emerge = 0
	  and not IsCrusadeTarget;	avoid possible CTD in case the settlement is i a crusade/jihad target
	    set_counter riga_riot 1
	    set_counter faction_emerge_id 25
	end_monitor

;
;------------------------------------------------------------------
;--------------PO Buildings, Re-emerge, Spawn armies---------------
;------------------------------------------------------------------

;Global
  monitor_event FactionTurnEnd FactionType slave
  and I_CompareCounter faction_emerge_id >= 1
	set_counter ros_po_building 1
	console_command create_building Oslo ros_po_bonus
	console_command create_building Nykoeping ros_po_bonus
	console_command create_building Moscow ros_po_bonus
	console_command create_building Bulgar ros_po_bonus
	console_command create_building Smolensk ros_po_bonus
	console_command create_building Dublin ros_po_bonus
	console_command create_building Oleshe ros_po_bonus
	console_command create_building York ros_po_bonus
	console_command create_building Ryazan ros_po_bonus
	console_command create_building Caernarvon ros_po_bonus
	console_command create_building Stettin ros_po_bonus
	console_command create_building Hamburg ros_po_bonus
	console_command create_building Sarkel ros_po_bonus
	console_command create_building Antwerp ros_po_bonus
	console_command create_building Magdeburg ros_po_bonus
	console_command create_building Wroclaw ros_po_bonus
	console_command create_building Bruges ros_po_bonus
	console_command create_building Metz ros_po_bonus
	console_command create_building Caen ros_po_bonus
	console_command create_building Rennes ros_po_bonus
	console_command create_building Brasov ros_po_bonus
	console_command create_building Caffa ros_po_bonus
	console_command create_building Dijon ros_po_bonus
	console_command create_building Bern ros_po_bonus
	console_command create_building Innsbruck ros_po_bonus
	console_command create_building Bordeaux ros_po_bonus
	console_command create_building Tbilisi ros_po_bonus
	console_command create_building Targoviste ros_po_bonus
	console_command create_building Milan ros_po_bonus
	console_command create_building Toulouse ros_po_bonus
	console_command create_building Zagreb ros_po_bonus
	console_command create_building Sofia ros_po_bonus
	console_command create_building Ragusa ros_po_bonus
	console_command create_building Bologna ros_po_bonus
	console_command create_building Pisa ros_po_bonus
	console_command create_building Marseille ros_po_bonus
	console_command create_building Yerevan ros_po_bonus
	console_command create_building Thessalonica ros_po_bonus
	console_command create_building Ajaccio ros_po_bonus
	console_command create_building Rome ros_po_bonus
	console_command create_building Baghdad ros_po_bonus
	console_command create_building Cordoba ros_po_bonus
	console_command create_building Durazzo ros_po_bonus
	console_command create_building Valencia ros_po_bonus
	console_command create_building Adana ros_po_bonus
	console_command create_building Mosul ros_po_bonus
	console_command create_building Cagliari ros_po_bonus
	console_command create_building Edessa ros_po_bonus
	console_command create_building Smyrna ros_po_bonus
	console_command create_building Antioch ros_po_bonus
	console_command create_building Granada ros_po_bonus
	console_command create_building Aleppo ros_po_bonus
	console_command create_building Medina ros_po_bonus
	console_command create_building Corinth ros_po_bonus
	console_command create_building Damascus ros_po_bonus
	console_command create_building Algiers ros_po_bonus
	console_command create_building Tunis ros_po_bonus
	console_command create_building Acre ros_po_bonus
	console_command create_building Iraklion ros_po_bonus
	console_command create_building Jerusalem ros_po_bonus
	console_command create_building Gaza ros_po_bonus
	console_command create_building Tripoli ros_po_bonus
	console_command create_building Qarisiya ros_po_bonus
	console_command create_building Basra ros_po_bonus
	console_command create_building Benghazi ros_po_bonus
	console_command create_building Bryansk ros_po_bonus
	console_command create_building Lyon ros_po_bonus
	console_command create_building Sinop ros_po_bonus
	console_command create_building Belgrade ros_po_bonus
	console_command create_building Palma ros_po_bonus
	console_command create_building Bari ros_po_bonus
	console_command create_building Skara ros_po_bonus
	console_command create_building Exeter ros_po_bonus
	console_command create_building Mecca ros_po_bonus
	console_command create_building Beleb_el_Anab ros_po_bonus
	console_command create_building Tortosa ros_po_bonus
	console_command create_building Astrakhan ros_po_bonus
	console_command create_building Luxor ros_po_bonus
	console_command create_building Groningen ros_po_bonus
	console_command create_building Khlynov ros_po_bonus
	console_command create_building Salzburg ros_po_bonus
	console_command create_building Ancona ros_po_bonus
	console_command create_building Canakkale ros_po_bonus
	console_command create_building Tmutarakan ros_po_bonus
	console_command create_building Uppsala ros_po_bonus
	console_command create_building Silves ros_po_bonus
	console_command create_building Scopia ros_po_bonus
	console_command create_building Baku ros_po_bonus
	console_command create_building Murcia ros_po_bonus
	console_command create_building Al-Mu'miniya ros_po_bonus
	console_command create_building Mensk ros_po_bonus
	console_command create_building Cologne ros_po_bonus
	console_command create_building Al_Aqaba ros_po_bonus
	console_command create_building Yaroslavl ros_po_bonus
	console_command create_building Kerak ros_po_bonus
	console_command create_building Galway ros_po_bonus
	console_command create_building Pskov ros_po_bonus
	console_command create_building Visby ros_po_bonus
	console_command create_building Lund ros_po_bonus
	console_command create_building Mashhad ros_po_bonus
	console_command create_building Kerman ros_po_bonus
	console_command create_building Ray ros_po_bonus
	console_command create_building Isfahan ros_po_bonus
	console_command create_building Shiraz ros_po_bonus
	console_command create_building Sharjah ros_po_bonus
	console_command create_building Gorgan ros_po_bonus
	console_command create_building Kazan ros_po_bonus
	console_command create_building Tayma ros_po_bonus
	console_command create_building Bulgar ros_po_bonus
	console_command create_building Yazd ros_po_bonus
	console_command create_building Al-Mahdiya ros_po_bonus
	console_command create_building Zhytomyr ros_po_bonus
	console_command create_building Polotsk ros_po_bonus
	console_command create_building Embi ros_po_bonus
	console_command create_building Damghan ros_po_bonus
	console_command create_building Turku ros_po_bonus
	console_command create_building Kermanshah ros_po_bonus
	console_command create_building Tabriz ros_po_bonus
	console_command create_building Pereyaslav ros_po_bonus
	console_command create_building Adrianople ros_po_bonus
	console_command create_building Seville ros_po_bonus
	console_command create_building Oran ros_po_bonus
	console_command create_building Hrodna ros_po_bonus
	console_command create_building Reval ros_po_bonus
	console_command create_building Kalmar ros_po_bonus
	console_command create_building Yelabuga ros_po_bonus
	console_command create_building Alamut ros_po_bonus
	console_command create_building Murom ros_po_bonus
	console_command create_building Isparta ros_po_bonus
	console_command create_building Kutaisi ros_po_bonus
	console_command create_building Ahvaz ros_po_bonus
	console_command create_building Serdobinskaya ros_po_bonus

;Scotland
  if I_CompareCounter faction_emerge_id = 1
	;Non Target settlements
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter edinburgh_riot = 0
		console_command create_building Edinburgh ros_po_bonus
	end_if
	if I_CompareCounter aberdeen_riot = 0
		console_command create_building Aberdeen ros_po_bonus
	end_if
	if I_CompareCounter inverness_riot = 0
		console_command create_building Inverness ros_po_bonus
	end_if
	if I_CompareCounter edinburgh_riot = 1
		console_command create_building Edinburgh ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 59, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Highlanders			exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 59, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights	exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Highlanders			exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 59, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights	exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers	exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers	exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Edinburgh = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Edinburgh = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter aberdeen_riot = 1
		console_command create_building Aberdeen ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 62, y 257, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Aberdeen = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Aberdeen = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter inverness_riot = 1
		console_command create_building Inverness ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 49, y 258, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Highlanders		exp 1 armour 0 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 49, y 258, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Highlanders		exp 1 armour 1 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Spear Militia		exp 0 armour 2 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction scotland
			character random_name, named character, age 30, x 49, y 258, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard		exp 2 armour 1 weapon_lvl 0
			unit   German Feudal Knights		exp 2 armour 2 weapon_lvl 0
			unit   Noble Swordsmen		exp 1 armour 1 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Highland Nobles		exp 1 armour 0 weapon_lvl 0
			unit   Noble Pikemen		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Scots Pike Militia		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			unit   Noble Highland Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Inverness = venice
			faction_emerge scotland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = sicily
			faction_emerge scotland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = milan
			faction_emerge scotland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = denmark
			faction_emerge scotland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = cumans
			faction_emerge scotland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = turks
			faction_emerge scotland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = france
			faction_emerge scotland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = hre
			faction_emerge scotland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = england
			faction_emerge scotland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = portugal
			faction_emerge scotland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = poland
			faction_emerge scotland poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = byzantium
			faction_emerge scotland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = moors
			faction_emerge scotland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = russia
			faction_emerge scotland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = spain
			faction_emerge scotland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = hungary
			faction_emerge scotland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = aragon
			faction_emerge scotland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = lithuania
			faction_emerge scotland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = kievan_rus
			faction_emerge scotland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = norway
			faction_emerge scotland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = jerusalem
			faction_emerge scotland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = kwarezm
			faction_emerge scotland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = egypt
			faction_emerge scotland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = papal_states
			faction_emerge scotland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = mongols
			faction_emerge scotland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = teutonic_order
			faction_emerge scotland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = timurids
			faction_emerge scotland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Inverness = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event scotland_emerged
	set_counter edinburgh_riot 0
	set_counter aberdeen_riot 0
	set_counter inverness_riot 0
	set_counter scotland_emerge 5
	add_money scotland 20000
  end_if

;Venice
  if I_CompareCounter faction_emerge_id = 2
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter venice_riot = 0
		console_command create_building Venice ros_po_bonus
	end_if
	if I_CompareCounter venice_riot = 1
		console_command create_building Venice ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 1 armour 3 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction venice
			character random_name, named character, age 30, x 168, y 173, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Venetian Heavy Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			unit   Venetian Archers			exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Venice = scotland
			faction_emerge venice scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = sicily
			faction_emerge venice sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = milan
			faction_emerge venice milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = denmark
			faction_emerge venice denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = egypt
			faction_emerge venice egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = cumans
			faction_emerge venice cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = turks
			faction_emerge venice turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = france
			faction_emerge venice france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = hre
			faction_emerge venice hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = england
			faction_emerge venice england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = portugal
			faction_emerge venice portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = poland
			faction_emerge venice poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = byzantium
			faction_emerge venice byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = moors
			faction_emerge venice moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = russia
			faction_emerge venice russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = spain
			faction_emerge venice spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = hungary
			faction_emerge venice hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = aragon
			faction_emerge venice aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = lithuania
			faction_emerge venice lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = kievan_rus
			faction_emerge venice kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = norway
			faction_emerge venice norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = jerusalem
			faction_emerge venice jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = kwarezm
			faction_emerge venice kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = papal_states
			faction_emerge venice papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = mongols
			faction_emerge venice mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = teutonic_order
			faction_emerge venice teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = timurids
			faction_emerge venice timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Venice = slave
			faction_emerge venice slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event venice_emerged
	set_counter venice_riot 0
	set_counter venice_emerge 5
	add_money venice 20000
  end_if

;Sicily
  if I_CompareCounter faction_emerge_id = 3
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter palermo_riot = 0
		console_command create_building Palermo ros_po_bonus
	end_if
	if I_CompareCounter syracuse_riot = 0
		console_command create_building Syracuse ros_po_bonus
	end_if
	if I_CompareCounter naples_riot = 0
		console_command create_building Naples ros_po_bonus
	end_if
	if I_CompareCounter palermo_riot = 1
		console_command create_building Palermo ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 174, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 174, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 174, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Palermo = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palermo = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter syracuse_riot = 1
		console_command create_building Syracuse ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 186, y 113, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 186, y 113, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 186, y 113, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Syracuse = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Syracuse = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter naples_riot = 1
		console_command create_building Naples ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   S Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			unit   Sicilian Muslim Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction sicily
			character random_name, named character, age 30, x 182, y 139, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Naples = venice
			faction_emerge sicily venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = scotland
			faction_emerge sicily scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = milan
			faction_emerge sicily milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = denmark
			faction_emerge sicily denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = egypt
			faction_emerge sicily egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = cumans
			faction_emerge sicily cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = turks
			faction_emerge sicily turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = france
			faction_emerge sicily france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = hre
			faction_emerge sicily hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = england
			faction_emerge sicily england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = portugal
			faction_emerge sicily portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = poland
			faction_emerge sicily poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = byzantium
			faction_emerge sicily byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = moors
			faction_emerge sicily moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = russia
			faction_emerge sicily russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = spain
			faction_emerge sicily spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = hungary
			faction_emerge sicily hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = aragon
			faction_emerge sicily aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = lithuania
			faction_emerge sicily lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = kievan_rus
			faction_emerge sicily kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = norway
			faction_emerge sicily norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = jerusalem
			faction_emerge sicily jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = kwarezm
			faction_emerge sicily kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = papal_states
			faction_emerge sicily papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = mongols
			faction_emerge sicily mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = teutonic_order
			faction_emerge sicily teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = timurids
			faction_emerge sicily timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Naples = slave
			faction_emerge sicily slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event sicily_emerged
	set_counter palermo_riot 0
	set_counter syracuse_riot 0
	set_counter naples_riot 0
	set_counter sicily_emerge 5
	add_money sicily 20000
  end_if

;Milan/Genoa
  if I_CompareCounter faction_emerge_id = 4
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter genoa_riot = 0
		console_command create_building Genoa ros_po_bonus
	end_if
	if I_CompareCounter genoa_riot = 1
		console_command create_building Genoa ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 1 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction milan
			character random_name, named character, age 30, x 142, y 166, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Italian MAA				exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 1 armour 0 weapon_lvl 0
			unit   Voulgier				exp 1 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbow Militia	exp 0 armour 0 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			unit   Genoese Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Genoa = venice
			faction_emerge milan venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = sicily
			faction_emerge milan sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = scotland
			faction_emerge milan scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = denmark
			faction_emerge milan denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = egypt
			faction_emerge milan egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = cumans
			faction_emerge milan cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = turks
			faction_emerge milan turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = france
			faction_emerge milan france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = hre
			faction_emerge milan hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = england
			faction_emerge milan england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = portugal
			faction_emerge milan portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = poland
			faction_emerge milan poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = byzantium
			faction_emerge milan byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = moors
			faction_emerge milan moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = russia
			faction_emerge milan russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = spain
			faction_emerge milan spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = hungary
			faction_emerge milan hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = aragon
			faction_emerge milan aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = lithuania
			faction_emerge milan lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = kievan_rus
			faction_emerge milan kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = norway
			faction_emerge milan norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = jerusalem
			faction_emerge milan jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = kwarezm
			faction_emerge milan kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = papal_states
			faction_emerge milan papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = mongols
			faction_emerge milan mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = teutonic_order
			faction_emerge milan teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = timurids
			faction_emerge milan timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Genoa = slave
			faction_emerge milan slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event milan_emerged
	set_counter genoa_riot 0
	set_counter milan_emerge 5
	add_money milan 20000
  end_if

;Denmark
  if I_CompareCounter faction_emerge_id = 5
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter arhus_riot = 0
		console_command create_building Arhus ros_po_bonus
	end_if
	if I_CompareCounter roskilde_riot = 0
		console_command create_building Roskilde ros_po_bonus
	end_if
	if I_CompareCounter arhus_riot = 1
		console_command create_building Arhus ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 150, y 250, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Armats				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Arhus = venice
			faction_emerge denmark venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = sicily
			faction_emerge denmark sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = milan
			faction_emerge denmark milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = scotland
			faction_emerge denmark scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = egypt
			faction_emerge denmark egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = cumans
			faction_emerge denmark cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = turks
			faction_emerge denmark turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = france
			faction_emerge denmark france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = hre
			faction_emerge denmark hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = england
			faction_emerge denmark england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = portugal
			faction_emerge denmark portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = poland
			faction_emerge denmark poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = byzantium
			faction_emerge denmark byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = moors
			faction_emerge denmark moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = russia
			faction_emerge denmark russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = spain
			faction_emerge denmark spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = hungary
			faction_emerge denmark hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = aragon
			faction_emerge denmark aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = lithuania
			faction_emerge denmark lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = kievan_rus
			faction_emerge denmark kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = norway
			faction_emerge denmark norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = jerusalem
			faction_emerge denmark jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = kwarezm
			faction_emerge denmark kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = papal_states
			faction_emerge denmark papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = mongols
			faction_emerge denmark mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = teutonic_order
			faction_emerge denmark teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = timurids
			faction_emerge denmark timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arhus = slave
			faction_emerge denmark slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter roskilde_riot = 1
		console_command create_building Roskilde ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction denmark
			character random_name, named character, age 30, x 164, y 246, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 3 weapon_lvl 0
			unit   Armats				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Roskilde = venice
			faction_emerge denmark venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = sicily
			faction_emerge denmark sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = milan
			faction_emerge denmark milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = scotland
			faction_emerge denmark scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = egypt
			faction_emerge denmark egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = cumans
			faction_emerge denmark cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = turks
			faction_emerge denmark turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = france
			faction_emerge denmark france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = hre
			faction_emerge denmark hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = england
			faction_emerge denmark england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = portugal
			faction_emerge denmark portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = poland
			faction_emerge denmark poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = byzantium
			faction_emerge denmark byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = moors
			faction_emerge denmark moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = russia
			faction_emerge denmark russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = spain
			faction_emerge denmark spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = hungary
			faction_emerge denmark hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = aragon
			faction_emerge denmark aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = lithuania
			faction_emerge denmark lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = kievan_rus
			faction_emerge denmark kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = norway
			faction_emerge denmark norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = jerusalem
			faction_emerge denmark jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = kwarezm
			faction_emerge denmark kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = papal_states
			faction_emerge denmark papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = mongols
			faction_emerge denmark mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = teutonic_order
			faction_emerge denmark teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = timurids
			faction_emerge denmark timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Roskilde = slave
			faction_emerge denmark slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event denmark_emerged
	set_counter arhus_riot 0
	set_counter roskilde_riot 0
	set_counter denmark_emerge 5
	add_money denmark 20000
  end_if

;Cumans
  if I_CompareCounter faction_emerge_id = 6
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter jaiksk_riot = 0
		console_command create_building Jaiksk ros_po_bonus
	end_if
	if I_CompareCounter azaq_riot = 0
		console_command create_building Azaq ros_po_bonus
	end_if
	if I_CompareCounter baia_riot = 0
		console_command create_building Baia ros_po_bonus
	end_if
	if I_CompareCounter jaiksk_riot = 1
		console_command create_building Jaiksk ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Jaiksk = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Jaiksk = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter azaq_riot = 1
		console_command create_building Azaq ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Azaq = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Azaq = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter baia_riot = 1
		console_command create_building Baia ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction cumans
			character random_name, named character, age 30, x 432, y 248, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Cuman Bodyguard		exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 2 armour 0 weapon_lvl 0
			unit   Khagan Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 1 armour 0 weapon_lvl 0
			unit   Behk Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Aldari Druzhina			exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			unit   Cuman Horse Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Baia = venice
			faction_emerge cumans venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = sicily
			faction_emerge cumans sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = milan
			faction_emerge cumans milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = denmark
			faction_emerge cumans denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = egypt
			faction_emerge cumans egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = scotland
			faction_emerge cumans scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = turks
			faction_emerge cumans turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = france
			faction_emerge cumans france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = hre
			faction_emerge cumans hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = england
			faction_emerge cumans england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = portugal
			faction_emerge cumans portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = poland
			faction_emerge cumans poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = byzantium
			faction_emerge cumans byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = moors
			faction_emerge cumans moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = russia
			faction_emerge cumans russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = spain
			faction_emerge cumans spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = hungary
			faction_emerge cumans hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = aragon
			faction_emerge cumans aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = lithuania
			faction_emerge cumans lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = kievan_rus
			faction_emerge cumans kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = norway
			faction_emerge cumans norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = jerusalem
			faction_emerge cumans jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = kwarezm
			faction_emerge cumans kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = papal_states
			faction_emerge cumans papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = mongols
			faction_emerge cumans mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = teutonic_order
			faction_emerge cumans teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = timurids
			faction_emerge cumans timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Baia = slave
			faction_emerge cumans slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event cumans_emerged
	set_counter jaiksk_riot 0
	set_counter azaq_riot 0
	set_counter baia_riot 0
	set_counter cumans_emerge 5
	add_money cumans 20000
  end_if

;Turks/Seljuks
  if I_CompareCounter faction_emerge_id = 7
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter caesarea_riot = 0
		console_command create_building Caesarea ros_po_bonus
	end_if
	if I_CompareCounter ankara_riot = 0
		console_command create_building Ankara ros_po_bonus
	end_if
	if I_CompareCounter iconium_riot = 0
		console_command create_building Iconium ros_po_bonus
	end_if
	if I_CompareCounter diyarbakir_riot = 0
		console_command create_building Diyarbakir ros_po_bonus
	end_if
	if I_CompareCounter caesarea_riot = 1
		console_command create_building Caesarea ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction turks
			character random_name, named character, age 30, x 333, y 125, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Caesarea = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Caesarea = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter ankara_riot = 1
		console_command create_building Ankara ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction turks
			character random_name, named character, age 30, x 313, y 131, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Ankara = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Ankara = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter iconium_riot = 1
		console_command create_building Iconium ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction turks
			character random_name, named character, age 30, x 310, y 118, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Iconium = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Iconium = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter diyarbakir_riot = 1
		console_command create_building Diyarbakir ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 2 armour 0 weapon_lvl 0
			unit   Sipahi Lancers			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Horse Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 0 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Sipahis				exp 1 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   Ottoman Infantry			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			unit   Turkish Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction turks
			character random_name, named character, age 30, x 365, y 120, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 2 armour 1 weapon_lvl 0
			unit   Turkish Ghulams			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   Ottoman Infantry			exp 1 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			unit   Turkish Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Diyarbakir = venice
			faction_emerge turks venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = sicily
			faction_emerge turks sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = milan
			faction_emerge turks milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = denmark
			faction_emerge turks denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = egypt
			faction_emerge turks egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = cumans
			faction_emerge turks cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = scotland
			faction_emerge turks scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = france
			faction_emerge turks france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = hre
			faction_emerge turks hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = england
			faction_emerge turks england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = portugal
			faction_emerge turks portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = poland
			faction_emerge turks poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = byzantium
			faction_emerge turks byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = moors
			faction_emerge turks moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = russia
			faction_emerge turks russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = spain
			faction_emerge turks spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = hungary
			faction_emerge turks hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = aragon
			faction_emerge turks aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = lithuania
			faction_emerge turks lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = kievan_rus
			faction_emerge turks kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = norway
			faction_emerge turks norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = jerusalem
			faction_emerge turks jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = kwarezm
			faction_emerge turks kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = papal_states
			faction_emerge turks papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = mongols
			faction_emerge turks mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = teutonic_order
			faction_emerge turks teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = timurids
			faction_emerge turks timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Diyarbakir = slave
			faction_emerge scotland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event turks_emerged
	set_counter caesarea_riot 0
	set_counter ankara_riot 0
	set_counter iconium_riot 0
	set_counter diyarbakir_riot 0
	set_counter turks_emerge 5
	add_money turks 20000
  end_if

;France
  if I_CompareCounter faction_emerge_id = 8
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter paris_riot = 0
		console_command create_building Paris ros_po_bonus
	end_if
	if I_CompareCounter rheims_riot = 0
		console_command create_building Rheims ros_po_bonus
	end_if
	if I_CompareCounter clermont_riot = 0
		console_command create_building Clermont ros_po_bonus
	end_if
	if I_CompareCounter angers_riot = 0
		console_command create_building Angers ros_po_bonus
	end_if
	if I_CompareCounter paris_riot = 1
		console_command create_building Paris ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction france
			character random_name, named character, age 30, x 93, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction france
			character random_name, named character, age 30, x 93, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction france
			character random_name, named character, age 30, x 93, y 197, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Paris = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = england
			faction_emerge france england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Paris = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter rheims_riot = 1
		console_command create_building Rheims ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction france
			character random_name, named character, age 30, x 105, y 201, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Rheims = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = england
			faction_emerge france england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rheims = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter clermont_riot = 1
		console_command create_building Clermont ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction france
			character random_name, named character, age 30, x 98, y 176, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Clermont = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = england
			faction_emerge france england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Clermont = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter angers_riot = 1
		console_command create_building Angers ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 2 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   French Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction france
			character random_name, named character, age 30, x 75, y 185, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   French Chivalric Knights	exp 2 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   French Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Armats				exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Voulgier				exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Angers = venice
			faction_emerge france venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = sicily
			faction_emerge france sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = milan
			faction_emerge france milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = denmark
			faction_emerge france denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = egypt
			faction_emerge france egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = cumans
			faction_emerge france cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = turks
			faction_emerge france turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = scotland
			faction_emerge france scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = hre
			faction_emerge france hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = england
			faction_emerge france england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = portugal
			faction_emerge france portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = poland
			faction_emerge france poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = byzantium
			faction_emerge france byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = moors
			faction_emerge france moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = russia
			faction_emerge france russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = spain
			faction_emerge france spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = hungary
			faction_emerge france hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = aragon
			faction_emerge france aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = lithuania
			faction_emerge france lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = kievan_rus
			faction_emerge france kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = norway
			faction_emerge france norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = jerusalem
			faction_emerge france jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = kwarezm
			faction_emerge france kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = papal_states
			faction_emerge france papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = mongols
			faction_emerge france mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = teutonic_order
			faction_emerge france teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = timurids
			faction_emerge france timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Angers = slave
			faction_emerge france slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event france_emerged
	set_counter paris_riot 0
	set_counter rheims_riot 0
	set_counter clermont_riot 0
	set_counter angers_riot 0
	set_counter france_emerge 5
	add_money france 20000
  end_if

;HRE
  if I_CompareCounter faction_emerge_id = 9
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter frankfurt_riot = 0
		console_command create_building Frankfurt ros_po_bonus
	end_if
	if I_CompareCounter vienna_riot = 0
		console_command create_building Vienna ros_po_bonus
	end_if
	if I_CompareCounter prague_riot = 0
		console_command create_building Prague ros_po_bonus
	end_if
	if I_CompareCounter staufen_riot = 0
		console_command create_building Staufen ros_po_bonus
	end_if
	if I_CompareCounter nuremburg_riot = 0
		console_command create_building Nuremburg ros_po_bonus
	end_if
	if I_CompareCounter frankfurt_riot = 1
		console_command create_building Frankfurt ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hre
			character random_name, named character, age 30, x 140, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Frankfurt = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Frankfurt = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter vienna_riot = 1
		console_command create_building Vienna ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hre
			character random_name, named character, age 30, x 195, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Vienna = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vienna = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter prague_riot = 1
		console_command create_building Prague ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hre
			character random_name, named character, age 30, x 181, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hre
			character random_name, named character, age 30, x 181, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hre
			character random_name, named character, age 30, x 181, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Prague = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Prague = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter staufen_riot = 1
		console_command create_building Staufen ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hre
			character random_name, named character, age 30, x 133, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hre
			character random_name, named character, age 30, x 133, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hre
			character random_name, named character, age 30, x 133, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Staufen = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Staufen = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter nuremburg_riot = 1
		console_command create_building Nuremburg ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 1 armour 0 weapon_lvl 0
			unit   Sergeant Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   German Feudal Knights		exp 1 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Armored Sergeants		exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hre
			character random_name, named character, age 30, x 156, y 202, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Knights			exp 2 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Imperial Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Imperial Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Italian MAA		exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Zweihander				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Nuremburg = venice
			faction_emerge hre venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = sicily
			faction_emerge hre sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = milan
			faction_emerge hre milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = denmark
			faction_emerge hre denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = egypt
			faction_emerge hre egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = cumans
			faction_emerge hre cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = turks
			faction_emerge hre turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = scotland
			faction_emerge hre scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = france
			faction_emerge hre france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = england
			faction_emerge hre england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = portugal
			faction_emerge hre portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = poland
			faction_emerge hre poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = byzantium
			faction_emerge hre byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = moors
			faction_emerge hre moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = russia
			faction_emerge hre russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = spain
			faction_emerge hre spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = hungary
			faction_emerge hre hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = aragon
			faction_emerge hre aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = lithuania
			faction_emerge hre lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = kievan_rus
			faction_emerge hre kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = norway
			faction_emerge hre norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = jerusalem
			faction_emerge hre jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = kwarezm
			faction_emerge hre kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = papal_states
			faction_emerge hre papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = mongols
			faction_emerge hre mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = teutonic_order
			faction_emerge hre teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = timurids
			faction_emerge hre timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nuremburg = slave
			faction_emerge hre slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event hre_emerged
	set_counter frankfurt_riot 0
	set_counter vienna_riot 0
	set_counter prague_riot 0
	set_counter prague_riot 0
	set_counter staufen_riot 0
	set_counter nuremburg_riot 0
	set_counter hre_emerge 5
	add_money hre 20000
  end_if

;England
  if I_CompareCounter faction_emerge_id = 10
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter london_riot = 0
		console_command create_building London ros_po_bonus
	end_if
	if I_CompareCounter nottingham_riot = 0
		console_command create_building Nottingham ros_po_bonus
	end_if
	if I_CompareCounter winchester_riot = 0
		console_command create_building Winchester ros_po_bonus
	end_if
	if I_CompareCounter london_riot = 1
		console_command create_building London ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction england
			character random_name, named character, age 30, x 80, y 217, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner London = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = france
			faction_emerge england france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner London = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter nottingham_riot = 1
		console_command create_building Nottingham ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction england
			character random_name, named character, age 30, x 69, y 226, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Nottingham = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = france
			faction_emerge england france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nottingham = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter winchester_riot = 1
		console_command create_building Winchester ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction england
			character random_name, named character, age 30, x 68, y 213, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Norman Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Norman Cavalry	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 1 armour 0 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Fyrd Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction england
			character random_name, named character, age 30, x 68, y 213, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Norman Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction england
			character random_name, named character, age 30, x 68, y 213, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   English Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted English Knights	exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Longbowmen			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Armats		exp 0 armour 0 weapon_lvl 0
			unit   Billmen				exp 0 armour 0 weapon_lvl 0
			unit   Militia Serjeants			exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			unit   Yeoman				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Winchester = venice
			faction_emerge england venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = sicily
			faction_emerge england sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = milan
			faction_emerge england milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = denmark
			faction_emerge england denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = egypt
			faction_emerge england egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = cumans
			faction_emerge england cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = turks
			faction_emerge england turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = scotland
			faction_emerge england scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = hre
			faction_emerge england hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = france
			faction_emerge england france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = portugal
			faction_emerge england portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = poland
			faction_emerge england poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = byzantium
			faction_emerge england byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = moors
			faction_emerge england moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = russia
			faction_emerge england russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = spain
			faction_emerge england spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = hungary
			faction_emerge england hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = aragon
			faction_emerge england aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = lithuania
			faction_emerge england lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = kievan_rus
			faction_emerge england kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = norway
			faction_emerge england norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = jerusalem
			faction_emerge england jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = kwarezm
			faction_emerge england kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = papal_states
			faction_emerge england papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = mongols
			faction_emerge england mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = teutonic_order
			faction_emerge england teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = timurids
			faction_emerge england timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Winchester = slave
			faction_emerge england slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event england_emerged
	set_counter london_riot 0
	set_counter nottingham_riot 0
	set_counter winchester_riot 0
	set_counter england_emerge 5
	add_money england 20000
  end_if

;Portugal
  if I_CompareCounter faction_emerge_id = 11
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter oporto_riot = 0
		console_command create_building Oporto ros_po_bonus
	end_if
	if I_CompareCounter lisbon_riot = 0
		console_command create_building Lisbon ros_po_bonus
	end_if
	if I_CompareCounter oporto_riot = 1
		console_command create_building Oporto ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 16, y 143, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Lusitanian Javelinmen		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 16, y 143, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Lusitanian Javelinmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 16, y 143, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Portuguese Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Portuguese Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Portuguese Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes					exp 1 armour 1 weapon_lvl 0
			unit   Jinetes					exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Lusitanian Javelinmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Oporto = venice
			faction_emerge portugal venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = sicily
			faction_emerge portugal sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = milan
			faction_emerge portugal milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = denmark
			faction_emerge portugal denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = egypt
			faction_emerge portugal egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = cumans
			faction_emerge portugal cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = turks
			faction_emerge portugal turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = scotland
			faction_emerge portugal scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = hre
			faction_emerge portugal hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = england
			faction_emerge portugal england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = france
			faction_emerge portugal france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = poland
			faction_emerge portugal poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = byzantium
			faction_emerge portugal byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = moors
			faction_emerge portugal moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = russia
			faction_emerge portugal russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = spain
			faction_emerge portugal spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = hungary
			faction_emerge portugal hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = aragon
			faction_emerge portugal aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = lithuania
			faction_emerge portugal lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = kievan_rus
			faction_emerge portugal kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = norway
			faction_emerge portugal norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = jerusalem
			faction_emerge portugal jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = kwarezm
			faction_emerge portugal kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = papal_states
			faction_emerge portugal papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = mongols
			faction_emerge portugal mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = teutonic_order
			faction_emerge portugal teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = timurids
			faction_emerge portugal timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Oporto = slave
			faction_emerge portugal slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter lisbon_riot = 1
		console_command create_building Lisbon ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 11, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Lusitanian Javelinmen		exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 11, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Lusitanian Javelinmen		exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction portugal
			character random_name, named character, age 30, x 11, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Portuguese Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Portuguese Knights	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Portuguese Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes					exp 1 armour 1 weapon_lvl 0
			unit   Jinetes					exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen				exp 0 armour 1 weapon_lvl 0
			unit   Lusitanian Javelinmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Lisbon = venice
			faction_emerge portugal venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = sicily
			faction_emerge portugal sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = milan
			faction_emerge portugal milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = denmark
			faction_emerge portugal denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = egypt
			faction_emerge portugal egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = cumans
			faction_emerge portugal cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = turks
			faction_emerge portugal turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = scotland
			faction_emerge portugal scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = hre
			faction_emerge portugal hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = england
			faction_emerge portugal england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = france
			faction_emerge portugal france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = poland
			faction_emerge portugal poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = byzantium
			faction_emerge portugal byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = moors
			faction_emerge portugal moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = russia
			faction_emerge portugal russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = spain
			faction_emerge portugal spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = hungary
			faction_emerge portugal hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = aragon
			faction_emerge portugal aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = lithuania
			faction_emerge portugal lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = kievan_rus
			faction_emerge portugal kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = norway
			faction_emerge portugal norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = jerusalem
			faction_emerge portugal jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = kwarezm
			faction_emerge portugal kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = papal_states
			faction_emerge portugal papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = mongols
			faction_emerge portugal mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = teutonic_order
			faction_emerge portugal teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = timurids
			faction_emerge portugal timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Lisbon = slave
			faction_emerge portugal slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event portugal_emerged
	set_counter oporto_riot 0
	set_counter lisbon_riot 0
	set_counter portugal_emerge 5
	add_money portugal 20000
  end_if

;Poland
  if I_CompareCounter faction_emerge_id = 12
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter krakow_riot = 0
		console_command create_building Krakow ros_po_bonus
	end_if
	if I_CompareCounter halych_riot = 0
		console_command create_building Halych ros_po_bonus
	end_if
	if I_CompareCounter plock_riot = 0
		console_command create_building Plock ros_po_bonus
	end_if
	if I_CompareCounter krakow_riot = 1
		console_command create_building Krakow ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction poland
			character random_name, named character, age 30, x 217, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction poland
			character random_name, named character, age 30, x 217, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction poland
			character random_name, named character, age 30, x 217, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Krakow = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Krakow = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter halych_riot = 1
		console_command create_building Halych ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction poland
			character random_name, named character, age 30, x 253, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction poland
			character random_name, named character, age 30, x 253, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction poland
			character random_name, named character, age 30, x 253, y 206, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Halych = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Halych = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter plock_riot = 1
		console_command create_building Plock ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction poland
			character random_name, named character, age 30, x 224, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Polish Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Nobles	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction poland
			character random_name, named character, age 30, x 224, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 0 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 0 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction poland
			character random_name, named character, age 30, x 224, y 208, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Polish Knights			exp 2 armour 2 weapon_lvl 0
			unit   Polish Knights			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Polish Knights	exp 1 armour 2 weapon_lvl 0
			unit   Polish Shooters			exp 1 armour 2 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spear Militia		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Plock = venice
			faction_emerge poland venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = sicily
			faction_emerge poland sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = milan
			faction_emerge poland milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = denmark
			faction_emerge poland denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = egypt
			faction_emerge poland egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = cumans
			faction_emerge poland cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = turks
			faction_emerge poland turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = scotland
			faction_emerge poland scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = hre
			faction_emerge poland hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = england
			faction_emerge poland england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = portugal
			faction_emerge poland portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = france
			faction_emerge poland france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = byzantium
			faction_emerge poland byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = moors
			faction_emerge poland moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = russia
			faction_emerge poland russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = spain
			faction_emerge poland spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = hungary
			faction_emerge poland hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = aragon
			faction_emerge poland aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = lithuania
			faction_emerge poland lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = kievan_rus
			faction_emerge poland kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = norway
			faction_emerge poland norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = jerusalem
			faction_emerge poland jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = kwarezm
			faction_emerge poland kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = papal_states
			faction_emerge poland papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = mongols
			faction_emerge poland mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = teutonic_order
			faction_emerge poland teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = timurids
			faction_emerge poland timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Plock = slave
			faction_emerge poland slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event poland_emerged
	set_counter krakow_riot 0
	set_counter halych_riot 0
	set_counter plock_riot 0
	set_counter poland_emerge 5
	add_money poland 20000
  end_if

;Byzantium
  if I_CompareCounter faction_emerge_id = 13
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter constantinople_riot = 0
		console_command create_building Constantinople ros_po_bonus
	end_if
	if I_CompareCounter nicaea_riot = 0
		console_command create_building Nicaea ros_po_bonus
	end_if
	if I_CompareCounter athens_riot = 0
		console_command create_building Athens ros_po_bonus
	end_if
	if I_CompareCounter arta_riot = 0
		console_command create_building Arta ros_po_bonus
	end_if
	if I_CompareCounter trebizond_riot = 0
		console_command create_building Trebizond ros_po_bonus
	end_if
	if I_CompareCounter constantinople_riot = 1
		console_command create_building Constantinople ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 284, y 142, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Constantinople = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Constantinople = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter nicaea_riot = 1
		console_command create_building Nicaea ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 291, y 137, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Nicaea = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicaea = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter athens_riot = 1
		console_command create_building Athens ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 249, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 249, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 249, y 119, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Athens = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Athens = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter arta_riot = 1
		console_command create_building Arta ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 229, y 126, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Arta = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Arta = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter trebizond_riot = 1
		console_command create_building Trebizond ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Archontopoulai			exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 1 armour 0 weapon_lvl 0
			unit   Contaratoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Scholarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 1 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			unit   Toxotae				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction byzantium
			character random_name, named character, age 30, x 362, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Greek Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Pronoiarii				exp 1 armour 0 weapon_lvl 0
			unit   Spathatoi				exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Castrophilakae			exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 1 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Scoutatoi				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			unit   Gasmuli				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Trebizond = venice
			faction_emerge byzantium venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = sicily
			faction_emerge byzantium sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = milan
			faction_emerge byzantium milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = denmark
			faction_emerge byzantium denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = egypt
			faction_emerge byzantium egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = cumans
			faction_emerge byzantium cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = turks
			faction_emerge byzantium turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = scotland
			faction_emerge byzantium scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = hre
			faction_emerge byzantium hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = england
			faction_emerge byzantium england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = portugal
			faction_emerge byzantium portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = poland
			faction_emerge byzantium poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = france
			faction_emerge byzantium france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = moors
			faction_emerge byzantium moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = russia
			faction_emerge byzantium russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = spain
			faction_emerge byzantium spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = hungary
			faction_emerge byzantium hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = aragon
			faction_emerge byzantium aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = lithuania
			faction_emerge byzantium lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = kievan_rus
			faction_emerge byzantium kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = norway
			faction_emerge byzantium norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = jerusalem
			faction_emerge byzantium jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = kwarezm
			faction_emerge byzantium kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = papal_states
			faction_emerge byzantium papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = mongols
			faction_emerge byzantium mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = teutonic_order
			faction_emerge byzantium teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = timurids
			faction_emerge byzantium timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Trebizond = slave
			faction_emerge byzantium slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event byzantium_emerged
	set_counter constantinople_riot 0
	set_counter nicaea_riot 0
	set_counter athens_riot 0
	set_counter arta_riot 0
	set_counter trebizond_riot 0
	set_counter byzantium_emerge 5
	add_money byzantium 20000
  end_if

;Moors
  if I_CompareCounter faction_emerge_id = 14
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter marrakesh_riot = 0
		console_command create_building Marrakesh ros_po_bonus
	end_if
	if I_CompareCounter fes_riot = 0
		console_command create_building Fes ros_po_bonus
	end_if
	if I_CompareCounter melilla_riot = 0
		console_command create_building Melilla ros_po_bonus
	end_if
	if I_CompareCounter marrakesh_riot = 1
		console_command create_building Marrakesh ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction moors
			character random_name, named character, age 30, x 17, y 76, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction moors
			character random_name, named character, age 30, x 17, y 76, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction moors
			character random_name, named character, age 30, x 17, y 76, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Marrakesh = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Marrakesh = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter fes_riot = 1
		console_command create_building Fes ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction moors
			character random_name, named character, age 30, x 41, y 95, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Fes = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Fes = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter melilla_riot = 1
		console_command create_building Melilla ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction moors
			character random_name, named character, age 30, x 56, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Tuareg Camel Spearmens	exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   ME Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction moors
			character random_name, named character, age 30, x 56, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction moors
			character random_name, named character, age 30, x 56, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Crossbow Militia		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Melilla = venice
			faction_emerge moors venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = sicily
			faction_emerge moors sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = milan
			faction_emerge moors milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = denmark
			faction_emerge moors denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = egypt
			faction_emerge moors egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = cumans
			faction_emerge moors cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = turks
			faction_emerge moors turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = scotland
			faction_emerge moors scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = hre
			faction_emerge moors hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = england
			faction_emerge moors england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = portugal
			faction_emerge moors portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = poland
			faction_emerge moors poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = byzantium
			faction_emerge moors byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = france
			faction_emerge moors france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = russia
			faction_emerge moors russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = spain
			faction_emerge moors spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = hungary
			faction_emerge moors hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = aragon
			faction_emerge moors aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = lithuania
			faction_emerge moors lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = kievan_rus
			faction_emerge moors kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = norway
			faction_emerge moors norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = jerusalem
			faction_emerge moors jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = kwarezm
			faction_emerge moors kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = papal_states
			faction_emerge moors papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = mongols
			faction_emerge moors mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = teutonic_order
			faction_emerge moors teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = timurids
			faction_emerge moors timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Melilla = slave
			faction_emerge moors slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event moors_emerged
	set_counter marrakesh_riot 0
	set_counter fes_riot 0
	set_counter melilla_riot 0
	set_counter moors_emerge 5
	add_money moors 20000
  end_if

;Russia/Novgorod
  if I_CompareCounter faction_emerge_id = 15
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter novgorod_riot = 0
		console_command create_building Novgorod ros_po_bonus
	end_if
	if I_CompareCounter novgorod_riot = 1
		console_command create_building Novgorod ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 1 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction russia
			character random_name, named character, age 30, x 303, y 267, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   Novgorod Home Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Novgorod = venice
			faction_emerge russia venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = sicily
			faction_emerge russia sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = milan
			faction_emerge russia milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = denmark
			faction_emerge russia denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = egypt
			faction_emerge russia egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = cumans
			faction_emerge russia cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = turks
			faction_emerge russia turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = scotland
			faction_emerge russia scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = hre
			faction_emerge russia hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = england
			faction_emerge russia england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = portugal
			faction_emerge russia portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = poland
			faction_emerge russia poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = byzantium
			faction_emerge russia byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = moors
			faction_emerge russia moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = france
			faction_emerge russia france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = spain
			faction_emerge russia spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = hungary
			faction_emerge russia hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = aragon
			faction_emerge russia aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = lithuania
			faction_emerge russia lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = kievan_rus
			faction_emerge russia kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = norway
			faction_emerge russia norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = jerusalem
			faction_emerge russia jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = kwarezm
			faction_emerge russia kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = papal_states
			faction_emerge russia papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = mongols
			faction_emerge russia mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = teutonic_order
			faction_emerge russia teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = timurids
			faction_emerge russia timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Novgorod = slave
			faction_emerge russia slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event russia_emerged
	set_counter novgorod_riot 0
	set_counter russia_emerge 5
	add_money russia 20000
  end_if

;Spain/Leon
  if I_CompareCounter faction_emerge_id = 16
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter leon_riot = 0
		console_command create_building Leon ros_po_bonus
	end_if
	if I_CompareCounter toledo_riot = 0
		console_command create_building Toledo ros_po_bonus
	end_if
	if I_CompareCounter salamanca_riot = 0
		console_command create_building Salamanca ros_po_bonus
	end_if
	if I_CompareCounter burgos_riot = 0
		console_command create_building Burgos ros_po_bonus
	end_if
	if I_CompareCounter leon_riot = 1
		console_command create_building Leon ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 152, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Leon = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Leon = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter toledo_riot = 1
		console_command create_building Toledo ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction spain
			character random_name, named character, age 30, x 49, y 134, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Toledo = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Toledo = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter salamanca_riot = 1
		console_command create_building Salamanca ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction spain
			character random_name, named character, age 30, x 37, y 141, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Salamanca = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Salamanca = slave
			faction_emerge spain slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter burgos_riot = 1
		console_command create_building Burgos ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction spain
			character random_name, named character, age 30, x 51, y 150, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Jinetes				exp 1 armour 1 weapon_lvl 0
			unit   Jinetes				exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Burgos = venice
			faction_emerge spain venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = sicily
			faction_emerge spain sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = milan
			faction_emerge spain milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = denmark
			faction_emerge spain denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = egypt
			faction_emerge spain egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = cumans
			faction_emerge spain cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = turks
			faction_emerge spain turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = scotland
			faction_emerge spain scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = hre
			faction_emerge spain hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = england
			faction_emerge spain england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = portugal
			faction_emerge spain portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = poland
			faction_emerge spain poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = byzantium
			faction_emerge spain byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = moors
			faction_emerge spain moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = russia
			faction_emerge spain russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = france
			faction_emerge spain france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = hungary
			faction_emerge spain hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = aragon
			faction_emerge spain aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = lithuania
			faction_emerge spain lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = kievan_rus
			faction_emerge spain kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = norway
			faction_emerge spain norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = jerusalem
			faction_emerge spain jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = kwarezm
			faction_emerge spain kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = papal_states
			faction_emerge spain papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = mongols
			faction_emerge spain mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = teutonic_order
			faction_emerge spain teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Burgos = timurids
			faction_emerge spain timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event spain_emerged
	set_counter leon_riot 0
	set_counter toledo_riot 0
	set_counter salamanca_riot 0
	set_counter burgos_riot 0
	set_counter spain_emerge 5
	add_money spain 20000
  end_if

;Hungary
  if I_CompareCounter faction_emerge_id = 17
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter varad_riot = 0
		console_command create_building Varad ros_po_bonus
	end_if
	if I_CompareCounter esztergom_riot = 0
		console_command create_building Esztergom ros_po_bonus
	end_if
	if I_CompareCounter kassa_riot = 0
		console_command create_building Kassa ros_po_bonus
	end_if
	if I_CompareCounter varad_riot = 1
		console_command create_building Varad ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 236, y 183, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 236, y 183, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 236, y 183, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Varad = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Varad = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter esztergom_riot = 1
		console_command create_building Esztergom ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 213, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 213, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 213, y 191, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Esztergom = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Esztergom = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter kassa_riot = 1
		console_command create_building Kassa ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 2 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Hungarian Nobles			exp 0 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Light Swordsmen			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction hungary
			character random_name, named character, age 30, x 230, y 196, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   E Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted E Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Magyar Cavalry				exp 1 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Spearmen				exp 0 armour 2 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			unit   Pavise Crossbow Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Kassa = venice
			faction_emerge hungary venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = sicily
			faction_emerge hungary sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = milan
			faction_emerge hungary milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = denmark
			faction_emerge hungary denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = egypt
			faction_emerge hungary egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = cumans
			faction_emerge hungary cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = turks
			faction_emerge hungary turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = scotland
			faction_emerge hungary scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = hre
			faction_emerge hungary hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = england
			faction_emerge hungary england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = portugal
			faction_emerge hungary portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = poland
			faction_emerge hungary poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = byzantium
			faction_emerge hungary byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = moors
			faction_emerge hungary moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = russia
			faction_emerge hungary russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = spain
			faction_emerge hungary spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = france
			faction_emerge hungary france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = aragon
			faction_emerge hungary aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = lithuania
			faction_emerge hungary lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = kievan_rus
			faction_emerge hungary kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = norway
			faction_emerge hungary norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = jerusalem
			faction_emerge hungary jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = kwarezm
			faction_emerge hungary kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = papal_states
			faction_emerge hungary papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = mongols
			faction_emerge hungary mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = teutonic_order
			faction_emerge hungary teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = timurids
			faction_emerge hungary timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kassa = slave
			faction_emerge hungary slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event hungary_emerged
	set_counter varad_riot 0
	set_counter esztergom_riot 0
	set_counter kassa_riot 0
	set_counter hungary_emerge 5
	add_money hungary 20000

  end_if

;Aragon
  if I_CompareCounter faction_emerge_id = 18
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter zaragoza_riot = 0
		console_command create_building Zaragoza ros_po_bonus
	end_if
	if I_CompareCounter pamplona_riot = 0
		console_command create_building Pamplona ros_po_bonus
	end_if
	if I_CompareCounter barcelona_riot = 0
		console_command create_building Barcelona ros_po_bonus
	end_if
	if I_CompareCounter zaragoza_riot = 1
		console_command create_building Zaragoza ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 78, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 78, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 78, y 147, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Zaragoza = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Zaragoza = slave
			faction_emerge aragon slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter pamplona_riot = 1
		console_command create_building Pamplona ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 66, y 153, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Pamplona = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Pamplona = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter barcelona_riot = 1
		console_command create_building Barcelona ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 96, y 146, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 2 armour 0 weapon_lvl 0
			unit   Mailed Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Mailed Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 1 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 96, y 146, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Urban Spear Militia		exp 0 armour 0 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 0 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction aragon
			character random_name, named character, age 30, x 96, y 146, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   SE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Chivalric Knights			exp 2 armour 0 weapon_lvl 0
			unit   Chivalric Knights			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Chivalric Knights	exp 1 armour 0 weapon_lvl 0
			unit   Almughavars			exp 1 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms		exp 0 armour 1 weapon_lvl 0
			unit   Javelinmen				exp 0 armour 1 weapon_lvl 0
			unit   Basque Archers			exp 0 armour 1 weapon_lvl 0
			unit   Pavise Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Barcelona = venice
			faction_emerge aragon venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = sicily
			faction_emerge aragon sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = milan
			faction_emerge aragon milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = denmark
			faction_emerge aragon denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = egypt
			faction_emerge aragon egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = cumans
			faction_emerge aragon cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = turks
			faction_emerge aragon turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = scotland
			faction_emerge aragon scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = hre
			faction_emerge aragon hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = england
			faction_emerge aragon england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = portugal
			faction_emerge aragon portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = poland
			faction_emerge aragon poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = byzantium
			faction_emerge aragon byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = moors
			faction_emerge aragon moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = russia
			faction_emerge aragon russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = spain
			faction_emerge aragon spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = hungary
			faction_emerge aragon hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = france
			faction_emerge aragon france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = lithuania
			faction_emerge aragon lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = kievan_rus
			faction_emerge aragon kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = norway
			faction_emerge aragon norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = jerusalem
			faction_emerge aragon jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = kwarezm
			faction_emerge aragon kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = papal_states
			faction_emerge aragon papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = mongols
			faction_emerge aragon mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = teutonic_order
			faction_emerge aragon teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Barcelona = timurids
			faction_emerge aragon timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event aragon_emerged
	set_counter zaragoza_riot 0
	set_counter pamplona_riot 0
	set_counter barcelona_riot 0
	set_counter aragon_emerge 5
	add_money aragon 20000
  end_if

;Lithuania
  if I_CompareCounter faction_emerge_id = 19
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter vilnius_riot = 0
		console_command create_building Vilnius ros_po_bonus
	end_if
	if I_CompareCounter vilnius_riot = 1
		console_command create_building Vilnius ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 260, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 0 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 0 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Baltic Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 260, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 1 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Ducal Spearmen			exp 0 armour 1 weapon_lvl 0
			unit   Lithuanian Skirmishers		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction lithuania
			character random_name, named character, age 30, x 260, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   Lith Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Noble Cavalry			exp 2 armour 2 weapon_lvl 0
			unit   Noble Sons Cavalry		exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Infantry	exp 1 armour 2 weapon_lvl 0
			unit   Lithuanian Noble Sons		exp 1 armour 2 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   L Regular Infantry		exp 0 armour 0 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Late Lithuanian Spearman	exp 0 armour 1 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			unit   Lettish Crossbowmen		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Vilnius = venice
			faction_emerge lithuania venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = sicily
			faction_emerge lithuania sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = milan
			faction_emerge lithuania milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = denmark
			faction_emerge lithuania denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = egypt
			faction_emerge lithuania egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = cumans
			faction_emerge lithuania cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = turks
			faction_emerge lithuania turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = scotland
			faction_emerge lithuania scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = hre
			faction_emerge lithuania hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = england
			faction_emerge lithuania england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = portugal
			faction_emerge lithuania portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = poland
			faction_emerge lithuania poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = byzantium
			faction_emerge lithuania byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = moors
			faction_emerge lithuania moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = russia
			faction_emerge lithuania russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = spain
			faction_emerge lithuania spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = hungary
			faction_emerge lithuania hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = aragon
			faction_emerge lithuania aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = france
			faction_emerge lithuania france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = kievan_rus
			faction_emerge lithuania kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = norway
			faction_emerge lithuania norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = jerusalem
			faction_emerge lithuania jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = kwarezm
			faction_emerge lithuania kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = papal_states
			faction_emerge lithuania papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = mongols
			faction_emerge lithuania mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = teutonic_order
			faction_emerge lithuania teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = timurids
			faction_emerge lithuania timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Vilnius = slave
			faction_emerge lithuania slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event lithuania_emerged
	set_counter vilnius_riot 0
	set_counter lithuania_emerge 5
	add_money lithuania 20000
  end_if

;Kievan Rus
  if I_CompareCounter faction_emerge_id = 20
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter kiev_riot = 0
		console_command create_building Kiev ros_po_bonus
	end_if
	if I_CompareCounter kiev_riot = 1
		console_command create_building Kiev ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 297, y 209, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 0 weapon_lvl 0
			unit   Druzhina				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Spear Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   EE Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 297, y 209, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Boyars				exp 2 armour 1 weapon_lvl 0
			unit   Druzhina				exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 1 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			unit   EE Archer Militia			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction kievan_rus
			character random_name, named character, age 30, x 297, y 209, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   EE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Boyars				exp 2 armour 2 weapon_lvl 0
			unit   Druzhina				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Boyars		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Druzhina		exp 1 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Rus Senior Militia			exp 0 armour 2 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   Kievan Palace Guard		exp 0 armour 1 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			unit   EE Crossbow Militia		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Kiev = venice
			faction_emerge kievan_rus venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = sicily
			faction_emerge kievan_rus sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = milan
			faction_emerge kievan_rus milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = denmark
			faction_emerge kievan_rus denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = egypt
			faction_emerge kievan_rus egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = cumans
			faction_emerge kievan_rus cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = turks
			faction_emerge kievan_rus turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = scotland
			faction_emerge kievan_rus scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = hre
			faction_emerge kievan_rus hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = england
			faction_emerge kievan_rus england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = portugal
			faction_emerge kievan_rus portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = poland
			faction_emerge kievan_rus poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = byzantium
			faction_emerge kievan_rus byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = moors
			faction_emerge kievan_rus moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = russia
			faction_emerge kievan_rus russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = spain
			faction_emerge kievan_rus spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = hungary
			faction_emerge kievan_rus hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = aragon
			faction_emerge kievan_rus aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = lithuania
			faction_emerge kievan_rus lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = kievan_rus
			faction_emerge kievan_rus kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = norway
			faction_emerge kievan_rus norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = jerusalem
			faction_emerge kievan_rus jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = kwarezm
			faction_emerge kievan_rus kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = papal_states
			faction_emerge kievan_rus papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = mongols
			faction_emerge kievan_rus mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = teutonic_order
			faction_emerge kievan_rus teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = timurids
			faction_emerge kievan_rus timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Kiev = slave
			faction_emerge kievan_rus slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event kievan_rus_emerged
	set_counter kiev_riot 0
	set_counter kievan_rus_emerge 5
	add_money kievan_rus 20000

  end_if

;Norway
  if I_CompareCounter faction_emerge_id = 21
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter bergen_riot = 0
		console_command create_building Bergen ros_po_bonus
	end_if
	if I_CompareCounter eikundarsund_riot = 0
		console_command create_building Eikundarsund ros_po_bonus
	end_if
	if I_CompareCounter bergen_riot = 1
		console_command create_building Bergen ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction norway
			character random_name, named character, age 30, x 116, y 281, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Gotland Footmen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction norway
			character random_name, named character, age 30, x 116, y 281, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction norway
			character random_name, named character, age 30, x 116, y 281, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Bergen = venice
			faction_emerge norway venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = sicily
			faction_emerge norway sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = milan
			faction_emerge norway milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = denmark
			faction_emerge norway denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = egypt
			faction_emerge norway egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = cumans
			faction_emerge norway cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = turks
			faction_emerge norway turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = scotland
			faction_emerge norway scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = hre
			faction_emerge norway hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = england
			faction_emerge norway england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = portugal
			faction_emerge norway portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = poland
			faction_emerge norway poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = byzantium
			faction_emerge norway byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = moors
			faction_emerge norway moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = russia
			faction_emerge norway russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = spain
			faction_emerge norway spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = hungary
			faction_emerge norway hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = aragon
			faction_emerge norway aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = lithuania
			faction_emerge norway lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = kievan_rus
			faction_emerge norway kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = france
			faction_emerge norway france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = jerusalem
			faction_emerge norway jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = kwarezm
			faction_emerge norway kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = papal_states
			faction_emerge norway papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = mongols
			faction_emerge norway mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = teutonic_order
			faction_emerge norway teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = timurids
			faction_emerge norway timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Bergen = slave
			faction_emerge norway slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter eikundarsund_riot = 1
		console_command create_building Eikundarsund ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Huscarls				exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Huscarls		exp 1 armour 0 weapon_lvl 0
			unit   Gotland Footmen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Swordsmen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 2 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 1 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Drengjar				exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 0 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Norse Axemen			exp 1 armour 0 weapon_lvl 0
			unit   Viking Raiders			exp 0 armour 3 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Swordsmen			exp 0 armour 1 weapon_lvl 0
			unit   Norse Archers			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction norway
			character random_name, named character, age 30, x 120, y 269, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Feudal Knights			exp 2 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 1 armour 2 weapon_lvl 0
			unit   Feudal Knights			exp 1 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Dismounted Feudal Knights	exp 0 armour 3 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Swordstaff Militia			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			unit   Crossbowmen			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Eikundarsund = venice
			faction_emerge norway venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = sicily
			faction_emerge norway sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = milan
			faction_emerge norway milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = denmark
			faction_emerge norway denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = egypt
			faction_emerge norway egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = cumans
			faction_emerge norway cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = turks
			faction_emerge norway turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = scotland
			faction_emerge norway scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = hre
			faction_emerge norway hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = england
			faction_emerge norway england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = portugal
			faction_emerge norway portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = poland
			faction_emerge norway poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = byzantium
			faction_emerge norway byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = moors
			faction_emerge norway moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = russia
			faction_emerge norway russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = spain
			faction_emerge norway spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = hungary
			faction_emerge norway hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = aragon
			faction_emerge norway aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = lithuania
			faction_emerge norway lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = kievan_rus
			faction_emerge norway kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = france
			faction_emerge norway france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = jerusalem
			faction_emerge norway jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = kwarezm
			faction_emerge norway kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = papal_states
			faction_emerge norway papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = mongols
			faction_emerge norway mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = teutonic_order
			faction_emerge norway teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = timurids
			faction_emerge norway timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Eikundarsund = slave
			faction_emerge norway slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event norway_emerged
	set_counter bergen_riot 0
	set_counter eikundarsund_riot 0
	set_counter norway_emerge 5
	add_money norway 20000
  end_if

;Kwarezm
  if I_CompareCounter faction_emerge_id = 23
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter urgench_riot = 0
		console_command create_building Urgench ros_po_bonus
	end_if
	if I_CompareCounter khiva_riot = 0
		console_command create_building Khiva ros_po_bonus
	end_if
	if I_CompareCounter konjikala_riot = 0
		console_command create_building Konjikala ros_po_bonus
	end_if
	if I_CompareCounter urgench_riot = 1
		console_command create_building Urgench ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 500, y 154, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 500, y 154, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 500, y 154, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Urgench = venice
			faction_emerge kwarezm venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = sicily
			faction_emerge kwarezm sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = milan
			faction_emerge kwarezm milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = denmark
			faction_emerge kwarezm denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = egypt
			faction_emerge kwarezm egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = cumans
			faction_emerge kwarezm cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = turks
			faction_emerge kwarezm turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = scotland
			faction_emerge kwarezm scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = hre
			faction_emerge kwarezm hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = england
			faction_emerge kwarezm england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = portugal
			faction_emerge kwarezm portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = poland
			faction_emerge kwarezm poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = byzantium
			faction_emerge kwarezm byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = moors
			faction_emerge kwarezm moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = russia
			faction_emerge kwarezm russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = spain
			faction_emerge kwarezm spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = hungary
			faction_emerge kwarezm hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = aragon
			faction_emerge kwarezm aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = lithuania
			faction_emerge kwarezm lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = kievan_rus
			faction_emerge kwarezm kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = norway
			faction_emerge kwarezm norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = jerusalem
			faction_emerge kwarezm jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = france
			faction_emerge kwarezm france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = papal_states
			faction_emerge kwarezm papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = mongols
			faction_emerge kwarezm mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = teutonic_order
			faction_emerge kwarezm teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = timurids
			faction_emerge kwarezm timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Urgench = slave
			faction_emerge kwarezm slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter khiva_riot = 1
		console_command create_building Khiva ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 505, y 148, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 505, y 148, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 505, y 148, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Khiva = venice
			faction_emerge kwarezm venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = sicily
			faction_emerge kwarezm sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = milan
			faction_emerge kwarezm milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = denmark
			faction_emerge kwarezm denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = egypt
			faction_emerge kwarezm egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = cumans
			faction_emerge kwarezm cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = turks
			faction_emerge kwarezm turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = scotland
			faction_emerge kwarezm scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = hre
			faction_emerge kwarezm hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = england
			faction_emerge kwarezm england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = portugal
			faction_emerge kwarezm portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = poland
			faction_emerge kwarezm poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = byzantium
			faction_emerge kwarezm byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = moors
			faction_emerge kwarezm moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = russia
			faction_emerge kwarezm russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = spain
			faction_emerge kwarezm spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = hungary
			faction_emerge kwarezm hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = aragon
			faction_emerge kwarezm aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = lithuania
			faction_emerge kwarezm lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = kievan_rus
			faction_emerge kwarezm kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = norway
			faction_emerge kwarezm norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = jerusalem
			faction_emerge kwarezm jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = france
			faction_emerge kwarezm france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = papal_states
			faction_emerge kwarezm papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = mongols
			faction_emerge kwarezm mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = teutonic_order
			faction_emerge kwarezm teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = timurids
			faction_emerge kwarezm timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Khiva = slave
			faction_emerge kwarezm slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter konjikala_riot = 1
		console_command create_building Konjikala ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 490, y 127, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Turkomans				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   Persian Spearmen			exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			unit   ME Peasant Archers		exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 490, y 127, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction kwarezm
			character random_name, named character, age 30, x 490, y 127, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Imperial Guard			exp 2 armour 0 weapon_lvl 0
			unit   Kwarizmian Cavalry		exp 1 armour 0 weapon_lvl 0
			unit   Sibyan al Khass			exp 1 armour 2 weapon_lvl 0
			unit   Armored Horsearchers		exp 1 armour 2 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   Armored Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Hand Gunners			exp 0 armour 1 weapon_lvl 0
			unit   Persian Archers			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Konjikala = venice
			faction_emerge kwarezm venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = sicily
			faction_emerge kwarezm sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = milan
			faction_emerge kwarezm milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = denmark
			faction_emerge kwarezm denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = egypt
			faction_emerge kwarezm egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = cumans
			faction_emerge kwarezm cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = turks
			faction_emerge kwarezm turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = scotland
			faction_emerge kwarezm scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = hre
			faction_emerge kwarezm hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = england
			faction_emerge kwarezm england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = portugal
			faction_emerge kwarezm portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = poland
			faction_emerge kwarezm poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = byzantium
			faction_emerge kwarezm byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = moors
			faction_emerge kwarezm moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = russia
			faction_emerge kwarezm russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = spain
			faction_emerge kwarezm spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = hungary
			faction_emerge kwarezm hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = aragon
			faction_emerge kwarezm aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = lithuania
			faction_emerge kwarezm lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = kievan_rus
			faction_emerge kwarezm kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = norway
			faction_emerge kwarezm norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = jerusalem
			faction_emerge kwarezm jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = france
			faction_emerge kwarezm france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = papal_states
			faction_emerge kwarezm papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = mongols
			faction_emerge kwarezm mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = teutonic_order
			faction_emerge kwarezm teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = timurids
			faction_emerge kwarezm timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Konjikala = slave
			faction_emerge kwarezm slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event kwarezm_emerged
	set_counter urgench_riot 0
	set_counter khiva_riot 0
	set_counter konjikala_riot 0
	set_counter kwarezm_emerge 5
	add_money kwarezm 20000
  end_if

;Egypt/Fatimids
  if I_CompareCounter faction_emerge_id = 23
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter cairo_riot = 0
		console_command create_building Cairo ros_po_bonus
	end_if
	if I_CompareCounter alexandria_riot = 0
		console_command create_building Alexandria ros_po_bonus
	end_if
	if I_CompareCounter damietta_riot = 0
		console_command create_building Damietta ros_po_bonus
	end_if
	if I_CompareCounter cairo_riot = 1
		console_command create_building Cairo ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 302, y 61, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Cairo = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Cairo = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter alexandria_riot = 1
		console_command create_building Alexandria ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 294, y 69, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Alexandria = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Alexandria = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter damietta_riot = 1
		console_command create_building Damietta ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Arab Cavalry			exp 2 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Dismounted Arab Cavalry	exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 0 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Dismounted Ghulams		exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Desert Cavalry			exp 1 armour 1 weapon_lvl 0
			unit   Hashishim				exp 0 armour 0 weapon_lvl 0
			unit   Saracen Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 0 weapon_lvl 0
			unit   Desert Archers			exp 0 armour 0 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction egypt
			character random_name, named character, age 30, x 306, y 72, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   ME Bodyguard			exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 2 armour 1 weapon_lvl 0
			unit   Ghulams				exp 1 armour 1 weapon_lvl 0
			unit   Arab Cavalry			exp 1 armour 2 weapon_lvl 0
			unit   Hashishim				exp 1 armour 0 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Spearmen		exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Halberd Militia			exp 0 armour 1 weapon_lvl 0
			unit   ME Heavy Archers		exp 0 armour 1 weapon_lvl 0
			unit   Mamluk Archers			exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Damietta = venice
			faction_emerge egypt venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = sicily
			faction_emerge egypt sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = milan
			faction_emerge egypt milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = denmark
			faction_emerge egypt denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = kwarezm
			faction_emerge egypt kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = cumans
			faction_emerge egypt cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = turks
			faction_emerge egypt turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = scotland
			faction_emerge egypt scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = hre
			faction_emerge egypt hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = england
			faction_emerge egypt england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = portugal
			faction_emerge egypt portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = poland
			faction_emerge egypt poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = byzantium
			faction_emerge egypt byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = moors
			faction_emerge egypt moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = russia
			faction_emerge egypt russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = spain
			faction_emerge egypt spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = hungary
			faction_emerge egypt hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = aragon
			faction_emerge egypt aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = lithuania
			faction_emerge egypt lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = kievan_rus
			faction_emerge egypt kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = norway
			faction_emerge egypt norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = jerusalem
			faction_emerge egypt jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = france
			faction_emerge egypt france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = papal_states
			faction_emerge egypt papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = mongols
			faction_emerge egypt mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = teutonic_order
			faction_emerge egypt teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = timurids
			faction_emerge egypt timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Damietta = slave
			faction_emerge egypt slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event egypt_emerged
	set_counter cairo_riot 0
	set_counter alexandria_riot 0
	set_counter damietta_riot 0
	set_counter egypt_emerge 5
	add_money egypt 20000
  end_if

;Jerusalem/Crusader States
  if I_CompareCounter faction_emerge_id = 24
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Thorn ros_po_bonus
		console_command create_building Palanga ros_po_bonus
		console_command create_building Riga ros_po_bonus
	if I_CompareCounter rhodes_riot = 0
		console_command create_building Rhodes ros_po_bonus
	end_if
	if I_CompareCounter nicosia_riot = 0
		console_command create_building Nicosia ros_po_bonus
	end_if
	if I_CompareCounter rhodes_riot = 1
		console_command create_building Rhodes ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 279, y 107, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 278, y 106, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 107, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 108, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 279, y 107, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 278, y 106, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 107, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 108, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 279, y 107, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 278, y 106, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 107, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 281, y 108, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Rhodes = venice
			faction_emerge jerusalem venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = sicily
			faction_emerge jerusalem sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = milan
			faction_emerge jerusalem milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = denmark
			faction_emerge jerusalem denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = scotland
			faction_emerge jerusalem scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = hre
			faction_emerge jerusalem hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = england
			faction_emerge jerusalem england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = portugal
			faction_emerge jerusalem portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = poland
			faction_emerge jerusalem poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = spain
			faction_emerge jerusalem spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = hungary
			faction_emerge jerusalem hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = aragon
			faction_emerge jerusalem aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = norway
			faction_emerge jerusalem norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = france
			faction_emerge jerusalem france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = papal_states
			faction_emerge jerusalem papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = teutonic_order
			faction_emerge jerusalem teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		;
		if I_SettlementOwner Rhodes = cumans
			faction_emerge jerusalem cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = egypt
			faction_emerge jerusalem egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = turks
			faction_emerge jerusalem turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = byzantium
			faction_emerge jerusalem byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = moors
			faction_emerge jerusalem moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = russia
			faction_emerge jerusalem russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = lithuania
			faction_emerge jerusalem lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = kievan_rus
			faction_emerge jerusalem kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = kwarezm
			faction_emerge jerusalem kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = mongols
			faction_emerge jerusalem mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = timurids
			faction_emerge jerusalem timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Rhodes = slave
			faction_emerge jerusalem slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter nicosia_riot = 1
		console_command create_building Nicosia ros_target
		if I_CompareCounter military_era = 0
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Crusader Sergeants			exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			unit   Peasant Archers				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 0 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Light Men at Arms			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction jerusalem
			character random_name, named character, age 30, x 318, y 99, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, named character, age 21, x 319, y 98, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   NE Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Knights Hospitaller			exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Knights Hospitaller	exp 1 armour 2 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Pike Militia					exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 319, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end

			spawn_army
			faction jerusalem
			character random_name, admiral, age 20, x 317, y 100, family
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			unit   merc galley				exp 2 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Nicosia = venice
			faction_emerge jerusalem venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = sicily
			faction_emerge jerusalem sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = milan
			faction_emerge jerusalem milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = denmark
			faction_emerge jerusalem denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = scotland
			faction_emerge jerusalem scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = hre
			faction_emerge jerusalem hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = england
			faction_emerge jerusalem england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = portugal
			faction_emerge jerusalem portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = poland
			faction_emerge jerusalem poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = spain
			faction_emerge jerusalem spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = hungary
			faction_emerge jerusalem hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = aragon
			faction_emerge jerusalem aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = norway
			faction_emerge jerusalem norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = france
			faction_emerge jerusalem france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = papal_states
			faction_emerge jerusalem papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = teutonic_order
			faction_emerge jerusalem teutonic_order 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		;
		if I_SettlementOwner Nicosia = cumans
			faction_emerge jerusalem cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = egypt
			faction_emerge jerusalem egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = turks
			faction_emerge jerusalem turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = byzantium
			faction_emerge jerusalem byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = moors
			faction_emerge jerusalem moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = russia
			faction_emerge jerusalem russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = lithuania
			faction_emerge jerusalem lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = kievan_rus
			faction_emerge jerusalem kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = kwarezm
			faction_emerge jerusalem kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = mongols
			faction_emerge jerusalem mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = timurids
			faction_emerge jerusalem timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Nicosia = slave
			faction_emerge jerusalem slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event jerusalem_emerged
	set_counter rhodes_riot 0
	set_counter nicosia_riot 0
	set_counter jerusalem_emerge 5
	add_money jerusalem 20000
  end_if

;Teutonic Order
  if I_CompareCounter faction_emerge_id = 25
	;Non Target settlements
		console_command create_building Edinburgh ros_po_bonus
		console_command create_building Aberdeen ros_po_bonus
		console_command create_building Inverness ros_po_bonus
		console_command create_building Venice ros_po_bonus
		console_command create_building Palermo ros_po_bonus
		console_command create_building Syracuse ros_po_bonus
		console_command create_building Naples ros_po_bonus
		console_command create_building Genoa ros_po_bonus
		console_command create_building Arhus ros_po_bonus
		console_command create_building Roskilde ros_po_bonus
		console_command create_building Jaiksk ros_po_bonus
		console_command create_building Azaq ros_po_bonus
		console_command create_building Baia ros_po_bonus
		console_command create_building Caesarea ros_po_bonus
		console_command create_building Ankara ros_po_bonus
		console_command create_building Iconium ros_po_bonus
		console_command create_building Diyarbakir ros_po_bonus
		console_command create_building Paris ros_po_bonus
		console_command create_building Rheims ros_po_bonus
		console_command create_building Clermont ros_po_bonus
		console_command create_building Angers ros_po_bonus
		console_command create_building Frankfurt ros_po_bonus
		console_command create_building Vienna ros_po_bonus
		console_command create_building Prague ros_po_bonus
		console_command create_building Staufen ros_po_bonus
		console_command create_building Nuremburg ros_po_bonus
		console_command create_building London ros_po_bonus
		console_command create_building Nottingham ros_po_bonus
		console_command create_building Winchester ros_po_bonus
		console_command create_building Oporto ros_po_bonus
		console_command create_building Lisbon ros_po_bonus
		console_command create_building Krakow ros_po_bonus
		console_command create_building Halych ros_po_bonus
		console_command create_building Plock ros_po_bonus
		console_command create_building Constantinople ros_po_bonus
		console_command create_building Nicaea ros_po_bonus
		console_command create_building Athens ros_po_bonus
		console_command create_building Arta ros_po_bonus
		console_command create_building Trebizond ros_po_bonus
		console_command create_building Marrakesh ros_po_bonus
		console_command create_building Fes ros_po_bonus
		console_command create_building Melilla ros_po_bonus
		console_command create_building Novgorod ros_po_bonus
		console_command create_building Leon ros_po_bonus
		console_command create_building Toledo ros_po_bonus
		console_command create_building Salamanca ros_po_bonus
		console_command create_building Burgos ros_po_bonus
		console_command create_building Varad ros_po_bonus
		console_command create_building Esztergom ros_po_bonus
		console_command create_building Kassa ros_po_bonus
		console_command create_building Zaragoza ros_po_bonus
		console_command create_building Pamplona ros_po_bonus
		console_command create_building Barcelona ros_po_bonus
		console_command create_building Vilnius ros_po_bonus
		console_command create_building Kiev ros_po_bonus
		console_command create_building Bergen ros_po_bonus
		console_command create_building Eikundarsund ros_po_bonus
		console_command create_building Urgench ros_po_bonus
		console_command create_building Khiva ros_po_bonus
		console_command create_building Konjikala ros_po_bonus
		console_command create_building Cairo ros_po_bonus
		console_command create_building Alexandria ros_po_bonus
		console_command create_building Damietta ros_po_bonus
		console_command create_building Rhodes ros_po_bonus
		console_command create_building Nicosia ros_po_bonus
	if I_CompareCounter thorn_riot = 0
		console_command create_building Thorn ros_po_bonus
	end_if
	if I_CompareCounter palanga_riot = 0
		console_command create_building Palanga ros_po_bonus
	end_if
	if I_CompareCounter riga_riot = 0
		console_command create_building Riga ros_po_bonus
	end_if
	if I_CompareCounter thorn_riot = 1
		console_command create_building Thorn ros_target
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 211, y 228, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 212, y 234, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 211, y 228, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 212, y 234, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Thorn = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		;
		if I_SettlementOwner Thorn = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Thorn = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter palanga_riot = 1
		console_command create_building Palanga ros_target
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 226, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 224, y 237, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 226, y 239, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 224, y 237, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Palanga = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		;
		if I_SettlementOwner Palanga = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Palanga = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	if I_CompareCounter riga_riot = 1
		console_command create_building Riga ros_target
		if I_CompareCounter military_era = 1; Heavy Mail 1200
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 250, y 255, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 254, y 256, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 0 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Sword Brethren				exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_CompareCounter military_era = 2; Partial Plate 1300
			spawn_army
			faction teutonic_order
			character random_name, named character, age 30, x 250, y 255, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end

			spawn_army
			faction teutonic_order
			character random_name, named character, age 21, x 254, y 256, family
			traits LoyaltyStarter 1 , GoodCommander 4 , StrategyChivalry 4 , Energetic 1 , ReligionStarter 1 , Intelligent 2
			unit   TO Bodyguard				exp 2 armour 1 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Ritterbruder				exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Ritterbruder		exp 1 armour 2 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Dismounted Halbbruder			exp 0 armour 1 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			unit   Crossbow Militia				exp 0 armour 0 weapon_lvl 0
			end
		end_if
		if I_SettlementOwner Riga = venice
			faction_emerge teutonic_order venice 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = sicily
			faction_emerge teutonic_order sicily 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = milan
			faction_emerge teutonic_order milan 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = denmark
			faction_emerge teutonic_order denmark 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = scotland
			faction_emerge teutonic_order scotland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = hre
			faction_emerge teutonic_order hre 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = england
			faction_emerge teutonic_order england 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = portugal
			faction_emerge teutonic_order portugal 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = poland
			faction_emerge teutonic_order poland 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = spain
			faction_emerge teutonic_order spain 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = hungary
			faction_emerge teutonic_order hungary 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = aragon
			faction_emerge teutonic_order aragon 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = norway
			faction_emerge teutonic_order norway 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = france
			faction_emerge teutonic_order france 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = papal_states
			faction_emerge teutonic_order papal_states 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = jerusalem
			faction_emerge teutonic_order jerusalem 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		;
		if I_SettlementOwner Riga = cumans
			faction_emerge teutonic_order cumans 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = egypt
			faction_emerge teutonic_order egypt 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = turks
			faction_emerge teutonic_order turks 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = byzantium
			faction_emerge teutonic_order byzantium 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = moors
			faction_emerge teutonic_order moors 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = russia
			faction_emerge teutonic_order russia 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = lithuania
			faction_emerge teutonic_order lithuania 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = kievan_rus
			faction_emerge teutonic_order kievan_rus 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = kwarezm
			faction_emerge teutonic_order kwarezm 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = mongols
			faction_emerge teutonic_order mongols 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = timurids
			faction_emerge teutonic_order timurids 2 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
		if I_SettlementOwner Riga = slave
			faction_emerge teutonic_order slave 1 400.0 0.0 1.2 town true unused_label1 unused_name 30
		end_if
	end_if
	historic_event teutonic_order_emerged
	set_counter thorn_riot 0
	set_counter palanga_riot 0
	set_counter riga_riot 0
	set_counter teutonic_order_emerge 5
	add_money teutonic_order 20000
  end_if
  set_counter faction_emerge_id 0
  end_monitor

;--------------------------------------------------------------------------------
;---------------------Destroy PO Buildings, Reset Counter------------------------
;--------------------------------------------------------------------------------

monitor_event PreFactionTurnStart FactionIsLocal
	if I_CompareCounter ros_po_building = 1
	destroy_buildings venice ros_temp_buildings false
	destroy_buildings sicily ros_temp_buildings false
	destroy_buildings milan ros_temp_buildings false
	destroy_buildings denmark ros_temp_buildings false
	destroy_buildings egypt ros_temp_buildings false
	destroy_buildings scotland ros_temp_buildings false
	destroy_buildings cumans ros_temp_buildings false
	destroy_buildings turks ros_temp_buildings false
	destroy_buildings france ros_temp_buildings false
	destroy_buildings hre ros_temp_buildings false
	destroy_buildings england ros_temp_buildings false
	destroy_buildings portugal ros_temp_buildings false
	destroy_buildings poland ros_temp_buildings false
	destroy_buildings byzantium ros_temp_buildings false
	destroy_buildings moors ros_temp_buildings false
	destroy_buildings russia ros_temp_buildings false
	destroy_buildings spain ros_temp_buildings false
	destroy_buildings hungary ros_temp_buildings false
	destroy_buildings aragon ros_temp_buildings false
	destroy_buildings lithuania ros_temp_buildings false
	destroy_buildings kievan_rus ros_temp_buildings false
	destroy_buildings norway ros_temp_buildings false
	destroy_buildings jerusalem ros_temp_buildings false
	destroy_buildings kwarezm ros_temp_buildings false
	destroy_buildings papal_states ros_temp_buildings false
	destroy_buildings mongols ros_temp_buildings false
	destroy_buildings teutonic_order ros_temp_buildings false
	destroy_buildings timurids ros_temp_buildings false
	destroy_buildings slave ros_temp_buildings false
	set_counter ros_po_building 0
	end_if
	if I_CompareCounter scotland_emerge > 0
	    inc_counter scotland_emerge -1
	end_if
	if I_CompareCounter venice_emerge > 0
	    inc_counter venice_emerge -1
	end_if
	if I_CompareCounter sicily_emerge > 0
	    inc_counter sicily_emerge -1
	end_if
	if I_CompareCounter milan_emerge > 0
	    inc_counter milan_emerge -1
	end_if
	if I_CompareCounter denmark_emerge > 0
	    inc_counter denmark_emerge -1
	end_if
	if I_CompareCounter cumans_emerge > 0
	    inc_counter cumans_emerge -1
	end_if
	if I_CompareCounter turks_emerge > 0
	    inc_counter turks_emerge -1
	end_if
	if I_CompareCounter france_emerge > 0
	    inc_counter france_emerge -1
	end_if
	if I_CompareCounter hre_emerge > 0
	    inc_counter hre_emerge -1
	end_if
	if I_CompareCounter england_emerge > 0
	    inc_counter england_emerge -1
	end_if
	if I_CompareCounter portugal_emerge > 0
	    inc_counter portugal_emerge -1
	end_if
	if I_CompareCounter poland_emerge > 0
	    inc_counter poland_emerge -1
	end_if
	if I_CompareCounter byzantium_emerge > 0
	    inc_counter byzantium_emerge -1
	end_if
	if I_CompareCounter moors_emerge > 0
	    inc_counter moors_emerge -1
	end_if
	if I_CompareCounter russia_emerge > 0
	    inc_counter russia_emerge -1
	end_if
	if I_CompareCounter spain_emerge > 0
	    inc_counter spain_emerge -1
	end_if
	if I_CompareCounter hungary_emerge > 0
	    inc_counter hungary_emerge -1
	end_if
	if I_CompareCounter aragon_emerge > 0
	    inc_counter aragon_emerge -1
	end_if
	if I_CompareCounter lithuania_emerge > 0
	    inc_counter lithuania_emerge -1
	end_if
	if I_CompareCounter kievan_rus_emerge > 0
	    inc_counter kievan_rus_emerge -1
	end_if
	if I_CompareCounter norway_emerge > 0
	    inc_counter norway_emerge -1
	end_if
	if I_CompareCounter kwarezm_emerge > 0
	    inc_counter kwarezm_emerge -1
	end_if
	if I_CompareCounter egypt_emerge > 0
	    inc_counter egypt_emerge -1
	end_if
	if I_CompareCounter jerusalem_emerge > 0
	    inc_counter jerusalem_emerge -1
	end_if
	if I_CompareCounter teutonic_order_emerge > 0
	    inc_counter teutonic_order_emerge -1
	end_if
end_monitor

;Experimental
monitor_event PreFactionTurnStart FactionType slave
	if I_SettlementOwner Edinburgh = slave
	and I_IsFactionAIControlled scotland
	and I_NumberOfSettlements scotland = 0
		provoke_rebellion Edinburgh
	end_if
	if I_SettlementOwner Venice = slave
	and I_IsFactionAIControlled venice
	and I_NumberOfSettlements venice = 0
		provoke_rebellion Venice
	end_if
	if I_SettlementOwner Palermo = slave
	and I_IsFactionAIControlled sicily
	and I_NumberOfSettlements sicily = 0
		provoke_rebellion Palermo
	end_if
	if I_SettlementOwner Genoa = slave
	and I_IsFactionAIControlled milan
	and I_NumberOfSettlements milan = 0
		provoke_rebellion Genoa
	end_if
	if I_SettlementOwner Arhus = slave
	and I_IsFactionAIControlled denmark
	and I_NumberOfSettlements denmark = 0
		provoke_rebellion Arhus
	end_if
	if I_SettlementOwner Jaiksk = slave
	and I_IsFactionAIControlled cumans
	and I_NumberOfSettlements cumans = 0
		provoke_rebellion Jaiksk
	end_if
	if I_SettlementOwner Caesarea = slave
	and I_IsFactionAIControlled turks
	and I_NumberOfSettlements turks = 0
		provoke_rebellion Caesarea
	end_if
	if I_SettlementOwner Paris = slave
	and I_IsFactionAIControlled france
	and I_NumberOfSettlements france = 0
		provoke_rebellion Paris
	end_if
	if I_SettlementOwner Frankfurt = slave
	and I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre = 0
		provoke_rebellion Frankfurt
	end_if
	if I_SettlementOwner Vienna = slave
	and I_IsFactionAIControlled hre
	and I_NumberOfSettlements hre = 0
		provoke_rebellion Vienna
	end_if
	if I_SettlementOwner London = slave
	and I_IsFactionAIControlled england
	and I_NumberOfSettlements england = 0
		provoke_rebellion London
	end_if
	if I_SettlementOwner Oporto = slave
	and I_IsFactionAIControlled portugal
	and I_NumberOfSettlements portugal = 0
		provoke_rebellion Oporto
	end_if
	if I_SettlementOwner Krakow = slave
	and I_IsFactionAIControlled poland
	and I_NumberOfSettlements poland = 0
		provoke_rebellion Krakow
	end_if
	if I_SettlementOwner Constantinople = slave
	and I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium = 0
		provoke_rebellion Constantinople
	end_if
	if I_SettlementOwner Nicaea = slave
	and I_IsFactionAIControlled byzantium
	and I_NumberOfSettlements byzantium = 0
		provoke_rebellion Nicaea
	end_if
	if I_SettlementOwner Marrakesh = slave
	and I_IsFactionAIControlled moors
	and I_NumberOfSettlements moors = 0
		provoke_rebellion Marrakesh
	end_if
	if I_SettlementOwner Novgorod = slave
	and I_IsFactionAIControlled russia
	and I_NumberOfSettlements russia = 0
		provoke_rebellion Novgorod
	end_if
	if I_SettlementOwner Toledo = slave
	and I_IsFactionAIControlled spain
	and I_NumberOfSettlements spain = 0
		provoke_rebellion Toledo
	end_if
	if I_SettlementOwner Esztergom = slave
	and I_IsFactionAIControlled hungary
	and I_NumberOfSettlements hungary = 0
		provoke_rebellion Esztergom
	end_if
	if I_SettlementOwner Zaragoza = slave
	and I_IsFactionAIControlled aragon
	and I_NumberOfSettlements aragon = 0
		provoke_rebellion Zaragoza
	end_if
	if I_SettlementOwner Vilnius = slave
	and I_IsFactionAIControlled lithuania
	and I_NumberOfSettlements lithuania = 0
		provoke_rebellion Vilnius
	end_if
	if I_SettlementOwner Bergen = slave
	and I_IsFactionAIControlled norway
	and I_NumberOfSettlements norway = 0
		provoke_rebellion Bergen
	end_if
	if I_SettlementOwner Urgench = slave
	and I_IsFactionAIControlled kwarezm
	and I_NumberOfSettlements kwarezm = 0
		provoke_rebellion Urgench
	end_if
	if I_SettlementOwner Cairo = slave
	and I_IsFactionAIControlled egypt
	and I_NumberOfSettlements egypt = 0
		provoke_rebellion Cairo
	end_if
	if I_SettlementOwner Rhodes = slave
	and I_IsFactionAIControlled jerusalem
	and I_NumberOfSettlements jerusalem = 0
		provoke_rebellion Rhodes
	end_if
	if I_SettlementOwner Thorn = slave
	and I_IsFactionAIControlled teutonic_order
	and I_NumberOfSettlements teutonic_order = 0
	and I_EventCounter status_teutonic_order = 1
		provoke_rebellion Thorn
	end_if
end_monitor
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;END OF RE-EMERGING FACTIONS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;=======================================================================
;BEGIN:------------------- Royal Ladies of the Court-------------------;
;=======================================================================
declare_counter courtesan_lady
declare_counter constantinople_courtesan_id
declare_counter london_courtesan_id
declare_counter frankfurt_courtesan_id
declare_counter paris_courtesan_id
declare_counter arhus_courtesan_id
declare_counter eikundarsund_courtesan_id
declare_counter leon_courtesan_id
declare_counter naples_courtesan_id
declare_counter genoa_courtesan_id
declare_counter novgorod_courtesan_id
declare_counter krakow_courtesan_id
declare_counter kiev_courtesan_id
declare_counter venice_courtesan_id
declare_counter esztergom_courtesan_id
declare_counter milan_courtesan_id
declare_counter edinburgh_courtesan_id
declare_counter zaragoza_courtesan_id
declare_counter cordoba_courtesan_id
declare_counter rome_courtesan_id
declare_counter jerusalem_courtesan_id
declare_counter tbilisi_courtesan_id
declare_counter vilnius_courtesan_id

;Cities where courtesans are available:
monitor_event PreFactionTurnStart TrueCondition
 and I_TurnNumber < 1
	set_event_counter rlc_event 1
	console_command create_building Constantinople royal_court
	console_command create_building London royal_court
	console_command create_building Frankfurt royal_court
	console_command create_building Paris royal_court
	console_command create_building Arhus royal_court
	console_command create_building Eikundarsund royal_court
	console_command create_building Leon royal_court
	console_command create_building Naples royal_court
	console_command create_building Genoa royal_court
	console_command create_building Novgorod royal_court
	console_command create_building Krakow royal_court
	console_command create_building Kiev royal_court
	console_command create_building Venice royal_court
	console_command create_building Esztergom royal_court
	console_command create_building Milan royal_court
	console_command create_building Edinburgh royal_court
	console_command create_building Zaragoza royal_court
	console_command create_building Cordoba royal_court
	console_command create_building Rome royal_court
	console_command create_building Jerusalem royal_court
	console_command create_building Tbilisi royal_court
	console_command create_building Vilnius royal_court
	terminate_monitor
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Constantinople
	set_counter courtesan_lady 1
	if I_SettlementOwner Constantinople = byzantium
		set_counter constantinople_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Constantinople = england
		set_counter constantinople_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Constantinople = scotland
		set_counter constantinople_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Constantinople = hre
		set_counter constantinople_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Constantinople = france
		set_counter constantinople_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Constantinople = denmark
		set_counter constantinople_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Constantinople = norway
		set_counter constantinople_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Constantinople = spain
		set_counter constantinople_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Constantinople = aragon
		set_counter constantinople_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Constantinople = portugal
		set_counter constantinople_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Constantinople = venice
		set_counter constantinople_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Constantinople = milan
		set_counter constantinople_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Constantinople = sicily
		set_counter constantinople_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Constantinople = hungary
		set_counter constantinople_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Constantinople = poland
		set_counter constantinople_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Constantinople = lithuania
		set_counter constantinople_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Constantinople = kievan_rus
		set_counter constantinople_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Constantinople = russia
		set_counter constantinople_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Constantinople = jerusalem
		set_counter constantinople_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Constantinople_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName London
	set_counter courtesan_lady 1
	if I_SettlementOwner London = byzantium
		set_counter london_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner London = england
		set_counter london_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner London = scotland
		set_counter london_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner London = hre
		set_counter london_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner London = france
		set_counter london_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner London = denmark
		set_counter london_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner London = norway
		set_counter london_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner London = spain
		set_counter london_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner London = aragon
		set_counter london_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner London = portugal
		set_counter london_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner London = venice
		set_counter london_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner London = milan
		set_counter london_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner London = sicily
		set_counter london_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner London = hungary
		set_counter london_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner London = poland
		set_counter london_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner London = lithuania
		set_counter london_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner London = kievan_rus
		set_counter london_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner London = russia
		set_counter london_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner London = jerusalem
		set_counter london_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool London_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Frankfurt
	set_counter courtesan_lady 1
	if I_SettlementOwner Frankfurt = byzantium
		set_counter frankfurt_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Frankfurt = england
		set_counter frankfurt_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Frankfurt = scotland
		set_counter frankfurt_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Frankfurt = hre
		set_counter frankfurt_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Frankfurt = france
		set_counter frankfurt_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Frankfurt = denmark
		set_counter frankfurt_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Frankfurt = norway
		set_counter frankfurt_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Frankfurt = spain
		set_counter frankfurt_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Frankfurt = aragon
		set_counter frankfurt_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Frankfurt = portugal
		set_counter frankfurt_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Frankfurt = venice
		set_counter frankfurt_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Frankfurt = milan
		set_counter frankfurt_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Frankfurt = sicily
		set_counter frankfurt_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Frankfurt = hungary
		set_counter frankfurt_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Frankfurt = poland
		set_counter frankfurt_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Frankfurt = lithuania
		set_counter frankfurt_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Frankfurt = kievan_rus
		set_counter frankfurt_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Frankfurt = russia
		set_counter frankfurt_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Frankfurt = jerusalem
		set_counter frankfurt_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Frankfurt_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Paris
	set_counter courtesan_lady 1
	if I_SettlementOwner Paris = byzantium
		set_counter paris_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Paris = england
		set_counter paris_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Paris = scotland
		set_counter paris_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Paris = hre
		set_counter paris_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Paris = france
		set_counter paris_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Paris = denmark
		set_counter paris_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Paris = norway
		set_counter paris_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Paris = spain
		set_counter paris_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Paris = aragon
		set_counter paris_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Paris = portugal
		set_counter paris_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Paris = venice
		set_counter paris_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Paris = milan
		set_counter paris_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Paris = sicily
		set_counter paris_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Paris = hungary
		set_counter paris_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Paris = poland
		set_counter paris_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Paris = lithuania
		set_counter paris_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Paris = kievan_rus
		set_counter paris_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Paris = russia
		set_counter paris_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Paris = jerusalem
		set_counter paris_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Paris_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Arhus
	set_counter courtesan_lady 1
	if I_SettlementOwner Arhus = byzantium
		set_counter arhus_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Arhus = england
		set_counter arhus_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Arhus = scotland
		set_counter arhus_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Arhus = hre
		set_counter arhus_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Arhus = france
		set_counter arhus_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Arhus = denmark
		set_counter arhus_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Arhus = norway
		set_counter arhus_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Arhus = spain
		set_counter arhus_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Arhus = aragon
		set_counter arhus_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Arhus = portugal
		set_counter arhus_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Arhus = venice
		set_counter arhus_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Arhus = milan
		set_counter arhus_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Arhus = sicily
		set_counter arhus_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Arhus = hungary
		set_counter arhus_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Arhus = poland
		set_counter arhus_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Arhus = lithuania
		set_counter arhus_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Arhus = kievan_rus
		set_counter arhus_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Arhus = russia
		set_counter arhus_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Arhus = jerusalem
		set_counter arhus_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Arhus_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Eikundarsund
	set_counter courtesan_lady 1
	if I_SettlementOwner Eikundarsund = byzantium
		set_counter eikundarsund_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Eikundarsund = england
		set_counter eikundarsund_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Eikundarsund = scotland
		set_counter eikundarsund_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Eikundarsund = hre
		set_counter eikundarsund_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Eikundarsund = france
		set_counter eikundarsund_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Eikundarsund = denmark
		set_counter eikundarsund_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Eikundarsund = norway
		set_counter eikundarsund_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Eikundarsund = spain
		set_counter eikundarsund_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Eikundarsund = aragon
		set_counter eikundarsund_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Eikundarsund = portugal
		set_counter eikundarsund_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Eikundarsund = venice
		set_counter eikundarsund_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Eikundarsund = milan
		set_counter eikundarsund_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Eikundarsund = sicily
		set_counter eikundarsund_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Eikundarsund = hungary
		set_counter eikundarsund_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Eikundarsund = poland
		set_counter eikundarsund_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Eikundarsund = lithuania
		set_counter eikundarsund_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Eikundarsund = kievan_rus
		set_counter eikundarsund_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Eikundarsund = russia
		set_counter eikundarsund_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Eikundarsund = jerusalem
		set_counter eikundarsund_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Eikundarsund_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Leon
	set_counter courtesan_lady 1
	if I_SettlementOwner Constantinople = byzantium
		set_counter constantinople_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Leon = england
		set_counter leon_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Leon = scotland
		set_counter leon_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Leon = hre
		set_counter leon_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Leon = france
		set_counter leon_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Leon = denmark
		set_counter leon_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Leon = norway
		set_counter leon_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Leon = spain
		set_counter leon_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Leon = aragon
		set_counter leon_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Leon = portugal
		set_counter leon_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Leon = venice
		set_counter leon_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Leon = milan
		set_counter leon_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Leon = sicily
		set_counter leon_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Leon = hungary
		set_counter leon_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Leon = poland
		set_counter leon_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Leon = lithuania
		set_counter leon_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Leon = kievan_rus
		set_counter leon_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Leon = russia
		set_counter leon_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Leon = jerusalem
		set_counter leon_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Leon_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Naples
	set_counter courtesan_lady 1
	if I_SettlementOwner Naples = byzantium
		set_counter naples_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Naples = england
		set_counter naples_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Naples = scotland
		set_counter naples_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Naples = hre
		set_counter naples_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Naples = france
		set_counter naples_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Naples = denmark
		set_counter naples_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Naples = norway
		set_counter naples_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Naples = spain
		set_counter naples_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Naples = aragon
		set_counter naples_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Naples = portugal
		set_counter naples_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Naples = venice
		set_counter naples_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Naples = milan
		set_counter naples_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Naples = sicily
		set_counter naples_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Naples = hungary
		set_counter naples_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Naples = poland
		set_counter naples_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Naples = lithuania
		set_counter naples_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Naples = kievan_rus
		set_counter naples_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Naples = russia
		set_counter naples_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Naples = jerusalem
		set_counter naples_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Naples_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Genoa
	set_counter courtesan_lady 1
	if I_SettlementOwner Genoa = byzantium
		set_counter genoa_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Genoa = england
		set_counter genoa_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Genoa = scotland
		set_counter genoa_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Genoa = hre
		set_counter genoa_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Genoa = france
		set_counter genoa_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Genoa = denmark
		set_counter genoa_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Genoa = norway
		set_counter genoa_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Genoa = spain
		set_counter genoa_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Genoa = aragon
		set_counter genoa_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Genoa = portugal
		set_counter genoa_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Genoa = venice
		set_counter genoa_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Genoa = milan
		set_counter genoa_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Genoa = sicily
		set_counter genoa_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Genoa = hungary
		set_counter genoa_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Genoa = poland
		set_counter genoa_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Genoa = lithuania
		set_counter genoa_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Genoa = kievan_rus
		set_counter genoa_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Genoa = russia
		set_counter genoa_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Genoa = jerusalem
		set_counter genoa_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Genoa_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Novgorod
	set_counter courtesan_lady 1
	if I_SettlementOwner Novgorod = byzantium
		set_counter novgorod_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Novgorod = england
		set_counter novgorod_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Novgorod = scotland
		set_counter novgorod_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Novgorod = hre
		set_counter novgorod_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Novgorod = france
		set_counter novgorod_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Novgorod = denmark
		set_counter novgorod_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Novgorod = norway
		set_counter novgorod_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Novgorod = spain
		set_counter novgorod_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Novgorod = aragon
		set_counter novgorod_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Novgorod = portugal
		set_counter novgorod_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Novgorod = venice
		set_counter novgorod_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Novgorod = milan
		set_counter novgorod_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Novgorod = sicily
		set_counter novgorod_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Novgorod = hungary
		set_counter novgorod_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Novgorod = poland
		set_counter novgorod_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Novgorod = lithuania
		set_counter novgorod_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Novgorod = kievan_rus
		set_counter novgorod_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Novgorod = russia
		set_counter novgorod_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Novgorod = jerusalem
		set_counter novgorod_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Novgorod_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Krakow
	set_counter courtesan_lady 1
	if I_SettlementOwner Krakow = byzantium
		set_counter krakow_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Krakow = england
		set_counter krakow_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Krakow = scotland
		set_counter krakow_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Krakow = hre
		set_counter krakow_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Krakow = france
		set_counter krakow_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Krakow = denmark
		set_counter krakow_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Krakow = norway
		set_counter krakow_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Krakow = spain
		set_counter krakow_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Krakow = aragon
		set_counter krakow_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Krakow = portugal
		set_counter krakow_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Krakow = venice
		set_counter krakow_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Krakow = milan
		set_counter krakow_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Krakow = sicily
		set_counter krakow_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Krakow = hungary
		set_counter krakow_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Krakow = poland
		set_counter krakow_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Krakow = lithuania
		set_counter krakow_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Krakow = kievan_rus
		set_counter krakow_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Krakow = russia
		set_counter krakow_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Krakow = jerusalem
		set_counter krakow_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Krakow_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Kiev
	set_counter courtesan_lady 1
	if I_SettlementOwner Kiev = byzantium
		set_counter kiev_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Kiev = england
		set_counter kiev_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Kiev = scotland
		set_counter kiev_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Kiev = hre
		set_counter kiev_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Kiev = france
		set_counter kiev_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Kiev = denmark
		set_counter kiev_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Kiev = norway
		set_counter kiev_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Kiev = spain
		set_counter kiev_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Kiev = aragon
		set_counter kiev_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Kiev = portugal
		set_counter kiev_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Kiev = venice
		set_counter kiev_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Kiev = milan
		set_counter kiev_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Kiev = sicily
		set_counter kiev_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Kiev = hungary
		set_counter kiev_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Kiev = poland
		set_counter kiev_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Kiev = lithuania
		set_counter kiev_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Kiev = kievan_rus
		set_counter kiev_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Kiev = russia
		set_counter kiev_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Kiev = jerusalem
		set_counter kiev_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Kiev_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Venice
	set_counter courtesan_lady 1
	if I_SettlementOwner Venice = byzantium
		set_counter venice_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Venice = england
		set_counter venice_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Venice = scotland
		set_counter venice_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Venice = hre
		set_counter venice_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Venice = france
		set_counter venice_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Venice = denmark
		set_counter venice_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Venice = norway
		set_counter venice_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Venice = spain
		set_counter venice_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Venice = aragon
		set_counter venice_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Venice = portugal
		set_counter venice_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Venice = venice
		set_counter venice_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Venice = milan
		set_counter venice_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Venice = sicily
		set_counter venice_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Venice = hungary
		set_counter venice_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Venice = poland
		set_counter venice_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Venice = lithuania
		set_counter venice_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Venice = kievan_rus
		set_counter venice_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Venice = russia
		set_counter venice_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Venice = jerusalem
		set_counter venice_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Venice_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Esztergom
	set_counter courtesan_lady 1
	if I_SettlementOwner Esztergom = byzantium
		set_counter esztergom_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Esztergom = england
		set_counter esztergom_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Esztergom = scotland
		set_counter esztergom_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Esztergom = hre
		set_counter esztergom_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Esztergom = france
		set_counter esztergom_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Esztergom = denmark
		set_counter esztergom_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Esztergom = norway
		set_counter esztergom_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Esztergom = spain
		set_counter esztergom_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Esztergom = aragon
		set_counter esztergom_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Esztergom = portugal
		set_counter esztergom_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Esztergom = venice
		set_counter esztergom_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Esztergom = milan
		set_counter esztergom_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Esztergom = sicily
		set_counter esztergom_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Esztergom = hungary
		set_counter esztergom_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Esztergom = poland
		set_counter esztergom_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Esztergom = lithuania
		set_counter esztergom_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Esztergom = kievan_rus
		set_counter esztergom_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Esztergom = russia
		set_counter esztergom_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Esztergom = jerusalem
		set_counter esztergom_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Esztergom_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Milan
	set_counter courtesan_lady 1
	if I_SettlementOwner Milan = byzantium
		set_counter milan_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Milan = england
		set_counter milan_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Milan = scotland
		set_counter milan_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Milan = hre
		set_counter milan_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Milan = france
		set_counter milan_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Milan = denmark
		set_counter milan_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Milan = norway
		set_counter milan_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Milan = spain
		set_counter milan_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Milan = aragon
		set_counter milan_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Milan = portugal
		set_counter milan_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Milan = venice
		set_counter milan_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Milan = milan
		set_counter milan_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Milan = sicily
		set_counter milan_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Milan = hungary
		set_counter milan_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Milan = poland
		set_counter milan_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Milan = lithuania
		set_counter milan_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Milan = kievan_rus
		set_counter milan_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Milan = russia
		set_counter milan_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Milan = jerusalem
		set_counter milan_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Milan_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Edinburgh
	set_counter courtesan_lady 1
	if I_SettlementOwner Edinburgh = byzantium
		set_counter edinburgh_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Edinburgh = england
		set_counter edinburgh_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Edinburgh = scotland
		set_counter edinburgh_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Edinburgh = hre
		set_counter edinburgh_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Edinburgh = france
		set_counter edinburgh_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Edinburgh = denmark
		set_counter edinburgh_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Edinburgh = norway
		set_counter edinburgh_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Edinburgh = spain
		set_counter edinburgh_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Edinburgh = aragon
		set_counter edinburgh_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Edinburgh = portugal
		set_counter edinburgh_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Edinburgh = venice
		set_counter edinburgh_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Edinburgh = milan
		set_counter edinburgh_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Edinburgh = sicily
		set_counter edinburgh_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Edinburgh = hungary
		set_counter edinburgh_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Edinburgh = poland
		set_counter edinburgh_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Edinburgh = lithuania
		set_counter edinburgh_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Edinburgh = kievan_rus
		set_counter edinburgh_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Edinburgh = russia
		set_counter edinburgh_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Edinburgh = jerusalem
		set_counter edinburgh_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Edinburgh_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Zaragoza
	set_counter courtesan_lady 1
	if I_SettlementOwner Zaragoza = byzantium
		set_counter zaragoza_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Zaragoza = england
		set_counter zaragoza_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Zaragoza = scotland
		set_counter zaragoza_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Zaragoza = hre
		set_counter zaragoza_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Zaragoza = france
		set_counter zaragoza_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Zaragoza = denmark
		set_counter zaragoza_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Zaragoza = norway
		set_counter zaragoza_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Zaragoza = spain
		set_counter zaragoza_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Zaragoza = aragon
		set_counter zaragoza_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Zaragoza = portugal
		set_counter zaragoza_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Zaragoza = venice
		set_counter zaragoza_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Zaragoza = milan
		set_counter zaragoza_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Zaragoza = sicily
		set_counter zaragoza_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Zaragoza = hungary
		set_counter zaragoza_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Zaragoza = poland
		set_counter zaragoza_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Zaragoza = lithuania
		set_counter zaragoza_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Zaragoza = kievan_rus
		set_counter zaragoza_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Zaragoza = russia
		set_counter zaragoza_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Zaragoza = jerusalem
		set_counter zaragoza_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Zaragoza_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Cordoba
	set_counter courtesan_lady 1
	if I_SettlementOwner Cordoba = byzantium
		set_counter cordoba_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Cordoba = england
		set_counter cordoba_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Cordoba = scotland
		set_counter cordoba_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Cordoba = hre
		set_counter cordoba_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Cordoba = france
		set_counter cordoba_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Cordoba = denmark
		set_counter cordoba_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Cordoba = norway
		set_counter cordoba_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Cordoba = spain
		set_counter cordoba_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Cordoba = aragon
		set_counter cordoba_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Cordoba = portugal
		set_counter cordoba_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Cordoba = venice
		set_counter cordoba_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Cordoba = milan
		set_counter cordoba_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Cordoba = sicily
		set_counter cordoba_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Cordoba = hungary
		set_counter cordoba_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Cordoba = poland
		set_counter cordoba_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Cordoba = lithuania
		set_counter cordoba_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Cordoba = kievan_rus
		set_counter cordoba_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Cordoba = russia
		set_counter cordoba_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Cordoba = jerusalem
		set_counter cordoba_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Cordoba_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Rome
	set_counter courtesan_lady 1
	if I_SettlementOwner Rome = byzantium
		set_counter rome_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Rome = england
		set_counter rome_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Rome = scotland
		set_counter rome_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Rome = hre
		set_counter rome_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Rome = france
		set_counter rome_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Rome = denmark
		set_counter rome_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Rome = norway
		set_counter rome_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Rome = spain
		set_counter rome_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Rome = aragon
		set_counter rome_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Rome = portugal
		set_counter rome_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Rome = venice
		set_counter rome_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Rome = milan
		set_counter rome_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Rome = sicily
		set_counter rome_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Rome = hungary
		set_counter rome_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Rome = poland
		set_counter rome_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Rome = lithuania
		set_counter rome_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Rome = kievan_rus
		set_counter rome_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Rome = russia
		set_counter rome_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Rome = jerusalem
		set_counter rome_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Rome_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Jerusalem
	set_counter courtesan_lady 1
	if I_SettlementOwner Jerusalem = byzantium
		set_counter jerusalem_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Jerusalem = england
		set_counter jerusalem_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Jerusalem = scotland
		set_counter jerusalem_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Jerusalem = hre
		set_counter jerusalem_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Jerusalem = france
		set_counter jerusalem_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Jerusalem = denmark
		set_counter jerusalem_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Jerusalem = norway
		set_counter jerusalem_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Jerusalem = spain
		set_counter jerusalem_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Jerusalem = aragon
		set_counter jerusalem_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Jerusalem = portugal
		set_counter jerusalem_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Jerusalem = venice
		set_counter jerusalem_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Jerusalem = milan
		set_counter jerusalem_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Jerusalem = sicily
		set_counter jerusalem_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Jerusalem = hungary
		set_counter jerusalem_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Jerusalem = poland
		set_counter jerusalem_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Jerusalem = lithuania
		set_counter jerusalem_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Jerusalem = kievan_rus
		set_counter jerusalem_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Jerusalem = russia
		set_counter jerusalem_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Jerusalem = jerusalem
		set_counter jerusalem_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Jerusalem_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Tbilisi
	set_counter courtesan_lady 1
	if I_SettlementOwner Tbilisi = byzantium
		set_counter tbilisi_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Tbilisi = england
		set_counter tbilisi_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Tbilisi = scotland
		set_counter tbilisi_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Tbilisi = hre
		set_counter tbilisi_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Tbilisi = france
		set_counter tbilisi_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Tbilisi = denmark
		set_counter tbilisi_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Tbilisi = norway
		set_counter tbilisi_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Tbilisi = spain
		set_counter tbilisi_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Tbilisi = aragon
		set_counter tbilisi_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Tbilisi = portugal
		set_counter tbilisi_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Tbilisi = venice
		set_counter tbilisi_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Tbilisi = milan
		set_counter tbilisi_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Tbilisi = sicily
		set_counter tbilisi_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Tbilisi = hungary
		set_counter tbilisi_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Tbilisi = poland
		set_counter tbilisi_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Tbilisi = lithuania
		set_counter tbilisi_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Tbilisi = kievan_rus
		set_counter tbilisi_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Tbilisi = russia
		set_counter tbilisi_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Tbilisi = jerusalem
		set_counter tbilisi_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Tbilisi_Province 0 Royal Envoy
end_monitor

monitor_event UnitTrained TrainedUnitCategory cavalry
	and TrainedUnitClass spearmen
	and SettlementIsLocal
	and SettlementName Vilnius
	set_counter courtesan_lady 1
	if I_SettlementOwner Vilnius = byzantium
		set_counter vilnius_courtesan_id 1
		destroy_units byzantium princess
	end_if
	if I_SettlementOwner Vilnius = england
		set_counter vilnius_courtesan_id 2
		destroy_units england princess
	end_if
	if I_SettlementOwner Vilnius = scotland
		set_counter vilnius_courtesan_id 3
		destroy_units scotland princess
	end_if
	if I_SettlementOwner Vilnius = hre
		set_counter vilnius_courtesan_id 4
		destroy_units hre princess
	end_if
	if I_SettlementOwner Vilnius = france
		set_counter vilnius_courtesan_id 5
		destroy_units france princess
	end_if
	if I_SettlementOwner Vilnius = denmark
		set_counter vilnius_courtesan_id 6
		destroy_units denmark princess
	end_if
	if I_SettlementOwner Vilnius = norway
		set_counter vilnius_courtesan_id 7
		destroy_units norway princess
	end_if
	if I_SettlementOwner Vilnius = spain
		set_counter vilnius_courtesan_id 8
		destroy_units spain princess
	end_if
	if I_SettlementOwner Vilnius = aragon
		set_counter vilnius_courtesan_id 9
		destroy_units aragon princess
	end_if
	if I_SettlementOwner Vilnius = portugal
		set_counter vilnius_courtesan_id 10
		destroy_units portugal princess
	end_if
	if I_SettlementOwner Vilnius = venice
		set_counter vilnius_courtesan_id 11
		destroy_units venice princess
	end_if
	if I_SettlementOwner Vilnius = milan
		set_counter vilnius_courtesan_id 12
		destroy_units milan princess
	end_if
	if I_SettlementOwner Vilnius = sicily
		set_counter vilnius_courtesan_id 13
		destroy_units sicily princess
	end_if
	if I_SettlementOwner Vilnius = hungary
		set_counter vilnius_courtesan_id 14
		destroy_units hungary princess
	end_if
	if I_SettlementOwner Vilnius = poland
		set_counter vilnius_courtesan_id 15
		destroy_units poland princess
	end_if
	if I_SettlementOwner Vilnius = lithuania
		set_counter vilnius_courtesan_id 16
		destroy_units lithuania princess
	end_if
	if I_SettlementOwner Vilnius = kievan_rus
		set_counter vilnius_courtesan_id 17
		destroy_units kievan_rus princess
	end_if
	if I_SettlementOwner Vilnius = russia
		set_counter vilnius_courtesan_id 18
		destroy_units russia princess
	end_if
	if I_SettlementOwner Vilnius = jerusalem
		set_counter vilnius_courtesan_id 19
		destroy_units jerusalem princess
	end_if
	set_recruit_pool Vilnius_Province 0 Royal Envoy
end_monitor

monitor_event PreFactionTurnStart FactionIsLocal
	and I_CompareCounter courtesan_lady >= 1
;
	if I_CompareCounter constantinople_courtesan_id >= 1
		if I_CompareCounter constantinople_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter constantinople_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 284, y 142
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter constantinople_courtesan_id 0
	end_if
;
	if I_CompareCounter london_courtesan_id >= 1
		if I_CompareCounter london_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter london_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter london_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter london_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter london_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter london_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter london_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter london_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter london_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter london_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter london_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter london_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter london_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter london_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter london_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter london_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter london_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter london_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter london_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 80, y 217
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter london_courtesan_id 0
	end_if
;
	if I_CompareCounter frankfurt_courtesan_id >= 1
		if I_CompareCounter frankfurt_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 2
			spawn_character 1byzantium random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 14
			spawn_character 10byzantium random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter frankfurt_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 140, y 206
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter frankfurt_courtesan_id 0
	end_if
;
	if I_CompareCounter paris_courtesan_id >= 1
		if I_CompareCounter paris_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter paris_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter paris_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter paris_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter paris_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter paris_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter paris_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter paris_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter paris_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter paris_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter paris_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter paris_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter paris_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter paris_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter paris_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter paris_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter paris_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter paris_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter paris_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 93, y 197
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter paris_courtesan_id 0
	end_if
;
	if I_CompareCounter arhus_courtesan_id >= 1
		if I_CompareCounter arhus_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter arhus_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 150, y 250
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter arhus_courtesan_id 0
	end_if
;
	if I_CompareCounter eikundarsund_courtesan_id >= 1
		if I_CompareCounter eikundarsund_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter eikundarsund_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 120, y 269
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter eikundarsund_courtesan_id 0
	end_if
;
	if I_CompareCounter leon_courtesan_id >= 1
		if I_CompareCounter leon_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter leon_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter leon_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter leon_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter leon_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter leon_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter leon_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter leon_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter leon_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter leon_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter leon_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter leon_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter leon_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter leon_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter leon_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter leon_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter leon_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter leon_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter leon_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 37, y 152
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter leon_courtesan_id 0
	end_if
;
	if I_CompareCounter naples_courtesan_id >= 1
		if I_CompareCounter naples_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter naples_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter naples_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter naples_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter naples_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter naples_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter naples_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter naples_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter naples_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter naples_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter naples_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter naples_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter naples_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter naples_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter naples_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter naples_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter naples_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter naples_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter naples_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 182, y 139
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter naples_courtesan_id 0
	end_if
;
	if I_CompareCounter genoa_courtesan_id >= 1
		if I_CompareCounter genoa_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter genoa_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 142, y 166
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter genoa_courtesan_id 0
	end_if
;
	if I_CompareCounter novgorod_courtesan_id >= 1
		if I_CompareCounter novgorod_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter novgorod_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 303, y 267
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter novgorod_courtesan_id 0
	end_if
;
	if I_CompareCounter krakow_courtesan_id >= 1
		if I_CompareCounter krakow_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter krakow_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 217, y 208
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter krakow_courtesan_id 0
	end_if
;
	if I_CompareCounter kiev_courtesan_id >= 1
		if I_CompareCounter kiev_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter kiev_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 297, y 209
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter kiev_courtesan_id 0
	end_if
;
	if I_CompareCounter venice_courtesan_id >= 1
		if I_CompareCounter venice_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter venice_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter venice_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter venice_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter venice_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter venice_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter venice_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter venice_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter venice_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter venice_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter venice_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter venice_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter venice_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter venice_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter venice_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter venice_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter venice_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter venice_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter venice_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 168, y 173
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter venice_courtesan_id 0
	end_if
;
	if I_CompareCounter esztergom_courtesan_id >= 1
		if I_CompareCounter esztergom_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter esztergom_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 213, y 191
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter esztergom_courtesan_id 0
	end_if
;
	if I_CompareCounter milan_courtesan_id >= 1
		if I_CompareCounter milan_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter milan_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter milan_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter milan_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter milan_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter milan_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter milan_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter milan_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter milan_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter milan_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter milan_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter milan_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter milan_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter milan_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter milan_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter milan_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter milan_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter milan_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter milan_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 144, y 175
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter milan_courtesan_id 0
	end_if
;
	if I_CompareCounter edinburgh_courtesan_id >= 1
		if I_CompareCounter edinburgh_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter edinburgh_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 59, y 248
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter edinburgh_courtesan_id 0
	end_if
;
	if I_CompareCounter zaragoza_courtesan_id >= 1
		if I_CompareCounter zaragoza_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter zaragoza_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 78, y 147
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter zaragoza_courtesan_id 0
	end_if
;
	if I_CompareCounter cordoba_courtesan_id >= 1
		if I_CompareCounter cordoba_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter cordoba_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 42, y 117
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter cordoba_courtesan_id 0
	end_if
;
	if I_CompareCounter rome_courtesan_id >= 1
		if I_CompareCounter rome_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter rome_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter rome_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter rome_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter rome_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter rome_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter rome_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter rome_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter rome_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter rome_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter rome_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter rome_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter rome_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter rome_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter rome_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter rome_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter rome_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter rome_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter rome_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 169, y 146
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter rome_courtesan_id 0
	end_if
;
	if I_CompareCounter jerusalem_courtesan_id >= 1
		if I_CompareCounter jerusalem_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter jerusalem_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 330, y 74
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter jerusalem_courtesan_id 0
	end_if
;
	if I_CompareCounter tbilisi_courtesan_id >= 1
		if I_CompareCounter tbilisi_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter tbilisi_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 401, y 148
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter tbilisi_courtesan_id 0
	end_if
;
	if I_CompareCounter vilnius_courtesan_id >= 1
		if I_CompareCounter vilnius_courtesan_id = 1
		and I_CompareCounter turn_fid = 9
			spawn_character byzantium random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { byzantium, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 2
		and I_CompareCounter turn_fid = 19
			spawn_character england random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { england, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 3
		and I_CompareCounter turn_fid = 16
			spawn_character scotland random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { scotland, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 4
		and I_CompareCounter turn_fid = 18
			spawn_character hre random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { hre, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 5
		and I_CompareCounter turn_fid = 17
			spawn_character france random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { france, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 6
		and I_CompareCounter turn_fid = 15
			spawn_character denmark random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { denmark, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 7
		and I_CompareCounter turn_fid = 26
			spawn_character norway random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { norway, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 8
		and I_CompareCounter turn_fid = 22
			spawn_character spain random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { spain, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 9
		and I_CompareCounter turn_fid = 24
			spawn_character aragon random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { aragon, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 10
		and I_CompareCounter turn_fid = 20
			spawn_character portugal random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { portugal, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 11
		and I_CompareCounter turn_fid = 12
			spawn_character venice random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { venice, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 12
		and I_CompareCounter turn_fid = 14
			spawn_character milan random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { milan, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 13
		and I_CompareCounter turn_fid = 13
			spawn_character sicily random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { sicily, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 14
		and I_CompareCounter turn_fid = 23
			spawn_character hungary random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { hungary, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 15
		and I_CompareCounter turn_fid = 21
			spawn_character poland random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { poland, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 16
		and I_CompareCounter turn_fid = 6
			spawn_character lithuania random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { lithuania, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 17
		and I_CompareCounter turn_fid = 11
			spawn_character kievan_rus random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { kievan_rus, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 18
		and I_CompareCounter turn_fid = 10
			spawn_character russia random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { russia, }
		end_if
		if I_CompareCounter vilnius_courtesan_id = 19
		and I_CompareCounter turn_fid = 27
			spawn_character jerusalem random_name, princess, age 19, x 260, y 239
			historic_event royal_lady factions { jerusalem, }
		end_if
		set_counter vilnius_courtesan_id 0
	end_if
	
	if I_CompareCounter constantinople_courtesan_id = 0
	and I_CompareCounter london_courtesan_id = 0
	and I_CompareCounter frankfurt_courtesan_id = 0
	and I_CompareCounter paris_courtesan_id = 0
	and I_CompareCounter arhus_courtesan_id = 0
	and I_CompareCounter eikundarsund_courtesan_id = 0
	and I_CompareCounter leon_courtesan_id = 0
	and I_CompareCounter naples_courtesan_id = 0
	and I_CompareCounter genoa_courtesan_id = 0
	and I_CompareCounter novgorod_courtesan_id = 0
	and I_CompareCounter krakow_courtesan_id = 0
	and I_CompareCounter kiev_courtesan_id = 0
	and I_CompareCounter venice_courtesan_id = 0
	and I_CompareCounter esztergom_courtesan_id = 0
	and I_CompareCounter milan_courtesan_id = 0
	and I_CompareCounter edinburgh_courtesan_id = 0
	and I_CompareCounter zaragoza_courtesan_id = 0
	and I_CompareCounter cordoba_courtesan_id = 0
	and I_CompareCounter rome_courtesan_id = 0
	and I_CompareCounter jerusalem_courtesan_id = 0
	and I_CompareCounter tbilisi_courtesan_id = 0
	and I_CompareCounter vilnius_courtesan_id = 0
		set_counter courtesan_lady 0
	end_if
end_monitor

;=======================================================================
;END:------------------- Royal Ladies of the Court---------------------;
;=======================================================================
;--------------------------------------------------------------------;
;********************************************************************;
;***************Royal Ladies of the Court AI EXTRA*******************;
;********************************************************************;
;--------------------------------------------------------------------;
declare_counter courtesan_ai
monitor_event PreFactionTurnStart IsFactionAIControlled
	
	if I_TurnNumber = 30
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 60
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 90
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 120
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 150
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 180
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 210
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 240
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 270
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 300
		set_counter courtesan_ai 1
	end_if
	if I_TurnNumber = 301
		terminate_monitor
	end_if

	if I_CompareCounter courtesan_ai = 1
		if I_NumberOfSettlements byzantium > 3
		and I_CompareCounter turn_fid = 9
			if I_SettlementOwner Constantinople = byzantium
			and RandomPercent < 51
				spawn_character byzantium random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = byzantium
			and RandomPercent < 16
				spawn_character byzantium random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = byzantium
			and RandomPercent < 16
				spawn_character byzantium random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = byzantium
			and RandomPercent < 16
				spawn_character byzantium random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = byzantium
			and RandomPercent < 34
				spawn_character byzantium random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements hre > 3
		and I_CompareCounter turn_fid = 18
			if I_SettlementOwner Constantinople = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = hre
			and RandomPercent < 51
				spawn_character hre random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = hre
			and RandomPercent < 16
				spawn_character hre random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = hre
			and RandomPercent < 16
				spawn_character hre random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = hre
			and RandomPercent < 16
				spawn_character hre random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = hre
			and RandomPercent < 34
				spawn_character hre random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements france > 3
		and I_CompareCounter turn_fid = 17
			if I_SettlementOwner Constantinople = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = france
			and RandomPercent < 51
				spawn_character france random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = france
			and RandomPercent < 16
				spawn_character france random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = france
			and RandomPercent < 16
				spawn_character france random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = france
			and RandomPercent < 16
				spawn_character france random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = france
			and RandomPercent < 34
				spawn_character france random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements england > 3
		and I_CompareCounter turn_fid = 19
			if I_SettlementOwner Constantinople = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = england
			and RandomPercent < 51
				spawn_character england random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = england
			and RandomPercent < 16
				spawn_character england random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = england
			and RandomPercent < 16
				spawn_character england random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = england
			and RandomPercent < 16
				spawn_character england random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = england
			and RandomPercent < 34
				spawn_character england random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements scotland > 3
		and I_CompareCounter turn_fid = 16
			if I_SettlementOwner Constantinople = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = scotland
			and RandomPercent < 16
				spawn_character scotland random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = scotland
			and RandomPercent < 16
				spawn_character scotland random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = scotland
			and RandomPercent < 16
				spawn_character scotland random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = scotland
			and RandomPercent < 51
				spawn_character scotland random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = scotland
			and RandomPercent < 34
				spawn_character scotland random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements denmark > 3
		and I_CompareCounter turn_fid = 15
			if I_SettlementOwner Constantinople = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = denmark
			and RandomPercent < 51
				spawn_character denmark random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = denmark
			and RandomPercent < 16
				spawn_character denmark random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = denmark
			and RandomPercent < 16
				spawn_character denmark random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = denmark
			and RandomPercent < 16
				spawn_character denmark random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = denmark
			and RandomPercent < 34
				spawn_character denmark random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements norway > 3
		and I_CompareCounter turn_fid = 26
			if I_SettlementOwner Constantinople = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = norway
			and RandomPercent < 51
				spawn_character norway random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = norway
			and RandomPercent < 16
				spawn_character norway random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = norway
			and RandomPercent < 16
				spawn_character norway random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = norway
			and RandomPercent < 16
				spawn_character norway random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = norway
			and RandomPercent < 34
				spawn_character norway random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements spain > 3
		and I_CompareCounter turn_fid = 22
			if I_SettlementOwner Constantinople = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = spain
			and RandomPercent < 51
				spawn_character spain random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = spain
			and RandomPercent < 16
				spawn_character spain random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = spain
			and RandomPercent < 16
				spawn_character spain random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = spain
			and RandomPercent < 16
				spawn_character spain random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = spain
			and RandomPercent < 34
				spawn_character spain random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements aragon > 3
		and I_CompareCounter turn_fid = 24
			if I_SettlementOwner Constantinople = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = aragon
			and RandomPercent < 16
				spawn_character aragon random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = aragon
			and RandomPercent < 16
				spawn_character aragon random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = aragon
			and RandomPercent < 16
				spawn_character aragon random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = aragon
			and RandomPercent < 51
				spawn_character aragon random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = aragon
			and RandomPercent < 34
				spawn_character aragon random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements portugal > 3
		and I_CompareCounter turn_fid = 20
			if I_SettlementOwner Constantinople = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = portugal
			and RandomPercent < 16
				spawn_character portugal random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = portugal
			and RandomPercent < 16
				spawn_character portugal random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = portugal
			and RandomPercent < 16
				spawn_character portugal random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = portugal
			and RandomPercent < 34
				spawn_character portugal random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements milan > 3
		and I_CompareCounter turn_fid = 14
			if I_SettlementOwner Constantinople = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = milan
			and RandomPercent < 16
				spawn_character milan random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = milan
			and RandomPercent < 51
				spawn_character milan random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = milan
			and RandomPercent < 16
				spawn_character milan random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = milan
			and RandomPercent < 16
				spawn_character milan random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = milan
			and RandomPercent < 34
				spawn_character milan random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements venice > 3
		and I_CompareCounter turn_fid = 12
			if I_SettlementOwner Constantinople = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = venice
			and RandomPercent < 16
				spawn_character venice random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = venice
			and RandomPercent < 16
				spawn_character venice random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = venice
			and RandomPercent < 51
				spawn_character venice random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = venice
			and RandomPercent < 16
				spawn_character venice random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = venice
			and RandomPercent < 34
				spawn_character venice random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements sicily > 3
		and I_CompareCounter turn_fid = 13
			if I_SettlementOwner Constantinople = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = sicily
			and RandomPercent < 51
				spawn_character sicily random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = sicily
			and RandomPercent < 16
				spawn_character sicily random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = sicily
			and RandomPercent < 16
				spawn_character sicily random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = sicily
			and RandomPercent < 16
				spawn_character sicily random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = sicily
			and RandomPercent < 34
				spawn_character sicily random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements hungary > 3
		and I_CompareCounter turn_fid = 23
			if I_SettlementOwner Constantinople = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = hungary
			and RandomPercent < 16
				spawn_character hungary random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = hungary
			and RandomPercent < 16
				spawn_character hungary random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = hungary
			and RandomPercent < 51
				spawn_character hungary random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = hungary
			and RandomPercent < 16
				spawn_character hungary random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = hungary
			and RandomPercent < 34
				spawn_character hungary random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements poland > 3
		and I_CompareCounter turn_fid = 21
			if I_SettlementOwner Constantinople = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = poland
			and RandomPercent < 16
				spawn_character poland random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = poland
			and RandomPercent < 16
				spawn_character poland random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = poland
			and RandomPercent < 51
				spawn_character poland random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = poland
			and RandomPercent < 16
				spawn_character poland random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = poland
			and RandomPercent < 34
				spawn_character poland random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements lithuania > 3
		and I_CompareCounter turn_fid = 6
			if I_SettlementOwner Constantinople = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = lithuania
			and RandomPercent < 16
				spawn_character lithuania random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = lithuania
			and RandomPercent < 16
				spawn_character lithuania random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = lithuania
			and RandomPercent < 16
				spawn_character lithuania random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = lithuania
			and RandomPercent < 34
				spawn_character lithuania random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = lithuania
			and RandomPercent < 51
				spawn_character lithuania random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements russia > 3
		and I_CompareCounter turn_fid = 10
			if I_SettlementOwner Constantinople = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = russia
			and RandomPercent < 16
				spawn_character russia random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = russia
			and RandomPercent < 16
				spawn_character russia random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = russia
			and RandomPercent < 51
				spawn_character russia random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = russia
			and RandomPercent < 16
				spawn_character russia random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = russia
			and RandomPercent < 16
				spawn_character russia random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = russia
			and RandomPercent < 34
				spawn_character russia random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements kievan_rus > 3
		and I_CompareCounter turn_fid = 11
			if I_SettlementOwner Constantinople = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = kievan_rus
			and RandomPercent < 16
				spawn_character kievan_rus random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = kievan_rus
			and RandomPercent < 16
				spawn_character kievan_rus random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = kievan_rus
			and RandomPercent < 51
				spawn_character kievan_rus random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = kievan_rus
			and RandomPercent < 16
				spawn_character kievan_rus random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = kievan_rus
			and RandomPercent < 16
				spawn_character kievan_rus random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = kievan_rus
			and RandomPercent < 34
				spawn_character kievan_rus random_name, princess, age 19, x 260, y 239
			end_if
		end_if

		if I_NumberOfSettlements jerusalem > 3
		and I_CompareCounter turn_fid = 27
			if I_SettlementOwner Constantinople = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 284, y 142
			end_if
			if I_SettlementOwner London = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 80, y 217
			end_if
			if I_SettlementOwner Frankfurt = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 140, y 206
			end_if
			if I_SettlementOwner Paris = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 93, y 197
			end_if
			if I_SettlementOwner Arhus = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 150, y 250
			end_if
			if I_SettlementOwner Eikundarsund = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Leon = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 120, y 269
			end_if
			if I_SettlementOwner Naples = jerusalem
			and RandomPercent < 16
				spawn_character jerusalem random_name, princess, age 19, x 182, y 139
			end_if
			if I_SettlementOwner Genoa = jerusalem
			and RandomPercent < 16
				spawn_character jerusalem random_name, princess, age 19, x 142, y 166
			end_if
			if I_SettlementOwner Novgorod = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 303, y 267
			end_if
			if I_SettlementOwner Krakow = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 217, y 208
			end_if
			if I_SettlementOwner Kiev = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 297, y 209
			end_if
			if I_SettlementOwner Venice = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 168, y 173
			end_if
			if I_SettlementOwner Esztergom = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 213, y 191
			end_if
			if I_SettlementOwner Milan = jerusalem
			and RandomPercent < 16
				spawn_character jerusalem random_name, princess, age 19, x 144, y 175
			end_if
			if I_SettlementOwner Edinburgh = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 59, y 248
			end_if
			if I_SettlementOwner Zaragoza = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 78, y 147
			end_if
			if I_SettlementOwner Cordoba = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 42, y 117
			end_if
			if I_SettlementOwner Rome = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 169, y 146
			end_if
			if I_SettlementOwner Jerusalem = jerusalem
			and RandomPercent < 51
				spawn_character jerusalem random_name, princess, age 19, x 330, y 74
			end_if
			if I_SettlementOwner Tbilisi = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 401, y 148
			end_if
			if I_SettlementOwner Vilnius = jerusalem
			and RandomPercent < 34
				spawn_character jerusalem random_name, princess, age 19, x 260, y 239
			end_if
		end_if
		set_counter courtesan_ai 0
	end_if
end_monitor

;=======================================================================
;END:------------- Royal Ladies of the Court AI EXTRA -----------------;
;=======================================================================

;=======================================================;
;================= ADDITIONAL SCRIPTS ==================;
;=======================================================;

;================== Hotseat Treasurer ===================
; "Hotseat Treasurer is not available to slave faction...
if I_HotseatEnabled

 declare_counter egypt_has_brain
 declare_counter turks_has_brain
 declare_counter timurids_has_brain
 declare_counter kwarezm_has_brain
 declare_counter moors_has_brain
 declare_counter lithuania_has_brain
 declare_counter cumans_has_brain
 declare_counter mongols_has_brain
 declare_counter byzantium_has_brain
 declare_counter russia_has_brain
 declare_counter kievan_rus_has_brain
 declare_counter venice_has_brain
 declare_counter sicily_has_brain
 declare_counter milan_has_brain
 declare_counter denmark_has_brain
 declare_counter scotland_has_brain
 declare_counter france_has_brain
 declare_counter hre_has_brain
 declare_counter england_has_brain
 declare_counter portugal_has_brain
 declare_counter poland_has_brain
 declare_counter spain_has_brain
 declare_counter hungary_has_brain
 declare_counter aragon_has_brain
 declare_counter teutonic_order_has_brain
 declare_counter norway_has_brain
 declare_counter jerusalem_has_brain
 declare_counter papal_states_has_brain

 if not I_IsFactionAIControlled egypt
	set_counter egypt_has_brain 1
 end_if
 if not I_IsFactionAIControlled turks
	set_counter turks_has_brain 1
 end_if
; if not I_IsFactionAIControlled timurids
;	set_counter timurids_has_brain 1
; end_if
 if not I_IsFactionAIControlled kwarezm
	set_counter kwarezm_has_brain 1
 end_if
 if not I_IsFactionAIControlled moors
	set_counter moors_has_brain 1
 end_if
 if not I_IsFactionAIControlled lithuania
	set_counter lithuania_has_brain 1
 end_if
 if not I_IsFactionAIControlled cumans
	set_counter cumans_has_brain 1
 end_if
; if not I_IsFactionAIControlled mongols
;	set_counter mongols_has_brain 1
; end_if
 if not I_IsFactionAIControlled byzantium
	set_counter byzantium_has_brain 1
 end_if
 if not I_IsFactionAIControlled russia
	set_counter russia_has_brain 1
 end_if
 if not I_IsFactionAIControlled kievan_rus
	set_counter kievan_rus_has_brain 1
 end_if
 if not I_IsFactionAIControlled venice
	set_counter venice_has_brain 1
 end_if
 if not I_IsFactionAIControlled sicily
	set_counter sicily_has_brain 1
 end_if
 if not I_IsFactionAIControlled milan
	set_counter milan_has_brain 1
 end_if
 if not I_IsFactionAIControlled denmark
	set_counter denmark_has_brain 1
 end_if
 if not I_IsFactionAIControlled scotland
	set_counter scotland_has_brain 1
 end_if
 if not I_IsFactionAIControlled france
	set_counter france_has_brain 1
 end_if
 if not I_IsFactionAIControlled hre
	set_counter hre_has_brain 1
 end_if
 if not I_IsFactionAIControlled england
	set_counter england_has_brain 1
 end_if
 if not I_IsFactionAIControlled portugal
	set_counter portugal_has_brain 1
 end_if
 if not I_IsFactionAIControlled poland
	set_counter poland_has_brain 1
 end_if
 if not I_IsFactionAIControlled spain
	set_counter spain_has_brain 1
 end_if
 if not I_IsFactionAIControlled hungary
	set_counter hungary_has_brain 1
 end_if
 if not I_IsFactionAIControlled aragon
	set_counter aragon_has_brain 1
 end_if
; if not I_IsFactionAIControlled teutonic_order
;	set_counter teutonic_order_has_brain 1
; end_if
 if not I_IsFactionAIControlled norway
	set_counter norway_has_brain 1
 end_if
 if not I_IsFactionAIControlled jerusalem
	set_counter jerusalem_has_brain 1
 end_if
; if not I_IsFactionAIControlled papal_states
;	set_counter papal_states_has_brain 1
; end_if

end_if


declare_counter hs_difficultylevel
monitor_event FactionTurnStart

 if I_HotseatEnabled
	if I_EventCounter DifficultyLevel = 1
		set_counter	hs_difficultylevel 1
	end_if
	if I_EventCounter DifficultyLevel = 2
		set_counter	hs_difficultylevel 2
	end_if
	if I_EventCounter DifficultyLevel = 3
		set_counter	hs_difficultylevel 3
	end_if
	if I_EventCounter DifficultyLevel = 4
		set_counter	hs_difficultylevel 4
	end_if
 end_if

 terminate_monitor
end_monitor


;declare_counter hs_console
;monitor_event ShortcutTriggered ShortcutTriggered object_manager show_console
;	and I_CompareCounter hs_console = 0

;	if not I_HotseatEnabled
;	 set_counter hs_console 10
;	 terminate_monitor
;	end_if

;	set_counter hs_console 1
;end_monitor


;-- DifficultyLevel = 1 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 1
	 terminate_monitor
	end_if

;	set_counter hs_console 0

;egypt used to be under human control, but now is AI controlled
	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 600
	end_if
;egypt used to be under AI control, but now is under human control
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -600
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 700
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -700
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 300
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -300
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 700
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -700
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 600
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -600
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 300
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -300
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 700
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -700
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 300
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -300
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 600
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -600
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 600
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -600
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 500
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -500
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 700
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -700
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 700
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -700
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 400
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -400
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 600
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -600
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 400
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -400
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 600
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -600
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 500
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -500
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 700
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -700
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 600
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -600
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 500
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -500
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 500
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -500
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 500
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -500
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 600
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -600
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 300
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -300
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 600
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -600
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 600
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -600
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 300
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -300
	end_if

end_monitor

;-- DifficultyLevel = 2 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 2
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 800
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -800
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 900
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -900
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 900
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -900
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 700
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -700
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 500
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -500
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 800
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -800
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 900
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -900
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 700
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -700
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 700
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -700
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 900
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -900
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 900
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -900
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 700
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -700
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 800
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -800
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 600
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -600
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 800
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -800
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 700
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -700
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 900
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -900
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 800
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -800
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 700
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -700
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 700
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -700
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 700
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -700
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 600
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -600
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 500
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -500
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 800
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -800
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 800
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -800
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 400
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -400
	end_if

end_monitor

;-- DifficultyLevel = 3 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 3
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 1200
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -1200
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 1300
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -1300
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 1500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -1500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 1300
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -1300
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 1200
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -1200
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 1000
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -1000
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 1300
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -1300
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 1500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -1500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 1300
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -1300
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 1200
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -1200
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 1100
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -1100
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 1000
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -1000
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 1100
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -1100
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 900
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -900
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 1300
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -1300
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 900
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -900
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 1300
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -1300
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 1200
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -1200
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 1400
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -1400
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 1000
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -1000
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 1200
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -1200
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 1100
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -1100
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 1200
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -1200
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 1000
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -1000
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 1000
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -1000
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 1200
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -1200
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 1200
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -1200
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 500
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -500
	end_if

end_monitor

;-- DifficultyLevel = 4 
monitor_event FactionTurnEnd ;I_CompareCounter hs_console > 0

	if I_CompareCounter hs_difficultylevel != 4
	 terminate_monitor
	end_if

;	set_counter hs_console 0

	if I_CompareCounter egypt_has_brain = 1
	and I_IsFactionAIControlled egypt
		set_counter egypt_has_brain 0
		increment_kings_purse egypt 1700
	end_if
	if not I_IsFactionAIControlled egypt
	and I_CompareCounter egypt_has_brain = 0
		set_counter egypt_has_brain 1
		increment_kings_purse egypt -1700
	end_if

	if I_CompareCounter turks_has_brain = 1
	and I_IsFactionAIControlled turks
		set_counter turks_has_brain 0
		increment_kings_purse turks 1800
	end_if
	if not I_IsFactionAIControlled turks
	and I_CompareCounter turks_has_brain = 0
		set_counter turks_has_brain 1
		increment_kings_purse turks -1800
	end_if

	if I_CompareCounter timurids_has_brain = 1
	and I_IsFactionAIControlled timurids
		set_counter timurids_has_brain 0
		increment_kings_purse timurids 2500
	end_if
	if not I_IsFactionAIControlled timurids
	and I_CompareCounter timurids_has_brain = 0
		set_counter timurids_has_brain 1
		increment_kings_purse timurids -2500
	end_if

	if I_CompareCounter kwarezm_has_brain = 1
	and I_IsFactionAIControlled kwarezm
		set_counter kwarezm_has_brain 0
		increment_kings_purse kwarezm 1800
	end_if
	if not I_IsFactionAIControlled kwarezm
	and I_CompareCounter kwarezm_has_brain = 0
		set_counter kwarezm_has_brain 1
		increment_kings_purse kwarezm -1800
	end_if

	if I_CompareCounter moors_has_brain = 1
	and I_IsFactionAIControlled moors
		set_counter moors_has_brain 0
		increment_kings_purse moors 1700
	end_if
	if not I_IsFactionAIControlled moors
	and I_CompareCounter moors_has_brain = 0
		set_counter moors_has_brain 1
		increment_kings_purse moors -1700
	end_if

	if I_CompareCounter lithuania_has_brain = 1
	and I_IsFactionAIControlled lithuania
		set_counter lithuania_has_brain 0
		increment_kings_purse lithuania 1500
	end_if
	if not I_IsFactionAIControlled lithuania
	and I_CompareCounter lithuania_has_brain = 0
		set_counter lithuania_has_brain 1
		increment_kings_purse lithuania -1500
	end_if

	if I_CompareCounter cumans_has_brain = 1
	and I_IsFactionAIControlled cumans
		set_counter cumans_has_brain 0
		increment_kings_purse cumans 1800
	end_if
	if not I_IsFactionAIControlled cumans
	and I_CompareCounter cumans_has_brain = 0
		set_counter cumans_has_brain 1
		increment_kings_purse cumans -1800
	end_if

	if I_CompareCounter mongols_has_brain = 1
	and I_IsFactionAIControlled mongols
		set_counter mongols_has_brain 0
		increment_kings_purse mongols 2500
	end_if
	if not I_IsFactionAIControlled mongols
	and I_CompareCounter mongols_has_brain = 0
		set_counter mongols_has_brain 1
		increment_kings_purse mongols -2500
	end_if

	if I_CompareCounter byzantium_has_brain = 1
	and I_IsFactionAIControlled byzantium
		set_counter byzantium_has_brain 0
		increment_kings_purse byzantium 1800
	end_if
	if not I_IsFactionAIControlled byzantium
	and I_CompareCounter byzantium_has_brain = 0
		set_counter byzantium_has_brain 1
		increment_kings_purse byzantium -1800
	end_if

	if I_CompareCounter russia_has_brain = 1
	and I_IsFactionAIControlled russia
		set_counter russia_has_brain 0
		increment_kings_purse russia 1700
	end_if
	if not I_IsFactionAIControlled russia
	and I_CompareCounter russia_has_brain = 0
		set_counter russia_has_brain 1
		increment_kings_purse russia -1700
	end_if

	if I_CompareCounter kievan_rus_has_brain = 1
	and I_IsFactionAIControlled kievan_rus
		set_counter kievan_rus_has_brain 0
		increment_kings_purse kievan_rus 1600
	end_if
	if not I_IsFactionAIControlled kievan_rus
	and I_CompareCounter kievan_rus_has_brain = 0
		set_counter kievan_rus_has_brain 1
		increment_kings_purse kievan_rus -1600
	end_if

	if I_CompareCounter venice_has_brain = 1
	and I_IsFactionAIControlled venice
		set_counter venice_has_brain 0
		increment_kings_purse venice 1500
	end_if
	if not I_IsFactionAIControlled venice
	and I_CompareCounter venice_has_brain = 0
		set_counter venice_has_brain 1
		increment_kings_purse venice -1500
	end_if

	if I_CompareCounter sicily_has_brain = 1
	and I_IsFactionAIControlled sicily
		set_counter sicily_has_brain 0
		increment_kings_purse sicily 1600
	end_if
	if not I_IsFactionAIControlled sicily
	and I_CompareCounter sicily_has_brain = 0
		set_counter sicily_has_brain 1
		increment_kings_purse sicily -1600
	end_if

	if I_CompareCounter milan_has_brain = 1
	and I_IsFactionAIControlled milan
		set_counter milan_has_brain 0
		increment_kings_purse milan 1300
	end_if
	if not I_IsFactionAIControlled milan
	and I_CompareCounter milan_has_brain = 0
		set_counter milan_has_brain 1
		increment_kings_purse milan -1300
	end_if

	if I_CompareCounter denmark_has_brain = 1
	and I_IsFactionAIControlled denmark
		set_counter denmark_has_brain 0
		increment_kings_purse denmark 1800
	end_if
	if not I_IsFactionAIControlled denmark
	and I_CompareCounter denmark_has_brain = 0
		set_counter denmark_has_brain 1
		increment_kings_purse denmark -1800
	end_if

	if I_CompareCounter scotland_has_brain = 1
	and I_IsFactionAIControlled scotland
		set_counter scotland_has_brain 0
		increment_kings_purse scotland 1500
	end_if
	if not I_IsFactionAIControlled scotland
	and I_CompareCounter scotland_has_brain = 0
		set_counter scotland_has_brain 1
		increment_kings_purse scotland -1500
	end_if

	if I_CompareCounter france_has_brain = 1
	and I_IsFactionAIControlled france
		set_counter france_has_brain 0
		increment_kings_purse france 1800
	end_if
	if not I_IsFactionAIControlled france
	and I_CompareCounter france_has_brain = 0
		set_counter france_has_brain 1
		increment_kings_purse france -1800
	end_if

	if I_CompareCounter hre_has_brain = 1
	and I_IsFactionAIControlled hre
		set_counter hre_has_brain 0
		increment_kings_purse hre 1700
	end_if
	if not I_IsFactionAIControlled hre
	and I_CompareCounter hre_has_brain = 0
		set_counter hre_has_brain 1
		increment_kings_purse hre -1700
	end_if

	if I_CompareCounter england_has_brain = 1
	and I_IsFactionAIControlled england
		set_counter england_has_brain 0
		increment_kings_purse england 1900
	end_if
	if not I_IsFactionAIControlled england
	and I_CompareCounter england_has_brain = 0
		set_counter england_has_brain 1
		increment_kings_purse england -1900
	end_if

	if I_CompareCounter portugal_has_brain = 1
	and I_IsFactionAIControlled portugal
		set_counter portugal_has_brain 0
		increment_kings_purse portugal 1500
	end_if
	if not I_IsFactionAIControlled portugal
	and I_CompareCounter portugal_has_brain = 0
		set_counter portugal_has_brain 1
		increment_kings_purse portugal -1500
	end_if

	if I_CompareCounter poland_has_brain = 1
	and I_IsFactionAIControlled poland
		set_counter poland_has_brain 0
		increment_kings_purse poland 1700
	end_if
	if not I_IsFactionAIControlled poland
	and I_CompareCounter poland_has_brain = 0
		set_counter poland_has_brain 1
		increment_kings_purse poland -1700
	end_if

	if I_CompareCounter spain_has_brain = 1
	and I_IsFactionAIControlled spain
		set_counter spain_has_brain 0
		increment_kings_purse spain 1600
	end_if
	if not I_IsFactionAIControlled spain
	and I_CompareCounter spain_has_brain = 0
		set_counter spain_has_brain 1
		increment_kings_purse spain -1600
	end_if

	if I_CompareCounter hungary_has_brain = 1
	and I_IsFactionAIControlled hungary
		set_counter hungary_has_brain 0
		increment_kings_purse hungary 1700
	end_if
	if not I_IsFactionAIControlled hungary
	and I_CompareCounter hungary_has_brain = 0
		set_counter hungary_has_brain 1
		increment_kings_purse hungary -1700
	end_if

	if I_CompareCounter aragon_has_brain = 1
	and I_IsFactionAIControlled aragon
		set_counter aragon_has_brain 0
		increment_kings_purse aragon 1500
	end_if
	if not I_IsFactionAIControlled aragon
	and I_CompareCounter aragon_has_brain = 0
		set_counter aragon_has_brain 1
		increment_kings_purse aragon -1500
	end_if

	if I_CompareCounter teutonic_order_has_brain = 1
	and I_IsFactionAIControlled teutonic_order
		set_counter teutonic_order_has_brain 0
		increment_kings_purse teutonic_order 1500
	end_if
	if not I_IsFactionAIControlled teutonic_order
	and I_CompareCounter teutonic_order_has_brain = 0
		set_counter teutonic_order_has_brain 1
		increment_kings_purse teutonic_order -1500
	end_if

	if I_CompareCounter norway_has_brain = 1
	and I_IsFactionAIControlled norway
		set_counter norway_has_brain 0
		increment_kings_purse norway 1700
	end_if
	if not I_IsFactionAIControlled norway
	and I_CompareCounter norway_has_brain = 0
		set_counter norway_has_brain 1
		increment_kings_purse norway -1700
	end_if

	if I_CompareCounter jerusalem_has_brain = 1
	and I_IsFactionAIControlled jerusalem
		set_counter jerusalem_has_brain 0
		increment_kings_purse jerusalem 1900
	end_if
	if not I_IsFactionAIControlled jerusalem
	and I_CompareCounter jerusalem_has_brain = 0
		set_counter jerusalem_has_brain 1
		increment_kings_purse jerusalem -1900
	end_if

	if I_CompareCounter papal_states_has_brain = 1
	and I_IsFactionAIControlled papal_states
		set_counter papal_states_has_brain 0
		increment_kings_purse papal_states 600
	end_if
	if not I_IsFactionAIControlled papal_states
	and I_CompareCounter papal_states_has_brain = 0
		set_counter papal_states_has_brain 1
		increment_kings_purse papal_states -600
	end_if

end_monitor



;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


wait_monitors
end_script